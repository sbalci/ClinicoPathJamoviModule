---
name: jconsort
title: CONSORT Flowchart
menuGroup: OncoPathologyD
menuSubgroup: Study Design
version: '0.0.3'
jas: '1.2'

options:
    - name: data
      type: Data
      description:
          R: The data as a data frame.

    # Enrollment
    - name: initialN
      title: Initial Participants
      type: Integer
      default: 0
      description:
          R: Total number assessed for eligibility

    - name: notEligibleN
      title: Not Eligible
      type: Integer
      default: 0
      description:
          R: Number not meeting eligibility criteria

    - name: notEligibleText
      title: Reasons Not Eligible
      type: String
      default: ""
      description:
          R: List of reasons for exclusion (comma separated)

    # Randomization
    - name: randomizedN
      title: Randomized
      type: Integer
      default: 0
      description:
          R: Number randomized to interventions

    # Arm 1
    - name: arm1Label
      title: Arm 1 Label
      type: String
      default: "Intervention"

    - name: arm1N
      title: Arm 1 Allocated
      type: Integer
      default: 0

    - name: arm1ReceivedN
      title: Arm 1 Received
      type: Integer
      default: 0

    - name: arm1LostN
      title: Arm 1 Lost to Follow-up
      type: Integer
      default: 0

    - name: arm1AnalyzedN
      title: Arm 1 Analyzed
      type: Integer
      default: 0

    # Arm 2
    - name: arm2Label
      title: Arm 2 Label
      type: String
      default: "Control"

    - name: arm2N
      title: Arm 2 Allocated
      type: Integer
      default: 0

    - name: arm2ReceivedN
      title: Arm 2 Received
      type: Integer
      default: 0

    - name: arm2LostN
      title: Arm 2 Lost to Follow-up
      type: Integer
      default: 0

    - name: arm2AnalyzedN
      title: Arm 2 Analyzed
      type: Integer
      default: 0

    # Post-randomization exclusions
    - name: excludedText
      title: Reasons for Exclusion
      type: String
      default: ""
      description:
          R: Reasons for post-randomization exclusions (comma separated)

    # Data-driven mode variables
    - name: participant_var
      title: Participant ID Variable
      type: Variable
      suggested:
          - id
          - nominal
      permitted:
          - factor
          - numeric
          - id
      description:
          R: Variable containing participant identifiers

    - name: randomization_var
      title: Randomization Variable
      type: Variable
      suggested:
          - nominal
          - ordinal
      permitted:
          - factor
          - numeric
      description:
          R: Variable indicating randomization status (1 = randomized, 0 = not randomized)

    - name: trial_group_var
      title: Treatment Group Variable
      type: Variable
      suggested:
          - nominal
      permitted:
          - factor
      description:
          R: Variable containing treatment group assignments

    - name: completion_var
      title: Study Completion Variable
      type: Variable
      suggested:
          - nominal
          - ordinal
      permitted:
          - factor
          - numeric
      description:
          R: Variable indicating study completion status (1 = completed, 0 = not completed)

    - name: outcome_var
      title: Primary Outcome Variable
      type: Variable
      suggested:
          - nominal
          - ordinal
      permitted:
          - factor
          - numeric
      description:
          R: Variable containing primary outcome results

    - name: exclusion_var
      title: Exclusion Reason Variable
      type: Variable
      suggested:
          - nominal
      permitted:
          - factor
      description:
          R: Variable containing reasons for exclusion or dropout

    # CONSORT compliance options
    - name: consort_labels
      title: CONSORT Stage Labels
      type: String
      default: "Assessed for eligibility,Randomized,Allocated,Analyzed"
      description:
          R: Comma-separated labels for CONSORT stages

    - name: show_reasons
      title: Show Exclusion Reasons
      type: Bool
      default: true
      description:
          R: Display exclusion reasons in the flowchart

    - name: validate_consort
      title: Validate CONSORT Compliance
      type: Bool
      default: false
      description:
          R: Perform CONSORT 2010 compliance validation

    # Advanced visualization options (migrated from flowchart clinical trial mode)
    - name: render_engine
      title: Visualization Engine
      type: List
      options:
        - name: diagrammer
          title: Classic DiagrammeR
        - name: html_css
          title: Professional HTML/CSS
        - name: clinical_flow
          title: Clinical Flow Specialized
      default: diagrammer
      description:
          R: Rendering engine for the flowchart visualization

    - name: output_style
      title: Output Style
      type: List
      options:
        - name: publication
          title: Publication Ready
        - name: presentation
          title: Presentation Style
        - name: clinical
          title: Clinical Report
        - name: regulatory
          title: Regulatory Submission
      default: publication
      description:
          R: Style template for the output format

    - name: include_title
      title: Include Title
      type: Bool
      default: true
      description:
          R: Include a title in the flowchart

    - name: flowchart_title
      title: Flowchart Title
      type: String
      default: "CONSORT 2010 Flow Diagram"
      description:
          R: Title to display above the flowchart

    - name: show_percentages
      title: Show Percentages
      type: Bool
      default: true
      description:
          R: Display percentages in addition to counts

    - name: show_statistics
      title: Show Summary Statistics
      type: Bool
      default: true
      description:
          R: Include summary statistics below the flowchart

    - name: color_scheme
      title: Color Scheme
      type: List
      options:
        - name: clinical
          title: Clinical Blue/Green
        - name: neutral
          title: Neutral Gray
        - name: accessible
          title: Colorblind Accessible
        - name: publication
          title: Publication B&W
      default: clinical
      description:
          R: Color scheme for the flowchart elements

    - name: node_width
      title: Node Width
      type: Number
      min: 100
      max: 400
      default: 200
      description:
          R: Width of flowchart nodes in pixels

    - name: node_height
      title: Node Height
      type: Number
      min: 50
      max: 200
      default: 80
      description:
          R: Height of flowchart nodes in pixels

    - name: font_size
      title: Font Size
      type: Number
      min: 8
      max: 24
      default: 12
      description:
          R: Font size for text in the flowchart

    - name: export_format
      title: Export Options
      type: List
      options:
        - name: html
          title: HTML only
        - name: svg
          title: SVG Vector
        - name: png
          title: PNG Image
        - name: all
          title: All Formats
      default: html
      description:
          R: Available export formats for the flowchart

    # Flowchart Package Features
    - name: fc_show_exclusions
      title: Show Exclusions (flowchart pkg)
      type: Bool
      default: true
      description:
          R: Show exclusion counts in flowchart package mode

    - name: fc_round_digits
      title: Round Digits (flowchart pkg)
      type: Number
      min: 0
      max: 5
      default: 1
      description:
          R: Number of decimal places for percentages

    - name: fc_show_zero
      title: Show Zero Groups (flowchart pkg)
      type: Bool
      default: true
      description:
          R: Whether to show groups with zero participants

    - name: fc_perc_total
      title: Percentage Based on Total (flowchart pkg)
      type: Bool
      default: false
      description:
          R: Calculate percentages with respect to total number of rows instead of group

    - name: fc_title
      title: Flowchart Title (flowchart pkg)
      type: String
      default: "CONSORT Flow Diagram"
      description:
          R: Title to display on flowchart when using flowchart package

    - name: fc_filter_condition
      title: Filter Condition (flowchart pkg)
      type: String
      default: ""
      description:
          R: R expression for filtering data (e.g., 'age > 65')

    - name: fc_split_variable
      title: Split Variable (flowchart pkg)
      type: Variable
      suggested: [ nominal ]
      permitted: [ factor ]
      description:
          R: Variable to split flowchart by in flowchart package mode

    - name: fc_offset
      title: Box Spacing (flowchart pkg)
      type: Number
      min: 0
      max: 5
      default: 1
      description:
          R: Spacing between boxes in flowchart

    - name: fc_offset_exc
      title: Exclusion Box Spacing (flowchart pkg)
      type: Number
      min: 0
      max: 5
      default: 1
      description:
          R: Spacing for exclusion boxes in flowchart

    - name: fc_export_format
      title: Export Format (flowchart pkg)
      type: List
      options:
        - title: PNG
          name: png
        - title: PDF
          name: pdf
        - title: SVG
          name: svg
        - title: JPEG
          name: jpeg
      default: png
      description:
          R: Export format for flowchart package diagrams

    - name: fc_export_width
      title: Export Width (flowchart pkg)
      type: Number
      min: 100
      max: 5000
      default: 800
      description:
          R: Width for exported flowchart in pixels

    - name: fc_export_height
      title: Export Height (flowchart pkg)
      type: Number
      min: 100
      max: 5000
      default: 600
      description:
          R: Height for exported flowchart in pixels

    # Font Customization Features
    - name: fc_text_fface
      title: Font Face (flowchart pkg)
      type: List
      options:
        - title: Plain
          name: plain
        - title: Bold
          name: bold
        - title: Italic
          name: italic
        - title: Bold Italic
          name: bold.italic
      default: plain
      description:
          R: Font face for text in flowchart boxes

    - name: fc_text_ffamily
      title: Font Family (flowchart pkg)
      type: List
      options:
        - title: Sans Serif (Default)
          name: sans
        - title: Serif
          name: serif
        - title: Mono
          name: mono
        - title: Arial
          name: Arial
        - title: Times
          name: Times
        - title: Courier
          name: Courier
      default: sans
      description:
          R: Font family for text in flowchart boxes

    - name: fc_text_padding
      title: Text Padding (flowchart pkg)
      type: Number
      min: 1
      max: 20
      default: 5
      description:
          R: Padding around text inside flowchart boxes
...
