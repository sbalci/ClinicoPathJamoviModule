<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Advanced customisation of the options UI • ClinicoPath</title>
<script src="../../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../../deps/headroom-0.11.0/headroom.min.js"></script><script src="../../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../../deps/search-1.0.0/fuse.min.js"></script><script src="../../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../../pkgdown.js"></script><meta property="og:title" content="Advanced customisation of the options UI">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../../index.html">ClinicoPath</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.32.01</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../../dev/index.html"><span class="fa fa-cogs"></span></a></li>
<li class="nav-item"><a class="nav-link" href="../../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/api_analysis-definition.html">Analysis Definition</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/api_module-definition.html">Module Definition</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/api_results-definition.html">Results Definition</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/api_results-elements.html">Results Elements</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/api_table.html">Table</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/api_ui-definition.html">User-interface Definition</a></li>
    <li><a class="dropdown-item" href="../../articles/developer_guide.html">jamovi Module Development Guide</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/index.html">Home</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/info_project-structure.html">project structure</a></li>
    <li><a class="dropdown-item" href="../../articles/module-development-jamovi.html">ClinicoPath Module Development Guide</a></li>
    <li><a class="dropdown-item" href="../../articles/pathology-jamovi.html">Using jamovi for the Common Statistical Analysis in Pathology</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/tuts0101-getting-started.html">Getting Started</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/tuts0102-creating-a-module.html">Creating a Module</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/tuts0103-creating-an-analysis.html">Creating an Analysis</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/tuts0104-implementing-an-analysis.html">Implementing an Analysis</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/tuts0105-creating-rich-results.html">Creating Rich Results</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/tuts0105-debugging-an-analysis.html">Debugging an Analysis</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/tuts0106-adding-plots.html">Adding Plots</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/tuts0107-distributing-modules.html">Distributing Modules</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/tuts0108-additional-notes.html">Additional Notes</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/tuts0201-data-binding.html">Tables</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/tuts0201-dynamic-tables.html">Dynamic Tables</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/tuts0202-handling-data.html">Handling Data</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/tuts0203-state.html">State</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-advanced-customisation.html">Advanced customisation of the options UI</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-advanced-design.html">Advanced UI Design</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-basecontrol.html">BaseControl</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-basic-design.html">UI Design</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-checkbox.html">CheckBox</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-collapsebox.html">CollapseBox</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-combobox.html">ComboBox</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-custom-format.html">Custom Formats</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-label.html">Label</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-layoutbox.html">LayoutBox</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-listbox.html">ListBox</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-optioncontrol.html">OptionControl</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-parentcontrol.html">ParentControl</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-radiobutton.html">RadioButton</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-standard-formats.html">Standard UI Formats</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-supplier.html">Supplier</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-targetlayoutbox.html">TargetLayoutBox</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-termlabel.html">TermLabel</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-textbox.html">TextBox</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-variablelabel.html">VariableLabel</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-variablesupplier.html">VariableSupplier</a></li>
    <li><a class="dropdown-item" href="../../articles/users-of-ClinicoPath.html">Users of ClinicoPath</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="http://twitter.com/serdarbalci"><span class="fa fab fa-twitter fa-lg"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/sbalci/ClinicoPathJamoviModule/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Advanced customisation of the options UI</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/sbalci/ClinicoPathJamoviModule/blob/HEAD/vignettes/dev.jamovi.org-master/ui-advanced-customisation.Rmd" class="external-link"><code>vignettes/dev.jamovi.org-master/ui-advanced-customisation.Rmd</code></a></small>
      <div class="d-none name"><code>ui-advanced-customisation.Rmd</code></div>
    </div>

    
    
<p>Sometimes the <code>.u.yaml</code> file alone doesn’t provide enough
flexibility for an analysis options UI. More complex UIs can be achieved
through writing additional javascript that provides more complex
behaviour. This allows much greater freedom and flexibility, and allows
you to design an options UI completely from scratch if necessary.</p>
<p>The options UI is customised through attaching javascript ‘event
handler’ functions to the user interface. These then respond to events
such as a UI ‘loaded’ event, or an option ‘changed’ event in response to
a user interaction.</p>
<p>Additional UI functions are defined in a javascript file with a
<code>.js</code> suffix, and are placed in the <code>jamovi/js</code>
folder of the module. The name of the .js file should match the names of
the other .yaml files for that analysis. For example:</p>
<ul>
<li><code>ttest.a.yaml</code></li>
<li><code>ttest.r.yaml</code></li>
<li><code>ttest.u.yaml</code></li>
<li><code>js/ttest.js</code></li>
</ul>
<p>The events .js files follow the <code>CommonJS</code> javascript
module spec, assigning each of the event handlers and functions to an
object which is assigned to <code>module.exports</code>.</p>
<p><em>IMPORTANT:</em> For customisations to function, the
<code>jus</code> property in the <code>u.yaml</code> file needs to be
set to <code>3.0</code>.</p>
<p>For example:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> ttest</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> T-Test</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="fu">jus</span><span class="kw">:</span><span class="at"> </span><span class="st">'3.0'</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="fu">compilerMode</span><span class="kw">:</span><span class="at"> tame</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="fu">children</span><span class="kw">:</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">type</span><span class="kw">:</span><span class="at"> ComboBox</span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="at">    </span><span class="fu">name</span><span class="kw">:</span><span class="at"> ttestType</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>    module<span class="op">.</span><span class="at">exports</span> <span class="op">=</span> {</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>        <span class="co">// event handlers and functions are defined here</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a>        <span class="co">// this is an example of an event handler</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a>        <span class="dt">view_loaded</span><span class="op">:</span> <span class="kw">function</span>(ui<span class="op">,</span> <span class="bu">event</span>) {</span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a>            <span class="co">// do something</span></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a>        }<span class="op">,</span></span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a>        <span class="co">// this is another example of an event handler</span></span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a>        <span class="dt">ttestType_changed</span><span class="op">:</span> <span class="kw">function</span>(ui<span class="op">,</span> <span class="bu">event</span>) {</span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a>            <span class="kw">let</span> value <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="fu">calculateValue</span>()<span class="op">;</span></span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a>            <span class="co">// do something</span></span>
<span id="cb2-14"><a href="#cb2-14" tabindex="-1"></a>        }<span class="op">,</span></span>
<span id="cb2-15"><a href="#cb2-15" tabindex="-1"></a></span>
<span id="cb2-16"><a href="#cb2-16" tabindex="-1"></a>        <span class="co">// this is an example of an auxiliary function</span></span>
<span id="cb2-17"><a href="#cb2-17" tabindex="-1"></a>        <span class="dt">calculateValue</span><span class="op">:</span> <span class="kw">function</span>() {</span>
<span id="cb2-18"><a href="#cb2-18" tabindex="-1"></a>            <span class="co">// do something</span></span>
<span id="cb2-19"><a href="#cb2-19" tabindex="-1"></a>        }</span>
<span id="cb2-20"><a href="#cb2-20" tabindex="-1"></a>    }<span class="op">;</span></span></code></pre></div>
<p>In the above example, the <code>view_loaded(...)</code> event handler
is invoked with a <code>loaded</code> event when the analysis options UI
is created for the first time. Similarly, a <code>changed</code> event
is fired, and the event handler function
<code>ttestType_changed(...)</code> is invoked when the user changes the
value of the <code>ttestType</code> option.</p>
<p>Note that jamovi ships with the Chrome developer tools, so it’s
possible to invoke these, and have access to the debugger, DOM viewer,
etc. The dev tools are invoked by pressing <code>F10</code>. (Note that
sometimes jamovi’s internal iframes prevent this key stroke from
registering. You sometimes need to click the blue bar along the top to
move the focus back to the main window, before the <code>F10</code>
keystroke will register.)</p>
<div class="section level3">
<h3 id="events">Events<a class="anchor" aria-label="anchor" href="#events"></a>
</h3>
<p>Event handlers are added by naming the function with the following
pattern. Option name, followed by an underscore, followed by the event
name. <code>{optionName}_{eventName}</code></p>
<p>For example: <code>ttestType_changed</code></p>
<p>jamovi will automatically attach the event handler
<code>ttestType_changed(...)</code> to the <code>changed</code> event of
the <code>ttestType</code> option when the analysis is run.</p>
<div class="section level4">
<h4 id="view">View<a class="anchor" aria-label="anchor" href="#view"></a>
</h4>
<table class="table">
<colgroup>
<col width="38%">
<col width="61%">
</colgroup>
<thead><tr class="header">
<th>Event</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>creating</td>
<td>Invoked at the very beginning of the options panel creation, before
anything is added to the DOM.</td>
</tr>
<tr class="even">
<td>loaded</td>
<td>Invoked after the options panel has been created and the DOM has
been populated. The same analysis options panel persists as long as
jamovi is still running, and is shared by all analyses of the same type,
so this is only invoked once. This is the most common event to use for
customising the UI.</td>
</tr>
<tr class="odd">
<td>updated</td>
<td>Invoked when the user selects a different analysis (of the same
type) and the options need to change to reflect the new analysis’ option
values (This is also called when the user inserts a new analysis, when
an option panel for that analysis type already exists).</td>
</tr>
</tbody>
</table>
</div>
<div class="section level4">
<h4 id="all-controls">All controls<a class="anchor" aria-label="anchor" href="#all-controls"></a>
</h4>
<table class="table">
<thead><tr class="header">
<th>Event</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>changing</td>
<td>Invoked before the value of the control is changed.</td>
</tr>
<tr class="even">
<td>changed</td>
<td>Invoked after the value of the control is changed.</td>
</tr>
</tbody>
</table>
</div>
<div class="section level4">
<h4 id="listbox">ListBox<a class="anchor" aria-label="anchor" href="#listbox"></a>
</h4>
<table class="table">
<colgroup>
<col width="50%">
<col width="50%">
</colgroup>
<thead><tr class="header">
<th>Event</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>listItemAdded</td>
<td>Invoked when a control is added to a list box.</td>
</tr>
<tr class="even">
<td>listItemRemoved</td>
<td>Invoked when a control is removed from a list box.</td>
</tr>
</tbody>
</table>
</div>
<div class="section level4">
<h4 id="suppliers">Suppliers<a class="anchor" aria-label="anchor" href="#suppliers"></a>
</h4>
<table class="table">
<thead><tr class="header">
<th>Event</th>
<th>Description</th>
</tr></thead>
<tbody><tr class="odd">
<td>updated</td>
<td>Invoked when a variable name or level name is changes.</td>
</tr></tbody>
</table>
<p><em>IMPORTANT NOTE:</em> The use of the <code>updated</code> event is
required for all <code>Supplier</code> and <code>VariableSupplier</code>
controls (under certain conditions). If it is not implemented then
jamovi will display the following error:</p>
<blockquote>
<p>Error: The use of a ‘VariableSupplier’ control, with the property
&gt; populate: ‘manual’, requires an ‘updated’ event handler to be
assigned.</p>
</blockquote>
<p>or</p>
<blockquote>
<p>Error: The use of a ‘Supplier’ control requires an ‘updated’ event
handler to be assigned.</p>
</blockquote>
<p>These suppliers require manual population and therefore need to be
appropriately updated in response to variable or level name changes.</p>
</div>
<div class="section level4">
<h4 id="custom-control">Custom Control<a class="anchor" aria-label="anchor" href="#custom-control"></a>
</h4>
<table class="table">
<colgroup>
<col width="12%">
<col width="87%">
</colgroup>
<thead><tr class="header">
<th>Event</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>creating</td>
<td>Invoked during the creation phase of the options panel. Allows for
access to the custom control for customisation before it is made
visible.</td>
</tr>
<tr class="even">
<td>updated</td>
<td>Invoked when a variable name or level name is changes.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level3">
<h3 id="event-handlers">Event handlers<a class="anchor" aria-label="anchor" href="#event-handlers"></a>
</h3>
<p>All event handlers are invoked with two arguments; the
<code>ui</code>, and the <code>event</code>. The ui is a convenience
object containing all the other controls in the options panel and the
DOM. All the option controls are available in the ui argument as
properties. For example:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>    <span class="fu">ttestType_changed</span>(ui<span class="op">,</span> <span class="bu">event</span>) {</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>        <span class="kw">let</span> ttype <span class="op">=</span> ui<span class="op">.</span><span class="at">ttestType</span><span class="op">.</span><span class="fu">value</span>()</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a>        <span class="cf">if</span> (ttype <span class="op">===</span> <span class="st">'welchs'</span>)</span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a>            ui<span class="op">.</span><span class="at">priorWidth</span><span class="op">.</span><span class="fu">setValue</span>(<span class="fl">0.707</span>)</span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a>    }</span></code></pre></div>
<p>In this example, when the user changes the <code>ttestType</code>
option to <code>welchs</code>, the <code>priorWidth</code> option is
changed to <code>0.707</code>. All options have the
<code>.value()</code> and <code>.setValue()</code> methods.</p>
<p>Note that each change to the values of the options triggers the
re-running of the analysis. If multiple option values need to change in
response to an event, it is better to batch these changes together, to
prevent the analysis being restarted again and again. Option changes can
be batched together with the <code>ui.view.model.options</code>
<code>beginEdit()</code> and <code>endEdit()</code> functions as
follows:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>ui<span class="op">.</span><span class="at">view</span><span class="op">.</span><span class="at">model</span><span class="op">.</span><span class="at">options</span><span class="op">.</span><span class="fu">beginEdit</span>()<span class="op">;</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>ui<span class="op">.</span><span class="at">figWidth</span><span class="op">.</span><span class="fu">setValue</span>(<span class="dv">400</span>)<span class="op">;</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>ui<span class="op">.</span><span class="at">figHeight</span><span class="op">.</span><span class="fu">setValue</span>(<span class="dv">300</span>)<span class="op">;</span></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a>ui<span class="op">.</span><span class="at">view</span><span class="op">.</span><span class="at">model</span><span class="op">.</span><span class="at">options</span><span class="op">.</span><span class="fu">endEdit</span>()<span class="op">;</span></span></code></pre></div>
<p>In this example, changing the <code>figWidth</code> and
<code>figHeight</code> options only triggers the re-running of the
analysis once.</p>
</div>
<div class="section level3">
<h3 id="accessing-the-dom">Accessing the DOM<a class="anchor" aria-label="anchor" href="#accessing-the-dom"></a>
</h3>
<p>The DOM for the root of options UI can be accessed from the ui
through the <code>view</code> property:</p>
<pre><code>ui.view.el  | the root DOM node
ui.view.$el | the root DOM node as a jQuery object</code></pre>
<p>It is also possible to inspect the DOM using the chrome dev tools
shipped with jamovi. (To access these, click the blue bar at the top of
jamovi, and press <code>F10</code>.)</p>
<p>Additionally, the DOM elements for most of the option controls are
accessible through the <code>el</code> and <code>$el</code> property.
i.e.</p>
<pre><code>let figWidth = ui.figWidth.el
let $figWidth = ui.figWidth.$el</code></pre>
</div>
<div class="section level2">
<h2 id="adding-a-custom-control">Adding a custom control<a class="anchor" aria-label="anchor" href="#adding-a-custom-control"></a>
</h2>
<p>Sometimes the controls built into jamovi do not provide the behaviour
your analysis requires. In this scenario, it’s possible to create a
‘custom control’ which is placed within the DOM.</p>
<p>A control of type <code>CustomControl</code> allows for this
possibility, when added to the <code>.u.yaml</code> file, and the
<code>creating</code> event is handled in the javascript.</p>
<p>For example,</p>
<p>The description of the control in the <code>u.yaml</code></p>
<div class="sourceCode" id="cb7"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">type</span><span class="kw">:</span><span class="at"> CustomControl</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> ttestType</span></span></code></pre></div>
<p>and the event handler for the the <code>.js</code></p>
<div class="sourceCode" id="cb8"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>    ttestType_creating<span class="op">:</span> <span class="kw">function</span>(ui<span class="op">,</span> <span class="bu">event</span>) {</span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a>        <span class="kw">let</span> $element <span class="op">=</span> ui<span class="op">.</span><span class="at">ttestType</span><span class="op">.</span><span class="at">$el</span><span class="op">;</span></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a>        <span class="co">// in this instance, the $element object represents the root DOM node</span></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a>        <span class="co">// of the custom control. sub-nodes can be added to this node, and the</span></span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a>        <span class="co">// control will be laid out by the layout manager in the final options</span></span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a>        <span class="co">// UI</span></span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a>    }</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="options-ui-from-scratch">Options UI from scratch<a class="anchor" aria-label="anchor" href="#options-ui-from-scratch"></a>
</h2>
<p>Sometimes an analysis requires a very radical UI design that can’t be
accommodated by the standard UI controls or a custom control. If this is
the case, an entirely custom UI may need to be developed.</p>
<p>To achieve this, the options and their types are defined as usual in
the <code>.a.yaml</code> file, however, each option is marked as
<code>hidden: true</code>. This prevents <code>jmvtools</code> from
(re)adding the standard UI controls into the <code>.u.yaml</code> file,
allowing you to implement them yourself.</p>
<p>To construct the UI, all the DOM setup for the custom panel should
occur in a <code>creating</code> event handler for the <code>view</code>
control.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="st">'use strict'</span><span class="op">;</span></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a>module<span class="op">.</span><span class="at">exports</span> <span class="op">=</span> {</span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a>    <span class="dt">view_creating</span><span class="op">:</span> <span class="kw">function</span>(ui<span class="op">,</span> <span class="bu">event</span>) {</span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a>        <span class="kw">let</span> $panel <span class="op">=</span> ui<span class="op">.</span><span class="at">view</span><span class="op">.</span><span class="at">$el</span><span class="op">;</span></span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a>        <span class="co">// in this instance, the $panel object represents the root DOM node</span></span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a>        <span class="co">// of the options panel. sub-nodes can be added to this node.</span></span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a>    }</span>
<span id="cb9-10"><a href="#cb9-10" tabindex="-1"></a>}</span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://www.serdarbalci.com/" class="external-link">Serdar Balci</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
