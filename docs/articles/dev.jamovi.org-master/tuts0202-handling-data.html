<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Handling Data • ClinicoPath</title>
<script src="../../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../../deps/headroom-0.11.0/headroom.min.js"></script><script src="../../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../../deps/search-1.0.0/fuse.min.js"></script><script src="../../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../../pkgdown.js"></script><meta property="og:title" content="Handling Data">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../../index.html">ClinicoPath</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.32.01</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../../dev/index.html"><span class="fa fa-cogs"></span></a></li>
<li class="nav-item"><a class="nav-link" href="../../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/api_analysis-definition.html">Analysis Definition</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/api_module-definition.html">Module Definition</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/api_results-definition.html">Results Definition</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/api_results-elements.html">Results Elements</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/api_table.html">Table</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/api_ui-definition.html">User-interface Definition</a></li>
    <li><a class="dropdown-item" href="../../articles/developer_guide.html">jamovi Module Development Guide</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/index.html">Home</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/info_project-structure.html">project structure</a></li>
    <li><a class="dropdown-item" href="../../articles/module-development-jamovi.html">ClinicoPath Module Development Guide</a></li>
    <li><a class="dropdown-item" href="../../articles/pathology-jamovi.html">Using jamovi for the Common Statistical Analysis in Pathology</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/tuts0101-getting-started.html">Getting Started</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/tuts0102-creating-a-module.html">Creating a Module</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/tuts0103-creating-an-analysis.html">Creating an Analysis</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/tuts0104-implementing-an-analysis.html">Implementing an Analysis</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/tuts0105-creating-rich-results.html">Creating Rich Results</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/tuts0105-debugging-an-analysis.html">Debugging an Analysis</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/tuts0106-adding-plots.html">Adding Plots</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/tuts0107-distributing-modules.html">Distributing Modules</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/tuts0108-additional-notes.html">Additional Notes</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/tuts0201-data-binding.html">Tables</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/tuts0201-dynamic-tables.html">Dynamic Tables</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/tuts0202-handling-data.html">Handling Data</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/tuts0203-state.html">State</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-advanced-customisation.html">Advanced customisation of the options UI</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-advanced-design.html">Advanced UI Design</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-basecontrol.html">BaseControl</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-basic-design.html">UI Design</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-checkbox.html">CheckBox</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-collapsebox.html">CollapseBox</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-combobox.html">ComboBox</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-custom-format.html">Custom Formats</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-label.html">Label</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-layoutbox.html">LayoutBox</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-listbox.html">ListBox</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-optioncontrol.html">OptionControl</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-parentcontrol.html">ParentControl</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-radiobutton.html">RadioButton</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-standard-formats.html">Standard UI Formats</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-supplier.html">Supplier</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-targetlayoutbox.html">TargetLayoutBox</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-termlabel.html">TermLabel</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-textbox.html">TextBox</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-variablelabel.html">VariableLabel</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-variablesupplier.html">VariableSupplier</a></li>
    <li><a class="dropdown-item" href="../../articles/users-of-ClinicoPath.html">Users of ClinicoPath</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="http://twitter.com/serdarbalci"><span class="fa fab fa-twitter fa-lg"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/sbalci/ClinicoPathJamoviModule/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Handling Data</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/sbalci/ClinicoPathJamoviModule/blob/HEAD/vignettes/dev.jamovi.org-master/tuts0202-handling-data.Rmd" class="external-link"><code>vignettes/dev.jamovi.org-master/tuts0202-handling-data.Rmd</code></a></small>
      <div class="d-none name"><code>tuts0202-handling-data.Rmd</code></div>
    </div>

    
    
<p>So far in these tutorials, we haven’t really examined what the
<code>self$data</code> data frame <em>actually</em> contains. It
contains the data from the dataset which is displayed in the spreadsheet
view, but exactly how these values map to the R type system is a bit
nuanced.</p>
<p>In jamovi there are four variable types:</p>
<ul>
<li>
<img src="assets/variable-nominal-text.svg" width="16px"> Nominal
Text</li>
<li>
<img src="assets/variable-nominal.svg" width="16px">
Nominal</li>
<li>
<img src="assets/variable-ordinal.svg" width="16px">
Ordinal</li>
<li>
<img src="assets/variable-continuous.svg" width="16px">
Continuous</li>
</ul>
<p><code>Nominal Text</code> variables only ever have ‘text’ values, so
will come through in the <code>self$data</code> data frame simply as
factors. <code>Continuous</code> variables only ever have numeric
values, so in the <code>self$data</code> data frame, they are of type
numeric. However, the <code>Nominal</code> and <code>Ordinal</code>
variable types are a little more tricky. These can have <em>both</em>
numeric <em>and</em> text values.</p>
<p>(<strong>NOTE</strong> jamovi currently doesn’t support assigning
text values (labels) to Nominal and Ordinal variables. This will be
added in the future.)</p>
<p>Further, there are situations where you want to treat a
<code>Nominal</code> or <code>Ordinal</code> variable as a factor
(i.e. when it is used as the grouping variable for a t-test), but other
times where you want to use it as a number (i.e. when taking a mean of
say, Likert items). (Some would argue that this should never happen –
you should never be taking the mean of a categorial variable, and that’s
possibly true – but some people do still find it useful).</p>
<p>The other advantage of the ‘dual nature’ of <code>Nominal</code>
variables, is that it means the users can ignore the variable type if
they don’t want to worry about it. When working with large datasets, the
process of going through and setting up all the columns, making sure
they have the correct variable type, etc. can be long and tedious. So
only using the variable type as a guide can make it easier for the user.
This is also consistent with the way that many statistical software
work, including SPSS.</p>
<p>So whether a <code>Nominal</code> variable should be treated as a
factor or a continuous variable should be determined by context. For
example, for an ANCOVA, variables assigned to ‘factors’ should be
treated as factors, and variables assigned to ‘covariates’ should be
treated as numeric. Avoid <em>inferring</em> how the user wants to treat
the variable based on its type, i.e. avoid an ‘independent variables’
option, where if the user assigns a nominal variable, it is treated as a
factor, and if the user assigns a continuous variable, it is treated as
a covariate – this is <em>implied</em> behaviour, and users make
mistakes.</p>
<p>In jamovi, by default, <code>Nominal</code> and <code>Ordinal</code>
variables in <code>self$data</code> come through as factors. The numeric
values for each column are attached to the column as an attribute. You
don’t need to interact with this attribute directly, but there are
situations where it’s good to know it’s there.</p>
<p>One issue to do with these attributes, is that a number of R
functions in the <code>base</code> package have no respect for
attributes. Using the functions <code>na.omit</code>,
<code>subset</code> and likely others on <code>self$data</code>, results
in the discarding of these attributes. For this reason, it is better to
convert these columns to the types you want to use (so the attributes
are no longer needed) <em>before</em> using these functions.</p>
<p>To convert a <code>Nominal</code> or <code>Ordinal</code> variable
(which come through as factors) to a numeric, <code>jmvcore</code>
provides the <code>toNumeric()</code> function. To convert in the other
direction, from a numeric to a factor, you can use the
<code><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor()</a></code> or <code><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor()</a></code> functions built into
R. If <code>toNumeric()</code> is called on a variable which is already
numeric, it has no effect. Similarly, if <code><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor()</a></code> is
called on a variable which is already a factor, it has no effect. So you
can call these on every column, without needing to check whether they
are already the correct type.</p>
<p>Returning to our ANCOVA example, which requires a single numeric
dependent variable, one or more factors as factors, and one or more
covariates as numeric, we might begin the <code>.run()</code> function
as follows:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>    <span class="va">.run</span> <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>        </span>
<span>        <span class="co"># read the option values into shorter variable names</span></span>
<span>        </span>
<span>        <span class="va">dep</span>  <span class="op">&lt;-</span> <span class="va">self</span><span class="op">$</span><span class="va">options</span><span class="op">$</span><span class="va">dep</span></span>
<span>        <span class="va">facs</span> <span class="op">&lt;-</span> <span class="va">self</span><span class="op">$</span><span class="va">options</span><span class="op">$</span><span class="va">factors</span></span>
<span>        <span class="va">covs</span> <span class="op">&lt;-</span> <span class="va">self</span><span class="op">$</span><span class="va">options</span><span class="op">$</span><span class="va">covs</span></span>
<span>        </span>
<span>        <span class="co"># get the data</span></span>
<span>        </span>
<span>        <span class="va">data</span> <span class="op">&lt;-</span> <span class="va">self</span><span class="op">$</span><span class="va">data</span></span>
<span>        </span>
<span>        <span class="co"># convert to appropriate data types</span></span>
<span>        </span>
<span>        <span class="va">data</span><span class="op">[[</span><span class="va">dep</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu">jmvcore</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/jmvcore/man/toNumeric.html" class="external-link">toNumeric</a></span><span class="op">(</span><span class="va">data</span><span class="op">[[</span><span class="va">dep</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span>        <span class="kw">for</span> <span class="op">(</span><span class="va">fac</span> <span class="kw">in</span> <span class="va">facs</span><span class="op">)</span></span>
<span>            <span class="va">data</span><span class="op">[[</span><span class="va">fac</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">data</span><span class="op">[[</span><span class="va">fac</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span>        <span class="kw">for</span> <span class="op">(</span><span class="va">cov</span> <span class="kw">in</span> <span class="va">covs</span><span class="op">)</span></span>
<span>            <span class="va">data</span><span class="op">[[</span><span class="va">cov</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu">jmvcore</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/jmvcore/man/toNumeric.html" class="external-link">toNumeric</a></span><span class="op">(</span><span class="va">data</span><span class="op">[[</span><span class="va">cov</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span>        </span>
<span>        <span class="co"># data is now all of the appropriate type we can begin!</span></span>
<span>        </span>
<span>        <span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/na.fail.html" class="external-link">na.omit</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span>
<span>        </span>
<span>        <span class="va">...</span></span>
<span>    <span class="op">}</span></span></code></pre></div>
<p>In this way, one of the first things you will do in the
<code>.run()</code> function, is setting up all the columns from
<code>self$data</code> to be the correct types.</p>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://www.serdarbalci.com/" class="external-link">Serdar Balci</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
