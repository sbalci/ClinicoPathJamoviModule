<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Dynamic Tables â€¢ ClinicoPath</title>
<script src="../../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../../deps/headroom-0.11.0/headroom.min.js"></script><script src="../../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../../deps/search-1.0.0/fuse.min.js"></script><script src="../../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../../pkgdown.js"></script><meta property="og:title" content="Dynamic Tables">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../../index.html">ClinicoPath</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.32.01</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../../dev/index.html"><span class="fa fa-cogs"></span></a></li>
<li class="nav-item"><a class="nav-link" href="../../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/api_analysis-definition.html">Analysis Definition</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/api_module-definition.html">Module Definition</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/api_results-definition.html">Results Definition</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/api_results-elements.html">Results Elements</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/api_table.html">Table</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/api_ui-definition.html">User-interface Definition</a></li>
    <li><a class="dropdown-item" href="../../articles/developer_guide.html">jamovi Module Development Guide</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/index.html">Home</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/info_project-structure.html">project structure</a></li>
    <li><a class="dropdown-item" href="../../articles/module-development-jamovi.html">ClinicoPath Module Development Guide</a></li>
    <li><a class="dropdown-item" href="../../articles/pathology-jamovi.html">Using jamovi for the Common Statistical Analysis in Pathology</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/tuts0101-getting-started.html">Getting Started</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/tuts0102-creating-a-module.html">Creating a Module</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/tuts0103-creating-an-analysis.html">Creating an Analysis</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/tuts0104-implementing-an-analysis.html">Implementing an Analysis</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/tuts0105-creating-rich-results.html">Creating Rich Results</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/tuts0105-debugging-an-analysis.html">Debugging an Analysis</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/tuts0106-adding-plots.html">Adding Plots</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/tuts0107-distributing-modules.html">Distributing Modules</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/tuts0108-additional-notes.html">Additional Notes</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/tuts0201-data-binding.html">Tables</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/tuts0201-dynamic-tables.html">Dynamic Tables</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/tuts0202-handling-data.html">Handling Data</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/tuts0203-state.html">State</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-advanced-customisation.html">Advanced customisation of the options UI</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-advanced-design.html">Advanced UI Design</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-basecontrol.html">BaseControl</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-basic-design.html">UI Design</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-checkbox.html">CheckBox</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-collapsebox.html">CollapseBox</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-combobox.html">ComboBox</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-custom-format.html">Custom Formats</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-label.html">Label</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-layoutbox.html">LayoutBox</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-listbox.html">ListBox</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-optioncontrol.html">OptionControl</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-parentcontrol.html">ParentControl</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-radiobutton.html">RadioButton</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-standard-formats.html">Standard UI Formats</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-supplier.html">Supplier</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-targetlayoutbox.html">TargetLayoutBox</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-termlabel.html">TermLabel</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-textbox.html">TextBox</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-variablelabel.html">VariableLabel</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-variablesupplier.html">VariableSupplier</a></li>
    <li><a class="dropdown-item" href="../../articles/users-of-ClinicoPath.html">Users of ClinicoPath</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="http://twitter.com/serdarbalci"><span class="fa fab fa-twitter fa-lg"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/sbalci/ClinicoPathJamoviModule/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Dynamic Tables</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/sbalci/ClinicoPathJamoviModule/blob/HEAD/vignettes/dev.jamovi.org-master/tuts0201-dynamic-tables.Rmd" class="external-link"><code>vignettes/dev.jamovi.org-master/tuts0201-dynamic-tables.Rmd</code></a></small>
      <div class="d-none name"><code>tuts0201-dynamic-tables.Rmd</code></div>
    </div>

    
    
<p>In the previous tutorial series, we looked at <a href="tuts0105-creating-rich-results.html">constructing and populating
tables</a>. The .r.yaml file contained:</p>
<pre><code>...
    - name:  ttest
      title: Independent Samples T-Test
      type: Table
      rows:  1
      columns:
        - name: var
          title: ''
          type: text
        - name: t
          type: number
        - name: df
          type: integer
        - name: p
          type: number
          format: zto,pvalue</code></pre>
<p>That is, the results contained a table called <code>ttest</code> with
the title â€˜Independent Samples T-Testâ€™, with 4 columns and 1 row.</p>
<p>In practice however, the number of rows in the table often isnâ€™t
fixed. They may vary based on the options the user has selected, or
based on the results of the analysis itself. In this tutorial, we will
concentrate on the former.</p>
<p>In the previous tutorial series, we created a t-test analysis. It
allowed the user to specify a single dependent variable, and a single
grouping variable. However, we could make this analysis more convenient
by allowing people to specify <em>multiple</em> dependent variables. For
example, a data set might contain the columns â€˜genderâ€™, â€˜heightâ€™ and
â€˜weightâ€™. By allowing multiple dependent variables, the user could
specify â€˜heightâ€™ and â€˜weightâ€™ as the dependent variables, and â€˜genderâ€™
as the grouping variable. Our analysis could then perform multiple
t-tests (one for each dependent variable). The resulting analysis might
look something like this:</p>
<p><img src="tuts0201-dynamic-tables-final.png"></p>
<p>The first thing we need to do is change the dependent variable in the
.a.yaml file, from <code>Variable</code> to <code>Variables</code>.</p>
<pre><code>---
name:  ttest
title: Independent Samples T-Test
menuGroup: SuperAwesome
version: '1.0.0'
jas: '1.1'

options:
    - name: data
      type: Data

    - name: deps                  # &lt;-- let's add an s
      title: Dependent Variables  # &lt;-- and another s
      type: Variables             # &lt;-- Variables with an s!
      
...</code></pre>
<p><strong>NOTE</strong> there is currently a bug in jmvtools, where the
UI is not updated appropriately. In this scenario, jmvtools
<em>should</em> update the .u.yaml file to accept multiple variables,
however this does not happen. It is possible to update the .u.yaml file
by hand, but itâ€™s generally easiest to simply delete the .u.yaml file,
and let jmvtools create one from scratch. This is something which will
be fixed in the coming weeks.</p>
<p><strong>NOTE</strong> that you will have to shut jamovi down, and
restart it in order to see changes to the analysis UI.</p>
<p>As we have changed the name and type of the <code>dep</code>
variable, our t-test will no longer work. For now, you should comment
out or delete the content of the <code>.run()</code> function of the
t-test analysis, otherwise it will produce a number of errors. We will
return to it later in this tutorial.</p>
<p>Having performed these modifications, your t-test UI should look
something like:</p>
<p><img src="tuts0201-dynamic-tables-ui.png"></p>
<p>As can be seen, multiple dependent variables can now be
specified.</p>
<p>Now letâ€™s return to our .y.raml file, to the <code>rows</code> value
in particular:</p>
<pre><code>...
- name:  ttest
      title: Independent Samples T-Test
      type: Table
      rows: 1
...</code></pre>
<p>What we now want, is not 1 row, but rather 1 row <em>per</em>
dependent variable. If one variable is assigned to the option
<code>deps</code>, then we want the table to have 1 row. If two
variables are assigned to the option <code>deps</code>, then the table
should have two rows, etc.</p>
<p>The way we do this, is with whatâ€™s called â€˜data-bindingâ€™.
Data-binding is where we â€˜bindâ€™ a particular property of a results
object, to an option. In this case, we want to â€˜bindâ€™ the number of rows
to the <code>deps</code> option. We do this be specifying the option
inside of parentheses (or brackets).</p>
<pre><code>...
- name:  ttest
      title: Independent Samples T-Test
      type: Table
      rows: (deps)
...</code></pre>
<p>When bound in this way, the number of rows in the table always
matches the number of variables specified by the user. Letâ€™s reinstall
our module and see this in action:</p>
<p><img src="tuts0201-dynamic-tables-blank.png"></p>
<p>As can be seen, our table grows and shrinks accordingly. But we can
do one better. The first column should contain the variable name, and
although we can add this using the Tableâ€™s <code>setRow()</code>
function, there is a better way to do this. We can specify the
<code>content</code> of the column in the .r.yaml file.</p>
<p>The <code>content</code> in the .r.yaml file can be a string literal,
but it can also be a data-binding as well. When the rows of a table are
bound to an option, each row has a key associated with it. When bound to
an option of type <code>Variables</code>, each rowâ€™s key corresponds to
the Variable for that row. This allows us to bind the content of a
column, to each rowâ€™s key, as follows:</p>
<pre><code>items:
    - name:  ttest
      title: Independent Samples T-Test
      type:  Table
      rows:  (deps)
      columns:
        - name: var
          title: ''
          type: text
          content: ($key)  # &lt;- here!</code></pre>
<p><code>$key</code> is a special value which maps to the rowâ€™s key.
Make this change, and reinstall the module with
<code><a href="https://rdrr.io/pkg/jmvtools/man/install.html" class="external-link">jmvtools::install()</a></code>. As can be seen the first column is now
filled in appropriately.</p>
<p><img src="tuts0201-dynamic-tables-bound.png"></p>
<p>Data-binding is nice, because it often leads to much simpler code.
The .yaml files are able to take care of a lot of aspects of the results
objects, and allows the R code (in the .b.R files) to be much simpler,
and focused on performing the calculations. In computer science, this is
called <em><a href="https://en.wikipedia.org/wiki/Separation_of_concerns" class="external-link">separation
of concerns</a></em>.</p>
<p>Now all we need do is add our analysis implementation to the .b.R
file. We can fill the table in using either the <code>rowKey</code> or
the <code>rowNo</code>.</p>
<pre><code><span>    <span class="va">.run</span><span class="op">=</span><span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>    </span>
<span>        <span class="va">table</span> <span class="op">&lt;-</span> <span class="va">self</span><span class="op">$</span><span class="va">results</span><span class="op">$</span><span class="va">ttest</span></span>
<span>    </span>
<span>        <span class="kw">for</span> <span class="op">(</span><span class="va">dep</span> <span class="kw">in</span> <span class="va">self</span><span class="op">$</span><span class="va">options</span><span class="op">$</span><span class="va">deps</span><span class="op">)</span> <span class="op">{</span></span>
<span>    </span>
<span>            <span class="va">formula</span> <span class="op">&lt;-</span> <span class="fu">jmvcore</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/jmvcore/man/constructFormula.html" class="external-link">constructFormula</a></span><span class="op">(</span><span class="va">dep</span>, <span class="va">self</span><span class="op">$</span><span class="va">options</span><span class="op">$</span><span class="va">group</span><span class="op">)</span></span>
<span>            <span class="va">formula</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/formula.html" class="external-link">as.formula</a></span><span class="op">(</span><span class="va">formula</span><span class="op">)</span></span>
<span>        </span>
<span>            <span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/t.test.html" class="external-link">t.test</a></span><span class="op">(</span><span class="va">formula</span>, <span class="va">self</span><span class="op">$</span><span class="va">data</span><span class="op">)</span></span>
<span>        </span>
<span>            <span class="va">table</span><span class="op">$</span><span class="fu">setRow</span><span class="op">(</span>rowKey<span class="op">=</span><span class="va">dep</span>, values<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>  <span class="co"># set by rowKey!</span></span>
<span>                t<span class="op">=</span><span class="va">results</span><span class="op">$</span><span class="va">statistic</span>,</span>
<span>                df<span class="op">=</span><span class="va">results</span><span class="op">$</span><span class="va">parameter</span>,</span>
<span>                p<span class="op">=</span><span class="va">results</span><span class="op">$</span><span class="va">p.value</span></span>
<span>            <span class="op">)</span><span class="op">)</span></span>
<span>        <span class="op">}</span></span>
<span>    <span class="op">}</span></span></code></pre>
<p>We can now reinstall the module using
<code><a href="https://rdrr.io/pkg/jmvtools/man/install.html" class="external-link">jmvtools::install()</a></code> (Note that this analysis will not work
if you specify a nominal or ordinal variable as a dependent. So be sure
to either use a continuous variable, or change the type of the variable
to continuous before assigning it as a dependent. We will look at the
correct way to handle nominal and ordinal variables in the next
tutorial). You should have something like the following:</p>
<p><img src="tuts0201-dynamic-tables-final.png"></p>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://www.serdarbalci.com/" class="external-link">Serdar Balci</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
