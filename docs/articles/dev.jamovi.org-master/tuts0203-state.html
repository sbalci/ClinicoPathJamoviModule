<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>State • ClinicoPath</title>
<script src="../../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../../deps/headroom-0.11.0/headroom.min.js"></script><script src="../../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../../deps/search-1.0.0/fuse.min.js"></script><script src="../../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../../pkgdown.js"></script><meta property="og:title" content="State">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../../index.html">ClinicoPath</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.32.01</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../../dev/index.html"><span class="fa fa-cogs"></span></a></li>
<li class="nav-item"><a class="nav-link" href="../../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/api_analysis-definition.html">Analysis Definition</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/api_module-definition.html">Module Definition</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/api_results-definition.html">Results Definition</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/api_results-elements.html">Results Elements</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/api_table.html">Table</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/api_ui-definition.html">User-interface Definition</a></li>
    <li><a class="dropdown-item" href="../../articles/developer_guide.html">jamovi Module Development Guide</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/index.html">Home</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/info_project-structure.html">project structure</a></li>
    <li><a class="dropdown-item" href="../../articles/module-development-jamovi.html">ClinicoPath Module Development Guide</a></li>
    <li><a class="dropdown-item" href="../../articles/pathology-jamovi.html">Using jamovi for the Common Statistical Analysis in Pathology</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/tuts0101-getting-started.html">Getting Started</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/tuts0102-creating-a-module.html">Creating a Module</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/tuts0103-creating-an-analysis.html">Creating an Analysis</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/tuts0104-implementing-an-analysis.html">Implementing an Analysis</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/tuts0105-creating-rich-results.html">Creating Rich Results</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/tuts0105-debugging-an-analysis.html">Debugging an Analysis</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/tuts0106-adding-plots.html">Adding Plots</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/tuts0107-distributing-modules.html">Distributing Modules</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/tuts0108-additional-notes.html">Additional Notes</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/tuts0201-data-binding.html">Tables</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/tuts0201-dynamic-tables.html">Dynamic Tables</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/tuts0202-handling-data.html">Handling Data</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/tuts0203-state.html">State</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-advanced-customisation.html">Advanced customisation of the options UI</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-advanced-design.html">Advanced UI Design</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-basecontrol.html">BaseControl</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-basic-design.html">UI Design</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-checkbox.html">CheckBox</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-collapsebox.html">CollapseBox</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-combobox.html">ComboBox</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-custom-format.html">Custom Formats</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-label.html">Label</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-layoutbox.html">LayoutBox</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-listbox.html">ListBox</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-optioncontrol.html">OptionControl</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-parentcontrol.html">ParentControl</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-radiobutton.html">RadioButton</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-standard-formats.html">Standard UI Formats</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-supplier.html">Supplier</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-targetlayoutbox.html">TargetLayoutBox</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-termlabel.html">TermLabel</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-textbox.html">TextBox</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-variablelabel.html">VariableLabel</a></li>
    <li><a class="dropdown-item" href="../../articles/dev.jamovi.org-master/ui-variablesupplier.html">VariableSupplier</a></li>
    <li><a class="dropdown-item" href="../../articles/users-of-ClinicoPath.html">Users of ClinicoPath</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="http://twitter.com/serdarbalci"><span class="fa fab fa-twitter fa-lg"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/sbalci/ClinicoPathJamoviModule/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>State</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/sbalci/ClinicoPathJamoviModule/blob/HEAD/vignettes/dev.jamovi.org-master/tuts0203-state.Rmd" class="external-link"><code>vignettes/dev.jamovi.org-master/tuts0203-state.Rmd</code></a></small>
      <div class="d-none name"><code>tuts0203-state.Rmd</code></div>
    </div>

    
    
<p>The analyses demonstrated in the tutorial series so far, have been
completely <em>state</em>-less. This means that each time an analysis is
run, (for example, in response to a user checking a checkbox) it runs
the analysis from beginning to end. In many cases, this isn’t very
efficient. A user may run a t-test, and then select a checkbox
requesting descriptives. Without <em>state</em>, an analysis will
recalculate the t-test results every time the analysis is changed, even
when the changed option has no impact on the t-test results.</p>
<p>For many analyses, this isn’t a problem – indeed, a t-test runs very
quickly, so recalculating with every option change doesn’t really pose a
problem; the user still receives the results near instantaneously.
However, some analyses can take a considerable amount of time to run,
and re-running these in their entirety with every change leads to long
delays and a poor user experience. The solution to this problem is
<em>state</em>.</p>
<p>In using state, an analysis retains information from when it was
previously run. If a user makes a change to an existing analysis, the
analysis can make use of the results that were calculated previously.
Using the example of a t-test, if the user checks a checkbox requesting
an additional table of descriptives, the analysis can re-use the t-test
results from the last time the analysis ran. However, if the user
changes an option which affects the t-test results – say, the type of
t-test – then the analysis should not re-use the earlier t-test results.
Whether earlier results should be used or not is determined by the
<code>clearWith</code> property.</p>
<div class="section level2">
<h2 id="clearwith">
<code>clearWith</code><a class="anchor" aria-label="anchor" href="#clearwith"></a>
</h2>
<p>Each results element in the .r.yaml file can have a
<code>clearWith</code> property specified. If no <code>clearWith</code>
property is specified, then the default value of <code>*</code> is used,
which means the <code>Table</code> or <code>Image</code> will be cleared
if <em>any</em> option changes; <em>no</em> earlier results will ever be
used. So far in this tutorial series, all analyses have behaved in this
way.</p>
<p>Specifying a <code>clearWith</code> property lets us specify the
circumstances where results should be re-used, and when not. For
example, returning to our <em>t-test</em>, our <code>.a.yaml</code> file
might contain the following options:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> data</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="at">      </span><span class="fu">type</span><span class="kw">:</span><span class="at"> Data</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> deps</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="at">      </span><span class="fu">title</span><span class="kw">:</span><span class="at"> Dependent Variables</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="at">      </span><span class="fu">type</span><span class="kw">:</span><span class="at"> Variables</span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> group</span></span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a><span class="at">      </span><span class="fu">title</span><span class="kw">:</span><span class="at"> Grouping Variable</span></span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a><span class="at">      </span><span class="fu">type</span><span class="kw">:</span><span class="at"> Variable</span></span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> alt</span></span>
<span id="cb1-13"><a href="#cb1-13" tabindex="-1"></a><span class="at">      </span><span class="fu">title</span><span class="kw">:</span><span class="at"> Alternative hypothesis</span></span>
<span id="cb1-14"><a href="#cb1-14" tabindex="-1"></a><span class="at">      </span><span class="fu">type</span><span class="kw">:</span><span class="at"> List</span></span>
<span id="cb1-15"><a href="#cb1-15" tabindex="-1"></a><span class="at">      </span><span class="fu">options</span><span class="kw">:</span></span>
<span id="cb1-16"><a href="#cb1-16" tabindex="-1"></a><span class="at">        </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> notEqual</span></span>
<span id="cb1-17"><a href="#cb1-17" tabindex="-1"></a><span class="at">          </span><span class="fu">title</span><span class="kw">:</span><span class="at"> Not equal</span></span>
<span id="cb1-18"><a href="#cb1-18" tabindex="-1"></a><span class="at">        </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> oneGreater</span></span>
<span id="cb1-19"><a href="#cb1-19" tabindex="-1"></a><span class="at">          </span><span class="fu">title</span><span class="kw">:</span><span class="at"> One greater</span></span>
<span id="cb1-20"><a href="#cb1-20" tabindex="-1"></a><span class="at">        </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> twoGreater</span></span>
<span id="cb1-21"><a href="#cb1-21" tabindex="-1"></a><span class="at">          </span><span class="fu">title</span><span class="kw">:</span><span class="at"> Two greater</span></span>
<span id="cb1-22"><a href="#cb1-22" tabindex="-1"></a><span class="at">      </span><span class="fu">default</span><span class="kw">:</span><span class="at"> notEqual</span></span>
<span id="cb1-23"><a href="#cb1-23" tabindex="-1"></a></span>
<span id="cb1-24"><a href="#cb1-24" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> varEq</span></span>
<span id="cb1-25"><a href="#cb1-25" tabindex="-1"></a><span class="at">      </span><span class="fu">title</span><span class="kw">:</span><span class="at"> Assume equal variances</span></span>
<span id="cb1-26"><a href="#cb1-26" tabindex="-1"></a><span class="at">      </span><span class="fu">type</span><span class="kw">:</span><span class="at"> Bool</span></span>
<span id="cb1-27"><a href="#cb1-27" tabindex="-1"></a><span class="at">      </span><span class="fu">default</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span></code></pre></div>
<p>We could add the <code>clearWith</code> property to the t-test
results table in the <code>.r.yaml</code> file as follows:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="fu">items</span><span class="kw">:</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at">  ttest</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="at">      </span><span class="fu">title</span><span class="kw">:</span><span class="at"> Independent Samples T-Test</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="at">      </span><span class="fu">type</span><span class="kw">:</span><span class="at">  Table</span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="at">      </span><span class="fu">rows</span><span class="kw">:</span><span class="at">  (deps)</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a><span class="at">      </span><span class="fu">clearWith</span><span class="kw">:</span><span class="co">  # &lt;-- here</span></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a><span class="at">        </span><span class="kw">-</span><span class="at"> group</span></span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a><span class="at">        </span><span class="kw">-</span><span class="at"> alt</span></span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a><span class="at">        </span><span class="kw">-</span><span class="at"> varEq</span></span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a><span class="at">        </span></span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a><span class="at">      </span><span class="fu">columns</span><span class="kw">:</span></span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a><span class="at">        </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> var</span></span>
<span id="cb2-14"><a href="#cb2-14" tabindex="-1"></a><span class="at">          </span><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">''</span></span>
<span id="cb2-15"><a href="#cb2-15" tabindex="-1"></a><span class="at">          </span><span class="fu">type</span><span class="kw">:</span><span class="at"> text</span></span>
<span id="cb2-16"><a href="#cb2-16" tabindex="-1"></a><span class="at">          </span><span class="fu">content</span><span class="kw">:</span><span class="at"> ($key)</span></span></code></pre></div>
<p>This <code>clearWith</code> specifies that the table is to be cleared
if any of the options <code>group</code>, <code>alt</code> or
<code>varEq</code> change. Take note that we <em>haven’t</em> added the
<code>deps</code> option to this list. When the user adds additional
dependent variables, we don’t want it to clear the existing rows. You
can see what happens by running this example, and adding multiple
dependent variables one at a time.</p>
<p>Before we added this <code>clearWith</code> property, adding another
dependent variable caused the whole table to be cleared before being
filled back in again. Now with <code>clearWith</code> (without
<code>deps</code> listed), adding an additional dependent variable just
adds another row, which is then filled in. The old rows are not cleared.
This new behaviour minimises the amount the results flicker, and allows
the user to see clearly what has changed in the results in response to
their actions.</p>
<p>However, it should be noted that we haven’t actually reduced the
amount of calculations being performed. Although the table is no longer
cleared when certain options are changed, our analysis implementation in
the <code>.b.R</code> file still loops over all the dependent variables
and performs a t-test for each. It then overrides the value already in
the table with this newly calculated value; the exact same value. This
isn’t a problem, because the t-test runs very quickly, but we can modify
our <code>.b.R</code> file to not calculate values which are already
present in the table. We find out what parts of the table are already
filled in with the <code>isFilled()</code> method.</p>
</div>
<div class="section level2">
<h2 id="isfilled">
<code>isFilled()</code><a class="anchor" aria-label="anchor" href="#isfilled"></a>
</h2>
<p>The <code>isFilled()</code> method can be called with any of the
following:</p>
<p><code>table$isFilled()</code></p>
<p><code>table$isFilled(rowNo=i, col)</code></p>
<p><code>table$isFilled(rowKey=key, col)</code></p>
<p>By specifying or omitting different arguments, it is possible to
query whether the whole table is filled, whether a particular row or
column is filled, or whether a particular cell is filled.
<code>isFilled()</code> returns either <code>TRUE</code> or
<code>FALSE</code>.</p>
<p>Let’s return to our t-test example, to the <code>.b.R</code> file. We
might modify our <code>.run()</code> function as follows:</p>
<pre><code><span>    <span class="va">.run</span><span class="op">=</span><span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>    </span>
<span>        <span class="va">table</span> <span class="op">&lt;-</span> <span class="va">self</span><span class="op">$</span><span class="va">results</span><span class="op">$</span><span class="va">ttest</span></span>
<span>    </span>
<span>        <span class="kw">for</span> <span class="op">(</span><span class="va">dep</span> <span class="kw">in</span> <span class="va">self</span><span class="op">$</span><span class="va">options</span><span class="op">$</span><span class="va">deps</span><span class="op">)</span> <span class="op">{</span></span>
<span>        </span>
<span>            <span class="kw">if</span> <span class="op">(</span> <span class="op">!</span> <span class="va">table</span><span class="op">$</span><span class="fu">isFilled</span><span class="op">(</span>rowKey<span class="op">=</span><span class="va">dep</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>  <span class="co"># &lt;- this if statement!</span></span>
<span>    </span>
<span>                <span class="va">formula</span> <span class="op">&lt;-</span> <span class="fu">jmvcore</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/jmvcore/man/constructFormula.html" class="external-link">constructFormula</a></span><span class="op">(</span><span class="va">dep</span>, <span class="va">self</span><span class="op">$</span><span class="va">options</span><span class="op">$</span><span class="va">group</span><span class="op">)</span></span>
<span>                <span class="va">formula</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/formula.html" class="external-link">as.formula</a></span><span class="op">(</span><span class="va">formula</span><span class="op">)</span></span>
<span>            </span>
<span>                <span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/t.test.html" class="external-link">t.test</a></span><span class="op">(</span><span class="va">formula</span>, <span class="va">self</span><span class="op">$</span><span class="va">data</span><span class="op">)</span></span>
<span>            </span>
<span>                <span class="va">table</span><span class="op">$</span><span class="fu">setRow</span><span class="op">(</span>rowKey<span class="op">=</span><span class="va">dep</span>, values<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>  <span class="co"># set by rowKey!</span></span>
<span>                    t<span class="op">=</span><span class="va">results</span><span class="op">$</span><span class="va">statistic</span>,</span>
<span>                    df<span class="op">=</span><span class="va">results</span><span class="op">$</span><span class="va">parameter</span>,</span>
<span>                    p<span class="op">=</span><span class="va">results</span><span class="op">$</span><span class="va">p.value</span></span>
<span>                <span class="op">)</span><span class="op">)</span></span>
<span>            <span class="op">}</span></span>
<span>        <span class="op">}</span></span>
<span>    <span class="op">}</span></span></code></pre>
<p>We’ve added an if-statement which checks if the row is already
filled. If it is already filled in then it won’t call the
<code><a href="https://rdrr.io/r/stats/t.test.html" class="external-link">t.test()</a></code> function or spend time populating the row. In this
way we can skip calculations if the appropriate results are already
filled in.</p>
</div>
<div class="section level2">
<h2 id="setstate">
<code>setState()</code><a class="anchor" aria-label="anchor" href="#setstate"></a>
</h2>
<p>However, sometimes we don’t want to just store the final results;
sometimes we want to store the intermediate objects as well. For
example, we may want to create a fit object, and then reuse this same
fit object the next time the analysis is run.</p>
<p>State can be saved and recovered from any results element, i.e. an
<code>Image</code> or a <code>Table</code>, using the
<code>setState()</code> method and <code>state</code> property:</p>
<pre><code><span><span class="va">table</span><span class="op">$</span><span class="fu">setState</span><span class="op">(</span><span class="va">object</span><span class="op">)</span></span>
<span><span class="va">object</span> <span class="op">&lt;-</span> <span class="va">table</span><span class="op">$</span><span class="va">state</span></span></code></pre>
<p><code>$state</code> will return <code>NULL</code> if no state has
been set.</p>
<p>Note that the <code>clearWith</code> property also applies to the
state attached to a results element. The same mechanism can be used to
selectively clear the state or not, depending on what options have
changed.</p>
<p>When using <code>setState()</code> and <code>state</code>, an
analysis will typically try and retrieve the state as one of the first
things it does. If the state doesn’t exist (<code>state</code> has a
value of <code>NULL</code>), then the analysis will perform the
calculations to create the object it requires and
<code>setState()</code> that object onto a results element. Following
this, the analysis can populate the tables and images from that object.
Alternatively, if the state can be retrieved, then the analysis can
bypass the initial time-consuming construction of the object, and just
use the one from last time to populate the tables and images.</p>
<p><strong>WARNING</strong> some R objects, when serialised, take up a
lot of space. If these objects are large, then the save and restore
process between analyses will be very sluggish. As such, it’s worth
investigating how large the objects you want to store will be. The
following will give you the serialized size of an object in bytes:</p>
<pre><code><span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/serialize.html" class="external-link">serialize</a></span><span class="op">(</span><span class="va">object</span><span class="op">)</span>, connection<span class="op">=</span><span class="cn">NULL</span><span class="op">)</span></span></code></pre>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://www.serdarbalci.com/" class="external-link">Serdar Balci</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
