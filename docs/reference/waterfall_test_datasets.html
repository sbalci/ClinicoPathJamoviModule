<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Test Datasets for Waterfall Function — waterfall_test_datasets • ClinicoPath</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Test Datasets for Waterfall Function — waterfall_test_datasets"><meta name="description" content="A collection of test datasets for the waterfall function, which creates
waterfall and spider plots for tumor response analysis following RECIST v1.1 criteria."><meta property="og:description" content="A collection of test datasets for the waterfall function, which creates
waterfall and spider plots for tumor response analysis following RECIST v1.1 criteria."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ClinicoPath</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.32.72</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../dev/index.html"><span class="fa fa-cogs"></span></a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/index.html">Articles</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-test-data" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true"><span class="fa fa-database"></span> Test Data</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-test-data"><li><a class="dropdown-item" href="../articles/test-data-catalog.html">Test Data Catalog</a></li>
    <li><a class="dropdown-item" href="../articles/test-data-complete-catalog.html">Complete Catalog (945 files)</a></li>
    <li><a class="dropdown-item" href="../articles/function-reference.html">Function Reference</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="http://twitter.com/serdarbalci"><span class="fa fab fa-twitter fa-lg"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/sbalci/ClinicoPathJamoviModule/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Test Datasets for Waterfall Function</h1>
      <small class="dont-index">Source: <a href="https://github.com/sbalci/ClinicoPathJamoviModule/blob/HEAD/R/data_waterfall_docs.R" class="external-link"><code>R/data_waterfall_docs.R</code></a></small>
      <div class="d-none name"><code>waterfall_test_datasets.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>A collection of test datasets for the waterfall function, which creates
waterfall and spider plots for tumor response analysis following RECIST v1.1 criteria.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="va">waterfall_test</span></span>
<span></span>
<span><span class="va">waterfall_spider_test</span></span>
<span></span>
<span><span class="va">waterfall_raw_test</span></span>
<span></span>
<span><span class="va">waterfall_small</span></span>
<span></span>
<span><span class="va">waterfall_large</span></span>
<span></span>
<span><span class="va">waterfall_missing</span></span>
<span></span>
<span><span class="va">waterfall_extreme</span></span>
<span></span>
<span><span class="va">waterfall_no_baseline</span></span>
<span></span>
<span><span class="va">waterfall_phase2</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="format">Format<a class="anchor" aria-label="anchor" href="#format"></a></h2>

<div class="section">
<h3 id="waterfall-test"><code>waterfall_test</code><a class="anchor" aria-label="anchor" href="#waterfall-test"></a></h3>


<p>Main test dataset with pre-calculated percentage changes (30 patients):</p><dl><dt>patientID</dt>
<dd><p>Character. Unique patient identifier (PT001-PT030)</p></dd>

<dt>best_response</dt>
<dd><p>Numeric. Percentage change from baseline (-100% to +180%)</p></dd>

<dt>treatment</dt>
<dd><p>Character. Treatment group (Monotherapy, Combination, Control)</p></dd>

<dt>disease_subtype</dt>
<dd><p>Character. Disease classification (Type A/B/C)</p></dd>

<dt>prior_lines</dt>
<dd><p>Integer. Number of prior therapy lines (0-3)</p></dd>


</dl></div>

<div class="section">
<h3 id="waterfall-spider-test"><code>waterfall_spider_test</code><a class="anchor" aria-label="anchor" href="#waterfall-spider-test"></a></h3>


<p>Longitudinal data for spider plot testing (120 observations: 20 patients × 6 timepoints):</p><dl><dt>patientID</dt>
<dd><p>Character. Patient identifier (PT001-PT020)</p></dd>

<dt>treatment</dt>
<dd><p>Character. Treatment group (Experimental, Standard)</p></dd>

<dt>time</dt>
<dd><p>Numeric. Months from baseline (0, 2, 4, 6, 8, 12)</p></dd>

<dt>pct_change</dt>
<dd><p>Numeric. Percentage change at each timepoint</p></dd>

<dt>response_category</dt>
<dd><p>Character. RECIST category (CR/PR/SD/PD)</p></dd>


</dl></div>

<div class="section">
<h3 id="waterfall-raw-test"><code>waterfall_raw_test</code><a class="anchor" aria-label="anchor" href="#waterfall-raw-test"></a></h3>


<p>Raw tumor measurements for percentage calculation (125 observations: 25 patients × 5 timepoints):</p><dl><dt>patientID</dt>
<dd><p>Character. Patient identifier (PT001-PT025)</p></dd>

<dt>time</dt>
<dd><p>Numeric. Months from baseline (0, 1, 2, 4, 6)</p></dd>

<dt>tumor_size</dt>
<dd><p>Numeric. Sum of target lesion diameters (mm)</p></dd>

<dt>treatment</dt>
<dd><p>Character. Treatment arm (Drug A, Drug B, Placebo)</p></dd>


</dl></div>

<div class="section">
<h3 id="waterfall-small"><code>waterfall_small</code><a class="anchor" aria-label="anchor" href="#waterfall-small"></a></h3>


<p>Minimal viable dataset (5 patients):</p><dl><dt>patientID</dt>
<dd><p>Character. Patient identifier</p></dd>

<dt>best_response</dt>
<dd><p>Numeric. Percentage change</p></dd>

<dt>treatment</dt>
<dd><p>Character. Treatment group (A, B, Control)</p></dd>


</dl></div>

<div class="section">
<h3 id="waterfall-large"><code>waterfall_large</code><a class="anchor" aria-label="anchor" href="#waterfall-large"></a></h3>


<p>Large dataset for performance testing (200 patients):</p><dl><dt>patientID</dt>
<dd><p>Character. Patient identifier</p></dd>

<dt>best_response</dt>
<dd><p>Numeric. Percentage change</p></dd>

<dt>treatment</dt>
<dd><p>Character. Treatment arm (8 levels)</p></dd>

<dt>biomarker_status</dt>
<dd><p>Character. Biomarker status (Positive, Negative)</p></dd>


</dl></div>

<div class="section">
<h3 id="waterfall-missing"><code>waterfall_missing</code><a class="anchor" aria-label="anchor" href="#waterfall-missing"></a></h3>


<p>Dataset with missing values (20 patients, ~15% missing):</p><dl><dt>patientID</dt>
<dd><p>Character. Patient identifier</p></dd>

<dt>best_response</dt>
<dd><p>Numeric. Percentage change (some NA)</p></dd>

<dt>treatment</dt>
<dd><p>Character. Treatment group (some NA)</p></dd>


</dl></div>

<div class="section">
<h3 id="waterfall-extreme"><code>waterfall_extreme</code><a class="anchor" aria-label="anchor" href="#waterfall-extreme"></a></h3>


<p>Dataset with extreme values and outliers (15 patients):</p><dl><dt>patientID</dt>
<dd><p>Character. Patient identifier</p></dd>

<dt>best_response</dt>
<dd><p>Numeric. Percentage change (includes CRs and extreme PD)</p></dd>

<dt>treatment</dt>
<dd><p>Character. Treatment group</p></dd>


</dl></div>

<div class="section">
<h3 id="waterfall-no-baseline"><code>waterfall_no_baseline</code><a class="anchor" aria-label="anchor" href="#waterfall-no-baseline"></a></h3>


<p>Dataset missing baseline measurements for error testing (20 observations):</p><dl><dt>patientID</dt>
<dd><p>Character. Patient identifier</p></dd>

<dt>treatment</dt>
<dd><p>Character. Treatment group</p></dd>

<dt>time</dt>
<dd><p>Numeric. Time from baseline (no time=0 values)</p></dd>

<dt>pct_change</dt>
<dd><p>Numeric. Percentage change</p></dd>


</dl></div>

<div class="section">
<h3 id="waterfall-phase-"><code>waterfall_phase2</code><a class="anchor" aria-label="anchor" href="#waterfall-phase-"></a></h3>


<p>Realistic Phase II oncology trial simulation (50 patients):</p><dl><dt>patientID</dt>
<dd><p>Character. Study identifier (STUDY001-001 to STUDY001-050)</p></dd>

<dt>best_response</dt>
<dd><p>Numeric. Percentage change (ORR ~30%, DCR ~60%)</p></dd>

<dt>cohort</dt>
<dd><p>Character. Dose level (1, 2, 3)</p></dd>

<dt>age</dt>
<dd><p>Numeric. Patient age (years)</p></dd>

<dt>ecog_ps</dt>
<dd><p>Integer. ECOG performance status (0-2)</p></dd>

<dt>pdl1_status</dt>
<dd><p>Character. PD-L1 expression level (&lt;1%, 1-49%, ≥50%)</p></dd>

<dt>time_on_treatment</dt>
<dd><p>Numeric. Duration on treatment (months)</p></dd>


</dl></div>

<p>An object of class <code>tbl_df</code> (inherits from <code>tbl</code>, <code>data.frame</code>) with 120 rows and 5 columns.</p>
<p>An object of class <code>tbl_df</code> (inherits from <code>tbl</code>, <code>data.frame</code>) with 125 rows and 4 columns.</p>
<p>An object of class <code>tbl_df</code> (inherits from <code>tbl</code>, <code>data.frame</code>) with 5 rows and 3 columns.</p>
<p>An object of class <code>tbl_df</code> (inherits from <code>tbl</code>, <code>data.frame</code>) with 200 rows and 4 columns.</p>
<p>An object of class <code>tbl_df</code> (inherits from <code>tbl</code>, <code>data.frame</code>) with 20 rows and 5 columns.</p>
<p>An object of class <code>tbl_df</code> (inherits from <code>tbl</code>, <code>data.frame</code>) with 15 rows and 3 columns.</p>
<p>An object of class <code>tbl_df</code> (inherits from <code>tbl</code>, <code>data.frame</code>) with 20 rows and 5 columns.</p>
<p>An object of class <code>tbl_df</code> (inherits from <code>tbl</code>, <code>data.frame</code>) with 50 rows and 7 columns.</p>
    </div>
    <div class="section level2">
    <h2 id="source">Source<a class="anchor" aria-label="anchor" href="#source"></a></h2>
    <p>Generated using data-raw/waterfall_test_data.R (seed = 42)</p>
    </div>
    <div class="section level2">
    <h2 id="recist-v-criteria">RECIST v1.1 Criteria<a class="anchor" aria-label="anchor" href="#recist-v-criteria"></a></h2>


<p>Response categories are based on RECIST v1.1 thresholds:</p><ul><li><p>CR (Complete Response): ≤ -100% (complete disappearance)</p></li>
<li><p>PR (Partial Response): -99% to -30% (significant shrinkage)</p></li>
<li><p>SD (Stable Disease): -29% to +19% (minimal change)</p></li>
<li><p>PD (Progressive Disease): ≥ +20% (tumor growth)</p></li>
</ul><p>Clinical metrics:</p><ul><li><p>ORR (Objective Response Rate) = (CR + PR) / Total</p></li>
<li><p>DCR (Disease Control Rate) = (CR + PR + SD) / Total</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="data-generation">Data Generation<a class="anchor" aria-label="anchor" href="#data-generation"></a></h2>


<p>All datasets were generated with seed 42 for reproducibility.
Values are clinically realistic and incorporate appropriate correlations
(e.g., treatment effects, baseline characteristics).</p>
    </div>
    <div class="section level2">
    <h2 id="use-cases">Use Cases<a class="anchor" aria-label="anchor" href="#use-cases"></a></h2>


<ul><li><p><strong>waterfall_test</strong>: Basic waterfall plot testing, RECIST categorization</p></li>
<li><p><strong>waterfall_spider_test</strong>: Spider plot generation, longitudinal analysis</p></li>
<li><p><strong>waterfall_raw_test</strong>: Raw measurement processing, percentage calculation</p></li>
<li><p><strong>waterfall_small</strong>: Minimal dataset, edge case testing</p></li>
<li><p><strong>waterfall_large</strong>: Performance testing, scalability validation</p></li>
<li><p><strong>waterfall_missing</strong>: Missing data handling</p></li>
<li><p><strong>waterfall_extreme</strong>: Outlier handling, extreme values</p></li>
<li><p><strong>waterfall_no_baseline</strong>: Error validation, missing baseline detection</p></li>
<li><p><strong>waterfall_phase2</strong>: Complete clinical trial workflow</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="waterfall.html">waterfall</a></code> for the waterfall analysis function</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Load main test dataset</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">waterfall_test</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">waterfall_test</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 6 × 5</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   patientID best_response treatment   disease_subtype prior_lines</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> PT001               -<span style="color: #BB0000;">90</span> Control     Type B                    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> PT002               -<span style="color: #BB0000;">90</span> Control     Type C                    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> PT003              -<span style="color: #BB0000;">100</span> Combination Type B                    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> PT004               -<span style="color: #BB0000;">65</span> Control     Type A                    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> PT005               -<span style="color: #BB0000;">65</span> Monotherapy Type B                    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">6</span> PT006               -<span style="color: #BB0000;">55</span> Monotherapy Type B                    1</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Basic waterfall plot</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="fu"><a href="waterfall.html">waterfall</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">waterfall_test</span>,</span></span>
<span class="r-in"><span>  patientID <span class="op">=</span> <span class="st">"patientID"</span>,</span></span>
<span class="r-in"><span>  responseVar <span class="op">=</span> <span class="st">"best_response"</span>,</span></span>
<span class="r-in"><span>  inputType <span class="op">=</span> <span class="st">"percentage"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Spider plot with longitudinal data</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">waterfall_spider_test</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="waterfall.html">waterfall</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">waterfall_spider_test</span>,</span></span>
<span class="r-in"><span>  patientID <span class="op">=</span> <span class="st">"patientID"</span>,</span></span>
<span class="r-in"><span>  responseVar <span class="op">=</span> <span class="st">"pct_change"</span>,</span></span>
<span class="r-in"><span>  timeVar <span class="op">=</span> <span class="st">"time"</span>,</span></span>
<span class="r-in"><span>  showSpiderPlot <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  timeUnitLabel <span class="op">=</span> <span class="st">"months"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Raw measurements with automatic calculation</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">waterfall_raw_test</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="waterfall.html">waterfall</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">waterfall_raw_test</span>,</span></span>
<span class="r-in"><span>  patientID <span class="op">=</span> <span class="st">"patientID"</span>,</span></span>
<span class="r-in"><span>  responseVar <span class="op">=</span> <span class="st">"tumor_size"</span>,</span></span>
<span class="r-in"><span>  timeVar <span class="op">=</span> <span class="st">"time"</span>,</span></span>
<span class="r-in"><span>  inputType <span class="op">=</span> <span class="st">"raw"</span>,</span></span>
<span class="r-in"><span>  groupVar <span class="op">=</span> <span class="st">"treatment"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Clinical trial analysis</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">waterfall_phase2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="waterfall.html">waterfall</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">waterfall_phase2</span>,</span></span>
<span class="r-in"><span>  patientID <span class="op">=</span> <span class="st">"patientID"</span>,</span></span>
<span class="r-in"><span>  responseVar <span class="op">=</span> <span class="st">"best_response"</span>,</span></span>
<span class="r-in"><span>  groupVar <span class="op">=</span> <span class="st">"cohort"</span>,</span></span>
<span class="r-in"><span>  generateCopyReadyReport <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  showConfidenceIntervals <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://www.serdarbalci.com/" class="external-link">Serdar Balci</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

