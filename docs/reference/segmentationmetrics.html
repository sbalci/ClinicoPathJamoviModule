<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Segmentation Metrics (Dice, IoU, Hausdorff) — segmentationmetrics • ClinicoPath</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Segmentation Metrics (Dice, IoU, Hausdorff) — segmentationmetrics"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ClinicoPath</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.32.72</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../dev/index.html"><span class="fa fa-cogs"></span></a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/index.html">Articles</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-test-data" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true"><span class="fa fa-database"></span> Test Data</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-test-data"><li><a class="dropdown-item" href="../articles/test-data-catalog.html">Test Data Catalog</a></li>
    <li><a class="dropdown-item" href="../articles/test-data-complete-catalog.html">Complete Catalog (945 files)</a></li>
    <li><a class="dropdown-item" href="../articles/function-reference.html">Function Reference</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="http://twitter.com/serdarbalci"><span class="fa fab fa-twitter fa-lg"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/sbalci/ClinicoPathJamoviModule/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Segmentation Metrics (Dice, IoU, Hausdorff)</h1>
      <small class="dont-index">Source: <a href="https://github.com/sbalci/ClinicoPathJamoviModule/blob/HEAD/R/segmentationmetrics.h.R" class="external-link"><code>R/segmentationmetrics.h.R</code></a></small>
      <div class="d-none name"><code>segmentationmetrics.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">segmentationmetrics</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">prediction_mask</span>,</span>
<span>  <span class="va">ground_truth_mask</span>,</span>
<span>  <span class="va">image_id</span>,</span>
<span>  segmentation_type <span class="op">=</span> <span class="st">"binary"</span>,</span>
<span>  <span class="va">positive_class</span>,</span>
<span>  dice_coefficient <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  jaccard_index <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  volumetric_similarity <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  sensitivity_specificity <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  hausdorff_distance <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  average_hausdorff <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  surface_distance <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  surface_overlap <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  boundary_tolerance <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  pixel_size_provided <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  pixel_size_x <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  pixel_size_y <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  class_specific_metrics <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  macro_average <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  weighted_average <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  object_detection_metrics <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  iou_threshold <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  count_metrics <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  confidence_intervals <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  bootstrap_ci <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  bootstrap_samples <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  confidence_level <span class="op">=</span> <span class="fl">0.95</span>,</span>
<span>  quality_thresholds <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  dice_threshold_excellent <span class="op">=</span> <span class="fl">0.9</span>,</span>
<span>  dice_threshold_good <span class="op">=</span> <span class="fl">0.8</span>,</span>
<span>  dice_threshold_acceptable <span class="op">=</span> <span class="fl">0.7</span>,</span>
<span>  stratified_analysis <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">stratify_by</span>,</span>
<span>  outlier_detection <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  outlier_method <span class="op">=</span> <span class="st">"iqr"</span>,</span>
<span>  plot_metric_distribution <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  plot_scatter_comparison <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  plot_boundary_error <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  plot_confusion_matrix <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  plot_performance_by_class <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  application_context <span class="op">=</span> <span class="st">"general"</span>,</span>
<span>  show_interpretation <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  paired_analysis <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">comparison_method</span>,</span>
<span>  missing_handling <span class="op">=</span> <span class="st">"complete"</span>,</span>
<span>  random_seed <span class="op">=</span> <span class="fl">123</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>The data as a data frame.</p></dd>


<dt id="arg-prediction-mask">prediction_mask<a class="anchor" aria-label="anchor" href="#arg-prediction-mask"></a></dt>
<dd><p>AI-predicted segmentation mask. For binary
segmentation, this is a binary variable (0/1 or background/foreground). For
multi-class, this contains class labels. Can be pixel-level or region-level
data.</p></dd>


<dt id="arg-ground-truth-mask">ground_truth_mask<a class="anchor" aria-label="anchor" href="#arg-ground-truth-mask"></a></dt>
<dd><p>Expert-annotated ground truth segmentation mask.
Must have the same encoding scheme as prediction_mask.</p></dd>


<dt id="arg-image-id">image_id<a class="anchor" aria-label="anchor" href="#arg-image-id"></a></dt>
<dd><p>Variable identifying individual images or regions. Used to
aggregate metrics per image and calculate summary statistics across images.</p></dd>


<dt id="arg-segmentation-type">segmentation_type<a class="anchor" aria-label="anchor" href="#arg-segmentation-type"></a></dt>
<dd><p>Type of segmentation task. Binary for single
structure (e.g., tumor vs background), multi-class for multiple tissue
types (e.g., epithelium/stroma/necrosis), instance for individual object
detection (e.g., separate cell nuclei).</p></dd>


<dt id="arg-positive-class">positive_class<a class="anchor" aria-label="anchor" href="#arg-positive-class"></a></dt>
<dd><p>For binary segmentation, specify which level
represents the foreground/ structure of interest (e.g., tumor, gland,
nucleus).</p></dd>


<dt id="arg-dice-coefficient">dice_coefficient<a class="anchor" aria-label="anchor" href="#arg-dice-coefficient"></a></dt>
<dd><p>Calculate Dice coefficient (also known as F1-score
for segmentation). Measures spatial overlap: Dice = 2|A∩B| / (|A|+|B|).
Range 0-1, where 1 = perfect overlap. Most commonly used segmentation
metric.</p></dd>


<dt id="arg-jaccard-index">jaccard_index<a class="anchor" aria-label="anchor" href="#arg-jaccard-index"></a></dt>
<dd><p>Calculate Jaccard Index (Intersection over Union).
Measures overlap: IoU = |A∩B| / |A∪B|. Range 0-1. Related to Dice: IoU =
Dice/(2-Dice). Standard metric in computer vision and AI segmentation.</p></dd>


<dt id="arg-volumetric-similarity">volumetric_similarity<a class="anchor" aria-label="anchor" href="#arg-volumetric-similarity"></a></dt>
<dd><p>Calculate Volumetric Similarity coefficient
for 3D segmentation or area-based similarity in 2D. Useful for volume/area
preservation analysis.</p></dd>


<dt id="arg-sensitivity-specificity">sensitivity_specificity<a class="anchor" aria-label="anchor" href="#arg-sensitivity-specificity"></a></dt>
<dd><p>Calculate pixel-wise sensitivity (true
positive rate) and specificity (true negative rate). Shows
over-segmentation vs under-segmentation.</p></dd>


<dt id="arg-hausdorff-distance">hausdorff_distance<a class="anchor" aria-label="anchor" href="#arg-hausdorff-distance"></a></dt>
<dd><p>Calculate Hausdorff Distance - maximum distance
from predicted boundary to ground truth boundary. Sensitive to outliers.
Measures worst-case boundary error. Reported in pixels or mm if pixel size
provided.</p></dd>


<dt id="arg-average-hausdorff">average_hausdorff<a class="anchor" aria-label="anchor" href="#arg-average-hausdorff"></a></dt>
<dd><p>Calculate Average Hausdorff Distance (95th
percentile). More robust to outliers than maximum Hausdorff. Better
represents typical boundary error.</p></dd>


<dt id="arg-surface-distance">surface_distance<a class="anchor" aria-label="anchor" href="#arg-surface-distance"></a></dt>
<dd><p>Calculate average distance between predicted and
ground truth boundaries. Mean of all point-to-surface distances. Provides
average boundary error.</p></dd>


<dt id="arg-surface-overlap">surface_overlap<a class="anchor" aria-label="anchor" href="#arg-surface-overlap"></a></dt>
<dd><p>Calculate Surface Dice (boundary-focused Dice). Only
considers points near boundaries. Emphasizes boundary accuracy over volume
accuracy.</p></dd>


<dt id="arg-boundary-tolerance">boundary_tolerance<a class="anchor" aria-label="anchor" href="#arg-boundary-tolerance"></a></dt>
<dd><p>Tolerance distance for surface/boundary metrics
in pixels. Points within this distance are considered boundary points.
Typical: 1-5 pixels depending on magnification.</p></dd>


<dt id="arg-pixel-size-provided">pixel_size_provided<a class="anchor" aria-label="anchor" href="#arg-pixel-size-provided"></a></dt>
<dd><p>Whether pixel/voxel physical dimensions are
available for converting pixel-based metrics to physical distances
(micrometers, millimeters).</p></dd>


<dt id="arg-pixel-size-x">pixel_size_x<a class="anchor" aria-label="anchor" href="#arg-pixel-size-x"></a></dt>
<dd><p>Physical size of one pixel in X dimension
(micrometers). Used to convert pixel-based distances to micrometers.
Typical WSI: 0.25-0.5 μm/pixel.</p></dd>


<dt id="arg-pixel-size-y">pixel_size_y<a class="anchor" aria-label="anchor" href="#arg-pixel-size-y"></a></dt>
<dd><p>Physical size of one pixel in Y dimension
(micrometers).</p></dd>


<dt id="arg-class-specific-metrics">class_specific_metrics<a class="anchor" aria-label="anchor" href="#arg-class-specific-metrics"></a></dt>
<dd><p>For multi-class segmentation, calculate
metrics separately for each class (one-vs-rest approach). Shows performance
per tissue type.</p></dd>


<dt id="arg-macro-average">macro_average<a class="anchor" aria-label="anchor" href="#arg-macro-average"></a></dt>
<dd><p>Calculate macro-average (unweighted mean) of metrics
across all classes. Treats all classes equally regardless of size.</p></dd>


<dt id="arg-weighted-average">weighted_average<a class="anchor" aria-label="anchor" href="#arg-weighted-average"></a></dt>
<dd><p>Calculate weighted average of metrics, weighted by
class prevalence/size. Emphasizes performance on larger structures.</p></dd>


<dt id="arg-object-detection-metrics">object_detection_metrics<a class="anchor" aria-label="anchor" href="#arg-object-detection-metrics"></a></dt>
<dd><p>For instance segmentation, calculate
object-level detection metrics: precision, recall, F1-score based on IoU
threshold for matching objects.</p></dd>


<dt id="arg-iou-threshold">iou_threshold<a class="anchor" aria-label="anchor" href="#arg-iou-threshold"></a></dt>
<dd><p>Minimum IoU between predicted and ground truth objects
to consider them matched. Standard: 0.5 for object detection, 0.7 for
strict matching.</p></dd>


<dt id="arg-count-metrics">count_metrics<a class="anchor" aria-label="anchor" href="#arg-count-metrics"></a></dt>
<dd><p>Calculate object counting accuracy for instance
segmentation (e.g., cell count accuracy, absolute/relative counting error).</p></dd>


<dt id="arg-confidence-intervals">confidence_intervals<a class="anchor" aria-label="anchor" href="#arg-confidence-intervals"></a></dt>
<dd><p>Calculate confidence intervals for metrics
across images using bootstrap or normal approximation.</p></dd>


<dt id="arg-bootstrap-ci">bootstrap_ci<a class="anchor" aria-label="anchor" href="#arg-bootstrap-ci"></a></dt>
<dd><p>Use bootstrap resampling for confidence intervals
instead of normal approximation. More accurate for small sample sizes or
skewed distributions.</p></dd>


<dt id="arg-bootstrap-samples">bootstrap_samples<a class="anchor" aria-label="anchor" href="#arg-bootstrap-samples"></a></dt>
<dd><p>Number of bootstrap samples for confidence
interval estimation.</p></dd>


<dt id="arg-confidence-level">confidence_level<a class="anchor" aria-label="anchor" href="#arg-confidence-level"></a></dt>
<dd><p>Confidence level for interval estimation (default
95\<!-- %).} --></p>
<p>quality_thresholdsApply clinical quality thresholds to categorize
segmentation performance (excellent/good/acceptable/poor) based on Dice/IoU
values.</p>
<p>dice_threshold_excellentDice coefficient threshold for "excellent"
segmentation quality. Typical: ≥0.90 for clinical deployment.</p>
<p>dice_threshold_goodDice coefficient threshold for "good"
segmentation quality.</p>
<p>dice_threshold_acceptableDice coefficient threshold for minimally
"acceptable" segmentation. Below this may require human review.</p>
<p>stratified_analysisPerform stratified analysis by image
characteristics (scanner, magnification, staining protocol, tissue type) to
assess consistency.</p>
<p>stratify_byVariable for stratified analysis (e.g., scanner_type,
magnification, stain).</p>
<p>outlier_detectionDetect outlier images with unusually poor
segmentation performance. Flags images requiring expert review.</p>
<p>outlier_methodMethod for outlier detection across images.</p>
<p>plot_metric_distributionPlot distribution of metrics across images
(histogram/violin plot). Shows variability in segmentation quality.</p>
<p>plot_scatter_comparisonScatter plot showing relationship between
Dice and IoU across images.</p>
<p>plot_boundary_errorPlot Hausdorff and surface distances to
visualize boundary accuracy.</p>
<p>plot_confusion_matrixFor multi-class segmentation, show confusion
matrix of pixel classifications.</p>
<p>plot_performance_by_classBar plot showing metrics for each class in
multi-class segmentation.</p>
<p>application_contextClinical/research application context for
interpretation guidance.</p>
<p>show_interpretationProvide interpretation of results including
recommendations for clinical deployment based on performance metrics.</p>
<p>paired_analysisPerform paired statistical tests comparing
segmentation performance between different AI models or methods on the same
images.</p>
<p>comparison_methodVariable identifying different segmentation
methods for comparison.</p>
<p>missing_handlingHow to handle images with missing or incomplete
segmentations.</p>
<p>random_seedRandom seed for bootstrap sampling and other stochastic
procedures.</p></dd>

</dl><p>A results object containing:
</p><table class="table table"><tr><td><code>results$instructions</code></td><td></td><td></td><td></td><td></td><td>a html</td></tr><tr><td><code>results$overallSummary</code></td><td></td><td></td><td></td><td></td><td>a table</td></tr><tr><td><code>results$overlapMetricsTable</code></td><td></td><td></td><td></td><td></td><td>a table</td></tr><tr><td><code>results$distanceMetricsTable</code></td><td></td><td></td><td></td><td></td><td>a table</td></tr><tr><td><code>results$multiclassMetricsTable</code></td><td></td><td></td><td></td><td></td><td>a table</td></tr><tr><td><code>results$instanceMetricsTable</code></td><td></td><td></td><td></td><td></td><td>a table</td></tr><tr><td><code>results$qualityAssessmentTable</code></td><td></td><td></td><td></td><td></td><td>a table</td></tr><tr><td><code>results$outlierImagesTable</code></td><td></td><td></td><td></td><td></td><td>a table</td></tr><tr><td><code>results$stratifiedAnalysisTable</code></td><td></td><td></td><td></td><td></td><td>a table</td></tr><tr><td><code>results$comparisonTable</code></td><td></td><td></td><td></td><td></td><td>a table</td></tr><tr><td><code>results$metricDistributionPlot</code></td><td></td><td></td><td></td><td></td><td>an image</td></tr><tr><td><code>results$scatterComparisonPlot</code></td><td></td><td></td><td></td><td></td><td>an image</td></tr><tr><td><code>results$boundaryErrorPlot</code></td><td></td><td></td><td></td><td></td><td>an image</td></tr><tr><td><code>results$confusionMatrixPlot</code></td><td></td><td></td><td></td><td></td><td>an image</td></tr><tr><td><code>results$performanceByClassPlot</code></td><td></td><td></td><td></td><td></td><td>an image</td></tr><tr><td><code>results$clinicalInterpretation</code></td><td></td><td></td><td></td><td></td><td>a html</td></tr></table>Tables can be converted to data frames with <code>asDF</code> or <code><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></code>. For example:<code>results$overallSummary$asDF</code><code>as.data.frame(results$overallSummary)</code>


Comprehensive validation metrics for image segmentation tasks in digital
pathology and AI-based tissue analysis. Evaluates overlap and boundary
accuracy between AI-predicted segmentations and expert-annotated ground
truth. Essential metrics include Dice Coefficient (F1-score for spatial
overlap), Jaccard Index (IoU - Intersection over Union), Hausdorff Distance
(maximum boundary deviation), and Surface Distance metrics. Designed for
tumor boundary delineation, gland segmentation, cell nuclei detection,
tissue region classification, and any pixel-level or region-based
segmentation task. Supports binary segmentation (single structure),
multi-class segmentation (multiple tissue types), and instance segmentation
(individual object detection). Provides statistical analysis across
multiple images, stratification by image characteristics (magnification,
staining, scanner), and clinical interpretation of segmentation quality.
Critical for validating AI algorithms before deployment in diagnostic
workflows, comparing segmentation methods, and establishing performance
benchmarks for digital pathology systems.


result &lt;- segmentationmetrics(
    data = segmentation_results,
    prediction_mask = "ai_segmentation",
    ground_truth_mask = "expert_annotation",
    image_id = "slide_id",
    metric_type = "all"
)
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://www.serdarbalci.com/" class="external-link">Serdar Balci</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

