% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/generalizedroc.h.R
\name{generalizedroc}
\alias{generalizedroc}
\title{Generalized ROC Analysis}
\usage{
generalizedroc(
  data,
  outcome,
  predictor,
  assume_equal_variance = FALSE,
  transformation = "none",
  distribution_model = "normal",
  calculate_auc = TRUE,
  confidence_intervals = TRUE,
  ci_method = "bootstrap",
  bootstrap_samples = 1000,
  confidence_level = 0.95,
  show_diagnostics = TRUE,
  variance_test = "levene",
  optimal_threshold = TRUE,
  plot_roc = TRUE,
  plot_distributions = TRUE,
  plot_diagnostic = FALSE,
  random_seed = 42,
  use_tram = FALSE,
  covariates = NULL,
  tram_model = "Colr",
  covariate_values = "0, 0.5, 1",
  plot_covariate_roc = TRUE,
  plot_auc_vs_covariate = TRUE,
  n_covariate_points = 50,
  tram_constraints = "none",
  censoring_aware = FALSE
)
}
\arguments{
\item{data}{the data as a data frame}

\item{outcome}{a string naming the outcome variable (binary or ordinal)}

\item{predictor}{a string naming the continuous predictor variable}

\item{assume_equal_variance}{if TRUE, assumes equal variance across groups
(standard ROC); if FALSE, allows unequal variances (generalized ROC)}

\item{transformation}{transformation applied to predictor before analysis}

\item{distribution_model}{assumed distribution for each group}

\item{calculate_auc}{calculate area under the generalized ROC curve}

\item{confidence_intervals}{calculate confidence intervals for AUC and
other parameters}

\item{ci_method}{method for confidence interval calculation}

\item{bootstrap_samples}{number of bootstrap samples for CI calculation}

\item{confidence_level}{confidence level for intervals (default: 0.95 for
95\\% CI)}

\item{show_diagnostics}{show diagnostic tests for normality and variance
equality}

\item{variance_test}{test for equality of variances across groups}

\item{optimal_threshold}{find optimal threshold using Youden's index}

\item{plot_roc}{plot the generalized ROC curve}

\item{plot_distributions}{plot predictor distributions for each outcome
group}

\item{plot_diagnostic}{plot Q-Q plots for normality assessment}

\item{random_seed}{random seed for reproducible bootstrap sampling}

\item{use_tram}{Use tram package for covariate-adjusted transformation
models}

\item{covariates}{Covariates to include in transformation model}

\item{tram_model}{Type of transformation model from tram package}

\item{covariate_values}{Comma-separated covariate values for ROC evaluation}

\item{plot_covariate_roc}{Plot ROC curves as function of covariate values}

\item{plot_auc_vs_covariate}{Plot how AUC changes across covariate values}

\item{n_covariate_points}{Number of points to evaluate across covariate
range}

\item{tram_constraints}{Constraints on transformation function}

\item{censoring_aware}{Use censoring-aware transformation models}
}
\value{
A results object containing:
\tabular{llllll}{
\code{results$instructionsText} \tab \tab \tab \tab \tab a html \cr
\code{results$aucTable} \tab \tab \tab \tab \tab a table \cr
\code{results$parametersTable} \tab \tab \tab \tab \tab a table \cr
\code{results$diagnosticsTable} \tab \tab \tab \tab \tab a table \cr
\code{results$thresholdTable} \tab \tab \tab \tab \tab a table \cr
\code{results$rocPlot} \tab \tab \tab \tab \tab an image \cr
\code{results$distributionPlot} \tab \tab \tab \tab \tab an image \cr
\code{results$qqPlot} \tab \tab \tab \tab \tab an image \cr
\code{results$interpretationText} \tab \tab \tab \tab \tab a html \cr
}

Tables can be converted to data frames with \code{asDF} or \code{\link{as.data.frame}}. For example:

\code{results$aucTable$asDF}

\code{as.data.frame(results$aucTable)}
}
\description{
Generalized ROC (gROC) Analysis extends traditional binary ROC to handle
continuous or ordinal outcomes, particularly when the outcome distributions
have unequal variances across groups.
}
\details{
This method is particularly useful for continuous biomarkers (PD-L1 CPS,
Ki67 percentage), quantitative imaging features, and ordinal scales where
traditional ROC assumptions may be violated.

The generalized approach models the full distribution rather than imposing
binary cutoffs, providing more flexible and robust performance assessment.
}
\examples{
# Example with continuous Ki67 percentage
data <- data.frame(
  outcome = factor(sample(c("Low", "High"), 100, replace=TRUE)),
  ki67_percent = c(rnorm(50, 10, 5), rnorm(50, 40, 15))
)

generalizedroc(
  data = data,
  outcome = 'outcome',
  predictor = 'ki67_percent',
  assume_equal_variance = FALSE,
  transformation = 'none'
)

}
