% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/flexrstpm2.h.R
\name{flexrstpm2}
\alias{flexrstpm2}
\title{Flexible Parametric Models (Royston-Parmar)}
\usage{
flexrstpm2(
  data,
  elapsedtime,
  outcome,
  covariates,
  outcomeLevel = "1",
  scale = "hazard",
  df = 4,
  knots = "",
  boundary_knots = "",
  time_varying_covariates,
  tvc_df = 3,
  cure_fraction = FALSE,
  bhazard,
  link_function = "log",
  smooth_formula = "",
  robust_se = FALSE,
  show_model_summary = TRUE,
  show_coefficients_table = TRUE,
  show_survival_curves = TRUE,
  show_hazard_curves = TRUE,
  show_time_varying_plots = FALSE,
  show_model_diagnostics = TRUE,
  show_residuals = FALSE,
  showSummaries = FALSE,
  showExplanations = FALSE
)
}
\arguments{
\item{data}{the data as a data frame}

\item{elapsedtime}{Survival time or follow-up duration variable}

\item{outcome}{Event indicator variable (0/1, FALSE/TRUE, or factor)}

\item{covariates}{Covariate variables for flexible parametric modeling}

\item{outcomeLevel}{Level of outcome variable indicating event occurrence}

\item{scale}{Scale for the flexible parametric model}

\item{df}{Degrees of freedom for baseline spline function}

\item{knots}{Comma-separated knot positions (optional, overrides df)}

\item{boundary_knots}{Comma-separated boundary knot positions (optional)}

\item{time_varying_covariates}{Covariates with time-varying effects (spline
interactions)}

\item{tvc_df}{Degrees of freedom for time-varying covariate effects}

\item{cure_fraction}{Include cure fraction in the model}

\item{bhazard}{Background hazard variable for relative survival analysis}

\item{link_function}{Link function for baseline transformation}

\item{smooth_formula}{Custom smoothing formula for advanced specifications}

\item{robust_se}{Use robust sandwich estimator for standard errors}

\item{show_model_summary}{Display comprehensive model summary}

\item{show_coefficients_table}{Display table of model coefficients}

\item{show_survival_curves}{Display fitted survival curves}

\item{show_hazard_curves}{Display fitted hazard functions}

\item{show_time_varying_plots}{Display time-varying covariate effect plots}

\item{show_model_diagnostics}{Display model diagnostic plots}

\item{show_residuals}{Display residual analysis plots}

\item{showSummaries}{Generate natural language summaries of results}

\item{showExplanations}{Show detailed methodology explanations}
}
\value{
A results object containing:
\tabular{llllll}{
\code{results$todo} \tab \tab \tab \tab \tab a html \cr
\code{results$modelSummary} \tab \tab \tab \tab \tab a html \cr
\code{results$coefficientsTable} \tab \tab \tab \tab \tab a table \cr
\code{results$timeVaryingTable} \tab \tab \tab \tab \tab a table \cr
\code{results$modelFit} \tab \tab \tab \tab \tab a table \cr
\code{results$splineInfo} \tab \tab \tab \tab \tab a table \cr
\code{results$survivalCurves} \tab \tab \tab \tab \tab an image \cr
\code{results$hazardCurves} \tab \tab \tab \tab \tab an image \cr
\code{results$timeVaryingPlots} \tab \tab \tab \tab \tab an image \cr
\code{results$modelDiagnostics} \tab \tab \tab \tab \tab an image \cr
\code{results$residualPlots} \tab \tab \tab \tab \tab an image \cr
\code{results$splineComponents} \tab \tab \tab \tab \tab an image \cr
\code{results$analysisSummary} \tab \tab \tab \tab \tab a html \cr
\code{results$methodExplanation} \tab \tab \tab \tab \tab a html \cr
}

Tables can be converted to data frames with \code{asDF} or \code{\link{as.data.frame}}. For example:

\code{results$coefficientsTable$asDF}

\code{as.data.frame(results$coefficientsTable)}
}
\description{
Implements Royston-Parmar flexible parametric survival models using
restricted cubic splines to model the baseline log cumulative hazard
function. This approach provides a flexible alternative to standard
parametric models by allowing non-monotonic hazard functions while
maintaining the advantages of parametric modeling including smooth survival
curves, extrapolation capability, and direct modeling of covariate effects
on survival time.
}
\examples{
# Example 1: Basic flexible parametric model
library(rstpm2)
library(survival)

flexrstpm2(
    data = breast_cancer_data,
    elapsedtime = "rectime",
    outcome = "censrec",
    outcomeLevel = "1",
    covariates = c("hormon", "age", "size"),
    df = 4,
    scale = "hazard"
)

# Example 2: Time-varying effects with spline interactions
flexrstpm2(
    data = colon_data,
    elapsedtime = "time",
    outcome = "status",
    outcomeLevel = "1",
    covariates = c("rx", "age", "nodes"),
    time_varying_covariates = c("rx"),
    df = 5,
    tvc_df = 3,
    scale = "odds",
    show_time_varying_plots = TRUE
)

}
