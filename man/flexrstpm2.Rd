% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/flexrstpm2.h.R
\name{flexrstpm2}
\alias{flexrstpm2}
\title{Comprehensive Flexible Parametric Survival Models}
\usage{
flexrstpm2(
  data,
  elapsedtime,
  outcome,
  covariates,
  outcomeLevel = "1",
  scale = "hazard",
  df = 4,
  knots = "",
  boundary_knots = "",
  time_varying_covariates,
  tvc_df = 3,
  cure_fraction = FALSE,
  bhazard,
  group_variable,
  link_function = "log",
  prediction_times = "1, 2, 5, 10",
  extrapolation_time = 20,
  confidence_level = 0.95,
  smooth_formula = "",
  robust_se = FALSE,
  time_ratio = FALSE,
  relative_survival = FALSE,
  model_comparison = TRUE,
  goodness_of_fit = TRUE,
  hazard_analysis = TRUE,
  derivative_analysis = FALSE,
  bootstrap_validation = FALSE,
  bootstrap_samples = 500,
  show_model_summary = TRUE,
  show_coefficients_table = TRUE,
  show_survival_curves = TRUE,
  show_hazard_curves = TRUE,
  show_time_varying_plots = FALSE,
  show_model_diagnostics = TRUE,
  show_residuals = FALSE,
  showSummaries = FALSE,
  showExplanations = FALSE
)
}
\arguments{
\item{data}{the data as a data frame}

\item{elapsedtime}{Survival time or follow-up duration variable}

\item{outcome}{Event indicator variable (0/1, FALSE/TRUE, or factor)}

\item{covariates}{Covariate variables for flexible parametric modeling}

\item{outcomeLevel}{Level of outcome variable indicating event occurrence}

\item{scale}{Scale for the flexible parametric model}

\item{df}{Degrees of freedom for baseline spline function (complexity of
hazard curve). Clinical guide: df=3-4 for most analyses, df=5-6 for complex
patterns. Need ≥30 events per df for reliable results.}

\item{knots}{Comma-separated knot positions (optional, overrides df)}

\item{boundary_knots}{Comma-separated boundary knot positions (optional)}

\item{time_varying_covariates}{Covariates with time-varying effects (spline
interactions)}

\item{tvc_df}{Degrees of freedom for time-varying covariate effects}

\item{cure_fraction}{Include cure fraction in the model}

\item{bhazard}{Background hazard variable for relative survival analysis}

\item{group_variable}{Optional grouping variable for stratified analysis}

\item{link_function}{Link function for baseline transformation}

\item{prediction_times}{Comma-separated list of time points for survival
predictions}

\item{extrapolation_time}{Maximum time for survival curve extrapolation}

\item{confidence_level}{Confidence level for confidence intervals}

\item{smooth_formula}{Custom smoothing formula for advanced specifications}

\item{robust_se}{Use robust sandwich estimator for standard errors}

\item{time_ratio}{Include time ratio (acceleration factor) analysis}

\item{relative_survival}{Perform relative survival analysis (requires
background hazard)}

\item{model_comparison}{Compare flexible parametric models with standard
parametric models}

\item{goodness_of_fit}{Perform goodness of fit tests and model diagnostics}

\item{hazard_analysis}{Generate hazard function estimates and plots}

\item{derivative_analysis}{Include analysis of hazard function derivatives
(acceleration/deceleration)}

\item{bootstrap_validation}{Perform bootstrap validation of model
predictions}

\item{bootstrap_samples}{Number of bootstrap samples for validation (when
bootstrap enabled)}

\item{show_model_summary}{Display comprehensive model summary}

\item{show_coefficients_table}{Display table of model coefficients}

\item{show_survival_curves}{Display fitted survival curves}

\item{show_hazard_curves}{Display fitted hazard functions}

\item{show_time_varying_plots}{Display time-varying covariate effect plots}

\item{show_model_diagnostics}{Display model diagnostic plots}

\item{show_residuals}{Display residual analysis plots}

\item{showSummaries}{Generate natural language summaries of results}

\item{showExplanations}{Show detailed methodology explanations}
}
\value{
A results object containing:
\tabular{llllll}{
\code{results$todo} \tab \tab \tab \tab \tab a html \cr
\code{results$modelSummary} \tab \tab \tab \tab \tab a html \cr
\code{results$coefficientsTable} \tab \tab \tab \tab \tab a table \cr
\code{results$timeVaryingTable} \tab \tab \tab \tab \tab a table \cr
\code{results$modelFit} \tab \tab \tab \tab \tab a table \cr
\code{results$splineInfo} \tab \tab \tab \tab \tab a table \cr
\code{results$parameterEstimates} \tab \tab \tab \tab \tab a table \cr
\code{results$survivalPredictions} \tab \tab \tab \tab \tab a table \cr
\code{results$timeRatioAnalysis} \tab \tab \tab \tab \tab a table \cr
\code{results$relativeSurvivalAnalysis} \tab \tab \tab \tab \tab a table \cr
\code{results$modelComparison} \tab \tab \tab \tab \tab a table \cr
\code{results$goodnessOfFitTests} \tab \tab \tab \tab \tab a table \cr
\code{results$hazardAnalysis} \tab \tab \tab \tab \tab a table \cr
\code{results$derivativeAnalysis} \tab \tab \tab \tab \tab a table \cr
\code{results$bootstrapValidation} \tab \tab \tab \tab \tab a table \cr
\code{results$survivalCurves} \tab \tab \tab \tab \tab an image \cr
\code{results$hazardCurves} \tab \tab \tab \tab \tab an image \cr
\code{results$timeVaryingPlots} \tab \tab \tab \tab \tab an image \cr
\code{results$modelDiagnostics} \tab \tab \tab \tab \tab an image \cr
\code{results$residualPlots} \tab \tab \tab \tab \tab an image \cr
\code{results$splineComponents} \tab \tab \tab \tab \tab an image \cr
\code{results$hazardFunctionPlot} \tab \tab \tab \tab \tab an image \cr
\code{results$splineBasisPlot} \tab \tab \tab \tab \tab an image \cr
\code{results$modelComparisonPlot} \tab \tab \tab \tab \tab an image \cr
\code{results$derivativePlot} \tab \tab \tab \tab \tab an image \cr
\code{results$clinicalSummary} \tab \tab \tab \tab \tab a html \cr
\code{results$analysisSummary} \tab \tab \tab \tab \tab a html \cr
\code{results$methodExplanation} \tab \tab \tab \tab \tab a html \cr
}

Tables can be converted to data frames with \code{asDF} or \code{\link{as.data.frame}}. For example:

\code{results$coefficientsTable$asDF}

\code{as.data.frame(results$coefficientsTable)}
}
\description{
🔬 FLEXIBLE PARAMETRIC SURVIVAL MODELS (Royston-Parmar)
⚕️ CLINICAL USE: Model survival data with smooth, flexible hazard functions
that can capture  complex patterns (increasing, decreasing, or
bathtub-shaped hazards). Better than Cox models  when you need to
extrapolate beyond observed data or estimate absolute risks.
📊 WHEN TO USE: • Cancer survival with complex hazard patterns • Health
economic evaluations requiring extrapolation • Time-varying treatment
effects • Relative survival analysis with population mortality
⚠️ REQUIREMENTS: • Minimum 30 events (preferably ≥50) • Follow-up covering
the period of interest • For df>4: need ≥100 events to avoid overfitting
📈 KEY OUTPUTS: • Hazard ratios with clinical interpretation • Survival
predictions at specific time points • Model fit statistics (AIC,
concordance) • Time-varying effect plots • Copy-ready clinical report
sentences
}
\examples{
# Example 1: Basic flexible parametric model
library(rstpm2)
library(survival)

flexrstpm2(
    data = breast_cancer_data,
    elapsedtime = "rectime",
    outcome = "censrec",
    outcomeLevel = "1",
    covariates = c("hormon", "age", "size"),
    df = 4,
    scale = "hazard"
)

# Example 2: Time-varying effects with spline interactions
flexrstpm2(
    data = colon_data,
    elapsedtime = "time",
    outcome = "status",
    outcomeLevel = "1",
    covariates = c("rx", "age", "nodes"),
    time_varying_covariates = c("rx"),
    df = 5,
    tvc_df = 3,
    scale = "odds",
    show_time_varying_plots = TRUE
)

}
