% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/ihcpredict.b.R, R/ihcpredict.h.R
\name{ihcpredict}
\alias{ihcpredict}
\title{IHC Diagnostic Prediction}
\usage{
ihcpredict(
  data,
  useStoredModel = "stored",
  trainingFile = "",
  trainingDiagnosis = "Diagnosis",
  catVars = NULL,
  contVars = NULL,
  caseId = NULL,
  predictionMethod = "hybrid",
  confidenceThreshold = 0.5,
  highConfidenceThreshold = 0.75,
  lowConfidenceThreshold = 0.25,
  panelWeight = 0.5,
  distanceWeight = 0.3,
  silhouetteWeight = 0.2,
  showAlternatives = TRUE,
  nAlternatives = 3,
  showEvidence = TRUE,
  flagLowConfidence = TRUE,
  showMarkerComparison = TRUE,
  validateMarkers = TRUE,
  requireAllMarkers = TRUE,
  scaleContVars = TRUE,
  handleMissing = "pairwise",
  exportPredictions = FALSE,
  predictionVarName = "Predicted_Diagnosis",
  confidenceVarName = "Prediction_Confidence",
  showPredictionPlot = TRUE,
  showConfidencePlot = TRUE,
  colorPalette = "colorblind",
  fontSize = "medium",
  plotContrast = FALSE
)

ihcpredict(
  data,
  useStoredModel = "stored",
  trainingFile = "",
  trainingDiagnosis = "Diagnosis",
  catVars = NULL,
  contVars = NULL,
  caseId = NULL,
  predictionMethod = "hybrid",
  confidenceThreshold = 0.5,
  highConfidenceThreshold = 0.75,
  lowConfidenceThreshold = 0.25,
  panelWeight = 0.5,
  distanceWeight = 0.3,
  silhouetteWeight = 0.2,
  showAlternatives = TRUE,
  nAlternatives = 3,
  showEvidence = TRUE,
  flagLowConfidence = TRUE,
  showMarkerComparison = TRUE,
  validateMarkers = TRUE,
  requireAllMarkers = TRUE,
  scaleContVars = TRUE,
  handleMissing = "pairwise",
  exportPredictions = FALSE,
  predictionVarName = "Predicted_Diagnosis",
  confidenceVarName = "Prediction_Confidence",
  showPredictionPlot = TRUE,
  showConfidencePlot = TRUE,
  colorPalette = "colorblind",
  fontSize = "medium",
  plotContrast = FALSE
)
}
\arguments{
\item{data}{The query data as a data frame (cases with unknown diagnoses).}

\item{useStoredModel}{Source of the trained reference model}

\item{trainingFile}{Path to CSV file with training cases (must include
Diagnosis column)}

\item{trainingDiagnosis}{Name of the diagnosis variable in training dataset}

\item{catVars}{Binary (pos/neg) or ordinal (0/1/2/3) stain results - must
match training markers}

\item{contVars}{H-scores (0-300), \\% positivity (0-100) - must match
training markers}

\item{caseId}{Case identifier for tracking predictions}

\item{predictionMethod}{Algorithm for predicting diagnoses}

\item{confidenceThreshold}{Minimum confidence score to accept prediction
(0-1)}

\item{highConfidenceThreshold}{Threshold for "High Confidence"
classification}

\item{lowConfidenceThreshold}{Threshold below which cases are flagged as
very low confidence}

\item{panelWeight}{Weight for rule-based panel matches (hybrid method only)}

\item{distanceWeight}{Weight for distance to centroid (hybrid method only)}

\item{silhouetteWeight}{Weight for silhouette score (hybrid method only)}

\item{showAlternatives}{Display differential diagnosis with top 3
alternatives}

\item{nAlternatives}{Number of alternative diagnoses to report}

\item{showEvidence}{Display detailed evidence supporting each prediction}

\item{flagLowConfidence}{Create separate table for cases requiring review}

\item{showMarkerComparison}{Compare query case markers to cluster centroids}

\item{validateMarkers}{Check that query markers match training markers}

\item{requireAllMarkers}{Error if any training markers are missing from
query data}

\item{scaleContVars}{Z-score continuous markers using training set
parameters}

\item{handleMissing}{How to handle missing marker values in query data}

\item{exportPredictions}{Save predicted diagnoses and confidence scores to
dataset}

\item{predictionVarName}{Name for exported prediction variable}

\item{confidenceVarName}{Name for exported confidence score variable}

\item{showPredictionPlot}{Display PCA/MCA plot with query cases and
training clusters}

\item{showConfidencePlot}{Display histogram of prediction confidence scores}

\item{colorPalette}{Color palette for plots}

\item{fontSize}{Base font size for all text elements}

\item{plotContrast}{Enable high contrast mode for better visibility}
}
\value{
A results object containing prediction tables and plots

A results object containing:
\tabular{llllll}{
\code{results$instructions} \tab \tab \tab \tab \tab a html \cr
\code{results$modelSummary} \tab \tab \tab \tab \tab a html \cr
\code{results$validationResults} \tab \tab \tab \tab \tab a table \cr
\code{results$predictions} \tab \tab \tab \tab \tab a table \cr
\code{results$alternativeDiagnoses} \tab \tab \tab \tab \tab a table \cr
\code{results$predictionEvidence} \tab \tab \tab \tab \tab a table \cr
\code{results$lowConfidenceCases} \tab \tab \tab \tab \tab a table \cr
\code{results$markerComparison} \tab \tab \tab \tab \tab a table \cr
\code{results$predictionSummary} \tab \tab \tab \tab \tab a table \cr
\code{results$confidenceByDiagnosis} \tab \tab \tab \tab \tab a table \cr
\code{results$predictionPlot} \tab \tab \tab \tab \tab an image \cr
\code{results$confidencePlot} \tab \tab \tab \tab \tab an image \cr
\code{results$markerHeatmap} \tab \tab \tab \tab \tab an image \cr
\code{results$clinicalGuidance} \tab \tab \tab \tab \tab a html \cr
\code{results$technicalDetails} \tab \tab \tab \tab \tab a html \cr
\code{results$exportSummary} \tab \tab \tab \tab \tab a preformatted \cr
}

Tables can be converted to data frames with \code{asDF} or \code{\link{as.data.frame}}. For example:

\code{results$validationResults$asDF}

\code{as.data.frame(results$validationResults)}
}
\description{
Predicts diagnoses for cases with unknown diagnoses based on IHC marker
expression patterns, using a trained reference model.

Predicts diagnoses for cases with unknown diagnoses based on IHC marker
expression patterns,
using a trained reference model from previously analyzed cases with known
diagnoses.
}
\details{
\strong{Requirements:}
\itemize{
\item Training dataset analyzed with \code{ihccluster} (with known diagnoses)
\item Query dataset with same IHC markers (unknown diagnoses to predict)
\item Marker names and data types must match between datasets
}

\strong{Output:}
\itemize{
\item Predicted diagnosis per case with confidence level
\item Alternative diagnoses (differential)
\item Evidence supporting each prediction
\item Flags for atypical/low-confidence cases
}
}
