% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/patientsimilarity.h.R
\name{patientsimilarity}
\alias{patientsimilarity}
\title{Patient Similarity Clustering}
\usage{
patientsimilarity(
  data,
  vars = NULL,
  method = "tsne",
  dimensions = "2",
  colorBy = NULL,
  perplexity = 30,
  iterations = 1000,
  umapNeighbors = 15,
  umapMinDist = 0.1,
  performClustering = FALSE,
  clusterMethod = "kmeans",
  nClusters = 3,
  showClusterStats = TRUE,
  survivalAnalysis = FALSE,
  survivalTime = NULL,
  survivalEvent = NULL,
  survivalEventLevel,
  scaleVars = TRUE,
  removeOutliers = FALSE,
  showLoadings = FALSE,
  show3DPlot = FALSE
)
}
\arguments{
\item{data}{The dataset to be analyzed, provided as a data frame.}

\item{vars}{Continuous variables to use for calculating patient similarity.
These will be used to compute distances between patients. Categorical
variables should be converted to numeric or one-hot encoded.}

\item{method}{Method for dimensionality reduction: - PCA: Linear method,
preserves global structure - t-SNE: Non-linear, excellent for
visualization, preserves local structure - UMAP: Non-linear, preserves both
local and global structure, faster than t-SNE - MDS: Classical method,
preserves pairwise distances}

\item{dimensions}{Number of dimensions for projection. 2D is easier to
interpret, 3D can reveal additional structure.}

\item{colorBy}{Variable to use for coloring points. Typically an outcome
variable (e.g., disease status, survival, response) to see if it
corresponds to natural patient groupings.}

\item{perplexity}{Perplexity parameter for t-SNE. Roughly corresponds to
the number of nearest neighbors considered. Typical values: 5-50. Higher
values preserve more global structure.}

\item{iterations}{Number of iterations for t-SNE optimization. More
iterations improve convergence but take longer.}

\item{umapNeighbors}{Number of nearest neighbors for UMAP. Controls local
vs global structure. Smaller values preserve local structure, larger values
preserve global.}

\item{umapMinDist}{Minimum distance between points in UMAP. Controls how
tightly points are packed. Smaller values create tighter clusters.}

\item{performClustering}{Automatically identify patient clusters using
k-means or hierarchical clustering on the reduced-dimension space.}

\item{clusterMethod}{Method for clustering patients in the reduced space.}

\item{nClusters}{Number of clusters for k-means or hierarchical clustering.
For DBSCAN, this is ignored.}

\item{showClusterStats}{Display summary statistics for each cluster
including size, characteristics, and outcome distribution.}

\item{survivalAnalysis}{If survival data is available, compare survival
across discovered clusters. Useful for identifying prognostic patient
subtypes.}

\item{survivalTime}{Time to event or censoring for survival analysis.}

\item{survivalEvent}{Event indicator (1=event, 0=censored).}

\item{survivalEventLevel}{Level indicating the event occurred.}

\item{scaleVars}{Standardize variables to mean=0, sd=1 before analysis.
Recommended when variables have different scales.}

\item{removeOutliers}{Remove outliers before analysis using IQR method. May
improve visualization quality.}

\item{showLoadings}{Show how original variables contribute to each
dimension. Only available for PCA and MDS.}

\item{show3DPlot}{Generate interactive 3D plot using plotly (if
dimensions=3).}
}
\value{
A results object containing:
\tabular{llllll}{
\code{results$instructions} \tab \tab \tab \tab \tab a html \cr
\code{results$summaryText} \tab \tab \tab \tab \tab a preformatted \cr
\code{results$projectionPlot} \tab \tab \tab \tab \tab an image \cr
\code{results$projection3D} \tab \tab \tab \tab \tab an image \cr
\code{results$varianceTable} \tab \tab \tab \tab \tab a table \cr
\code{results$loadingsTable} \tab \tab \tab \tab \tab a table \cr
\code{results$clusterHeading} \tab \tab \tab \tab \tab a html \cr
\code{results$clusterSummary} \tab \tab \tab \tab \tab a table \cr
\code{results$clusterCharacteristics} \tab \tab \tab \tab \tab a table \cr
\code{results$clusterOutcomes} \tab \tab \tab \tab \tab a table \cr
\code{results$clusterQuality} \tab \tab \tab \tab \tab a table \cr
\code{results$survivalHeading} \tab \tab \tab \tab \tab a html \cr
\code{results$survivalTable} \tab \tab \tab \tab \tab a table \cr
\code{results$survivalPlot} \tab \tab \tab \tab \tab an image \cr
\code{results$survivalComparison} \tab \tab \tab \tab \tab a table \cr
\code{results$exportClusters} \tab \tab \tab \tab \tab an output \cr
\code{results$exportCoordinates} \tab \tab \tab \tab \tab an output \cr
\code{results$interpretation} \tab \tab \tab \tab \tab a html \cr
}

Tables can be converted to data frames with \code{asDF} or \code{\link{as.data.frame}}. For example:

\code{results$varianceTable$asDF}

\code{as.data.frame(results$varianceTable)}
}
\description{
Visualizes patient similarity using dimensionality reduction techniques
(PCA, t-SNE, UMAP, MDS). Projects high-dimensional patient data into 2D or
3D space to reveal natural patient groupings and subpopulations. Inspired
by Orange Data Mining's interactive projection widgets, adapted for jamovi
with comprehensive cluster analysis and statistical validation.
}
\examples{
# Example 1: Basic t-SNE visualization
library(Rtsne)
data(iris)

patientsimilarity(
    data = iris,
    vars = c("Sepal.Length", "Sepal.Width", "Petal.Length", "Petal.Width"),
    method = "tsne",
    colorBy = "Species"
)

# Example 2: UMAP with cluster analysis
patientsimilarity(
    data = clinical_data,
    vars = c("age", "tumor_size", "grade", "ki67"),
    method = "umap",
    colorBy = "survival_status",
    performClustering = TRUE,
    nClusters = 3,
    showClusterStats = TRUE
)

# Example 3: PCA with survival comparison
patientsimilarity(
    data = pathology_data,
    vars = c("age", "stage", "nodes", "size"),
    method = "pca",
    colorBy = "death",
    dimensions = 3,
    survivalTime = "months",
    survivalEvent = "death"
)

}
