---
name: competingRisksPower
title: Competing Risks Power Analysis (Specialized)
menuGroup: SurvivalD
menuSubgroup: Design and Power Analysis
menuSubtitle: "Specialized for competing events scenarios"
version: '0.0.1'
jas: '1.2'

description:
    main: |
        Power analysis and sample size calculations for competing risks studies. Calculates power for testing
        differences in cumulative incidence functions between groups using Gray's test and subdistribution hazard models.

        This is the specialized function for competing risks power analysis. For unified analysis across all survival
        study types, also consider 'Comprehensive Survival Power Analysis'.
    R:
        dontrun: true
        usage: |
            # example will be added

options:
    - name: data
      type: Data
      description:
          R: >
            The data as a data frame (optional for power calculations).

    - name: analysisType
      title: Analysis Type
      type: List
      options:
        - title: Power Calculation
          name: power
        - title: Sample Size Calculation  
          name: samplesize
        - title: Effect Size Calculation
          name: effectsize
        - title: Detectable Difference
          name: difference
      default: power
      description: >
          Type of power analysis to perform

    - name: alpha
      title: Significance Level (α)
      type: Number
      min: 0.01
      max: 0.20
      default: 0.05
      description: >
          Type I error rate for statistical testing

    - name: power
      title: Statistical Power (1-β)
      type: Number
      min: 0.50
      max: 0.99
      default: 0.80
      description: >
          Desired statistical power (for sample size calculations)

    - name: totalSampleSize
      title: Total Sample Size
      type: Number
      min: 20
      max: 10000
      default: 200
      description: >
          Total sample size for power calculation

    - name: allocationRatio
      title: Allocation Ratio (Group 1:Group 2)
      type: String
      default: "1:1"
      description: >
          Allocation ratio between groups (e.g., "1:1", "2:1")

    - name: followUpTime
      title: Follow-up Time
      type: Number
      min: 0.1
      max: 50
      default: 5
      description: >
          Maximum follow-up time for the study

    - name: accrualTime
      title: Accrual Period
      type: Number
      min: 0.1
      max: 20
      default: 2
      description: >
          Patient accrual/recruitment period

    # Event rates for Group 1
    - name: eventRate1
      title: Event of Interest Rate (Group 1)
      type: Number
      min: 0.01
      max: 0.90
      default: 0.30
      description: >
          Cumulative incidence rate for primary event in Group 1

    - name: competingRate1
      title: Competing Risk Rate (Group 1)
      type: Number
      min: 0.01
      max: 0.90
      default: 0.20
      description: >
          Cumulative incidence rate for competing events in Group 1

    # Event rates for Group 2
    - name: eventRate2
      title: Event of Interest Rate (Group 2)
      type: Number
      min: 0.01
      max: 0.90
      default: 0.40
      description: >
          Cumulative incidence rate for primary event in Group 2

    - name: competingRate2
      title: Competing Risk Rate (Group 2)
      type: Number
      min: 0.01
      max: 0.90
      default: 0.20
      description: >
          Cumulative incidence rate for competing events in Group 2

    - name: hazardRatio
      title: Subdistribution Hazard Ratio
      type: Number
      min: 0.1
      max: 10.0
      default: 1.5
      description: >
          Expected subdistribution hazard ratio between groups

    - name: testType
      title: Statistical Test
      type: List
      options:
        - title: Gray's Test (Log-rank)
          name: gray
        - title: Fine-Gray Subdistribution
          name: finegray
        - title: Cause-Specific Hazards
          name: causespecific
      default: gray
      description: >
          Type of statistical test for competing risks comparison

    - name: distributionType
      title: Event Time Distribution
      type: List
      options:
        - title: Exponential
          name: exponential
        - title: Weibull
          name: weibull
        - title: Log-normal
          name: lognormal
      default: exponential
      description: >
          Assumed distribution for event times

    - name: shape1
      title: Shape Parameter (Group 1)
      type: Number
      min: 0.1
      max: 10
      default: 1.0
      description: >
          Shape parameter for Weibull distribution (Group 1)

    - name: shape2
      title: Shape Parameter (Group 2)
      type: Number
      min: 0.1
      max: 10
      default: 1.0
      description: >
          Shape parameter for Weibull distribution (Group 2)

    - name: numberOfSimulations
      title: Number of Simulations
      type: Number
      min: 100
      max: 10000
      default: 1000
      description: >
          Number of Monte Carlo simulations for power estimation

    - name: showSimulationDetails
      title: Show Simulation Details
      type: Bool
      default: false
      description: >
          Display detailed simulation results and convergence diagnostics

    - name: showEducational
      title: Show Educational Information
      type: Bool
      default: true
      description: >
          Display educational information about competing risks power analysis

    - name: plotPowerCurve
      title: Plot Power Curve
      type: Bool
      default: true
      description: >
          Display power curve across different effect sizes or sample sizes

    - name: plotEventRates
      title: Plot Event Rates
      type: Bool
      default: false
      description: >
          Display visualization of cumulative incidence rates

    - name: sensitivityAnalysis
      title: Perform Sensitivity Analysis
      type: Bool
      default: false
      description: >
          Perform sensitivity analysis across different parameter values

    - name: confidenceLevel
      title: Confidence Level
      type: Number
      min: 0.90
      max: 0.99
      default: 0.95
      description: >
          Confidence level for power estimates
...