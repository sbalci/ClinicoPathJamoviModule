---
name: flexcomprisk
title: Flexible Competing Risks Models
menuGroup: SurvivalD
menuSubgroup: jsurvival Competing Risks
version: '0.0.1'
jas: '1.2'

description:
    main: >
        Performs flexible competing risks analysis using advanced regression 
        techniques including spline-based hazards, time-varying effects, and 
        robust prediction models with comprehensive model validation.
    R:
        dontrun: true
        usage: |
            # example will be added

options:
    - name: data
      type: Data
      description:
          R: >
            The data as a data frame.

    - name: time
      title: Time Variable
      type: Variable
      suggested: [ continuous ]
      permitted: [ numeric ]
      description: >
          Follow-up time variable

    - name: event
      title: Event Variable  
      type: Variable
      suggested: [ ordinal, nominal ]
      permitted: [ factor, numeric ]
      description: >
          Event type variable (0=censored, 1=event of interest, 2=competing event, etc.)

    - name: covs
      title: Covariates
      type: Variables
      suggested: [ continuous, ordinal, nominal ]
      permitted: [ numeric, factor ]
      description: >
          Covariates to include in the model

    - name: eventOfInterest
      title: Event of Interest
      type: Number
      min: 1
      max: 10
      default: 1
      description: >
          Numeric code for the event of interest (primary event)

    - name: modelType
      title: Model Type
      type: List
      options:
        - title: Flexible Parametric (Splines)
          name: splines
        - title: Random Survival Forests
          name: forest
        - title: Cox with Time-Varying Effects
          name: timevarying
        - title: Cause-Specific Hazards
          name: causespecific
        - title: Fine-Gray Subdistribution
          name: finegray
        - title: Ensemble Model
          name: ensemble
      default: splines
      description: >
          Type of flexible competing risks model to fit

    - name: splineType
      title: Spline Type
      type: List
      options:
        - title: Natural Cubic Splines
          name: ns
        - title: Restricted Cubic Splines
          name: rcs
        - title: B-Splines
          name: bs
        - title: P-Splines (Penalized)
          name: ps
      default: rcs
      description: >
          Type of splines for flexible parametric models

    - name: splineDf
      title: Spline Degrees of Freedom
      type: Number
      min: 2
      max: 10
      default: 4
      description: >
          Degrees of freedom for spline functions

    - name: timeInteractions
      title: Time Interactions
      type: Variables
      suggested: [ continuous, ordinal, nominal ]
      permitted: [ numeric, factor ]
      description: >
          Variables with time-varying effects (interactions with time)

    - name: validationType
      title: Validation Method
      type: List
      options:
        - title: Cross-Validation
          name: cv
        - title: Bootstrap
          name: bootstrap
        - title: Split Sample
          name: split
        - title: None
          name: none
      default: cv
      description: >
          Method for model validation and performance assessment

    - name: cvFolds
      title: CV Folds
      type: Number
      min: 3
      max: 10
      default: 5
      description: >
          Number of folds for cross-validation

    - name: bootstrapSamples
      title: Bootstrap Samples
      type: Number
      min: 100
      max: 2000
      default: 500
      description: >
          Number of bootstrap samples for validation

    - name: predictionTimes
      title: Prediction Times
      type: String
      default: "1, 3, 5"
      description: >
          Comma-separated list of time points for prediction

    - name: conf
      title: Confidence Level
      type: Number
      min: 0.5
      max: 0.99
      default: 0.95
      description: >
          Confidence level for confidence intervals

    - name: showModelComparison
      title: Show Model Comparison
      type: Bool
      default: true
      description: >
          Compare performance across different model types

    - name: showValidationResults
      title: Show Validation Results
      type: Bool
      default: true
      description: >
          Display cross-validation and bootstrap results

    - name: showPredictions
      title: Show Predictions
      type: Bool  
      default: true
      description: >
          Display predicted cumulative incidence at specified time points

    - name: showEducational
      title: Show Educational Information
      type: Bool
      default: true
      description: >
          Display educational information about flexible competing risks models

    - name: plotCumulativeIncidence
      title: Plot Cumulative Incidence
      type: Bool
      default: true
      description: >
          Display cumulative incidence function plots

    - name: plotModelComparison
      title: Plot Model Comparison
      type: Bool
      default: false
      description: >
          Display performance comparison plots across models

    - name: plotValidation
      title: Plot Validation
      type: Bool
      default: false
      description: >
          Display validation and calibration plots
...