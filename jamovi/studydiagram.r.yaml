---
name: studydiagram
jrs: '1.1'
title: Study Diagram Results
items:
    - name: todo
      title: Getting Started
      type: Html
      description: Instructions and data format guidance
      clearWith:
        - data_format
        - participant_id
        - step_excluded
        - exclusion_reason_participant
        - step_name
        - participant_count
        - exclusion_reason_summary
        - participant_id_mapping
        - exclusion_reason_mapping

    - name: summary
      title: Study Flow Summary
      type: Table
      description: Summary of participant flow through study steps
      clearWith:
        - data_format
        - participant_id
        - step_excluded
        - exclusion_reason_participant
        - step_name
        - participant_count
        - exclusion_reason_summary
        - participant_id_mapping
        - exclusion_reason_mapping
        - step1_exclusions
        - step2_exclusions
        - step3_exclusions
        - step4_exclusions
        - step5_exclusions
      columns:
        - name: step
          title: Study Step
          type: text
        - name: participants
          title: Participants
          type: integer
        - name: excluded
          title: Excluded
          type: integer
        - name: percent_retained
          title: "% Retained"
          type: number
          format: zto,p
        - name: exclusion_reasons
          title: Exclusion Reasons
          type: text

    - name: plot
      title: Consistency Diagram
      type: Image
      width: 800
      height: 600
      renderFun: .plot
      visible: true

    - name: diagram
      title: Diagram Description
      type: Html
      description: Interactive study flow diagram
      visible: true
      clearWith:
        - data_format
        - diagram_type
        - participant_id
        - step_excluded
        - exclusion_reason_participant
        - step_name
        - participant_count
        - exclusion_reason_summary
        - participant_id_mapping
        - exclusion_reason_mapping
        - step1_exclusions
        - step2_exclusions
        - step3_exclusions
        - step4_exclusions
        - step5_exclusions
        - step1_label
        - step2_label
        - step3_label
        - step4_label
        - step5_label
        - show_percentages
        - show_exclusion_boxes
        - direction
        - color_scheme

    - name: plot
      title: Diagram Plot
      type: Image
      description: Publication-ready diagram plot
      width: 800
      height: 600
      requiresData: true
      clearWith:
        - data_format
        - diagram_type
        - participant_id
        - step_excluded
        - exclusion_reason_participant
        - step_name
        - participant_count
        - exclusion_reason_summary
        - participant_id_mapping
        - exclusion_reason_mapping
        - step1_exclusions
        - step2_exclusions
        - step3_exclusions
        - step4_exclusions
        - step5_exclusions
        - step1_label
        - step2_label
        - step3_label
        - step4_label
        - step5_label
        - show_percentages
        - show_exclusion_boxes
        - direction
        - color_scheme

    - name: interpretation
      title: Interpretation & Guidance
      type: Html
      description: Explanatory text about the diagram and results
      visible: (show_interpretation)
      clearWith:
        - show_interpretation
        - data_format
        - diagram_type

    - name: warnings
      title: Data Quality Warnings
      type: Html
      description: Alerts about potential data quality issues
      clearWith:
        - data_format
        - participant_id
        - step_excluded
        - participant_count

    - name: clinicalSummary
      title: Clinical Summary
      type: Html
      description: Plain-language summary for clinical interpretation
      visible: (show_interpretation)
      clearWith:
        - show_interpretation
        - data_format

    - name: reportSentence
      title: Report Sentence
      type: Html
      description: Copy-ready sentence for manuscripts
      visible: (show_interpretation)
      clearWith:
        - show_interpretation
        - data_format

    - name: aboutAnalysis
      title: About This Analysis
      type: Html
      description: Explanation of analysis type and usage
      visible: (show_interpretation)
      clearWith:
        - show_interpretation
        - diagram_type

    - name: caveatsAssumptions
      title: Caveats & Assumptions
      type: Html
      description: Important considerations and limitations
      visible: (show_interpretation)
      clearWith:
        - show_interpretation
        - data_format
