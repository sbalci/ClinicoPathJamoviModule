---
name: markovmultistate
title: Markov Multi-State Models
menuGroup: SurvivalT
menuSubgroup: jsurvival Multi-State Models
version: '0.0.1'
jas: '1.2'

description:
    main: >
        Fits Markov multi-state models for analyzing transitions between different
        health states over time. Supports homogeneous and non-homogeneous models
        with covariate effects using mstate and msm packages.
    R:
        dontrun: true
        usage: |
            # example will be added

options:
    - name: data
      type: Data
      description:
          R: >
            The data as a data frame.

    - name: time
      title: Time Variable
      type: Variable
      suggested: [ continuous ]
      permitted: [ numeric ]
      description: >
          Follow-up time variable

    - name: event
      title: Event Variable  
      type: Variable
      suggested: [ ordinal, nominal ]
      permitted: [ factor, numeric ]
      description: >
          Event/state variable indicating transitions between states

    - name: subject
      title: Subject ID
      type: Variable
      suggested: [ ordinal, nominal ]
      permitted: [ factor, numeric ]
      description: >
          Subject identifier for longitudinal tracking

    - name: covs
      title: Covariates
      type: Variables
      suggested: [ continuous, ordinal, nominal ]
      permitted: [ numeric, factor ]
      description: >
          Covariates affecting transition intensities

    - name: modelType
      title: Model Type
      type: List
      options:
        - title: Homogeneous Markov (msm)
          name: homogeneous
        - title: Non-homogeneous Markov (mstate)
          name: nonhomogeneous
        - title: Semi-Markov Model
          name: semimarkov
        - title: Multi-state Cox Model
          name: cox
        - title: Illness-Death Model
          name: illnessdeath
        - title: Progressive Model
          name: progressive
      default: homogeneous
      description: >
          Type of multi-state model to fit

    - name: transitionMatrix
      title: Transition Structure
      type: List
      options:
        - title: Reversible (all transitions)
          name: reversible
        - title: Progressive (forward only)
          name: progressive
        - title: Illness-Death (3-state)
          name: illnessdeath
        - title: Competing Risks (absorbing)
          name: competing
        - title: Custom Structure
          name: custom
      default: progressive
      description: >
          Structure of allowed transitions between states

    - name: baselineHazard
      title: Baseline Hazard
      type: List
      options:
        - title: Exponential
          name: exponential
        - title: Weibull
          name: weibull
        - title: Piecewise Constant
          name: piecewise
        - title: B-splines
          name: splines
        - title: Semi-parametric
          name: semiparametric
      default: exponential
      description: >
          Baseline hazard function specification

    - name: estimationMethod
      title: Estimation Method
      type: List
      options:
        - title: Maximum Likelihood
          name: ml
        - title: Partial Likelihood
          name: pl
        - title: EM Algorithm
          name: em
        - title: Bayesian MCMC
          name: bayesian
      default: ml
      description: >
          Method for parameter estimation

    - name: timeUnits
      title: Time Units
      type: List
      options:
        - title: Days
          name: days
        - title: Months
          name: months
        - title: Years
          name: years
        - title: Auto-detect
          name: auto
      default: auto
      description: >
          Time scale for analysis and reporting

    - name: predictionTimes
      title: Prediction Times
      type: String
      default: "1, 3, 5"
      description: >
          Comma-separated list of time points for state predictions

    - name: transitionTimes
      title: Transition Times
      type: String
      default: "0.5, 1, 2, 3, 5"
      description: >
          Time points for transition probability estimation

    - name: conf
      title: Confidence Level
      type: Number
      min: 0.5
      max: 0.99
      default: 0.95
      description: >
          Confidence level for confidence intervals

    - name: maxIterations
      title: Maximum Iterations
      type: Number
      min: 100
      max: 10000
      default: 1000
      description: >
          Maximum iterations for model fitting

    - name: tolerance
      title: Convergence Tolerance
      type: Number
      min: 1e-8
      max: 1e-3
      default: 1e-6
      description: >
          Convergence tolerance for optimization

    - name: showTransitionIntensities
      title: Show Transition Intensities
      type: Bool
      default: true
      description: >
          Display estimated transition intensity matrix

    - name: showTransitionProbs
      title: Show Transition Probabilities
      type: Bool  
      default: true
      description: >
          Display transition probability matrices at specified times

    - name: showStateProbabilities
      title: Show State Probabilities
      type: Bool
      default: true
      description: >
          Display state occupation probabilities over time

    - name: showMeanSojournTimes
      title: Show Mean Sojourn Times
      type: Bool
      default: true
      description: >
          Display expected time spent in each state

    - name: showExpectedRewards
      title: Show Expected Rewards
      type: Bool
      default: false
      description: >
          Display expected rewards/utilities for health economics

    - name: showModelFit
      title: Show Model Fit
      type: Bool
      default: true
      description: >
          Display model fit statistics and diagnostics

    - name: showPredictions
      title: Show Predictions
      type: Bool
      default: true
      description: >
          Display individual and population-level predictions

    - name: showEducational
      title: Show Educational Information
      type: Bool
      default: true
      description: >
          Display educational information about multi-state models

    - name: plotStateProbs
      title: Plot State Probabilities
      type: Bool
      default: true
      description: >
          Display state probability plots over time

    - name: plotTransitionProbs
      title: Plot Transition Probabilities
      type: Bool
      default: false
      description: >
          Display transition probability heatmaps

    - name: plotHazardRatios
      title: Plot Hazard Ratios
      type: Bool
      default: false
      description: >
          Display hazard ratio plots for covariates

    - name: plotModelDiagnostics
      title: Plot Model Diagnostics
      type: Bool
      default: false
      description: >
          Display model diagnostic plots and residuals
...