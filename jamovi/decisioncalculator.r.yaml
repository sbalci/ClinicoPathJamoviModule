---
name:  decisioncalculator
title: Medical Decision Calculator
jrs:   '1.1'

items:

    - name: welcome
      title: ""
      type: Html
      visible: (showWelcome)

    - name: summary
      title: "Summary"
      type: Html
      visible: (showSummary)

    - name: about
      title: "About This Analysis"
      type: Html
      visible: (showAbout)

    - name: assumptions
      title: "Assumptions & Caveats"
      type: Html
      visible: (showAbout)

    - name: glossary
      title: "Clinical Terms Glossary"
      type: Html
      visible: (showGlossary)

    - name:  cTable
      title: ''
      # title: 'Decision Test Statistics'
      type: Table
      rows: 0
      columns:
        - name: newtest
          title: ''
          type: text
        - name: GP
          title: 'Gold Positive'
          type: number
        - name: GN
          title: 'Gold Negative'
          type: number
        - name: Total
          title: 'Total'
          type: number


    - name:  nTable
      title: ''
      # title: 'Decision Test Statistics'
      type: Table
      swapRowsColumns: true
      rows:  1
      columns:
        - name: tablename
          title: ''
          type: text
        - name: TotalPop
          title: 'Total'
          type: number
        - name: DiseaseP
          title: 'Diseased'
          type: number
        - name: DiseaseN
          title: 'Healthy'
          type: number
        - name: TestP
          title: 'Positive Tests'
          type: number
        - name: TestN
          title: 'Negative Tests'
          type: number
        - name: TestT
          title: 'True Test'
          type: number
        - name: TestW
          title: 'Wrong Test'
          type: number
      clearWith:
          - pp
          - pprob


    - name:  ratioTable
      title: ''
      # title: 'Decision Test Statistics'
      type: Table
      swapRowsColumns: true
      rows:  1
      columns:
        - name: tablename
          title: ''
          type: text
        - name: Sens
          title: 'Sensitivity'
          type: number
          format: pc
        - name: Spec
          title: 'Specificity'
          type: number
          format: pc
        - name: AccurT
          title: 'Accuracy'
          type: number
          format: pc
        - name: PrevalenceD
          title: 'Prevalence'
          type: number
          format: pc
        - name: PPV
          title: 'Positive Predictive Value'
          type: number
          format: pc
        - name: NPV
          title: 'Negative Predictive Value'
          type: number
          format: pc
        - name: PostTestProbDisease
          title: 'Post-test Disease Probability'
          type: number
          format: pc
        - name: PostTestProbHealthy
          title: 'Post-test Health Probability'
          type: number
          format: pc
        - name: LRP
          title: Positive Likelihood Ratio
          type: number
          # format: pc
        - name: LRN
          title: Negative Likelihood Ratio
          type: number
          # format: pc
      clearWith:
          - pp
          - pprob

    - name: advancedMetricsTable
      title: 'Advanced Diagnostic Metrics'
      type: Table
      swapRowsColumns: true
      rows: 1
      columns:
        - name: tablename
          title: ''
          type: text
        - name: youdenIndex
          title: "Youden's Index"
          type: number
        - name: balancedAccuracy
          title: 'Balanced Accuracy'
          type: number
          format: pc
        - name: f1Score
          title: 'F1 Score'
          type: number
        - name: mcc
          title: 'Matthews Correlation'
          type: number
        - name: dor
          title: 'Diagnostic Odds Ratio'
          type: number
      clearWith:
          - pp
          - pprob

    # - name:  text3
    #   title: epiR
    #   type:  Preformatted
    #   clearWith:
    #       - pp
    #       - pprob
    #       - fnote
    #   refs: epiR


    # - name:  text4
    #   title: epiR Table Preformatted
    #   type:  Preformatted
    #   clearWith:
    #       - pp
    #       - pprob
    #       - fnote
    #   refs: epiR


    - name: epirTable_ratio
      title: ''
      type: Table
      visible: (ci)
      rows: 0
      columns:
        - name: statsnames
          title: "Decision Statistics"
          type: text
        - name: est
          title: "Estimate"
          type: number
          format: pc
        - name: lower
          title: 'Lower'
          superTitle: '95% Confidence Interval'
          type: number
          format: pc
        - name: upper
          title: 'Upper'
          superTitle: '95% Confidence Interval'
          type: number
          format: pc
      clearWith:
          - pp
          - pprob
      refs:
          - epiR
          - sensspecwiki


    - name: epirTable_number
      title: ''
      visible: (ci)
      type: Table
      rows: 0
      columns:
        - name: statsnames
          title: "Decision Statistics"
          type: text
        - name: est
          title: "Estimate"
          type: number
        - name: lower
          title: 'Lower'
          superTitle: '95% Confidence Interval'
          type: number
        - name: upper
          title: 'Upper'
          superTitle: '95% Confidence Interval'
          type: number
      clearWith:
          - pp
          - pprob
      refs:
          - epiR
          - sensspecwiki


    # - name:  table1
    #   title: 'Table 1'
    #   type:  Html

    - name: plot1
      title: 'Fagan nomogram'
      type: Image
      width:  600
      height: 450
      renderFun: .plot1
      requiresData: true
      visible: (fagan)
      clearWith:
          - pp
          - pprob
          - fagan
      refs:
          - Fagan
          - Fagan2
          - sensspecwiki
          
    # Multiple cut-off comparison table (DiagROC inspired)
    - name: multipleCutoffTable
      title: 'Cut-off Comparison'
      type: Table
      visible: (multiplecuts)
      rows: 0
      columns:
        - name: cutoffName
          title: "Cut-off Scenario"
          type: text
        - name: sensitivity
          title: "Sensitivity"
          type: number
          format: pc
        - name: specificity
          title: "Specificity"
          type: number
          format: pc
        - name: ppv
          title: "PPV"
          type: number
          format: pc
        - name: npv
          title: "NPV"
          type: number
          format: pc
        - name: accuracy
          title: "Accuracy"
          type: number
          format: pc
        - name: youden
          title: "Youden Index"
          type: number
        - name: recommendation
          title: "Clinical Recommendation"
          type: text
      clearWith:
          - multiplecuts
          - cutoff1
          - cutoff2
          - tp1
          - fp1
          - tn1
          - fn1
          - tp2
          - fp2
          - tn2
          - fn2


    # - name: plot2
    #   title: 'Fagan nomogram'
    #   type: Image
    #   width:  600
    #   height: 450
    #   renderFun: .plot2
    #   requiresData: true
    #   visible: (fagan)
    #   clearWith:
    #       - pp
    #       - pprob
    #       - fagan
    #   refs:
    #       - Fagan
    #       - Fagan2

refs:
    - DiagnosticTests
    - sensspecwiki
    - ClinicoPathJamoviModule

...
