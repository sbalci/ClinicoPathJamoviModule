title: Clinical ROC Analysis
name: enhancedROC
jus: '3.0'
stage: 0
compilerMode: tame
children:
  - type: VariableSupplier
    persistentItems: false
    stretchFactor: 1
    children:
      - type: TargetLayoutBox
        label: Outcome Variable
        children:
          - type: VariablesListBox
            name: outcome
            maxItemCount: 1
            isTarget: true
            itemDropBehaviour: overwrite
          - type: LevelSelector
            name: positiveClass
            enable: (outcome)
      - type: TargetLayoutBox
        label: Predictor Variables
        children:
          - type: VariablesListBox
            name: predictors
            isTarget: true
            itemDropBehaviour: emptyspace
  - type: CollapseBox
    label: Analysis Options
    collapsed: false
    stretchFactor: 1
    children:
      - type: LayoutBox
        margin: large
        children:
          - type: LayoutBox
            cell:
              column: 0
              row: 0
            children:
              - type: Label
                label: Analysis Settings
                children:
                  - type: ComboBox
                    name: analysisType
                  - type: ComboBox
                    name: direction
                  - type: CheckBox
                    name: youdenOptimization
          - type: LayoutBox
            cell:
              column: 0
              row: 1
            children:
              - type: Label
                label: Clinical Presets & Thresholds
                children:
                  - type: ComboBox
                    name: clinicalPresets
                  - type: TextBox
                    name: sensitivityThreshold
                    format: number
                  - type: TextBox
                    name: specificityThreshold
                    format: number
                  - type: TextBox
                    name: customCutoffs
                    format: string
  - type: CollapseBox
    label: Output Options
    collapsed: false
    stretchFactor: 1
    children:
      - type: LayoutBox
        margin: large
        children:
          - type: LayoutBox
            cell:
              column: 0
              row: 0
            children:
              - type: Label
                label: Tables
                children:
                  - type: CheckBox
                    name: aucTable
                  - type: CheckBox
                    name: cutoffTable
                  - type: CheckBox
                    name: optimalCutoffs
                  - type: CheckBox
                    name: diagnosticMetrics
                  - type: CheckBox
                    name: clinicalMetrics
          - type: LayoutBox
            cell:
              column: 1
              row: 0
            children:
              - type: Label
                label: Plots
                children:
                  - type: CheckBox
                    name: rocCurve
                  - type: CheckBox
                    name: showCutoffPoints
                    enable: (rocCurve)
                  - type: CheckBox
                    name: showConfidenceBands
                    enable: (rocCurve)
                  - type: ComboBox
                    name: plotTheme
                    enable: (rocCurve)
                  - type: CheckBox
                    name: showMetricsDiff
                  - type: CheckBox
                    name: statisticalComparison
  - type: CollapseBox
    label: Statistical Options
    collapsed: true
    stretchFactor: 1
    children:
      - type: LayoutBox
        margin: large
        children:
          - type: LayoutBox
            cell:
              column: 0
              row: 0
            children:
              - type: Label
                label: Confidence Intervals
                children:
                  - type: TextBox
                    name: confidenceLevel
                    suffix: '%'
                    format: number
                  - type: CheckBox
                    name: useBootstrap
                  - type: TextBox
                    name: bootstrapSamples
                    format: number
                    enable: (useBootstrap)
                  - type: ComboBox
                    name: bootstrapMethod
                    enable: (useBootstrap)
                  - type: CheckBox
                    name: stratifiedBootstrap
                    enable: (useBootstrap)
                  - type: CheckBox
                    name: bootstrapCutoffCI
                    enable: (useBootstrap)
                  - type: CheckBox
                    name: bootstrapPartialAUC
                    enable: (useBootstrap && partialAuc)
          - type: LayoutBox
            cell:
              column: 1
              row: 0
            children:
              - type: Label
                label: Comparisons
                children:
                  - type: CheckBox
                    name: pairwiseComparisons
                  - type: ComboBox
                    name: comparisonMethod
                    enable: (pairwiseComparisons)
  - type: CollapseBox
    label: Class Imbalance Detection
    collapsed: false
    stretchFactor: 1
    children:
      - type: LayoutBox
        margin: large
        children:
          - type: CheckBox
            name: detectImbalance
          - type: TextBox
            name: imbalanceThreshold
            format: number
            enable: (detectImbalance)
          - type: CheckBox
            name: showImbalanceWarning
            enable: (detectImbalance)
          - type: CheckBox
            name: recommendPRC
            enable: (detectImbalance)
  - type: CollapseBox
    label: Clinical Context
    collapsed: true
    stretchFactor: 1
    children:
      - type: LayoutBox
        margin: large
        children:
          - type: LayoutBox
            cell:
              column: 0
              row: 0
            children:
              - type: Label
                label: Clinical Application
                children:
                  - type: ComboBox
                    name: clinicalContext
                  - type: TextBox
                    name: prevalence
                    format: number
              - type: LayoutBox
                margin: large
                children:
                  - type: CheckBox
                    name: useObservedPrevalence
          - type: LayoutBox
            cell:
              column: 1
              row: 0
            children:
              - type: Label
                label: Advanced Options
                children:
                  - type: ComboBox
                    name: smoothMethod
                  - type: CheckBox
                    name: partialAuc
                  - type: ComboBox
                    name: partialAucType
                    enable: (partialAuc)
                  - type: TextBox
                    name: partialRange
                    format: string
                    enable: (partialAuc)
                  - type: CheckBox
                    name: crocAnalysis
                  - type: TextBox
                    name: crocAlpha
                    format: number
                    enable: (crocAnalysis)
                  - type: CheckBox
                    name: convexHull
                  - type: ComboBox
                    name: tiedScoreHandling
                  - type: TextBox
                    name: splineKnots
                    format: number
                    enable: (smoothMethod)
  - type: CollapseBox
    label: Advanced Output
    collapsed: true
    stretchFactor: 1
    children:
      - type: LayoutBox
        margin: large
        children:
          - type: CheckBox
            name: comprehensive_output
          - type: CheckBox
            name: clinical_interpretation
  - type: CollapseBox
    label: Calibration Analysis
    collapsed: true
    stretchFactor: 1
    children:
      - type: LayoutBox
        margin: large
        children:
          - type: LayoutBox
            cell:
              column: 0
              row: 0
            children:
              - type: Label
                label: Calibration Assessment
                children:
                  - type: CheckBox
                    name: calibrationAnalysis
                  - type: CheckBox
                    name: calibrationPlot
                    enable: (calibrationAnalysis)
                  - type: CheckBox
                    name: brierScore
                    enable: (calibrationAnalysis)
                  - type: CheckBox
                    name: calibrationMetrics
                    enable: (calibrationAnalysis)
              - type: LayoutBox
                margin: large
                children:
                  - type: CheckBox
                    name: splineCalibration
                  - type: CheckBox
                    name: eoRatio
                    enable: (calibrationAnalysis)
                  - type: CheckBox
                    name: namDagostino
                    enable: (calibrationAnalysis)
                  - type: CheckBox
                    name: greenwoodNam
                    enable: (calibrationAnalysis)
                  - type: CheckBox
                    name: calibrationBelt
                    enable: (calibrationAnalysis)
                  - type: CheckBox
                    name: calibrationDensity
                    enable: (calibrationAnalysis)
          - type: LayoutBox
            cell:
              column: 1
              row: 0
            children:
              - type: Label
                label: Goodness-of-Fit
                children:
                  - type: CheckBox
                    name: hosmerLemeshow
                    enable: (calibrationAnalysis)
                  - type: TextBox
                    name: hlGroups
                    format: number
                    enable: (calibrationAnalysis && hosmerLemeshow)
  - type: CollapseBox
    label: Multi-Class ROC
    collapsed: true
    stretchFactor: 1
    children:
      - type: LayoutBox
        margin: large
        children:
          - type: CheckBox
            name: multiClassROC
          - type: ComboBox
            name: multiClassStrategy
            enable: (multiClassROC)
          - type: ComboBox
            name: multiClassAveraging
            enable: (multiClassROC)
  # - type: CollapseBox
  #   label: Time-Dependent ROC
  #   collapsed: true
  #   stretchFactor: 1
  #   children:
  #     - type: LayoutBox
  #       margin: large
  #       children:
  #         - type: CheckBox
  #           name: timeDependentROC
  #         - type: TextBox
  #           name: timePoints
  #           format: string
  #           enable: (timeDependentROC)
  #         - type: ComboBox
  #           name: tdRocMethod
  #           enable: (timeDependentROC)
  - type: CollapseBox
    label: Clinical Impact
    collapsed: true
    stretchFactor: 1
    children:
      - type: LayoutBox
        margin: large
        children:
          - type: CheckBox
            name: clinicalImpact
          - type: CheckBox
            name: nntCalculation
            enable: (clinicalImpact)
          - type: CheckBox
            name: clinicalUtilityCurve
            enable: (clinicalImpact)
          - type: CheckBox
            name: decisionImpactTable
            enable: (clinicalImpact)
          # - type: CheckBox
          #   name: survivalROC
          - type: CheckBox
            name: harrellCIndex
          - type: CheckBox
            name: unoCStatistic
          - type: CheckBox
            name: incidentDynamic
          - type: CheckBox
            name: cumulativeDynamic
          - type: CheckBox
            name: competingRisksConcordance
  - type: CollapseBox
    label: Plot Settings
    collapsed: true
    stretchFactor: 1
    children:
      - type: LayoutBox
        margin: large
        children:
          - type: TextBox
            name: plotWidth
            format: number
          - type: TextBox
            name: plotHeight
            format: number
  - type: CollapseBox
    label: Validation & Model Performance
    collapsed: true
    stretchFactor: 1
    children:
      - type: LayoutBox
        margin: large
        children:
          - type: LayoutBox
            cell:
              column: 0
              row: 0
            children:
              - type: Label
                label: Validation Settings
                children:
                  - type: ComboBox
                    name: validationMethod
                  - type: CheckBox
                    name: optimismCorrection
                  - type: CheckBox
                    name: externalValidation
                  - type: CheckBox
                    name: internalValidation
          - type: LayoutBox
            cell:
              column: 1
              row: 0
            children:
              - type: Label
                label: Advanced Performance Analysis
                children:
                  - type: CheckBox
                    name: decisionImpactCurves
                  - type: CheckBox
                    name: netBenefitRegression
                  - type: CheckBox
                    name: modelUpdating
                  - type: CheckBox
                    name: transportability
