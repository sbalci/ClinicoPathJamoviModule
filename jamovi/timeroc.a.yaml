---
name: timeroc
title: Enhanced ROC Analysis
menuGroup: SurvivalExtraD
menuSubgroup: ClinicoPath Survival
menuSubtitle: 'Time-Dependent & Binary ROC'
version: '1.1.0'
jas: '1.2'

options:
    - name: data
      type: Data

    - name: elapsedtime
      title: 'Time Elapsed'
      type: Variable
      suggested: [ continuous ]
      permitted: [ numeric ]

    - name: outcome
      title: 'Outcome'
      type: Variable
      suggested: [ ordinal, nominal, continuous ]
      permitted: [ factor, numeric ]

    - name: outcomeLevel
      title: Event Level
      type: Level
      variable: (outcome)

    - name: marker
      title: 'Marker Variable'
      type: Variable
      suggested: [ continuous ]
      permitted: [ numeric ]

    - name: timepoints
      title: Evaluation Timepoints
      type: String
      default: '12, 36, 60'

    - name: method
      title: ROC Estimation Method
      type: List
      options:
        - title: Incident/Dynamic
          name: incident
        - title: Cumulative/Dynamic
          name: cumulative
        - title: Incident/Static
          name: static
      default: incident

    - name: bootstrapCI
      title: Bootstrap Confidence Intervals
      type: Bool
      default: false

    - name: nboot
      title: Number of Bootstrap Samples
      type: Integer
      default: 100
      min: 10
      max: 1000

    - name: plotROC
      title: Plot ROC Curves
      type: Bool
      default: true

    - name: plotAUC
      title: Plot AUC Over Time
      type: Bool
      default: true

    - name: timetypeoutput
      title: Time Units
      type: List
      options:
        - title: days
          name: days
        - title: weeks  
          name: weeks
        - title: months
          name: months
        - title: years
          name: years
      default: months
      description:
        R: >
          Time units for display in plots and results.

    - name: showOptimalCutoff
      title: Show Optimal Cutoff Values
      type: Bool
      default: true
      description:
        R: >
          Calculate and display optimal cutoff points that maximize Youden index.

    - name: showMarkerStats
      title: Show Marker Statistics
      type: Bool  
      default: true
      description:
        R: >
          Display descriptive statistics for the marker variable.

    - name: compareBaseline
      title: Compare to Baseline Model
      type: Bool
      default: false
      description:
        R: >
          Compare marker performance to a baseline model (AUC = 0.5).

    - name: smoothAUC
      title: Smooth AUC Curve
      type: Bool
      default: false
      description:
        R: >
          Apply smoothing to the AUC over time plot for better visualization.

    - name: analysisType
      title: Analysis Type
      type: List
      options:
        - title: Time-Dependent ROC
          name: timedep
        - title: General Binary ROC
          name: binary
      default: timedep
      description:
        R: >
          Choose between time-dependent ROC analysis or general binary classification ROC.

    - name: compareROCs
      title: Compare ROC Curves
      type: Bool
      default: false
      description:
        R: >
          Compare multiple ROC curves using statistical tests (DeLong test for binary ROC).

    - name: markers
      title: 'Multiple Markers (for comparison)'
      type: Variables
      suggested: [ continuous ]
      permitted: [ numeric ]
      description:
        R: >
          Additional marker variables to compare against the primary marker.

    - name: rocComparison
      title: ROC Comparison Method
      type: List
      options:
        - title: DeLong Test
          name: delong
        - title: Bootstrap Test  
          name: bootstrap
        - title: Venkatraman Test
          name: venkatraman
      default: delong
      description:
        R: >
          Statistical method for comparing ROC curves (binary analysis only).

    - name: youdenIndex
      title: Calculate Youden Index
      type: Bool
      default: true
      description:
        R: >
          Calculate Youden index (sensitivity + specificity - 1) for optimal threshold selection.

...
