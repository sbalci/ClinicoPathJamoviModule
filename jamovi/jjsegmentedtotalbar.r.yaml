---
name: jjsegmentedtotalbar
title: Segmented Total Bar Charts
jrs: '1.1'

items:
    - name: instructions
      title: 'Instructions'
      type: Html
      visible: true

    - name: plot
      title: Segmented Total Bar Chart (ggplot2)
      type: Image
      width: 650
      height: 450
      requiresData: true
      renderFun: .plot

    - name: plot_ggsegmented
      title: Segmented Total Bar Chart (ggsegmentedtotalbar)
      type: Image
      width: 650
      height: 450
      requiresData: true
      renderFun: .plot_ggsegmented
      visible: true

    - name: summary
      title: 'Chart Summary'
      type: Table
      rows: 1
      clearWith:
        - x_var
        - y_var
        - fill_var
      columns:
        - name: categories
          title: 'Categories'
          type: integer
        - name: segments
          title: 'Segments'
          type: integer
        - name: total_observations
          title: 'Total Observations'
          type: integer
        - name: chart_type
          title: 'Chart Type'
          type: text

    - name: composition_table
      title: 'Composition Analysis'
      type: Table
      clearWith:
        - x_var
        - y_var
        - fill_var
      columns:
        - name: category
          title: 'Category'
          type: text
        - name: segment
          title: 'Segment'
          type: text
        - name: count
          title: 'Count'
          type: integer
        - name: percentage
          title: 'Percentage'
          type: number
          format: pc
        - name: total_in_category
          title: 'Category Total'
          type: integer

    - name: detailed_stats
      title: 'Detailed Statistics'
      type: Table
      clearWith:
        - x_var
        - y_var
        - fill_var
      columns:
        - name: measure
          title: 'Measure'
          type: text
        - name: value
          title: 'Value'
          type: text

    - name: interpretation
      title: 'Chart Interpretation'
      type: Html
      clearWith:
        - x_var
        - y_var
        - fill_var

    - name: clinical_summary
      title: 'Clinical Summary'
      type: Html
      clearWith:
        - x_var
        - y_var
        - fill_var

    - name: statistical_tests
      title: 'Statistical Tests'
      type: Table
      visible: false
      clearWith:
        - x_var
        - y_var
        - fill_var
        - show_statistical_tests
      columns:
        - name: test_name
          title: 'Test'
          type: text
        - name: statistic
          title: 'Chi-square'
          type: number
        - name: df
          title: 'df'
          type: integer
        - name: p_value
          title: 'p-value'
          type: number
          format: zto,pvalue
        - name: interpretation
          title: 'Interpretation'
          type: text

    - name: preset_guidance
      title: 'Template Guidance'
      type: Html
      visible: false
      clearWith:
        - analysis_preset

refs:
    - ClinicoPathJamoviModule
    - ggplot2
    - ggsegmentedtotalbar

    - stringr
...
