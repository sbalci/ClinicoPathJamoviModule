---
name:  jjbarstats
title: Bar Charts
menuGroup: JJStatsPlotD
menuSubgroup: 'Categorical vs Categorical'
# menuSubtitle: 'Bar Charts, Grouped Bar Charts'
version: '0.0.32'
jas: '1.2'

description:
    main: |
        'Wrapper Function for ggstatsplot::ggbarstats and
        ggstatsplot::grouped_ggbarstats to generate Bar Charts.'
    R:
        dontrun: true
        usage: |
            # example will be added

options:

    - name: data
      type: Data
      description:
          R: >
            The data as a data frame.


    - name: dep
      title: Dependent Variable
      type: Variables
      suggested: [ ordinal, nominal ]
      permitted: [ factor ]

    - name: group
      title: Grouping Variable
      type: Variable
      suggested: [ ordinal, nominal ]
      permitted: [ factor ]

    - name: grvar
      title: 'Split By (Optional)'
      type: Variable
      suggested: [ ordinal, nominal ]
      permitted: [ factor ]
      default: NULL

    - name: counts
      title: 'Counts (Optional)'
      type: Variable
      suggested: [ continuous ]
      permitted: [ numeric ]
      default: NULL
      description:
          R: >
            A variable in data containing counts, or NULL if each row 
            represents a single observation.


    # - name: direction
    #   title: 'Measurement Type'
    #   type: List
    #   options:
    #     - title: Repeated (within groups)
    #       name: repeated
    #     - title: Independent (between groups)
    #       name: independent
    #   default: independent
    #   description:
    #       ui: options for measurement type
    #       R: select measurement type (repeated or independent)


    - name: excl
      title: Exclude Missing (NA)
      type: Bool
      default: false


    - name: typestatistics
      title: 'Type of Statistic'
      type: List
      options:
        - title: Parametric
          name: parametric
        - title: Nonparametric
          name: nonparametric
        - title: Robust
          name: robust
        - title: Bayes
          name: bayes
      default: parametric

    - name: pairwisecomparisons
      title: Pairwise Comparisons
      type: Bool
      default: false

    - name: pairwisedisplay
      title: 'Pairwise Display'
      type: List
      options:
        - title: significant
          name: significant
        - title: non-significant
          name: non-significant
        - title: everything
          name: everything
      default: significant


    - name: padjustmethod
      title: 'Adjustment Method'
      type: List
      options:
        - title: holm
          name: holm
        - title: hochberg
          name: hochberg
        - title: hommel
          name: hommel
        - title: bonferroni
          name: bonferroni
        - title: BH
          name: BH
        - title: BY
          name: BY
        - title: fdr
          name: fdr
        - title: none
          name: none
      default: holm


    - name: originaltheme
      title: Add GGStatsPlot Layer
      type: Bool
      default: false

    - name: resultssubtitle
      title: Show Statistical Results in Subtitle
      type: Bool
      default: false
      description:
          R: >
            Display statistical test results in plot subtitle. 
            Disabling improves performance significantly.

    - name: messages
      title: Show Console Messages
      type: Bool
      default: false
      description:
          R: >
            Display statistical messages in console. 
            Disabling improves performance.

    - name: paired
      title: Paired/Repeated Measures
      type: Bool
      default: false
      description:
          R: >
            Logical indicating whether data came from a within-subjects 
            or repeated measures design study. If TRUE, McNemar's test 
            will be used. If FALSE, Pearson's chi-square test will be used.

    - name: label
      title: Label Display
      type: List
      options:
        - title: Percentage
          name: percentage
        - title: Counts
          name: counts
        - title: Both
          name: both
      default: percentage
      description:
          R: >
            What information needs to be displayed on the label 
            in each bar segment.

    - name: digits
      title: Decimal Digits
      type: Integer
      default: 2
      min: 0
      max: 5
      description:
          R: >
            Number of digits after decimal point for statistical results.

    - name: digitsperc
      title: Percentage Decimal Digits
      type: Integer
      default: 0
      min: 0
      max: 2
      description:
          R: >
            Number of decimal places for percentage labels.

    - name: proportiontest
      title: Proportion Test
      type: Bool
      default: false
      description:
          R: >
            Decides whether proportion test for x variable is to be 
            carried out for each level of y.

    - name: bfmessage
      title: Bayes Factor Message
      type: Bool
      default: false
      description:
          R: >
            Display Bayes Factor in favor of the null hypothesis. 
            Only relevant for parametric test.

    - name: conflevel
      title: Confidence Level
      type: Number
      default: 0.95
      min: 0.00
      max: 1.00
      description:
          R: >
            Confidence/credible interval level.

    - name: ratio
      title: Expected Proportions (Optional)
      type: String
      default: ''
      description:
          R: >
            A comma-separated list of expected proportions for the proportion test 
            (should sum to 1). For example: '0.5,0.5' for two equal groups or 
            '0.25,0.25,0.25,0.25' for four equal groups. Leave empty for equal 
            theoretical proportions.

    - name: clinicalpreset
      title: Clinical Analysis Preset
      type: List
      options:
        - title: Custom (manual configuration)
          name: custom
        - title: Diagnostic Test (2×2 table)
          name: diagnostic
        - title: Treatment Response (multiple groups)
          name: treatment
        - title: Biomarker Expression (ordinal levels)
          name: biomarker
        - title: Risk Factor Analysis
          name: riskfactor
      default: custom
      description:
          R: >
            Predefined configurations for common clinical scenarios. 
            Automatically sets appropriate statistical methods and parameters.

    - name: showexplanations
      title: Show Clinical Explanations
      type: Bool
      default: false
      description:
          R: >
            Display detailed explanations of statistical methods, assumptions,
            and clinical interpretations to guide analysis and result interpretation.

    - name: showSummary
      title: Show Analysis Summary
      type: Bool
      default: true
      description:
          R: >
            Display natural-language summary paragraph with key findings
            suitable for copying into reports and publications.

    - name: showAssumptions
      title: Show Assumptions & Warnings
      type: Bool
      default: true
      description:
          R: >
            Display statistical assumptions panel with detected violations,
            warnings about chi-square expected counts, and Fisher exact test
            recommendations.

    - name: showInterpretation
      title: Show Interpretation Guide
      type: Bool
      default: false
      description:
          R: >
            Display effect size interpretation guidelines (Cramér's V thresholds),
            clinical context based on analysis preset, and methodological notes.

    - name: addGGPubrBalloon
      title: Add Balloon Plot (ggpubr)
      type: Bool
      default: false
      description:
          R: >
            Add balloon plot for contingency table visualization using ggpubr.

    - name: ggpubrBalloonPalette
      title: Balloon Plot Palette
      type: List
      options:
        - title: Journal of Clinical Oncology (jco)
          name: jco
        - title: Lancet
          name: lancet
        - title: Grey scale
          name: grey
      default: jco
      description:
          R: >
            Color palette for balloon plot.

...

