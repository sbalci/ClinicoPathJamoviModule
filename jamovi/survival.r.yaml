---
name:  survival
title: Survival Analysis
# title: '`Survival Analysis - ${explanatory}`'
jrs:   '1.1'


items:
    - name: subtitle
      title: '`Survival Analysis - ${explanatory}`'
      type:  Preformatted



    - name:  todo
      title: To Do
      type:  Html
      clearWith:
          - explanatory
          - outcome
          - outcomeLevel
          - elapsedtime
          - fudate
          - dxdate
          - tint
          - multievent


    # - name:  mydataview
    #   title: mydataview
    #   type:  Preformatted


    # - name:  medianSummary2
    #   title: medianSummary2
    #   type:  Preformatted

    - name:  medianSurvivalHeading
      title: Median Survival Analysis
      type:  Preformatted

    - name:  medianSummary
      # title: Median Survival Summary and Table
      title: '`Median Survival Summary and Table - ${explanatory}`'
      type:  Preformatted
      visible: (showSummaries)
      clearWith:
          - explanatory
          - outcome
          - outcomeLevel
          - elapsedtime
          - fudate
          - dxdate
          - tint
          - multievent

    - name:  medianTable
      # title: Median Survival Table
      title: '`Median Survival Table: Levels for ${explanatory}`'
      type:  Table
      rows: 0
      columns:
        - name: factor
          title: "Levels"
          # title: '`Factor - ${explanatory}`'
          type: text
        - name: records
          title: "Records"
          type: integer
        # - name: n_max
        #   title: "n_max"
        #   type: number
        # - name: n_start
        #   title: "n_start"
        #   type: number
        - name: events
          title: "Events"
          type: integer
        - name: rmean
          title: "rmean"
          type: number
        - name: se_rmean
          title: "se_rmean"
          type: number
        - name: median
          title: "Median"
          type: number
        - name: x0_95lcl
          title: "Lower"
          superTitle: '95% Confidence Interval'
          type: number
        - name: x0_95ucl
          title: "Upper"
          superTitle: '95% Confidence Interval'
          type: number
      clearWith:
          - explanatory
          - outcome
          - outcomeLevel
          - elapsedtime
          - fudate
          - dxdate
          - tint
          - multievent

    # Median Survival Explanation
    - name:  medianSurvivalHeading3
      title: Median Survival Analysis Explanations
      type:  Preformatted
      visible: (showExplanations)

    - name: medianSurvivalExplanation
      title: Understanding Median Survival Analysis
      type: Html
      visible: (showExplanations)
      clearWith:
          - explanatory
          - outcome








    - name:  coxRegressionHeading
      title: Cox Regression Analysis
      type:  Preformatted
      


    - name:  coxSummary
      # title: Cox Regression Summary and Table
      title: '`Cox Regression Summary and Table - ${explanatory}`'
      type:  Preformatted
      visible: (showSummaries)
      clearWith:
          - explanatory
          - outcome
          - outcomeLevel
          - elapsedtime
          - fudate
          - dxdate
          - tint
          - multievent



    - name:  coxTable
      # title: Cox Table
      title: '`Cox Table- ${explanatory}`'
      type:  Table
      rows: 0
      columns:
        - name: Explanatory
          title: "Explanatory"
          type: text
        - name: 'Levels'
          title: "Levels"
          type: text
        - name: 'all'
          title: "all"
          type: text
        - name: 'HR_univariable'
          title: "HR (Univariable)"
          type: text
        # - name: 'HR_multivariable'
        #   title: "HR (Multivariable)"
        #   type: text
      clearWith:
          - explanatory
          - outcome
          - outcomeLevel
          - elapsedtime
          - fudate
          - dxdate
          - tint
          - multievent



    - name:  tCoxtext2
      title: ''
      type:  Html
      refs: finalfit
      clearWith:
          - explanatory
          - outcome
          - outcomeLevel
          - elapsedtime
          - fudate
          - dxdate
          - tint
          - multievent
          - contexpl



    - name:  coxRegressionHeading3
      title: Cox Regression Analysis Explanations
      type:  Preformatted
      visible: (showExplanations)

    # Cox Regression Explanation
    - name: coxRegressionExplanation
      title: Understanding Cox Regression Analysis
      type: Html
      visible: (showExplanations)
      clearWith:
          - explanatory
          - outcome






    - name: cox_ph
      title: 'Proportional Hazards Assumption'
      type:  Preformatted
      visible: (ph_cox)
      clearWith:
          - explanatory
          - outcome
          - outcomeLevel
          - elapsedtime
          - fudate
          - dxdate
          - tint
          - multievent
          - contexpl



    - name: plot8
      title: '`Proportional Hazards Assumption - ${explanatory}`'
      type: Image
      width:  600
      height: 450
      renderFun: .plot8
      visible: (ph_cox)
      requiresData: true
      clearWith:
          - ph_cox
          - endplot
          - byplot
          - explanatory
          - outcome
          - outcomeLevel
          - elapsedtime
          - fudate
          - dxdate
          - tint
          - multievent


    - name:  survivalTablesHeading
      title: Survival Probability Tables
      type:  Preformatted


    - name:  survTableSummary
      # title: '1, 3, 5-yr Survival Summary and Table'
      title: '`1, 3, 5-yr Survival Summary and Table  - ${explanatory}`'
      type:  Preformatted
      visible: (showSummaries)
      clearWith:
          - explanatory
          - outcome
          - outcomeLevel
          - elapsedtime
          - fudate
          - dxdate
          - tint
          - multievent




    # - name:  tableview
    #   title: tableview
    #   type:  Preformatted


    - name:  survTable
      title: '`1, 3, 5 year Survival - ${explanatory}`'
      # title: '1, 3, 5 year Survival'
      type:  Table
      rows: 0
      columns:
        - name: strata
          title: "Levels"
          type: text
        - name: 'time'
          title: "time"
          type: integer
        - name: n.risk
          title: "Number at Risk"
          type: integer
        - name: n.event
          title: "Number of Events"
          type: integer
        - name: surv
          title: "Survival"
          type: number
          format: pc
        - name: lower
          title: "Lower"
          superTitle: '95% Confidence Interval'
          type: number
          format: pc
        - name: upper
          title: "Upper"
          superTitle: '95% Confidence Interval'
          type: number
          format: pc
      clearWith:
          - explanatory
          - outcome
          - outcomeLevel
          - elapsedtime
          - fudate
          - dxdate
          - tint
          - multievent




    # Survival Tables Explanation
    - name:  survivalTablesHeading3
      title: Survival Tables Explanations
      type:  Preformatted
      visible: (showExplanations)

    - name: survivalTablesExplanation
      title: Understanding Survival Probability Tables
      type: Html
      visible: (showExplanations)
      clearWith:
          - explanatory
          - outcome






    - name:  personTimeHeading
      title: Person-Time Analysis
      type:  Preformatted
      visible: (person_time)
      

    - name: personTimeTable
      title: 'Person-Time Analysis'
      type: Table
      visible: (person_time)
      rows: 0
      columns:
        - name: interval
          title: "Time Interval"
          type: text
        - name: events
          title: "Events"
          type: integer
        - name: person_time
          title: "Person-Time"
          type: number
          format: zto
        - name: rate
          title: "Incidence Rate"
          type: number
          format: zto
        - name: rate_ci_lower
          title: "Lower"
          superTitle: '95% CI'
          type: number
          format: zto
        - name: rate_ci_upper
          title: "Upper"
          superTitle: '95% CI'
          type: number
          format: zto
      clearWith:
        - outcome
        - outcomeLevel
        - elapsedtime
        - rate_multiplier
        - time_intervals
        - person_time
        - outcome
        - outcomeLevel
        - elapsedtime
        - fudate
        - dxdate
        - tint
        - multievent

    - name: personTimeSummary
      title: 'Person-Time Summary'
      type: Html
      visible: (person_time)
      clearWith:
        - outcome
        - outcomeLevel
        - elapsedtime
        - rate_multiplier
        - time_intervals
        - person_time
        - outcome
        - outcomeLevel
        - elapsedtime
        - fudate
        - dxdate
        - tint
        - multievent


    # Person-Time Analysis Explanation
    - name: personTimeExplanation
      title: Understanding Person-Time Analysis
      type: Html
      visible: (person_time && showExplanations)
      clearWith:
          - person_time
          - explanatory
          - outcome



    - name:  rmstHeading
      title: RMST Analysis
      type:  Preformatted
      visible: (rmst_analysis)
      



    - name: rmstTable
      title: 'Restricted Mean Survival Time'
      type: Table
      visible: (rmst_analysis)
      rows: 0
      columns:
        - name: group
          title: "Group"
          type: text
        - name: rmst
          title: "RMST"
          type: number
          format: zto
        - name: se
          title: "SE"
          type: number
          format: zto
        - name: ci_lower
          title: "Lower"
          superTitle: '95% CI'
          type: number
          format: zto
        - name: ci_upper
          title: "Upper"
          superTitle: '95% CI'
          type: number
          format: zto
        - name: tau
          title: "Time Horizon (τ)"
          type: number
          format: zto
      clearWith:
        - rmst_analysis
        - rmst_tau
        - explanatory
        - outcome
        - outcomeLevel
        - elapsedtime

    - name: rmstSummary
      title: 'RMST Interpretation'
      type: Preformatted
      visible: (rmst_analysis && showSummaries)
      clearWith:
        - rmst_analysis
        - rmst_tau
        - explanatory
        - outcome
        - outcomeLevel
        - elapsedtime



    # RMST Analysis Explanation
    - name: rmstExplanation
      title: Understanding Restricted Mean Survival Time (RMST)
      type: Html
      visible: (rmst_analysis && showExplanations)
      clearWith:
          - rmst_analysis
          - explanatory
          - outcome



    # Residual Diagnostics Explanation
    - name: residualDiagnosticsExplanation
      title: Understanding Cox Model Residual Diagnostics
      type: Html
      visible: (residual_diagnostics && showExplanations)
      clearWith:
          - residual_diagnostics
          - explanatory
          - outcome

    - name: residualsTable
      title: 'Cox Model Residuals'
      type: Table
      visible: (residual_diagnostics)
      rows: 0
      columns:
        - name: observation
          title: "Observation"
          type: integer
        - name: martingale
          title: "Martingale"
          type: number
          format: zto
        - name: deviance
          title: "Deviance"
          type: number
          format: zto
        - name: score
          title: "Score"
          type: number
          format: zto
        - name: schoenfeld
          title: "Schoenfeld"
          type: number
          format: zto
      clearWith:
        - residual_diagnostics
        - explanatory
        - outcome
        - outcomeLevel

    - name: survivalExport
      title: 'Export Survival Data'
      type: Output
      varTitle: 'Survival Estimates Export'
      varDescription: 'Detailed survival estimates for external analysis'
      clearWith:
        - export_survival_data
        - explanatory
        - outcome
        - outcomeLevel

    - name: survivalExportSummary
      title: 'Export Summary'
      type: Html
      visible: (export_survival_data)
      clearWith:
        - export_survival_data
        - explanatory
        - outcome
        - outcomeLevel



    - name:  pairwiseComparisonHeading
      title: Pairwise Comparison Analysis
      type:  Preformatted
      visible: (pw)


    - name:  pairwiseTable
      title: '`Pairwise Comparison Table - ${explanatory}`'
      type:  Table
      rows: 0
      columns:
        - name: rowname
          title: "Levels"
          type: text
        - name: name
          title: "Levels"
          type: text
        - name: value
          title: p-value
          type: number
          format: zto,pvalue
      visible: (pw)
      clearWith:
          - pw
          - explanatory
          - outcome
          - outcomeLevel
          - elapsedtime
          - fudate
          - dxdate
          - tint
          - multievent
      refs:
          - padjust



    - name:  pairwiseSummary
      # title: Pairwise Comparison Summary and Table
      title: '`Pairwise Comparison Summary and Table - ${explanatory}`'
      type:  Preformatted
      visible: (pw && showSummaries)
      clearWith:
          - pw
          - explanatory
          - outcome
          - outcomeLevel
          - elapsedtime
          - fudate
          - dxdate
          - tint
          - multievent






    - name: plot
      title: '`Survival Plot - ${explanatory}`'
      type: Image
      width:  600
      height: 450
      renderFun: .plot
      visible: (sc)
      requiresData: true
      clearWith:
          - sc
          - endplot
          - byplot
          - ybegin_plot
          - yend_plot
          - ci95
          - risktable
          - censored
          - explanatory
          - outcome
          - outcomeLevel
          - elapsedtime
          - fudate
          - dxdate
          - tint
          - multievent
          - pplot
          - medianline



    - name: plot2
      title: '`Cumulative Events - ${explanatory}`'
      type: Image
      width:  600
      height: 450
      renderFun: .plot2
      visible: (ce)
      requiresData: true
      clearWith:
          - ce
          - endplot
          - byplot
          - ybegin_plot
          - yend_plot
          - ci95
          - risktable
          - censored
          - explanatory
          - outcome
          - outcomeLevel
          - elapsedtime
          - fudate
          - dxdate
          - tint
          - multievent



    - name: plot3
      title: '`Cumulative Hazard - ${explanatory}`'
      type: Image
      width:  600
      height: 450
      renderFun: .plot3
      visible: (ch)
      requiresData: true
      clearWith:
          - ch
          - endplot
          - byplot
          - ybegin_plot
          - yend_plot
          - ci95
          - risktable
          - censored
          - explanatory
          - outcome
          - outcomeLevel
          - elapsedtime
          - fudate
          - dxdate
          - tint
          - multievent



    - name: plot6
      title: '`KMunicate-Style Plot - ${explanatory}`'
      type: Image
      width:  600
      height: 450
      renderFun: .plot6
      visible: (kmunicate)
      requiresData: true
      clearWith:
          - kmunicate
          - endplot
          - byplot
          - ybegin_plot
          - yend_plot
          - explanatory
          - outcome
          - outcomeLevel
          - elapsedtime
          - fudate
          - dxdate
          - tint
          - multievent
      refs:
          - KMunicate
          - KMunicate2


    - name:  survivalPlotsHeading3
      title: Survival Plots Explanations
      type:  Preformatted
      visible: ((sc || ce || ch || kmunicate || loglog) && showExplanations)

    # Survival Plots Explanation
    - name: survivalPlotsExplanation
      title: Understanding Survival Curves and Plots
      type: Html
      visible: ((sc || ce || ch || kmunicate || loglog) && showExplanations)
      clearWith:
          - sc
          - ce
          - ch
          - kmunicate
          - loglog
          - explanatory
          - outcome








    - name: plot7
      title: '`Log-Log Plot - ${explanatory}`'
      type: Image
      width:  600
      height: 450
      renderFun: .plot7
      visible: (loglog)
      requiresData: true
      clearWith:
          - loglog
          - endplot
          - byplot
          - explanatory
          - outcome
          - outcomeLevel
          - elapsedtime
          - fudate
          - dxdate
          - tint
          - multievent

    - name: residualsPlot
      title: '`Residuals Diagnostic Plot - ${explanatory}`'
      type: Image
      width:  600
      height: 450
      renderFun: .plot9
      visible: (residual_diagnostics)
      requiresData: true
      clearWith:
          - residual_diagnostics
          - explanatory
          - outcome
          - outcomeLevel



    - name: calculatedtime
      title: Add Calculated Time to Data
      type: Output
      varTitle: '`Calculated Time - from ${ dxdate } to { fudate }`'
      varDescription: '`Calculated Time from Given Dates - from ${ dxdate } to { fudate } in Survival Analysis`'
      measureType: continuous
      clearWith:
          - tint
          - dxdate
          - fudate
          - elapsedtime
          - calculatedtime



    - name: outcomeredefined
      title: Add Redefined Outcome to Data
      type: Output
      varTitle: '`Redefined Outcome - from ${ outcome } for { analysistype } survival analysis`'
      varDescription: Redefined Outcome from Outcome based on Analysis Type in Survival Analysis
      clearWith:
          - outcome
          - analysistype
          - multievent
          - explanatory
          - outcomeLevel

    # Parametric Survival Models Results Section
    - name: parametricModelComparison
      title: 'Parametric Model Comparison'
      type: Table
      visible: (use_parametric && compare_distributions)
      rows: 0
      columns:
        - name: distribution
          title: 'Distribution'
          type: text
        - name: aic
          title: 'AIC'
          type: number
          format: zto
        - name: bic
          title: 'BIC'
          type: number
          format: zto
        - name: loglik
          title: 'Log-Likelihood'
          type: number
          format: zto
        - name: df
          title: 'df'
          type: integer
      clearWith:
        - use_parametric
        - compare_distributions
        - parametric_distribution
        - explanatory
        - outcome

    - name: parametricModelSummary
      title: 'Parametric Model Results'
      type: Table
      visible: (use_parametric)
      rows: 0
      columns:
        - name: parameter
          title: 'Parameter'
          type: text
        - name: estimate
          title: 'Estimate'
          type: number
          format: zto
        - name: se
          title: 'SE'
          type: number
          format: zto
        - name: ci_lower
          title: 'Lower'
          superTitle: '95% CI'
          type: number
          format: zto
        - name: ci_upper
          title: 'Upper'
          superTitle: '95% CI'
          type: number
          format: zto
        - name: pvalue
          title: 'p-value'
          type: number
          format: zto,pvalue
      clearWith:
        - use_parametric
        - parametric_distribution
        - parametric_covariates
        - explanatory
        - outcome

    - name: parametricDiagnostics
      title: 'Parametric Model Diagnostics'
      type: Html
      visible: (use_parametric && parametric_diagnostics)
      clearWith:
        - use_parametric
        - parametric_diagnostics
        - parametric_distribution
        - explanatory
        - outcome

    - name: parametricSurvivalPlot
      title: 'Parametric Survival Curves'
      type: Image
      width: 600
      height: 450
      renderFun: .plotParametricSurvival
      requiresData: true
      visible: (use_parametric && parametric_survival_plots)
      clearWith:
        - use_parametric
        - parametric_survival_plots
        - parametric_distribution
        - explanatory
        - outcome

    - name: hazardFunctionPlot
      title: 'Hazard Function Plot'
      type: Image
      width: 600
      height: 450
      renderFun: .plotHazardFunction
      requiresData: true
      visible: (use_parametric && hazard_plots)
      clearWith:
        - use_parametric
        - hazard_plots
        - parametric_distribution
        - explanatory
        - outcome

    - name: extrapolationPlot
      title: 'Survival Extrapolation Plot'
      type: Image
      width: 600
      height: 450
      renderFun: .plotExtrapolation
      requiresData: true
      visible: (use_parametric && parametric_extrapolation)
      clearWith:
        - use_parametric
        - parametric_extrapolation
        - extrapolation_time
        - parametric_distribution
        - explanatory
        - outcome

    - name: extrapolationTable
      title: 'Extrapolated Survival Estimates'
      type: Table
      visible: (use_parametric && parametric_extrapolation)
      rows: 0
      columns:
        - name: time
          title: 'Time'
          type: number
          format: zto
        - name: survival
          title: 'Survival'
          type: number
          format: proportion
        - name: ci_lower
          title: 'Lower'
          superTitle: '95% CI'
          type: number
          format: proportion
        - name: ci_upper
          title: 'Upper'
          superTitle: '95% CI'
          type: number
          format: proportion
      clearWith:
        - use_parametric
        - parametric_extrapolation
        - extrapolation_time
        - parametric_distribution
        - explanatory
        - outcome

    # Parametric Models Explanation
    - name: parametricModelsExplanation
      title: 'Understanding Parametric Survival Models'
      type: Html
      visible: (use_parametric && showExplanations)
      clearWith:
          - use_parametric
          - parametric_distribution
          - explanatory
          - outcome

refs:
    - finalfit
    - survival
    - survminer
    - survivaltutorial
    - survivalrwnahhas
    - survivalrviews
    - appliedsurvivalanalysisR
    - ClinicoPathJamoviModule
    - flexsurv

...
