title: Simon-Makuch Time-Dependent Survival Analysis
name: simonmakuch
jus: '3.0'
stage: 0
compilerMode: tame
children:
  # Main Variable Selection - ALL variables in ONE supplier
  - type: VariableSupplier
    persistentItems: false
    stretchFactor: 1
    children:
      # Core Survival Variables
      - type: TargetLayoutBox
        label: Survival Time
        children:
          - type: VariablesListBox
            name: survivalTime
            maxItemCount: 1
            isTarget: true
      - type: TargetLayoutBox
        label: Event Indicator
        children:
          - type: VariablesListBox
            name: event
            maxItemCount: 1
            isTarget: true
          - type: LevelSelector
            name: eventLevel
            enable: (event)

      # Time-Dependent Variable Configuration
      - type: TargetLayoutBox
        label: Time-Dependent Variable
        children:
          - type: VariablesListBox
            name: timeDepVariable
            maxItemCount: 1
            isTarget: true
      - type: TargetLayoutBox
        label: Time of Change
        children:
          - type: VariablesListBox
            name: timeDepTime
            maxItemCount: 1
            isTarget: true
      - type: TargetLayoutBox
        label: Exposure Status
        children:
          - type: VariablesListBox
            name: timeDepStatus
            maxItemCount: 1
            isTarget: true
          - type: LevelSelector
            name: exposedLevel
            enable: (timeDepStatus)

      # Additional Time-Dependent Variables
      - type: TargetLayoutBox
        label: Additional Time-Dependent Variables
        children:
          - type: VariablesListBox
            name: additionalTimeDepVars
            isTarget: true
            enable: (enableMultipleTimeDep)

      # Additional Covariates for Cox Regression
      - type: TargetLayoutBox
        label: Additional Covariates (for Cox)
        children:
          - type: VariablesListBox
            name: timeDependentCovariates
            isTarget: true
            enable: (performTimeDependentCox)

      # Cluster Variable
      - type: TargetLayoutBox
        label: Cluster Variable (Optional)
        children:
          - type: VariablesListBox
            name: clusterVariable
            maxItemCount: 1
            isTarget: true
            enable: (robustVariance)

  # Analysis Configuration
  - type: CollapseBox
    label: Analysis Configuration
    collapsed: true
    stretchFactor: 1
    children:
      - type: LayoutBox
        margin: large
        children:
          - type: Label
            label: Analysis Type & Settings
            children:
              - type: ComboBox
                name: analysisType
                label: Analysis Type
              - type: TextBox
                name: confidenceLevel
                format: number
                label: Confidence Level
                suffix: (0.80-0.99)
          - type: Label
            label: Multiple Variables
            children:
              - type: CheckBox
                name: enableMultipleTimeDep
                label: Enable Multiple Time-Dependent Variables

  # Landmark Analysis Options
  - type: CollapseBox
    label: Landmark Analysis
    collapsed: true
    stretchFactor: 1
    children:
      - type: LayoutBox
        margin: large
        children:
          - type: CheckBox
            name: performLandmarkAnalysis
            label: Perform Landmark Analysis
          - type: TextBox
            name: landmarkTimes
            format: string
            enable: (performLandmarkAnalysis)
            label: Landmark Time Points
            suffix: (comma-separated)
          - type: TextBox
            name: landmarkWindow
            format: number
            enable: (performLandmarkAnalysis)
            label: Landmark Window Size
            suffix: (time units)

  # Time-Dependent Cox Regression
  - type: CollapseBox
    label: Time-Dependent Cox Regression
    collapsed: true
    stretchFactor: 1
    children:
      - type: LayoutBox
        margin: large
        children:
          - type: CheckBox
            name: performTimeDependentCox
            label: Perform Time-Dependent Cox Regression
          - type: CheckBox
            name: testTimeVaryingEffect
            enable: (performTimeDependentCox)
            label: Test Time-Varying Effects

  # Bias Assessment & Advanced Methods
  - type: CollapseBox
    label: Bias Assessment & Advanced Methods
    collapsed: true
    stretchFactor: 1
    children:
      - type: LayoutBox
        margin: large
        children:
          - type: Label
            label: Immortal Time Bias Assessment
            children:
              - type: CheckBox
                name: assessImmortalTimeBias
                label: Assess Immortal Time Bias
              - type: CheckBox
                name: naiveComparison
                label: Include Naive Comparison
          - type: Label
            label: Variance & Clustering
            children:
              - type: CheckBox
                name: robustVariance
                label: Robust Variance Estimation
              - type: ComboBox
                name: handleTieBreaking
                label: Tie-Breaking Method

  # Statistical Testing
  - type: CollapseBox
    label: Statistical Testing
    collapsed: true
    stretchFactor: 1
    children:
      - type: LayoutBox
        margin: large
        children:
          - type: Label
            label: Statistical Tests
            children:
              - type: CheckBox
                name: performLogRankTest
                label: Log-Rank Test
              - type: CheckBox
                name: performMantelByarTest
                label: Mantel-Byar Test
              - type: CheckBox
                name: performTimeDepLRTest
                label: Time-Dependent Log-Rank Test

  # Visualization Options
  - type: CollapseBox
    label: Plots & Visualization
    collapsed: true
    stretchFactor: 1
    children:
      - type: LayoutBox
        margin: large
        children:
          - type: Label
            label: Survival Plots
            children:
              - type: CheckBox
                name: showSimonMakuchPlot
                label: Simon-Makuch Plot
              - type: CheckBox
                name: showLandmarkPlots
                label: Landmark Survival Plots
              - type: CheckBox
                name: showCumulativeIncidencePlot
                label: Cumulative Incidence Plot
              - type: CheckBox
                name: plotExposureStatus
                label: Exposure Status Over Time
          - type: Label
            label: Plot Formatting
            children:
              - type: TextBox
                name: plotTimeRange
                format: string
                label: Plot Time Range
                suffix: (months or 'auto')
              - type: CheckBox
                name: showConfidenceIntervals
                label: Show Confidence Intervals
              - type: CheckBox
                name: showRiskTables
                label: Show Risk Tables

  # Output Tables & Results
  - type: CollapseBox
    label: Output Tables & Results
    collapsed: true
    stretchFactor: 1
    children:
      - type: LayoutBox
        margin: large
        children:
          - type: Label
            label: Results Tables
            children:
              - type: CheckBox
                name: showSurvivalEstimates
                label: Survival Estimates Table
              - type: CheckBox
                name: showHazardRatios
                label: Hazard Ratios Table
              - type: CheckBox
                name: showLandmarkResults
                label: Landmark Analysis Results
              - type: CheckBox
                name: showExposurePatterns
                label: Exposure Pattern Summary
              - type: CheckBox
                name: showModelDiagnostics
                label: Model Diagnostics

  # Validation & Sensitivity Analysis
  - type: CollapseBox
    label: Validation & Sensitivity Analysis
    collapsed: true
    stretchFactor: 1
    children:
      - type: LayoutBox
        margin: large
        children:
          - type: Label
            label: Bootstrap Validation
            children:
              - type: CheckBox
                name: performBootstrapValidation
                label: Perform Bootstrap Validation
              - type: TextBox
                name: bootstrapSamples
                format: number
                enable: (performBootstrapValidation)
                label: Bootstrap Samples
                suffix: (100-2000)
          - type: Label
            label: Sensitivity Analysis
            children:
              - type: CheckBox
                name: performSensitivityAnalysis
                label: Perform Sensitivity Analysis

  # Explanatory Output & Guidance
  - type: CollapseBox
    label: Explanations & Clinical Guidance
    collapsed: false
    stretchFactor: 1
    children:
      - type: LayoutBox
        margin: large
        children:
          - type: Label
            label: Educational Content
            children:
              - type: CheckBox
                name: showExplanations
                label: Show Method Explanations
              - type: CheckBox
                name: showMethodologyNotes
                label: Detailed Methodology Notes
              - type: CheckBox
                name: includeClinicalGuidance
                label: Clinical Interpretation Guidance
