---
name:  jjsyndromicplot
title: Syndromic Plot (PCA Loadings)
menuGroup: JJStatsPlotT
menuSubgroup: Multivariate Analysis
version: '0.0.31'
jas: '1.2'

description:
    main: |
        Syndromic plots visualize Principal Component Analysis (PCA) loadings using
        a unique triangular design with directional arrows. This visualization method
        was developed by Ferguson et al. (2013) for interpreting complex disease patterns.

        Arrow width and color represent the magnitude and direction of variable loadings
        on the selected principal component. Only variables with loadings above the
        specified cutoff threshold are displayed.

        The triangle center displays the component label and variance accounted for (VAF).
    R:
        dontrun: false
        usage: |
            # Example with mtcars dataset
            data("mtcars")

            # Basic syndromic plot for first principal component
            jjsyndromicplot(
              data = mtcars,
              vars = c("mpg", "disp", "hp", "drat", "wt", "qsec"),
              component = 1,
              cutoff = 0.5,
              center = TRUE,
              scale = TRUE
            )

            # Customize appearance
            jjsyndromicplot(
              data = mtcars,
              vars = c("mpg", "disp", "hp", "drat", "wt", "qsec"),
              component = 2,
              cutoff = 0.4,
              arrowsize = 15,
              textsize = 8,
              colorlow = "blue",
              colormid = "white",
              colorhigh = "red",
              varorder = "abs decreasing"
            )

    references:
        - "Ferguson AR, Irvine K-A, Gensel JC, et al. (2013). Derivation of Multivariate Syndromic Outcome Metrics for Consistent Testing across Multiple Models of Cervical Spinal Cord Injury in Rats. PLOS ONE, 8(3):e59712."
        - "Torres-Espin A, Chou A, Huie JR, et al. (2021). Reproducible analysis of disease space via principal components using the novel R package syndRomics. eLife, 10:e61812."

options:
    - name: data
      type: Data
      description:
          R: The data as a data frame.

    - name: vars
      title: Variables for PCA
      type: Variables
      suggested: [ continuous ]
      permitted: [ numeric ]
      description:
          R: >
            Continuous variables to include in Principal Component Analysis.
            Select at least 3 numeric variables (e.g., biomarker levels, clinical measurements,
            gene expression values). PCA will identify patterns of correlation among these variables.

    - name: component
      title: Principal Component
      type: Integer
      min: 1
      max: 20
      default: 1
      description:
          R: >
            Which principal component to visualize (1 = PC1, 2 = PC2, etc.).
            PC1 typically explains the most variance in the data.

    - name: cutoff
      title: Loading Cutoff Threshold
      type: Number
      min: 0
      max: 1
      default: 0.5
      description:
          R: >
            Minimum absolute loading value to display a variable (0 to 1).
            Variables with |loading| >= cutoff will be shown as arrows.
            Higher values show fewer, more important variables. Typical range: 0.3-0.6.

    - name: center
      title: Center Variables
      type: Bool
      default: true
      description:
          R: >
            Center variables to have mean = 0 before PCA.
            Recommended: TRUE for most analyses.

    - name: scale
      title: Scale Variables
      type: Bool
      default: true
      description:
          R: >
            Scale variables to have standard deviation = 1 before PCA.
            Recommended: TRUE when variables have different units or scales.

    - name: arrowsize
      title: Arrow Size Multiplier
      type: Number
      min: 1
      max: 30
      default: 10
      description:
          R: >
            Controls the width of arrows proportional to loading magnitude.
            Higher values = thicker arrows. Range: 1-30.

    - name: textsize
      title: Text Size
      type: Number
      min: 4
      max: 20
      default: 9
      description:
          R: >
            Font size for variable labels and loading values. Range: 4-20.

    - name: repel
      title: Repel Overlapping Labels
      type: Bool
      default: true
      description:
          R: >
            Use ggrepel to prevent overlapping variable labels.
            Set to FALSE for fixed label positions.

    - name: plotlegend
      title: Show Legend
      type: Bool
      default: true
      description:
          R: >
            Display the color gradient legend at bottom of plot.

    - name: plotcutoff
      title: Show Cutoff Indicator
      type: Bool
      default: true
      description:
          R: >
            Highlight the cutoff threshold region in the legend.

    - name: varorder
      title: Variable Ordering
      type: List
      options:
        - name: absdecreasing
          title: Absolute Value Decreasing
        - name: absincreasing
          title: Absolute Value Increasing
        - name: decreasing
          title: Decreasing
        - name: increasing
          title: Increasing
      default: absdecreasing
      description:
          R: >
            Order of variables around the circle (starting at 12 o'clock, counterclockwise).
            'abs decreasing' places strongest loadings first.

    - name: colorlow
      title: Color for Negative Loadings
      type: String
      default: "steelblue1"
      description:
          R: >
            Color for negative loadings. Use color names or hex codes (e.g., "#0000FF").

    - name: colormid
      title: Color for Zero Loading
      type: String
      default: "white"
      description:
          R: >
            Midpoint color for zero loading. Usually white or light gray.

    - name: colorhigh
      title: Color for Positive Loadings
      type: String
      default: "firebrick1"
      description:
          R: >
            Color for positive loadings. Use color names or hex codes (e.g., "#FF0000").

    - name: plotwidth
      title: Plot Width
      type: Integer
      min: 300
      max: 2000
      default: 600
      description:
          R: Width of the plot in pixels.

    - name: plotheight
      title: Plot Height
      type: Integer
      min: 300
      max: 2000
      default: 600
      description:
          R: Height of the plot in pixels.
