title: Interrater Reliability
name: agreement
jus: '3.0'
stage: 0
compilerMode: tame
children:
  - type: VariableSupplier
    persistentItems: false
    stretchFactor: 1
    children:
      - type: TargetLayoutBox
        label: Raters
        children:
          - type: VariablesListBox
            name: vars
            isTarget: true

  # ============================================================
  # CATEGORICAL/NOMINAL DATA
  # ============================================================

  - type: CollapseBox
    label: Weighted Kappa [Ordinal]
    collapsed: false
    children:
      - type: LayoutBox
        margin: large
        children:
          - type: ComboBox
            name: wght
          - type: CheckBox
            name: exct
          - type: CheckBox
            name: showLevelInfo

  - type: CollapseBox
    label: Krippendorff's Alpha [Any Data Type]
    collapsed: true
    children:
      - type: LayoutBox
        margin: large
        children:
          - type: CheckBox
            name: kripp
          - type: ComboBox
            name: krippMethod
            enable: (kripp)
          - type: CheckBox
            name: bootstrap
            enable: (kripp)

  - type: CollapseBox
    label: Light's Kappa [Categorical] (3+ Raters)
    collapsed: true
    children:
      - type: LayoutBox
        margin: large
        children:
          - type: CheckBox
            name: lightKappa

  - type: CollapseBox
    label: Gwet's AC1/AC2 [Categorical/Ordinal]
    collapsed: true
    children:
      - type: LayoutBox
        margin: large
        children:
          - type: CheckBox
            name: gwet
          - type: ComboBox
            name: gwetWeights
            enable: (gwet)

  - type: CollapseBox
    label: Finn Coefficient [Categorical] (Variance-Based)
    collapsed: true
    children:
      - type: LayoutBox
        margin: large
        children:
          - type: CheckBox
            name: finn
          - type: TextBox
            name: finnLevels
            format: number
            enable: (finn)
          - type: ComboBox
            name: finnModel
            enable: (finn)

  # ============================================================
  # ORDINAL/RANKED DATA
  # ============================================================

  - type: CollapseBox
    label: Kendall's W [Ordinal] (Concordance for Rankings)
    collapsed: true
    children:
      - type: LayoutBox
        margin: large
        children:
          - type: CheckBox
            name: kendallW

  - type: CollapseBox
    label: Robinson's A [Ordinal] (Agreement Index)
    collapsed: true
    children:
      - type: LayoutBox
        margin: large
        children:
          - type: CheckBox
            name: robinsonA
          - type: CheckBox
            name: showRobinsonAGuide

  - type: CollapseBox
    label: Mean Spearman Rho [Ordinal] (Average Rank Correlation)
    collapsed: true
    children:
      - type: LayoutBox
        margin: large
        children:
          - type: CheckBox
            name: meanSpearman
          - type: CheckBox
            name: showMeanSpearmanGuide

  # ============================================================
  # CONTINUOUS DATA
  # ============================================================

  - type: CollapseBox
    label: ICC [Continuous] (Intraclass Correlation)
    collapsed: true
    children:
      - type: LayoutBox
        margin: large
        children:
          - type: CheckBox
            name: icc
          - type: ComboBox
            name: iccType
            enable: (icc)

  - type: CollapseBox
    label: Mean Pearson Correlation [Continuous] (Linear Association)
    collapsed: true
    children:
      - type: LayoutBox
        margin: large
        children:
          - type: CheckBox
            name: meanPearson
          - type: CheckBox
            name: showMeanPearsonGuide

  - type: CollapseBox
    label: Lin's CCC [Continuous] (Concordance - Method Comparison)
    collapsed: true
    children:
      - type: LayoutBox
        margin: large
        children:
          - type: CheckBox
            name: linCCC
          - type: CheckBox
            name: showLinCCCGuide

  - type: CollapseBox
    label: Total Deviation Index (TDI) [Continuous] (Acceptable Limits)
    collapsed: true
    children:
      - type: LayoutBox
        margin: large
        children:
          - type: CheckBox
            name: tdi
          - type: TextBox
            name: tdiCoverage
            format: number
            enable: (tdi)
          - type: TextBox
            name: tdiLimit
            format: number
            enable: (tdi)
          - type: CheckBox
            name: showTDIGuide

  - type: CollapseBox
    label: Iota Coefficient [Continuous or Categorical] (Multivariate)
    collapsed: true
    children:
      - type: LayoutBox
        margin: large
        children:
          - type: CheckBox
            name: iota
          - type: CheckBox
            name: iotaStandardize
            enable: (iota)

  - type: CollapseBox
    label: Bland-Altman Analysis [Continuous] (Limits of Agreement)
    collapsed: true
    children:
      - type: LayoutBox
        margin: large
        children:
          - type: CheckBox
            name: blandAltmanPlot
          - type: TextBox
            name: baConfidenceLevel
            format: number
            enable: (blandAltmanPlot)
          - type: CheckBox
            name: proportionalBias
            enable: (blandAltmanPlot)

  - type: CollapseBox
    label: Agreement Heatmap [Categorical] (Confusion Matrix Visualization)
    collapsed: true
    children:
      - type: LayoutBox
        margin: large
        children:
          - type: CheckBox
            name: agreementHeatmap
          - type: ComboBox
            name: heatmapColorScheme
            enable: (agreementHeatmap)
          - type: CheckBox
            name: heatmapShowPercentages
            enable: (agreementHeatmap)
          - type: CheckBox
            name: heatmapShowCounts
            enable: (agreementHeatmap)
          - type: TextBox
            name: heatmapAnnotationSize
            format: number
            enable: (agreementHeatmap)
          - type: CheckBox
            name: showAgreementHeatmapGuide

  - type: CollapseBox
    label: Maxwell's RE [Continuous/Ordinal] (Random Error Decomposition)
    collapsed: true
    children:
      - type: LayoutBox
        margin: large
        children:
          - type: CheckBox
            name: maxwellRE
          - type: CheckBox
            name: showMaxwellREGuide

  # ============================================================
  # ADVANCED/SPECIALIZED ANALYSES
  # ============================================================

  - type: CollapseBox
    label: Hierarchical/Multilevel Kappa [Categorical] (Multi-Center Studies)
    collapsed: true
    children:
      - type: LayoutBox
        margin: large
        children:
          - type: CheckBox
            name: hierarchicalKappa
          - type: VariableSupplier
            persistentItems: false
            stretchFactor: 1
            children:
              - type: TargetLayoutBox
                label: Cluster/Institution Variable
                children:
                  - type: VariablesListBox
                    name: clusterVariable
                    maxItemCount: 1
                    isTarget: true
                    enable: (hierarchicalKappa)
      - type: LayoutBox
        margin: large
        children:
          - type: CheckBox
            name: clusterSpecificKappa
            enable: (hierarchicalKappa)
          - type: CheckBox
            name: iccHierarchical
            enable: (hierarchicalKappa)
          - type: CheckBox
            name: varianceDecomposition
            enable: (hierarchicalKappa)
          - type: CheckBox
            name: testClusterHomogeneity
            enable: (hierarchicalKappa)
          - type: CheckBox
            name: shrinkageEstimates
            enable: (hierarchicalKappa)
          - type: CheckBox
            name: clusterRankings
            enable: (hierarchicalKappa)

  - type: CollapseBox
    label: Pairwise Kappa [Categorical] (vs Reference Rater)
    collapsed: true
    children:
      - type: LayoutBox
        margin: large
        children:
          - type: CheckBox
            name: pairwiseKappa
          - type: VariableSupplier
            persistentItems: false
            stretchFactor: 1
            children:
              - type: TargetLayoutBox
                label: Reference Rater
                children:
                  - type: VariablesListBox
                    name: referenceRater
                    maxItemCount: 1
                    isTarget: true
                    enable: (pairwiseKappa)
          - type: CheckBox
            name: rankRaters
            enable: (pairwiseKappa)

  - type: CollapseBox
    label: Rater Bias Test [Categorical] (Quality Control)
    collapsed: true
    children:
      - type: LayoutBox
        margin: large
        children:
          - type: CheckBox
            name: raterBias

  - type: CollapseBox
    label: Bhapkar Test [Categorical] (Marginal Homogeneity, 2 Raters)
    collapsed: true
    children:
      - type: LayoutBox
        margin: large
        children:
          - type: CheckBox
            name: bhapkar

  - type: CollapseBox
    label: Stuart-Maxwell Test [Categorical] (Marginal Homogeneity, 2 Raters)
    collapsed: true
    children:
      - type: LayoutBox
        margin: large
        children:
          - type: CheckBox
            name: stuartMaxwell

  - type: CollapseBox
    label: Inter/Intra-Rater Reliability [Any Data Type] (Test-Retest Studies)
    collapsed: true
    children:
      - type: LayoutBox
        margin: large
        children:
          - type: CheckBox
            name: interIntraRater
          - type: TextBox
            name: interIntraSeparator
            format: string
            enable: (interIntraRater)
          - type: CheckBox
            name: showInterIntraRaterGuide

  # ============================================================
  # COMPUTED VARIABLES & FEATURES
  # ============================================================

  - type: CollapseBox
    label: Create Consensus Variable [Any Data Type]
    collapsed: true
    children:
      - type: LayoutBox
        margin: large
        children:
          - type: TextBox
            name: consensusName
            format: string
            width: largest
          - type: ComboBox
            name: consensusRule
          - type: ComboBox
            name: tieBreaker
          - type: Output
            name: consensusVar

  - type: CollapseBox
    label: Case Agreement Categorization [Any Data Type]
    collapsed: true
    children:
      - type: LayoutBox
        margin: large
        children:
          - type: CheckBox
            name: loaVariable
          - type: ComboBox
            name: detailLevel
            enable: (loaVariable)
          - type: TextBox
            name: simpleThreshold
            format: number
            enable: (loaVariable && detailLevel:simple)
          - type: ComboBox
            name: loaThresholds
            enable: (loaVariable && detailLevel:detailed)
          - type: TextBox
            name: loaHighThreshold
            format: number
            enable: (loaVariable && detailLevel:detailed && loaThresholds:custom)
          - type: TextBox
            name: loaLowThreshold
            format: number
            enable: (loaVariable && detailLevel:detailed && loaThresholds:custom)
          - type: TextBox
            name: loaVariableName
            format: string
            enable: (loaVariable)
          - type: CheckBox
            name: showLoaTable
            enable: (loaVariable)

  - type: CollapseBox
    label: Specific Agreement Indices [Categorical] (Category-Focused)
    collapsed: true
    children:
      - type: LayoutBox
        margin: large
        children:
          - type: CheckBox
            name: specificAgreement
          - type: TextBox
            name: specificPositiveCategory
            format: string
            enable: (specificAgreement)
          - type: CheckBox
            name: specificAllCategories
            enable: (specificAgreement)
          - type: CheckBox
            name: specificConfidenceIntervals
            enable: (specificAgreement)
          - type: CheckBox
            name: showSpecificAgreementGuide

  - type: CollapseBox
    label: Rater Profile Plots (Distribution Comparison)
    collapsed: true
    children:
      - type: LayoutBox
        margin: large
        children:
          - type: CheckBox
            name: raterProfiles
          - type: ComboBox
            name: raterProfileType
            enable: (raterProfiles)
          - type: CheckBox
            name: raterProfileShowPoints
            enable: (raterProfiles)
          - type: CheckBox
            name: showRaterProfileGuide

  - type: CollapseBox
    label: Agreement by Subgroup (Stratified Analysis)
    collapsed: true
    children:
      - type: LayoutBox
        margin: large
        children:
          - type: CheckBox
            name: agreementBySubgroup
          - type: VariableSupplier
            persistentItems: false
            stretchFactor: 1
            children:
              - type: TargetLayoutBox
                label: Subgroup Variable
                children:
                  - type: VariablesListBox
                    name: subgroupVariable
                    maxItemCount: 1
                    isTarget: true
                    enable: (agreementBySubgroup)
          - type: CheckBox
            name: subgroupForestPlot
            enable: (agreementBySubgroup)
          - type: TextBox
            name: subgroupMinCases
            format: number
            enable: (agreementBySubgroup)
          - type: CheckBox
            name: showSubgroupGuide

  - type: CollapseBox
    label: Rater Clustering (Identify Rating Pattern Groups)
    collapsed: true
    children:
      - type: LayoutBox
        margin: large
        children:
          - type: CheckBox
            name: raterClustering
          - type: ComboBox
            name: clusterMethod
            enable: (raterClustering)
          - type: ComboBox
            name: clusterDistance
            enable: (raterClustering)
          - type: ComboBox
            name: clusterLinkage
            enable: (raterClustering && clusterMethod:hierarchical)
          - type: TextBox
            name: nClusters
            format: number
            enable: (raterClustering && clusterMethod:kmeans)
          - type: CheckBox
            name: showDendrogram
            enable: (raterClustering && clusterMethod:hierarchical)
          - type: CheckBox
            name: showClusterHeatmap
            enable: (raterClustering)
          - type: CheckBox
            name: showRaterClusterGuide

  - type: CollapseBox
    label: Case Clustering (Identify Rating Pattern Groups)
    collapsed: true
    children:
      - type: LayoutBox
        margin: large
        children:
          - type: CheckBox
            name: caseClustering
          - type: ComboBox
            name: caseClusterMethod
            enable: (caseClustering)
          - type: ComboBox
            name: caseClusterDistance
            enable: (caseClustering)
          - type: ComboBox
            name: caseClusterLinkage
            enable: (caseClustering && caseClusterMethod:hierarchical)
          - type: TextBox
            name: nCaseClusters
            format: number
            enable: (caseClustering && caseClusterMethod:kmeans)
          - type: CheckBox
            name: showCaseDendrogram
            enable: (caseClustering && caseClusterMethod:hierarchical)
          - type: CheckBox
            name: showCaseClusterHeatmap
            enable: (caseClustering)
          - type: CheckBox
            name: showCaseClusterGuide

  # ============================================================
  # DISPLAY OPTIONS
  # ============================================================

  - type: CollapseBox
    label: Display Options
    collapsed: true
    children:
      - type: LayoutBox
        margin: large
        children:
          - type: CheckBox
            name: sft
          - type: CheckBox
            name: showSummary
          - type: CheckBox
            name: showAbout
