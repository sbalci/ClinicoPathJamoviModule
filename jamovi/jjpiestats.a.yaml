---
name:  jjpiestats
title: Pie Charts
menuGroup: JJStatsPlotT2
menuSubgroup: 'Categorical vs Categorical'
# menuSubtitle: 'Pie Charts'
version: '0.0.32'
jas: '1.2'



description:
    main: |
        'Wrapper Function for ggstatsplot::ggpiestats and
        ggstatsplot::grouped_ggpiestats to generate Pie Charts with
        statistical analysis.'
    R:
        dontrun: true
        usage: |
            # Load test data
            data(jjpiestats_test_data)
            
            # Basic pie chart
            jjpiestats(
              data = jjpiestats_test_data,
              dep = "treatment_response",
              typestatistics = "parametric"
            )
            
            # Pie chart with grouping
            jjpiestats(
              data = jjpiestats_test_data,
              dep = "treatment_response",
              group = "treatment_arm",
              resultssubtitle = TRUE
            )
            
            # Grouped pie charts by split variable
            jjpiestats(
              data = jjpiestats_test_data,
              dep = "disease_severity",
              group = "gender",
              grvar = "hospital_site",
              typestatistics = "nonparametric"
            )

options:
    - name: data
      type: Data
      description:
          R: >
            The data as a data frame.


    - name: dep
      title: Dependent Variable
      type: Variable
      suggested: [ ordinal, nominal ]
      permitted: [ factor ]
      description:
          R: >
            The categorical variable to display in the pie chart. This variable
            will be used to create pie slices representing the proportion of each
            category. Must be a factor variable.

    - name: group
      title: 'Grouping Variable: (Optional)'
      type: Variable
      suggested: [ ordinal, nominal ]
      permitted: [ factor ]
      default: NULL
      description:
          R: >
            Optional grouping variable for creating contingency table analysis.
            When specified, creates a 2x2 or 2xN contingency table and performs
            association tests (Chi-square, Fisher's exact test, etc.).

    - name: grvar
      title: 'Split By (Optional)'
      type: Variable
      suggested: [ ordinal, nominal ]
      permitted: [ factor ]
      default: NULL
      description:
          R: >
            Optional variable to create separate pie charts for each level of this
            grouping variable. Creates a panel of pie charts, one for each group
            level (e.g., separate charts by treatment center or study site).


    - name: typestatistics
      title: 'Type of Statistic'
      type: List
      options:
        - title: Parametric
          name: parametric
        - title: Nonparametric
          name: nonparametric
        - title: Robust
          name: robust
        - title: Bayes
          name: bayes
      default: parametric
      description:
          R: >
            Type of statistical test for categorical association analysis.
            'parametric' uses Pearson's Chi-square test, 'nonparametric' uses
            contingency table tests, 'robust' uses robust association measures,
            'bayes' provides Bayesian analysis with Bayes factors.


    - name: originaltheme
      title: Add GGStatsPlot Layer
      type: Bool
      default: false
      description:
          R: >
            Whether to apply the original ggstatsplot theme layer to the plot.
            If TRUE, uses ggstatsplot's default styling. If FALSE, uses jamovi's
            default ggplot2 theme for consistency with other analyses.

    - name: counts
      title: 'Counts Variable (Optional)'
      type: Variable
      suggested: [ continuous ]
      permitted: [ numeric ]
      default: NULL
      description:
          R: >
            A variable in data containing counts, or NULL if each row 
            represents a single observation. Use this when your data is 
            already aggregated/tabulated.

    - name: ratio
      title: 'Expected Proportions (Optional)'
      type: String
      default: ''
      description:
          R: >
            A comma-separated list of expected proportions for the proportion test 
            (should sum to 1). For example: '0.5,0.5' for two equal groups or 
            '0.25,0.25,0.25,0.25' for four equal groups. Leave empty for equal 
            theoretical proportions.

    - name: paired
      title: Paired/Repeated Measures
      type: Bool
      default: false
      description:
          R: >
            Logical indicating whether data came from a within-subjects 
            or repeated measures design study (Default: FALSE). If TRUE, McNemar's test 
            will be used. If FALSE, Pearson's chi-square test will be used.

    - name: label
      title: Label Display
      type: List
      options:
        - title: Percentage
          name: percentage
        - title: Counts
          name: counts
        - title: Both
          name: both
      default: percentage
      description:
          R: >
            What information needs to be displayed on the label 
            in each pie slice.

    - name: digits
      title: Decimal Digits
      type: Integer
      default: 2
      min: 0
      max: 5
      description:
          R: >
            Number of digits after decimal point for statistical results.

    - name: conflevel
      title: Confidence Level
      type: Number
      default: 0.95
      min: 0.50
      max: 0.99
      description:
          R: >
            Confidence/credible interval level.

    - name: proportiontest
      title: Proportion Test
      type: Bool
      default: true
      description:
          R: >
            Decides whether proportion test for x variable is to be 
            carried out for each level of y.

    - name: bfmessage
      title: Bayes Factor Message
      type: Bool
      default: true
      description:
          R: >
            Display Bayes Factor in favor of the null hypothesis. 
            Only relevant for parametric test.

    - name: messages
      title: Show Console Messages
      type: Bool
      default: false
      description:
          R: >
            Display statistical messages in console. 
            Disabling improves performance.

    - name: clinicalpreset
      title: Clinical Analysis Preset
      type: List
      options:
        - title: Custom (manual configuration)
          name: custom
        - title: Diagnostic Test (2Ã—2 table)
          name: diagnostic
        - title: Treatment Response (multiple groups)
          name: treatment
        - title: Biomarker Distribution
          name: biomarker
      default: custom
      description:
          R: >
            Predefined configurations for common clinical scenarios. 
            Automatically sets appropriate statistical methods and parameters.

    - name: showexplanations
      title: Show Clinical Explanations
      type: Bool
      default: true
      description:
          R: >
            Display detailed explanations of statistical methods, assumptions, 
            and clinical interpretations to guide analysis and result interpretation.

    - name: resultssubtitle
      title: Statistical Results
      type: Bool
      default: false
      description:
          R: >
            Whether to display statistical test results as subtitle in the pie chart.
            Shows test statistics, p-values, effect sizes, and confidence intervals
            for categorical association tests. Provides detailed statistical summary.

    - name: addGGPubrDonut
      title: Add Donut Chart (ggpubr)
      type: Bool
      default: false
      description:
          R: >
            Add modern donut chart variant using ggpubr.

    - name: ggpubrDonutPalette
      title: Donut Chart Palette
      type: List
      options:
        - title: Journal of Clinical Oncology (jco)
          name: jco
        - title: Nature Publishing Group (npg)
          name: npg
        - title: Lancet
          name: lancet
      default: jco
      description:
          R: >
            Color palette for donut chart.


...
