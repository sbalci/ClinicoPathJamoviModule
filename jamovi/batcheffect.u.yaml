title: Batch Effect Control & Quality Assessment
name: batcheffect
jus: '3.0'
stage: 0
compilerMode: tame
children:
  - type: VariableSupplier
    persistentItems: false
    stretchFactor: 1
    children:
      - type: TargetLayoutBox
        label: Feature Variables
        children:
          - type: VariablesListBox
            name: features
            maxItemCount: -1
            isTarget: true
            itemDropBehaviour: emptyspace

      - type: TargetLayoutBox
        label: Batch Variable
        children:
          - type: VariablesListBox
            name: batch_var
            maxItemCount: 1
            isTarget: true

      - type: TargetLayoutBox
        label: Biological Variable (Optional)
        children:
          - type: VariablesListBox
            name: biological_var
            maxItemCount: 1
            isTarget: true

  - type: LayoutBox
    margin: large
    children:
      - type: Label
        label: Analysis Options
        children:
          - type: CheckBox
            name: perform_pca
          - type: CheckBox
            name: perform_combat
          - type: CheckBox
            name: feature_quality
          - type: CheckBox
            name: redundancy_analysis

  - type: LayoutBox
    margin: large
    children:
      - type: Label
        label: Quality Control Thresholds
        children:
          - type: TextBox
            name: variance_threshold
            format: number
          - type: TextBox
            name: correlation_threshold
            format: number
          - type: TextBox
            name: missing_threshold
            format: number

  - type: LayoutBox
    margin: large
    children:
      - type: Label
        label: Outlier Detection
        children:
          - type: ComboBox
            name: outlier_method
          - type: TextBox
            name: outlier_threshold
            format: number

  - type: LayoutBox
    margin: large
    children:
      - type: Label
        label: PCA Options
        children:
          - type: TextBox
            name: pca_components
            format: number

  - type: LayoutBox
    margin: large
    children:
      - type: Label
        label: ComBat Options
        children:
          - type: CheckBox
            name: combat_parametric

  - type: LayoutBox
    margin: large
    children:
      - type: Label
        label: Output Options
        children:
          - type: CheckBox
            name: show_plots
          - type: CheckBox
            name: save_corrected

...