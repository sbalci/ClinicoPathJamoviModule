---
name: decisioncombine
title: Combine Medical Decision Tests
menuGroup: meddecideT
menuSubgroup: Decision
menuSubtitle: Combine tests and evaluate performance
version: '0.0.31'
jas: '1.2'

description:
    main: |
        Analyzes and compares multiple medical diagnostic tests by examining all 
        possible test result combinations. This function evaluates how different 
        patterns of positive and negative test results perform against a gold 
        standard, helping clinicians understand which test combinations are most 
        informative. Shows individual test performance and comprehensive analysis 
        of all possible test result patterns (e.g., +/+, +/-, -/+, -/-) with 
        their respective positive predictive values and clinical interpretation. 
        Essential for understanding test interactions and optimizing diagnostic 
        strategies when multiple tests are available for the same condition.
    R:
        dontrun: false
        usage: |
            # Analyze two-test combinations
            result1 <- decisioncombine(
              data = histopathology,
              gold = "Golden Standart",
              goldPositive = "1",
              test1 = "New Test", 
              test1Positive = "1",
              test2 = "Rater 1",
              test2Positive = "1"
            )
            
            # Analyze three-test combinations
            result2 <- decisioncombine(
              data = histopathology,
              gold = "Golden Standart",
              goldPositive = "1",
              test1 = "New Test",
              test1Positive = "1", 
              test2 = "Rater 1",
              test2Positive = "1",
              test3 = "Rater 2",
              test3Positive = "1",
              showIndividual = TRUE
            )

options:
    - name: data
      type: Data
      description:
          R: The data as a data frame.

    - name: gold
      title: Golden Standard
      type: Variable
      suggested: [ nominal ]
      permitted: [ factor ]

    - name: goldPositive
      title: Positive Level
      type: Level
      variable: (gold)

    # For the first test
    - name: test1
      title: Test 1
      type: Variable
      suggested: [ nominal ]
      permitted: [ factor ]

    - name: test1Positive
      title: Positive Level
      type: Level
      variable: (test1)

    # For the second test
    - name: test2
      title: Test 2
      type: Variable
      suggested: [ nominal ]
      permitted: [ factor ]

    - name: test2Positive
      title: Positive Level
      type: Level
      variable: (test2)

    # For the third test
    - name: test3
      title: Test 3
      type: Variable
      suggested: [ nominal ]
      permitted: [ factor ]

    - name: test3Positive
      title: Positive Level
      type: Level
      variable: (test3)



    - name: od
      title: Original Data
      type: Bool
      default: false
      description:
          R: >
            Boolean selection whether to show frequency tables. Default is 'false'.



    - name: showIndividual
      title: 'Show Individual Test Results'
      type: Bool
      default: true

    - name: exportCombinationPattern
      title: 'Export Combination Patterns'
      type: Bool
      default: false
      description:
          R: >
            Export a new variable to the data frame indicating the test combination pattern (e.g., +/+, +/-, -/+, -/-).

    # Visualization options
    - name: showVisualization
      title: Show Visualizations
      type: Bool
      default: true
      description:
          R: >
            Display visualizations for test combination analysis.

    - name: plotType
      title: Visualization Type
      type: List
      options:
        - title: Performance Heatmap
          name: heatmap
        - title: ROC Curves Comparison
          name: roc
        - title: Decision Tree
          name: tree
        - title: Venn Diagram
          name: venn
        - title: Forest Plot
          name: forest
        - title: All Plots
          name: all
      default: heatmap
      description:
          R: >
            Type of visualization to display. Heatmap shows combination patterns performance,
            ROC curves compare individual and combined tests, Decision tree shows test hierarchy,
            Venn diagram shows test overlaps, Forest plot shows diagnostic statistics with CI.

    - name: plotHeight
      title: Plot Height (pixels)
      type: Integer
      default: 600
      min: 400
      max: 1200
      description:
          R: >
            Height of the plot in pixels.

    - name: plotWidth
      title: Plot Width (pixels)
      type: Integer
      default: 800
      min: 600
      max: 1600
      description:
          R: >
            Width of the plot in pixels.

    - name: colorScheme
      title: Color Scheme
      type: List
      options:
        - title: Clinical (Red-Green)
          name: clinical
        - title: Viridis
          name: viridis
        - title: Blue-Yellow
          name: blueyellow
        - title: Grayscale
          name: grayscale
      default: clinical
      description:
          R: >
            Color scheme for visualizations. Clinical uses red for negative and green for positive.

...
