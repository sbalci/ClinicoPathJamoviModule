title: Patient Similarity Clustering
name: patientsimilarity
jus: '3.0'
stage: 0
compilerMode: tame
children:
  - type: VariableSupplier
    persistentItems: false
    stretchFactor: 1
    children:
      - type: TargetLayoutBox
        label: Variables for Similarity Analysis
        children:
          - type: VariablesListBox
            name: vars
            isTarget: true
            height: large
      - type: TargetLayoutBox
        label: Color Points By (Optional)
        children:
          - type: VariablesListBox
            name: colorBy
            maxItemCount: 1
            isTarget: true
  - type: LayoutBox
    margin: large
    children:
      - type: Label
        label: Dimensionality Reduction Method
        children:
          - type: ComboBox
            name: method
      - type: Label
        label: Number of Dimensions
        children:
          - type: ComboBox
            name: dimensions
      - type: CheckBox
        name: scaleVars
  - type: LayoutBox
    margin: large
    children:
      - type: TextBox
        name: seed
        format: number
  - type: CollapseBox
    label: Method Parameters
    collapsed: true
    children:
      - type: Label
        label: t-SNE Parameters
        margin: large
        enable: (method:tsne)
        children:
          - type: LayoutBox
            margin: small
            children:
              - type: Label
                label: 'Perplexity:'
                fitToGrid: true
              - type: TextBox
                name: perplexity
                format: number
          - type: LayoutBox
            margin: small
            children:
              - type: Label
                label: 'Iterations:'
                fitToGrid: true
              - type: TextBox
                name: iterations
                format: number
      - type: Label
        label: UMAP Parameters
        margin: large
        enable: (method:umap)
        children:
          - type: LayoutBox
            margin: small
            children:
              - type: Label
                label: 'Number of Neighbors:'
                fitToGrid: true
              - type: TextBox
                name: umapNeighbors
                format: number
          - type: LayoutBox
            margin: small
            children:
              - type: Label
                label: 'Minimum Distance:'
                fitToGrid: true
              - type: TextBox
                name: umapMinDist
                format: number
  - type: CollapseBox
    label: Cluster Analysis
    collapsed: true
    children:
      - type: CheckBox
        name: performClustering
      - type: ComboBox
        name: clusterMethod
        enable: (performClustering)
      - type: Label
        label: 'Number of Clusters:'
        fitToGrid: true
        enable: (performClustering)
      - type: TextBox
        name: nClusters
        format: number
        enable: (performClustering)
      - type: Label
        label: 'DBSCAN Parameters'
        enable: (performClustering && clusterMethod:dbscan)
      - type: LayoutBox
        margin: small
        children:
          - type: Label
            label: 'Epsilon (eps):'
            fitToGrid: true
          - type: TextBox
            name: dbscan_eps
            format: number
            enable: (performClustering && clusterMethod:dbscan)
      - type: LayoutBox
        margin: small
        children:
          - type: Label
            label: 'MinPts:'
            fitToGrid: true
          - type: TextBox
            name: dbscan_minpts
            format: number
            enable: (performClustering && clusterMethod:dbscan)
      - type: CheckBox
        name: showClusterStats
        enable: (performClustering)
  - type: CollapseBox
    label: Survival Analysis
    collapsed: true
    children:
      - type: CheckBox
        name: survivalAnalysis
      - type: VariablesListBox
        name: survivalTime
        maxItemCount: 1
        isTarget: true
        label: Survival Time
        enable: (survivalAnalysis)
      - type: VariablesListBox
        name: survivalEvent
        maxItemCount: 1
        isTarget: true
        label: Survival Event
        enable: (survivalAnalysis)
      - type: ComboBox
        name: survivalEventLevel
        enable: (survivalEvent && survivalAnalysis)
  - type: CollapseBox
    label: Output Options
    collapsed: true
    children:
      - type: CheckBox
        name: showLoadings
        enable: (method:pca || method:mds)
      - type: CheckBox
        name: show3DPlot
        enable: (dimensions:3)
      - type: CheckBox
        name: removeOutliers
  - type: LayoutBox
    margin: large
    children:
      - type: Output
        name: exportClusters
      - type: Output
        name: exportCoordinates
