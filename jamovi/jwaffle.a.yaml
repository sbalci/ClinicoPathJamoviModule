---
name:  jwaffle
title: Waffle Charts
menuGroup: JJStatsPlot
menuSubgroup: 'Distribution'
version: '0.0.31'
jas: '1.2'

description:
    main: |
        'Creates waffle charts to visualize categorical distributions and proportions using colored squares. Ideal for showing parts-of-whole relationships in clinical data such as disease subtypes, treatment outcomes, or risk category distributions. Each square represents a proportion of the total sample, making it easy to see relative frequencies across categories.'

options:
    - name: data
      type: Data
      description:
          R: >
            The data as a data frame.

    - name: counts
      title: Counts (Optional)
      type: Variable
      suggested: [ continuous ]
      permitted: [ numeric ]
      default: NULL
      description:
          R: >
            Optional numeric weight variable if cases have different weights. Leave empty to count each row equally (recommended for most clinical data). Only needed if your data is pre-aggregated or weighted.

    - name: groups
      title: Groups
      type: Variable
      suggested: [ nominal, ordinal ]
      permitted: [ factor ]
      description:
          R: >
            The categorical grouping variable for the waffle squares. Each category will be displayed as proportional colored squares in a 10x10 grid. Examples: Tumor grade (G1/G2/G3), Treatment outcome (Complete/Partial/No response), Risk categories (Low/Medium/High).

    - name: facet
      title: Facet By (Optional)
      type: Variable
      suggested: [ nominal, ordinal ]
      permitted: [ factor ]
      default: NULL
      description:
          R: >
            Optional variable to split the waffle chart by another categorical variable to compare distributions across subgroups (e.g., by treatment arm, patient cohort, or time period). Creates separate waffle charts for each level.

    - name: rows
      title: Number of Rows
      type: Integer
      default: 5
      min: 1
      description:
          R: >
            Number of rows in the waffle chart

    - name: flip
      title: Flip Chart
      type: Bool
      default: false
      description:
          R: >
            Whether to flip the orientation of the waffle chart

    - name: color_palette
      title: Color Palette
      type: List
      options:
        - title: Default Colors
          name: default
        - title: Colorblind Friendly
          name: colorblind
        - title: Professional
          name: professional
        - title: Presentation
          name: presentation
        - title: Journal
          name: journal
        - title: Pastel Colors
          name: pastel
        - title: Dark Colors
          name: dark
      default: default
      description:
          R: >
            Color scheme for the waffle squares

    - name: show_legend
      title: Show Legend
      type: Bool
      default: true
      description:
          R: >
            Whether to display the legend

    - name: mytitle
      title: Title
      type: String
      default: ''
      description:
          R: >
            Custom title for the plot

    - name: legendtitle
      title: Legend Title
      type: String
      default: ''
      description:
          R: >
            Custom title for the legend

    - name: showSummaries
      title: Analysis Summary
      type: Bool
      default: false
      description:
          R: >
            Generate natural language summary of waffle chart results including proportions, dominant categories, and clinical interpretation.

    - name: showExplanations
      title: Show Explanations
      type: Bool
      default: false
      description:
          R: >
            Show detailed methodology explanations about waffle charts, when to use them, and how to interpret the results in clinical contexts.
...
