---
name: aivalidation
title: AI Model Validation
menuGroup: meddecideExtraD
menuSubgroup: AI & Machine Learning
menuSubtitle: AI Model Performance and Comparison
version: '0.0.32'
jas: '1.2'

description:
    main: >
        Simplified AI model validation tool for comparing diagnostic performance.
        Calculates AUC, sensitivity, and specificity for predictor variables and
        performs statistical comparison using DeLong test.

    R:
        dontrun: true
        usage: |
            data('medical_ai_data', package='ClinicoPath')

            aivalidation(data = medical_ai_data,
                        predictorVars = c('AI_score', 'human_score', 'biomarker1'),
                        outcomeVar = 'diagnosis',
                        positiveLevel = 'positive',
                        compareModels = TRUE)

options:
    - name: data
      type: Data
      description:
          R: the data as a data frame

    - name: predictorVars
      title: Predictor Variables
      type: Variables
      suggested: [continuous]
      permitted: [numeric]
      description:
          R: >
            a vector of strings naming the predictor variables (AI scores, human scores,
            biomarkers, etc.) from `data`. Limited to first 5 for pairwise comparisons.

    - name: outcomeVar
      title: Outcome Variable
      type: Variable
      suggested: [ordinal, nominal]
      permitted: [factor]
      description:
          R: >
            a string naming the binary outcome variable (gold standard) from `data`

    - name: positiveLevel
      title: Positive Level
      type: Level
      variable: (outcomeVar)
      description:
          R: >
            the level of the outcome variable which represents the positive case

    - name: compareModels
      title: Compare Models
      type: Bool
      default: false
      description:
          R: >
            perform statistical comparison between models using DeLong test for AUC comparison

    # Additional Performance Metrics
    - name: youdensJ
      title: Youden's J Statistic
      type: Bool
      default: false
      description:
          R: >
            calculate and display Youden's J statistic (Sensitivity + Specificity - 1)

    - name: matthewsCC
      title: Matthews Correlation Coefficient
      type: Bool
      default: false
      description:
          R: >
            calculate and display Matthews Correlation Coefficient (MCC)

    # Bootstrap Resampling
    - name: bootstrapCI
      title: Bootstrap Confidence Intervals
      type: Bool
      default: false
      description:
          R: >
            use bootstrap resampling for confidence intervals (more robust for small samples)

    - name: nBootstrap
      title: Bootstrap Iterations
      type: Integer
      min: 100
      max: 5000
      default: 1000
      description:
          R: >
            number of bootstrap iterations (higher values are more accurate but slower)

    # Visualization
    - name: rocPlot
      title: ROC Curves
      type: Bool
      default: false
      description:
          R: >
            generate ROC curves for all predictor variables

    # Cross-Validation
    - name: crossValidation
      title: Cross-Validation Method
      type: List
      options:
        - name: 'none'
          title: No Cross-Validation
        - name: '5-fold'
          title: 5-fold Cross-Validation
        - name: '10-fold'
          title: 10-fold Cross-Validation
      default: 'none'
      description:
          R: >
            cross-validation method for model validation (simplified to avoid resource limits)

    - name: stratified
      title: Stratified Sampling
      type: Bool
      default: true
      description:
          R: >
            maintain outcome variable proportions across folds

    - name: randomSeed
      title: Random Seed
      type: Integer
      min: 1
      default: 42
      description:
          R: >
            random seed for reproducible cross-validation results

    # Help & Documentation
    - name: showExplanations
      title: Show Explanations
      type: Bool
      default: false
      description:
          R: >
            show detailed methodology explanations

    - name: showSummaries
      title: Show Summaries
      type: Bool
      default: false
      description:
          R: >
            show interpretation summaries of results


# ============================================================================
# ARCHIVED OPTIONS - For Future Implementation
# ============================================================================
#
# The following options were removed to simplify the backend and avoid
# resource limit errors. They can be re-added as features are re-implemented.
#
# REFERENCE PREDICTOR (for NRI/IDI):
#    - name: referencePredictor
#      title: Reference Predictor
#      type: Variable
#      suggested: [continuous]
#      permitted: [numeric]
#      description:
#          R: reference predictor for model comparisons
#
# CROSS-VALIDATION:
#    - name: crossValidation
#      title: Cross-Validation Method
#      type: List
#      options:
#        - name: '5-fold'
#          title: 5-fold Cross-Validation
#        - name: '10-fold'
#          title: 10-fold Cross-Validation
#        - name: 'LOO'
#          title: Leave-One-Out
#        - name: 'repeated'
#          title: Repeated Cross-Validation
#        - name: 'none'
#          title: No Cross-Validation
#      default: 'none'
#      description:
#          R: cross-validation method for model validation
#
#    - name: nRepeats
#      title: Number of Repeats
#      type: Integer
#      min: 1
#      max: 1000
#      default: 10
#      description:
#          R: number of repetitions for repeated cross-validation
#
#    - name: stratified
#      title: Stratified Cross-Validation
#      type: Bool
#      default: false
#      description:
#          R: maintain outcome variable proportions across folds
#
#    - name: randomSeed
#      title: Random Seed
#      type: Integer
#      min: 1
#      default: 42
#      description:
#          R: random seed for reproducible results
#
# MODEL SELECTION:
#    - name: modelSelection
#      title: Model Selection Method
#      type: List
#      options:
#        - name: 'none'
#          title: No Model Selection
#        - name: 'AIC'
#          title: AIC Stepwise Selection
#        - name: 'BIC'
#          title: BIC Stepwise Selection
#        - name: 'forward'
#          title: Forward Selection
#        - name: 'backward'
#          title: Backward Selection
#        - name: 'lasso'
#          title: LASSO Regularization
#        - name: 'ridge'
#          title: Ridge Regression
#        - name: 'elastic'
#          title: Elastic Net
#      default: 'none'
#      description:
#          R: method for automatic model selection
#
# STATISTICAL TESTS:
#    - name: delongTest
#      title: DeLong Test
#      type: Bool
#      default: false
#      description:
#          R: perform DeLong test for comparing AUC values
#
#    - name: mcnemarTest
#      title: McNemar's Test
#      type: Bool
#      default: false
#      description:
#          R: perform McNemar's test for paired binary predictions
#
#    - name: calibrationTest
#      title: Calibration Test
#      type: Bool
#      default: false
#      description:
#          R: perform Hosmer-Lemeshow calibration test
#
# PERFORMANCE METRICS:
#    - name: calculateNRI
#      title: Net Reclassification Index
#      type: Bool
#      default: false
#      description:
#          R: calculate Net Reclassification Index
#
#    - name: calculateIDI
#      title: Integrated Discrimination Index
#      type: Bool
#      default: false
#      description:
#          R: calculate Integrated Discrimination Index
#
#    - name: youdensJ
#      title: Youden's J Statistic
#      type: Bool
#      default: false
#      description:
#          R: calculate Youden's J statistic
#
#    - name: matthewsCC
#      title: Matthews Correlation Coefficient
#      type: Bool
#      default: false
#      description:
#          R: calculate Matthews Correlation Coefficient
#
# BOOTSTRAP:
#    - name: bootstrapCI
#      title: Bootstrap Confidence Intervals
#      type: Bool
#      default: false
#      description:
#          R: use bootstrap methods for confidence intervals
#
#    - name: nBootstrap
#      title: Bootstrap Iterations
#      type: Integer
#      min: 100
#      max: 10000
#      default: 1000
#      description:
#          R: number of bootstrap iterations
#
#    - name: confidenceLevel
#      title: Confidence Level
#      type: Number
#      min: 0.5
#      max: 0.999
#      default: 0.95
#      description:
#          R: confidence level for confidence intervals
#
# DISPLAY OPTIONS:
#    - name: showModelSelection
#      title: Show Model Selection Results
#      type: Bool
#      default: false
#
#    - name: showCalibration
#      title: Show Calibration Analysis
#      type: Bool
#      default: false
#
#    - name: showCrossValidation
#      title: Show Cross-Validation Details
#      type: Bool
#      default: false
#
#    - name: showComparison
#      title: Show Model Comparison
#      type: Bool
#      default: false
#
#    - name: showExplanations
#      title: Show Explanations
#      type: Bool
#      default: false
#
#    - name: showSummaries
#      title: Show Summaries
#      type: Bool
#      default: false
#
# PLOT OPTIONS:
#    - name: rocPlot
#      title: ROC Curves
#      type: Bool
#      default: false
#
#    - name: calibrationPlot
#      title: Calibration Plot
#      type: Bool
#      default: false
#
#    - name: comparisonPlot
#      title: Model Comparison Plot
#      type: Bool
#      default: false
#
#    - name: cvPerformancePlot
#      title: Cross-Validation Performance
#      type: Bool
#      default: false
#
#    - name: variableImportancePlot
#      title: Variable Importance Plot
#      type: Bool
#      default: false
#
# See git history for full option implementations.
# ============================================================================
...
