---
name:  agepyramid
title: Age Pyramid
jrs:   '1.1'

items:

    - name: welcome
      title: 'Getting Started'
      type: Html
      visible: (!age || !gender)

    - name: dataInfo
      title: 'Data Summary & Quality Information'
      type: Html
      visible: true

    - name:  pyramidTable
      title: 'Population Data'
      type: Table
      rows: 0
      columns:
      # columns: &idcols
        - name: Pop
          title: "Age Group"
          type: text
        - name: Female
          title: "Female (n)"
          type: number
        - name: Female_Pct
          title: "Female (%)"
          type: number
          format: 'zto;dp:1'
        - name: Male
          title: "Male (n)"
          type: number
        - name: Male_Pct
          title: "Male (%)"
          type: number
          format: 'zto;dp:1'
      clearWith:
          # Only data-affecting options that require recomputing aggregations
          - age
          - gender
          - female
          - male
          - bin_width
          - age_groups

    - name: plot
      title: 'Age Pyramid'
      type: Image
      width:  600
      height: 450
      renderFun: .plot
      requiresData: true
      clearWith:
          # Data options - trigger .run() and clear state
          - age
          - gender
          - female
          - male
          - bin_width
          - age_groups
          # Visual options - trigger re-render only
          # Note: These clear state, but .plot() will rebuild data if needed
          - plot_title
          - color1
          - color2
          - color_palette
          - plot_engine

refs:
    - ClinicoPathJamoviModule
    - ggcharts
...
