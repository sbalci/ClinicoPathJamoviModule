---
name: nonparametric
title: Non-parametric Statistical Methods
menuGroup: meddecideD
menuSubgroup: Advanced Statistical Methods
menuSubtitle: Distribution-free statistical analysis for robust inference
version: '0.0.31'
jas: '1.2'

description:
    main: |
        Comprehensive non-parametric statistical methods including Kruskal-Wallis test,
        Friedman test, robust alternatives to classical procedures, and distribution-free
        methods designed for clinical research where normality assumptions are violated.
    R:
        dontrun: false
        usage: |
            # Kruskal-Wallis test with post-hoc comparisons
            nonparametric(
                data = clinical_data,
                outcome = "biomarker_level",
                groups = "treatment_group",
                test_type = "kruskal_wallis",
                post_hoc = TRUE
            )

options:
    - name: data
      type: Data
      description:
          R: >
            The data as a data frame for non-parametric analysis.

    # Core variables
    - name: outcome
      title: Outcome Variable
      type: Variable
      suggested: [continuous]
      permitted: [numeric]

    - name: groups
      title: Grouping Variable
      type: Variable
      suggested: [nominal, ordinal]
      permitted: [factor]

    - name: paired_variable
      title: Paired/Repeated Measures Variable
      type: Variable
      suggested: [nominal, ordinal]
      permitted: [factor]
      default: null

    - name: blocking_variable
      title: Blocking Variable (for Friedman)
      type: Variable
      suggested: [nominal, ordinal]
      permitted: [factor]
      default: null

    # Test selection
    - name: test_type
      title: Non-parametric Test
      type: List
      options:
        - title: "Kruskal-Wallis Test"
          name: kruskal_wallis
        - title: "Friedman Test"
          name: friedman
        - title: "Mann-Whitney U Test"
          name: mann_whitney
        - title: "Wilcoxon Signed-Rank Test"
          name: wilcoxon_signed
        - title: "Median Test"
          name: median_test
        - title: "Van der Waerden Test"
          name: van_der_waerden
        - title: "Mood's Median Test"
          name: mood_median
      default: kruskal_wallis

    # Post-hoc analysis
    - name: post_hoc
      title: Perform Post-hoc Tests
      type: Bool
      default: true

    - name: post_hoc_method
      title: Post-hoc Method
      type: List
      options:
        - title: "Dunn's Test"
          name: dunn
        - title: "Conover-Iman Test"
          name: conover
        - title: "Steel-Dwass Test"
          name: steel_dwass
        - title: "Nemenyi Test"
          name: nemenyi
        - title: "Pairwise Wilcoxon"
          name: pairwise_wilcoxon
      default: dunn

    # Multiple comparison corrections
    - name: p_adjustment
      title: P-value Adjustment
      type: List
      options:
        - title: "None"
          name: none
        - title: "Bonferroni"
          name: bonferroni
        - title: "Holm"
          name: holm
        - title: "Hochberg"
          name: hochberg
        - title: "Benjamini-Hochberg (FDR)"
          name: BH
        - title: "Benjamini-Yekutieli"
          name: BY
      default: holm

    # Robust options
    - name: robust_method
      title: Robust Estimation Method
      type: List
      options:
        - title: "Standard Ranks"
          name: standard
        - title: "Trimmed Ranks"
          name: trimmed
        - title: "Winsorized Ranks"
          name: winsorized
        - title: "Aligned Ranks"
          name: aligned
        - title: "Hodges-Lehmann Estimator"
          name: hodges_lehmann
      default: standard

    - name: trim_proportion
      title: Trimming Proportion
      type: Number
      default: 0.1
      min: 0.01
      max: 0.4

    - name: winsorize_proportion
      title: Winsorizing Proportion  
      type: Number
      default: 0.1
      min: 0.01
      max: 0.4

    # Effect size calculations
    - name: effect_size
      title: Calculate Effect Sizes
      type: Bool
      default: true

    - name: effect_size_method
      title: Effect Size Method
      type: List
      options:
        - title: "Eta-squared (η²)"
          name: eta_squared
        - title: "Epsilon-squared (ε²)"
          name: epsilon_squared
        - title: "Rank-biserial correlation"
          name: rank_biserial
        - title: "Common Language Effect Size"
          name: cles
        - title: "Vargha-Delaney A"
          name: vargha_delaney
      default: eta_squared

    # Confidence intervals
    - name: confidence_level
      title: Confidence Level
      type: Number
      default: 0.95
      min: 0.50
      max: 0.99

    - name: bootstrap_ci
      title: Bootstrap Confidence Intervals
      type: Bool
      default: false

    - name: bootstrap_samples
      title: Bootstrap Samples
      type: Integer
      default: 1000
      min: 100
      max: 10000

    # Assumptions testing
    - name: test_assumptions
      title: Test Assumptions
      type: Bool
      default: true

    - name: homogeneity_test
      title: Test Homogeneity of Variance
      type: List
      options:
        - title: "Levene's Test"
          name: levene
        - title: "Brown-Forsythe Test"
          name: brown_forsythe
        - title: "Fligner-Killeen Test"
          name: fligner
        - title: "Bartlett's Test"
          name: bartlett
      default: levene

    # Visualization options
    - name: show_boxplots
      title: Show Box Plots
      type: Bool
      default: true

    - name: show_violin_plots
      title: Show Violin Plots
      type: Bool
      default: false

    - name: show_rank_plots
      title: Show Rank Distribution Plots
      type: Bool
      default: false

    - name: show_effect_plots
      title: Show Effect Size Plots
      type: Bool
      default: true

    # Output options
    - name: show_descriptives
      title: Show Descriptive Statistics
      type: Bool
      default: true

    - name: show_test_statistics
      title: Show Test Statistics Table
      type: Bool
      default: true

    - name: show_post_hoc_table
      title: Show Post-hoc Comparisons Table
      type: Bool
      default: true

    - name: show_effect_sizes
      title: Show Effect Sizes Table
      type: Bool
      default: true

    - name: show_assumptions
      title: Show Assumption Tests
      type: Bool
      default: true

    - name: show_interpretation
      title: Show Statistical Interpretation
      type: Bool
      default: true

    # Advanced options
    - name: exact_p_values
      title: Use Exact P-values (when available)
      type: Bool
      default: true

    - name: ties_method
      title: Method for Handling Ties
      type: List
      options:
        - title: "Average"
          name: average
        - title: "First"
          name: first
        - title: "Random"
          name: random
        - title: "Max"
          name: max
        - title: "Min"
          name: min
      default: average

    # Clinical interpretation
    - name: clinical_context
      title: Clinical Application Context
      type: List
      options:
        - title: "General Clinical Research"
          name: general
        - title: "Treatment Comparison"
          name: treatment
        - title: "Biomarker Analysis"
          name: biomarker
        - title: "Quality of Life Assessment"
          name: qol
        - title: "Diagnostic Performance"
          name: diagnostic
        - title: "Pathological Grading"
          name: pathological
      default: general

    # Reproducibility
    - name: set_seed
      title: Set Random Seed
      type: Bool
      default: true

    - name: seed_value
      title: Random Seed Value
      type: Integer
      default: 42
      min: 1
      max: 999999