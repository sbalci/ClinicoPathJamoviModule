---
name: decisioncombine
title: Combine Medical Decision Tests
jrs: '1.1'

items:
    - name: goldStandardFreqTable
      title: Gold Standard Frequencies
      type: Table
      visible: (od)
      rows: 0
      columns:
        - name: level
          title: 'Level'
          type: text
        - name: frequency
          title: 'Frequency'
          type: number
        - name: percentage
          title: 'Percentage'
          type: number
          format: percent
      clearWith:
        - test1
        - test2
        - test3
        - test1Positive
        - test2Positive
        - test3Positive

    - name: crossTabTable
      title: Cross-tabulation Tables
      type: Table
      visible: (od)
      rows: 0
      columns:
        - name: test_var
          title: 'Test Variable'
          type: text
        - name: test_level
          title: 'Test Level'
          type: text
        - name: gold_positive
          title: 'Gold Standard Positive'
          type: number
        - name: gold_negative
          title: 'Gold Standard Negative'
          type: number
        - name: total
          title: 'Total'
          type: number
      clearWith:
        - test1
        - test2
        - test3
        - test1Positive
        - test2Positive
        - test3Positive

    # Individual test tables
    - name: indTable1
      title: 'Test 1 Results'
      type: Table
      visible: (showIndividual && !is.null(test1))
      rows: 0
      columns:
        - name: newtest
          title: ''
          type: text
        - name: GP
          title: 'Gold Positive'
          type: number
        - name: GN
          title: 'Gold Negative'
          type: number
        - name: Total
          title: 'Total'
          type: number
      clearWith:
        - test1
        - test2
        - test3
        - test1Positive
        - test2Positive
        - test3Positive

    - name: indTable2
      title: 'Test 2 Results'
      type: Table
      visible: (showIndividual && !is.null(test2))
      rows: 0
      columns:
        - name: newtest
          title: ''
          type: text
        - name: GP
          title: 'Gold Positive'
          type: number
        - name: GN
          title: 'Gold Negative'
          type: number
        - name: Total
          title: 'Total'
          type: number
      clearWith:
        - test1
        - test2
        - test3
        - test1Positive
        - test2Positive
        - test3Positive

    - name: indTable3
      title: 'Test 3 Results'
      type: Table
      visible: (showIndividual && !is.null(test3))
      rows: 0
      columns:
        - name: newtest
          title: ''
          type: text
        - name: GP
          title: 'Gold Positive'
          type: number
        - name: GN
          title: 'Gold Negative'
          type: number
        - name: Total
          title: 'Total'
          type: number
      clearWith:
        - test1
        - test2
        - test3
        - test1Positive
        - test2Positive
        - test3Positive

    - name: combinationsAnalysis
      title: 'Test Combination Patterns Analysis'
      type: Html
      visible: true
      description: 'Comprehensive analysis of all possible test combinations'
      clearWith:
        - test1
        - test2
        - test3
        - test1Positive
        - test2Positive
        - test3Positive

    # Combination statistics tables
    - name: combStatsTable
      title: 'Combination Diagnostic Statistics'
      type: Table
      visible: true
      rows: 0
      columns:
        - name: combination
          title: 'Pattern'
          type: text
        - name: sens
          title: 'Sensitivity'
          type: number
          format: pc
        - name: spec  
          title: 'Specificity'
          type: number
          format: pc
        - name: ppv
          title: 'PPV'
          type: number
          format: pc
        - name: npv
          title: 'NPV'
          type: number
          format: pc
        - name: acc
          title: 'Accuracy'
          type: number
          format: pc
      clearWith:
        - test1
        - test2
        - test3
        - test1Positive
        - test2Positive
        - test3Positive

    - name: combStatsTableCI
      title: 'Combination Diagnostic Statistics with 95% CI'
      type: Table
      visible: true
      rows: 0  
      columns:
        - name: combination
          title: 'Pattern'
          type: text
        - name: statistic
          title: 'Statistic'
          type: text
        - name: estimate
          title: 'Estimate'
          type: number
          format: pc
        - name: lower
          title: 'Lower'
          superTitle: '95% CI'
          type: number
          format: pc
        - name: upper
          title: 'Upper'
          superTitle: '95% CI'
          type: number
          format: pc
      clearWith:
        - test1
        - test2
        - test3
        - test1Positive
        - test2Positive
        - test3Positive

    - name: addCombinationPattern
      title: 'Add Combination Pattern to Data'
      type: Output
      varTitle: TestCombination
      varDescription: Test combination pattern (e.g., +/+, +/-, -/+, -/-)
      measureType: nominal
      clearWith:
        - test1
        - test2
        - test3
        - test1Positive
        - test2Positive
        - test3Positive


refs:
    - DiagnosticTests
    - ClinicoPathJamoviModule
...