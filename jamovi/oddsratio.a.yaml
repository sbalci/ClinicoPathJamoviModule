---
name:  oddsratio
title: Odds Ratio Table and Plot
menuGroup: SurvivalD
menuSubgroup: General Statistics
menuSubtitle: 'Odds Ratio for Binary Outcomes'
version: '0.0.32'
jas: '1.2'

description:
    main: Function for Odds Ratio Table and Plot.
    R:
        dontrun: false
        usage: |
            # Basic odds ratio analysis with binary outcome
            library(ClinicoPath)
            data('histopathology')
            
            # Example 1: Simple odds ratio analysis
            result1 <- oddsratio(
                data = histopathology,
                explanatory = c("New Test", "Rater 1"),
                outcome = "Golden Standart",
                outcomeLevel = "1"
            )
            
            # Example 2: Comprehensive analysis with nomogram
            result2 <- oddsratio(
                data = histopathology,
                explanatory = c("New Test", "Rater 1", "Rater 2"),
                outcome = "Golden Standart", 
                outcomeLevel = "1",
                showNomogram = TRUE,
                showSummaries = TRUE,
                showExplanations = TRUE
            )
            
            # Example 3: Analysis with continuous and categorical predictors
            # Assuming additional variables in dataset
            result3 <- oddsratio(
                data = clinical_data,
                explanatory = c("age", "gender", "treatment"),
                outcome = "mortality",
                outcomeLevel = "Dead",
                showSummaries = TRUE
            )

options:
    - name: data
      type: Data
      description:
          R: >
            The data as a data frame.

    - name: explanatory
      title: Explanatory Variables
      type: Variables
      suggested: [ nominal, continuous ]
      permitted: [ factor, numeric ]
      description:
          main: >
              The explanatory variables to be used in the analysis.
          R: >
              The explanatory variables to be used in the analysis.

    - name: outcome
      title: Mortality or Recurrence
      type: Variable
      suggested: [ ordinal, nominal ]
      permitted: [ factor ]
      description:
          main: >
              The outcome variable to be used in the analysis.
          R: >
              The outcome variable to be used in the analysis.

    - name: outcomeLevel
      title: Positive Level
      type: Level
      variable: (outcome)
      description:
          main: >
              Specify which outcome level represents the positive case (e.g., "Dead", "Event", "Yes").
              This is important for correct calculation of likelihood ratios and diagnostic metrics.
          R: >
            Specify which outcome level represents the positive case for likelihood ratio calculations.
            If not specified, the function will use the second level alphabetically.

    - name: diagnosticPredictor
      title: Diagnostic Predictor (for LRs)
      type: Variable
      suggested: [ nominal ]
      permitted: [ factor ]
      default: null
      description:
          main: >
              Choose which binary predictor to use for sensitivity/specificity and likelihood ratios in the nomogram.
              If left empty, the first explanatory variable is used. Ensure it has exactly two levels.
          R: >
              Specify the predictor to drive likelihood ratios; must be binary. Defaults to the first explanatory variable.

    - name: predictorLevel
      title: Predictor Positive Level
      type: Level
      variable: (diagnosticPredictor)
      description:
          main: >
              Specify which level of the diagnostic predictor represents the positive case (e.g., "Present", "Test+", "Yes").
              Required for correct sensitivity, specificity, and likelihood ratio calculations.
          R: >
              Specify which level of the diagnostic predictor represents the positive case.

    - name: usePenalized
      title: Use Firth Penalized Logistic Regression
      type: Bool
      default: false
      description:
          R: >
              Use Firth penalized likelihood logistic regression. This is recommended
              when there is separation (zero cells), small sample sizes, or low events-per-variable.


# Nomogram ----

    - name: showNomogram
      title: Show Diagnostic Nomogram
      type: Bool
      default: false
      description:
          R: >
            Display an interactive nomogram for converting pre-test to post-test
            probabilities using likelihood ratios calculated from the data.

    - name: showExplanations
      title: "Show Educational Explanations"
      type: Bool
      default: false
      description:
          R: >
            Display educational explanations for each analysis type to help interpret 
            odds ratios, risk ratios, diagnostic test performance, ROC analysis, 
            and likelihood ratios.



...
