title: Pathology Sampling Adequacy Analysis
name: pathsampling
jus: '3.0'
stage: 0
compilerMode: tame
children:
  - type: CollapseBox
    label: Instructions
    collapsed: true
    children:
      - type: LayoutBox
        margin: large
        children:
          - type: Label
            label: "Instructions"
            children:
              - type: CheckBox
                name: showGuidedInstructions
              - type: CheckBox
                name: showConciseInstructions


  - type: VariableSupplier
    persistentItems: false
    stretchFactor: 1
    permitted:
      - numeric
      - factor
      - id
    children:
      - type: TargetLayoutBox
        label: Total Samples (Required)
        children:
          - type: VariablesListBox
            name: totalSamples
            maxItemCount: 1
            isTarget: true
            itemDropBehaviour: overwrite
      - type: TargetLayoutBox
        label: First Detection (Required)
        children:
          - type: VariablesListBox
            name: firstDetection
            maxItemCount: 1
            isTarget: true
            itemDropBehaviour: overwrite
  - type: CollapseBox
    label: Analysis Parameters
    collapsed: false
    children:
      - type: LayoutBox
        margin: large
        children:
          - type: Label
            label: Clinical Context
            children:
              - type: ComboBox
                name: analysisContext
          - type: Label
            label: Sampling Protocol Settings
            children:
              - type: TextBox
                name: targetConfidence
                format: number
              - type: TextBox
                name: maxSamples
                format: number
          - type: Label
            label: Statistical Methods
            children:
              - type: ComboBox
                name: estimationMethod
              - type: TextBox
                name: bootstrapIterations
                format: number
  - type: CollapseBox
    label: Core Analyses
    collapsed: false
    children:
      - type: LayoutBox
        margin: large
        children:
          - type: CheckBox
            name: showClinicalSummary
          - type: CheckBox
            name: showBinomialModel
          - type: CheckBox
            name: showBootstrap
          - type: CheckBox
            name: showDetectionCurve
          - type: CheckBox
            name: showSensitivityCI
  - type: CollapseBox
    label: Enhanced Detection (Requires Positive Count)
    collapsed: true
    children:
      - type: VariableSupplier
        persistentItems: false
        stretchFactor: 1
        permitted:
          - numeric
          - factor
          - id
        children:
          - type: TargetLayoutBox
            label: Positive Samples Count (Optional)
            children:
              - type: VariablesListBox
                name: positiveCount
                maxItemCount: 1
                isTarget: true
                itemDropBehaviour: overwrite
      - type: LayoutBox
        margin: large
        children:
          - type: CheckBox
            name: showEmpiricalCumulative
          - type: CheckBox
            name: showIncrementalYield
          - type: CheckBox
            name: showPopulationDetection
  - type: CollapseBox
    label: Spatial & Multifocal Analyses (Requires Sample List)
    collapsed: true
    children:
      - type: VariableSupplier
        persistentItems: false
        stretchFactor: 1
        permitted:
          - numeric
          - factor
          - id
        children:
          - type: TargetLayoutBox
            label: Positive Samples List (Optional)
            children:
              - type: VariablesListBox
                name: positiveSamplesList
                maxItemCount: 1
                isTarget: true
                itemDropBehaviour: overwrite
      - type: LayoutBox
        margin: large
        children:
          - type: CheckBox
            name: showSpatialClustering
          - type: CheckBox
            name: showMultifocalAnalysis
  - type: CollapseBox
    label: Stratified Analyses (Requires Sample Type)
    collapsed: true
    children:
      - type: VariableSupplier
        persistentItems: false
        stretchFactor: 1
        permitted:
          - numeric
          - factor
          - id
        children:
          - type: TargetLayoutBox
            label: Sample Type/Subtype (Optional)
            children:
              - type: VariablesListBox
                name: sampleType
                maxItemCount: 1
                isTarget: true
                itemDropBehaviour: overwrite
      - type: LayoutBox
        margin: large
        children:
          - type: CheckBox
            name: showStratifiedAnalysis
  - type: CollapseBox
    label: Tumor Burden & Stage Migration
    collapsed: true
    children:
      - type: VariableSupplier
        persistentItems: false
        stretchFactor: 1
        children:
          - type: TargetLayoutBox
            label: Positive Samples (for burden)
            children:
              - type: VariablesListBox
                name: positiveCassettes
                maxItemCount: 1
                isTarget: true
                itemDropBehaviour: overwrite
          - type: TargetLayoutBox
            label: Max Foci per Sample (optional)
            children:
              - type: VariablesListBox
                name: maxPositiveSingle
                maxItemCount: 1
                isTarget: true
                itemDropBehaviour: overwrite
      - type: LayoutBox
        margin: large
        children:
          - type: CheckBox
            name: showTumorBurden
          - type: CheckBox
            name: showStageMigration
          - type: CheckBox
            name: showCorrelation
          - type: CheckBox
            name: showDistributionPattern
          - type: TextBox
            name: distributionThreshold
            format: number
            enable: (showDistributionPattern)
  - type: CollapseBox
    label: Specialized Models
    collapsed: true
    children:
      - type: Label
        label: Finite Population Models
        children:
          - type: VariableSupplier
            persistentItems: false
            stretchFactor: 1
            children:
              - type: TargetLayoutBox
                label: Total Population
                children:
                  - type: VariablesListBox
                    name: totalPopulation
                    maxItemCount: 1
                    isTarget: true
                    itemDropBehaviour: overwrite
              - type: TargetLayoutBox
                label: Success States
                children:
                  - type: VariablesListBox
                    name: successStates
                    maxItemCount: 1
                    isTarget: true
                    itemDropBehaviour: overwrite
          - type: LayoutBox
            margin: large
            children:
              - type: ComboBox
                name: modelType
              - type: CheckBox
                name: showHypergeometric
              - type: CheckBox
                name: showBetaBinomial
              - type: TextBox
                name: targetDetections
                format: number
                enable: (showHypergeometric)
      - type: Label
        label: Lymph Node Analyses
        children:
          - type: VariableSupplier
            persistentItems: false
            stretchFactor: 1
            children:
              - type: TargetLayoutBox
                label: Total Lymph Nodes
                children:
                  - type: VariablesListBox
                    name: totalLymphNodes
                    maxItemCount: 1
                    isTarget: true
                    itemDropBehaviour: overwrite
              - type: TargetLayoutBox
                label: Positive Lymph Nodes
                children:
                  - type: VariablesListBox
                    name: positiveLymphNodes
                    maxItemCount: 1
                    isTarget: true
                    itemDropBehaviour: overwrite
          - type: LayoutBox
            margin: large
            children:
              - type: CheckBox
                name: showLNAnalysis
              - type: TextBox
                name: lnrThreshold1
                format: number
                enable: (showLNAnalysis)
              - type: TextBox
                name: lnrThreshold2
                format: number
                enable: (showLNAnalysis)
              - type: CheckBox
                name: showEffectSizes
      - type: Label
        label: Literature-Based Analyses
        children:
          - type: LayoutBox
            margin: large
            children:
              - type: CheckBox
                name: showOmentumAnalysis
  - type: CollapseBox
    label: Display Options
    collapsed: false
    children:
      - type: LayoutBox
        margin: large
        children:
          - type: Label
            label: "Specific Text Outputs"
            children:
              - type: CheckBox
                name: showProbabilityExplanation
              - type: CheckBox
                name: showKeyResults
              - type: CheckBox
                name: showRecommendText
              - type: CheckBox
                name: showInterpretText
              - type: CheckBox
                name: showReferencesText
  - type: CollapseBox
    label: Advanced Options
    collapsed: true
    children:
      - type: LayoutBox
        margin: large
        children:
          - type: CheckBox
            name: setSeed
          - type: TextBox
            name: seedValue
            format: number
            enable: (setSeed)
