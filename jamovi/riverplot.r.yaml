---
name: riverplot
title: River Plots & Alluvial Diagrams
jrs: '1.1'
refs: ClinicoPath
    - ClinicoPathJamoviModule
items:
    - name: todo
      title: Welcome & Instructions
      type: Html
      visible: true

    - name: summary
      title: Analysis Summary
      type: Html
      visible: true

    - name: reportSentence
      title: Copy-Ready Report
      type: Html
      visible: true

    - name: about_analysis
      title: About This Analysis
      type: Html
      visible: true

    - name: plot
      title: River Plot
      type: Image
      width: 800
      height: 600
      renderFun: .plot
      visible: true

    - name: diagnostics
      title: Data Processing Diagnostics
      type: Html
      visible: (enableDiagnostics)

    - name: flowTable
      title: Flow Summary Table
      type: Table
      visible: (showCounts || showPercentages)
      columns:
          - name: from_stage
            title: From Stage
            type: text
          - name: from_category
            title: From Category
            type: text
          - name: to_stage
            title: To Stage
            type: text
          - name: to_category
            title: To Category
            type: text
          - name: count
            title: Count
            type: integer
            visible: (showCounts)
          - name: percentage
            title: Percentage
            type: number
            format: dp:1
            visible: (showPercentages)
          - name: weight
            title: Weighted Value
            type: number
            visible: (weight)

    - name: stageTable
      title: Stage Summary Table
      type: Table
      visible: (showCounts || showPercentages)  
      columns:
          - name: stage
            title: Stage/Time
            type: text
          - name: category
            title: Category
            type: text
          - name: count
            title: Count
            type: integer
            visible: (showCounts)
          - name: percentage
            title: Percentage
            type: number
            format: dp:1
            visible: (showPercentages)
          - name: cumulative
            title: Cumulative %
            type: number
            format: dp:1
            visible: (showPercentages)

    - name: transitionMatrix
      title: Transition Matrix
      type: Table
      visible: (enableDiagnostics && (plotType == 'alluvial' || plotType == 'flow'))
      columns:
          - name: from
            title: From Category
            type: text
          - name: to
            title: To Category
            type: text
          - name: probability
            title: Probability
            type: number
            format: dp:3
          - name: count
            title: Count
            type: integer

    - name: riverplotObject
      title: Riverplot Object Structure
      type: Html
      visible: (exportRiverplotObject)

    - name: riverplotCode
      title: CRAN Riverplot Compatible Code
      type: Html
      visible: (exportRiverplotObject)

    - name: validation_report
      title: Enhanced Validation Report
      type: Html
      visible: (enhanced_validation)

    - name: cross_reference_suggestions
      title: Alternative Analysis Suggestions
      type: Html
      visible: (cross_reference_mode)

    - name: optimization_report
      title: Quality Optimization Report  
      type: Html
      visible: (quality_optimization)

    - name: clinical_insights
      title: Clinical Decision Support
      type: Html
      visible: (clinicalPreset != 'none')

    - name: enhanced_caveats
      title: Clinical Assumptions & Considerations  
      type: Html
      visible: (enhanced_validation)

...
