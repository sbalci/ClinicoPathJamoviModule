---
name: ihcscoring
title: IHC Scoring Standardization
menuGroup: OncoPathologyT
version: '1.0.0'
jas: '1.2'

options:
    - name: data
      type: Data
      description:
          R: the data as a data frame

    - name: intensity_var
      title: Intensity Variable
      type: Variable
      suggested:
        - continuous
      permitted:
        - numeric
      description:
          R: >
            staining intensity scores (typically 0-3 scale)

    - name: proportion_var
      title: Proportion Variable
      type: Variable
      suggested:
        - continuous
      permitted:
        - numeric
      description:
          R: >
            percentage of positive cells (0-100%)

    - name: sample_id_var
      title: Sample ID Variable (Optional)
      type: Variable
      suggested:
        - nominal
      permitted:
        - factor
        - id
      description:
          R: >
            unique identifier for each sample

    - name: group_var
      title: Group Variable (Optional)
      type: Variable
      suggested:
        - nominal
      permitted:
        - factor
      description:
          R: >
            grouping variable for comparative analysis

    - name: scoring_method
      title: Primary Scoring Method
      type: List
      options:
        - name: hscore
          title: 'H-score (Histoscore)'
        - name: allred
          title: 'Allred Score'
        - name: both
          title: 'Both H-score and Allred'
      default: both
      description:
          R: >
            primary scoring methodology to emphasize

    - name: binary_cutpoint
      title: Binary Classification Cutpoint
      type: Number
      min: 0
      max: 300
      default: 100
      description:
          R: >
            H-score cutpoint for positive/negative classification

    - name: allred_cutpoint
      title: Allred Score Cutpoint
      type: Number
      min: 0
      max: 8
      default: 3
      description:
          R: >
            Allred score cutpoint for positive/negative classification

    - name: intensity_scale
      title: Intensity Scale
      type: List
      options:
        - name: standard
          title: '0-3 Standard Scale'
        - name: extended
          title: '0-4 Extended Scale'
        - name: custom
          title: 'Custom Scale'
      default: standard
      description:
          R: >
            intensity scoring scale used

    - name: biomarker_type
      title: Biomarker Type
      type: List
      options:
        - name: er
          title: 'Estrogen Receptor (ER)'
        - name: pr
          title: 'Progesterone Receptor (PR)'
        - name: her2
          title: 'HER2'
        - name: ki67
          title: 'Ki-67'
        - name: pdl1
          title: 'PD-L1'
        - name: other
          title: 'Other Biomarker'
      default: other
      description:
          R: >
            specific biomarker being analyzed

    - name: show_plots
      title: Show Distribution Plots
      type: Bool
      default: true
      description:
          R: >
            display scoring distribution and correlation plots

    - name: show_agreement_plots
      title: Show Agreement Plots
      type: Bool
      default: true
      description:
          R: >
            display method agreement analysis plots

    - name: include_statistics
      title: Include Descriptive Statistics
      type: Bool
      default: true
      description:
          R: >
            calculate comprehensive descriptive statistics

    - name: include_digital_validation
      title: Include Digital Validation Framework
      type: Bool
      default: false
      description:
          R: >
            include digital pathology validation metrics

    - name: agreement_analysis
      title: Perform Agreement Analysis
      type: Bool
      default: true
      description:
          R: >
            calculate inter-method agreement statistics

    - name: quality_control
      title: Quality Control Assessment
      type: Bool
      default: true
      description:
          R: >
            perform quality control checks and outlier detection

    - name: clinical_interpretation
      title: Clinical Interpretation
      type: Bool
      default: true
      description:
          R: >
            provide clinical context and interpretation

    - name: export_results
      title: Export Results for External Use
      type: Bool
      default: false
      description:
          R: >
            format results for external analysis or reporting

    - name: confidence_level
      title: Confidence Level
      type: Number
      min: 0.80
      max: 0.99
      default: 0.95
      description:
          R: >
            confidence level for statistical intervals

    - name: bootstrap_n
      title: Bootstrap Replicates
      type: Integer
      min: 100
      max: 5000
      default: 1000
      description:
          R: >
            number of bootstrap replicates for confidence intervals

...