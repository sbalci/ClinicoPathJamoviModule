---
name: semimarkov
title: Semi-Markov Models
menuGroup: SurvivalD
menuSubgroup: jsurvival Multi-State Models
version: '0.0.1'
jas: '1.2'

description:
    main: >
        Fits Semi-Markov models where transition intensities depend on time since 
        last transition rather than absolute time. Suitable for processes where the 
        'clock' resets at each transition using SemiMarkov package.
    R:
        dontrun: true
        usage: |
            # example will be added

options:
    - name: data
      type: Data
      description:
          R: >
            The data as a data frame.

    - name: time
      title: Time Variable
      type: Variable
      suggested: [ continuous ]
      permitted: [ numeric ]
      description: >
          Follow-up time variable

    - name: event
      title: Event Variable  
      type: Variable
      suggested: [ ordinal, nominal ]
      permitted: [ factor, numeric ]
      description: >
          Event/state variable indicating transitions between states

    - name: subject
      title: Subject ID
      type: Variable
      suggested: [ ordinal, nominal ]
      permitted: [ factor, numeric ]
      description: >
          Subject identifier for longitudinal tracking

    - name: covs
      title: Covariates
      type: Variables
      suggested: [ continuous, ordinal, nominal ]
      permitted: [ numeric, factor ]
      description: >
          Covariates affecting transition intensities

    - name: modelType
      title: Model Type
      type: List
      options:
        - title: Semi-Markov Parametric
          name: parametric
        - title: Semi-Markov Non-parametric
          name: nonparametric
        - title: Semi-Markov Regression
          name: regression
        - title: Competing Risks Semi-Markov
          name: competing
        - title: Multi-phase Semi-Markov
          name: multiphase
      default: parametric
      description: >
          Type of Semi-Markov model to fit

    - name: transitionStructure
      title: Transition Structure
      type: List
      options:
        - title: Progressive (Forward only)
          name: progressive
        - title: Reversible (Bidirectional)
          name: reversible
        - title: Illness-Death (3-state)
          name: illnessdeath
        - title: Custom Structure
          name: custom
      default: progressive
      description: >
          Structure of allowed transitions between states

    - name: distributionType
      title: Sojourn Distribution
      type: List
      options:
        - title: Exponential
          name: exponential
        - title: Weibull
          name: weibull
        - title: Gamma
          name: gamma
        - title: Log-normal
          name: lognormal
        - title: Generalized Gamma
          name: gengamma
        - title: Non-parametric
          name: nonparametric
      default: weibull
      description: >
          Distribution for sojourn times in each state

    - name: estimationMethod
      title: Estimation Method
      type: List
      options:
        - title: Maximum Likelihood
          name: ml
        - title: Method of Moments
          name: mm
        - title: Bayesian MCMC
          name: bayesian
        - title: Non-parametric
          name: nonparametric
      default: ml
      description: >
          Method for parameter estimation

    - name: timeScale
      title: Time Scale
      type: List
      options:
        - title: Days
          name: days
        - title: Months
          name: months
        - title: Years
          name: years
        - title: Auto-detect
          name: auto
      default: auto
      description: >
          Time scale for analysis and reporting

    - name: predictionHorizons
      title: Prediction Horizons
      type: String
      default: "1, 3, 5, 10"
      description: >
          Comma-separated list of time horizons for predictions

    - name: timePoints
      title: Time Points for Analysis
      type: String
      default: "0.5, 1, 2, 3, 5"
      description: >
          Time points for transition probability estimation

    - name: conf
      title: Confidence Level
      type: Number
      min: 0.5
      max: 0.99
      default: 0.95
      description: >
          Confidence level for confidence intervals

    - name: maxIterations
      title: Maximum Iterations
      type: Number
      min: 100
      max: 10000
      default: 1000
      description: >
          Maximum iterations for convergence

    - name: tolerance
      title: Convergence Tolerance
      type: Number
      min: 1e-8
      max: 1e-3
      default: 1e-6
      description: >
          Convergence tolerance for optimization

    - name: bootstrapSamples
      title: Bootstrap Samples
      type: Number
      min: 100
      max: 2000
      default: 500
      description: >
          Number of bootstrap samples for confidence intervals

    - name: showTransitionRates
      title: Show Transition Rates
      type: Bool
      default: true
      description: >
          Display estimated transition rates and parameters

    - name: showSojournDistribution
      title: Show Sojourn Distributions
      type: Bool  
      default: true
      description: >
          Display sojourn time distribution parameters

    - name: showTransitionProbs
      title: Show Transition Probabilities
      type: Bool
      default: true
      description: >
          Display transition probabilities over time

    - name: showStateProbabilities
      title: Show State Probabilities
      type: Bool
      default: true
      description: >
          Display state occupation probabilities

    - name: showReliabilityAnalysis
      title: Show Reliability Analysis
      type: Bool
      default: false
      description: >
          Display reliability and survival function analysis

    - name: showModelDiagnostics
      title: Show Model Diagnostics
      type: Bool
      default: true
      description: >
          Display goodness-of-fit and diagnostic tests

    - name: showPredictions
      title: Show Predictions
      type: Bool
      default: true
      description: >
          Display future state predictions

    - name: showEducational
      title: Show Educational Information
      type: Bool
      default: true
      description: >
          Display educational information about Semi-Markov models

    - name: plotSojournDistributions
      title: Plot Sojourn Distributions
      type: Bool
      default: true
      description: >
          Display sojourn time distribution plots

    - name: plotTransitionIntensities
      title: Plot Transition Intensities
      type: Bool
      default: false
      description: >
          Display transition intensity functions over time

    - name: plotStateProbabilities
      title: Plot State Probabilities
      type: Bool
      default: true
      description: >
          Display state occupation probability plots

    - name: plotReliabilityFunctions
      title: Plot Reliability Functions
      type: Bool
      default: false
      description: >
          Display reliability and hazard function plots

    - name: plotModelDiagnostics
      title: Plot Model Diagnostics
      type: Bool
      default: false
      description: >
          Display diagnostic and goodness-of-fit plots
...