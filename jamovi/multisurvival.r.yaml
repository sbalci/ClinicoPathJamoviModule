---
name:  multisurvival
title: Multivariable Survival Analysis
jrs:   '1.1'


items:

    - name:  todo
      title: To Do
      type:  Html
      clearWith:
          - outcome
          - outcomeLevel
          - elapsedtime
          - explanatory
          - contexpl
          - fudate
          - dxdate
          - tint
          - multievent
          # - use_modelSelection

    # - name:  mydataview
    #   title: mydataview
    #   type:  Preformatted

    # - name:  mydataview_cox
    #   title: mydataview_cox
    #   type:  Preformatted

    - name:  multivariableCoxHeading
      title: Multivariable Cox Regression
      type:  Preformatted
      

    - name:  text
      title: Multivariable Survival
      type:  Html
      refs: finalfit
      clearWith:
          - outcome
          - outcomeLevel
          - elapsedtime
          - explanatory
          - contexpl
          - fudate
          - dxdate
          - tint
          - multievent
          # - use_modelSelection
      

    - name:  text2
      title: ''
      type:  Html
      refs: finalfit
      clearWith:
          - outcome
          - outcomeLevel
          - elapsedtime
          - explanatory
          - contexpl
          - fudate
          - dxdate
          - tint
          - multievent
          # - use_modelSelection

    # Multivariable Cox Summary (right after main analysis)
    - name: multivariableCoxSummaryHeading
      title: 'Natural Language Summary'
      type: Preformatted
      visible: (showSummaries)

    - name: multivariableCoxSummary
      title: ''
      type: Html
      visible: (showSummaries)
      clearWith:
          - outcome
          - outcomeLevel
          - elapsedtime
          - explanatory
          - contexpl
          - fudate
          - dxdate
          - tint
          - multievent

    # Statistical Glossary Panel
    - name: glossaryPanel
      title: 'ðŸ“– Statistical Glossary'
      type: Html
      visible: (showExplanations)

    # Assumptions Checklist Panel
    - name: assumptionsPanel
      title: 'Assumptions & Caveats'
      type: Html
      visible: (showExplanations)

    # AFT Model Results (Accelerated Failure Time)
    # - name: aftModelHeading
    #   title: 'AFT Model Results (Accelerated Failure Time)'
    #   type: Preformatted
    #   visible: (use_aft)

    # - name: aftModelTable
    #   title: 'AFT Regression Coefficients'
    #   type: Table
    #   visible: (use_aft)
    #   rows: 0
    #   columns:
    #     - name: variable
    #       title: "Variable"
    #       type: text
    #     - name: coefficient
    #       title: "Coefficient"
    #       type: number
    #       format: zto,pvalue
    #     - name: time_ratio
    #       title: "Time Ratio"
    #       superTitle: "(TR)"
    #       type: number
    #       format: zto
    #     - name: tr_lower
    #       title: "Lower"
    #       superTitle: '95% CI'
    #       type: number
    #       format: zto
    #     - name: tr_upper
    #       title: "Upper"
    #       superTitle: '95% CI'
    #       type: number
    #       format: zto
    #     - name: se
    #       title: "Std Error"
    #       type: number
    #       format: zto
    #     - name: z_stat
    #       title: "Z"
    #       type: number
    #       format: zto
    #     - name: p_value
    #       title: "p"
    #       type: number
    #       format: zto,pvalue
    #     - name: interpretation
    #       title: "Interpretation"
    #       type: text
    #       visible: (aft_show_interpretation)
    #   clearWith:
    #     - outcome
    #     - outcomeLevel
    #     - elapsedtime
    #     - explanatory
    #     - contexpl
    #     - use_aft
    #     - aft_distribution

    # - name: aftSummaryHeading
    #   title: 'AFT Model Natural Language Summary'
    #   type: Preformatted
    #   visible: (use_aft && showSummaries)

    # - name: aftSummary
    #   title: ''
    #   type: Html
    #   visible: (use_aft && showSummaries)
    #   clearWith:
    #     - outcome
    #     - outcomeLevel
    #     - elapsedtime
    #     - explanatory
    #     - contexpl
    #     - use_aft
    #     - aft_distribution

    # - name: aftModelInfo
    #   title: 'AFT Model Information'
    #   type: Html
    #   visible: (use_aft)
    #   clearWith:
    #     - use_aft
    #     - aft_distribution
    #     - aft_show_hr_equivalent


    # SurvMetrics - Model Performance Metrics
    # SurvMetrics - Model Performance Metrics
    # - name: survMetricsHeading
    #   title: 'Model Performance Metrics (SurvMetrics)'
    #   type: Preformatted
    #   visible: (show_survmetrics)

    # - name: survMetricsTable
    #   title: 'Survival Model Performance Metrics'
    #   type: Table
    #   visible: (show_survmetrics)
    #   rows: 0
    #   columns:
    #     - name: metric
    #       title: "Metric"
    #       type: text
    #     - name: value
    #       title: "Value"
    #       type: number
    #       format: zto
    #     - name: ci_lower
    #       title: "Lower"
    #       superTitle: '95% CI'
    #       type: number
    #       format: zto
    #     - name: ci_upper
    #       title: "Upper"
    #       superTitle: '95% CI'
    #       type: number
    #       format: zto
    #     - name: interpretation
    #       title: "Interpretation"
    #       type: text
    #   clearWith:
    #     - outcome
    #     - outcomeLevel
    #     - elapsedtime
    #     - explanatory
    #     - contexpl
    #     - show_survmetrics

    # - name: survMetricsSummaryHeading
    #   title: 'Model Performance Summary'
    #   type: Preformatted
    #   visible: (show_survmetrics && showSummaries)

    # - name: survMetricsSummary
    #   title: ''
    #   type: Html
    #   visible: (show_survmetrics && showSummaries)
    #   clearWith:
    #     - outcome
    #     - explanatory
    #     - contexpl
    #     - show_survmetrics

    # - name: survMetricsPlot
    #   title: 'Brier Score Over Time'
    #   type: Image
    #   width: 600
    #   height: 450
    #   renderFun: .plotSurvMetrics
    #   requiresData: true
    #   visible: (show_survmetrics && survmetrics_show_plots)
    #   clearWith:
    #     - outcome
    #     - outcomeLevel
    #     - elapsedtime
    #     - explanatory
    #     - contexpl
    #     - show_survmetrics
    #     - survmetrics_show_plots



    # - name:  mydataview_personTimeAnalysis
    #   title: mydataview_personTimeAnalysis
    #   type:  Preformatted

    - name:  personTimeHeading
      title: Person-Time Analysis
      type:  Preformatted
      visible: (person_time)
      

    - name: personTimeTable
      title: 'Person-Time Analysis'
      type: Table
      visible: (person_time)
      rows: 0
      columns:
        - name: interval
          title: "Time Interval"
          type: text
        - name: events
          title: "Events"
          type: integer
        - name: person_time
          title: "Person-Time"
          type: number
          format: zto
        - name: rate
          title: "Incidence Rate"
          type: number
          format: zto
        - name: rate_ci_lower
          title: "Lower"
          superTitle: '95% CI'
          type: number
          format: zto
        - name: rate_ci_upper
          title: "Upper"
          superTitle: '95% CI'
          type: number
          format: zto
      clearWith:
        - outcome
        - outcomeLevel
        - elapsedtime
        - rate_multiplier
        - time_intervals
        - person_time
        - outcome
        - outcomeLevel
        - elapsedtime
        - fudate
        - dxdate
        - tint
        - multievent
        # - use_modelSelection
        - person_time

    # Person-Time Summary (right after person-time analysis)
    - name: personTimeSummaryHeading
      title: 'Person-Time Natural Language Summary'
      type: Preformatted
      visible: (person_time && showSummaries)

    - name: personTimeSummary
      title: ''
      type: Html
      visible: (person_time && showSummaries)
      clearWith:
        - outcome
        - outcomeLevel
        - elapsedtime
        - rate_multiplier
        - time_intervals
        - person_time
        - outcome
        - outcomeLevel
        - elapsedtime
        - fudate
        - dxdate
        - tint
        - multievent
        # - use_modelSelection
        - person_time






    # Survival Plots Section
    - name: survivalPlotsHeading
      title: 'Survival Plots'
      type: Preformatted
      visible: (hr || km || ac)

    - name: plot
      title: Hazards Regression Plot
      type: Image
      width:  600
      height: 450
      renderFun: .plot
      requiresData: true
      visible: (hr && sty:t1)
      refs: finalfit
      clearWith:
          - hr
          - sty
          - outcome
          - outcomeLevel
          - elapsedtime
          - explanatory
          - contexpl
          - fudate
          - dxdate
          - tint
          - multievent
          # - use_modelSelection



    # - name: plot2
    #   title: Hazards Regression Plot
    #   type: Image
    #   width:  800
    #   height: 600
    #   renderFun: .plot2
    #   requiresData: true
    #   clearWith:
    #       - explanatory
    #       - outcome
    #       - elapsedtime
    #   visible: (sty:t2)
    #   refs: ggstatsplot
      # clearWith:
      #     - hr
      #     - sty


    - name: plot3
      title: Hazards Regression Plot
      type: Image
      width:  800
      height: 600
      renderFun: .plot3
      requiresData: true
      visible: (hr && sty:t3)
      refs: survminer
      clearWith:
          - hr
          - sty
          - outcome
          - outcomeLevel
          - elapsedtime
          - explanatory
          - contexpl
          - fudate
          - dxdate
          - tint
          - multievent
          # - use_modelSelection


    - name: cox_ph
      title: 'Proportional Hazards Assumption'
      type:  Preformatted
      visible: (ph_cox)
      clearWith:
          - explanatory
          - outcome
          - outcomeLevel
          - elapsedtime
          - fudate
          - dxdate
          - tint
          - multievent
          - contexpl
          # - use_modelSelection


    - name: plot8
      title: 'Proportional Hazards Assumption'
      type: Image
      width:  600
      height: 450
      renderFun: .plot8
      visible: (ph_cox)
      requiresData: true
      clearWith:
          - ph_cox
          - endplot
          - byplot
          - explanatory
          - outcome
          - outcomeLevel
          - elapsedtime
          - fudate
          - dxdate
          - tint
          - multievent
          - contexpl
          # - use_modelSelection



    # - name:  mydataview_adj_stats
    #   title: mydataview
    #   type:  Preformatted


    # - name:  mydataview_adj_summary
    #   title: mydataview
    #   type:  Preformatted





    # - name: plot4
    #   title: coxzph Plot
    #   type: Image
    #   width:  800
    #   height: 600
    #   renderFun: .plot4




    - name: plotKM
      title: Kaplan-Meier
      type: Image
      width:  600
      height: 450
      renderFun: .plotKM
      requiresData: true
      visible: (km)
      refs: finalfit
      clearWith:
          - km
          - endplot
          - byplot
          - ci95
          - risktable
          - outcome
          - outcomeLevel
          - elapsedtime
          - explanatory
          - contexpl
          - fudate
          - dxdate
          - tint
          - multievent
          - adjexplanatory
          - pplot
          - censored
          - medianline
          # - use_modelSelection



    # - name: plot7
    #   title: '`Adjusted Survival Curve - ${adjexplanatory}`'
    #   type: Image
    #   width:  800
    #   height: 600
    #   renderFun: .plot7
    #   requiresData: true
    #   visible: (ac)
    #   refs: survminer
    #   clearWith:
    #       - ac
    #       - adjexplanatory
    #       - endplot
    #       - byplot
    #       - ci95
    #       - risktable
    #       - outcome
    #       - outcomeLevel
    #       - elapsedtime
    #       - explanatory
    #       - contexpl
    #       - fudate
    #       - dxdate
    #       - tint
    #       - multievent
    #       - adjexplanatory
    #       - pplot
    #       - censored


    - name: risk_score_analysis
      title: 'Risk Score Analysis'
      type:  Preformatted
      visible: (calculateRiskScore)
      clearWith:
          - calculateRiskScore
          - outcome
          - outcomeLevel
          - explanatory
          - contexpl
          - numRiskGroups
          # - use_modelSelection


    - name: risk_score_analysis2
      title: 'Risk Score Analysis'
      type:  Html
      visible: (calculateRiskScore)
      clearWith:
          - calculateRiskScore
          - outcome
          - outcomeLevel
          - explanatory
          - contexpl
          - numRiskGroups
          # - use_modelSelection

    - name:  riskScoreHeading
      title: Risk Score Analysis
      type:  Preformatted
      visible: (calculateRiskScore)
      

    # Risk Score Summary (right after risk score analysis)
    - name: riskScoreSummaryHeading
      title: 'Risk Score Natural Language Summary'
      type: Preformatted
      visible: (calculateRiskScore && showSummaries)

    - name: riskScoreTable
      title: Risk Score Summary
      type: Table
      visible: (calculateRiskScore && showSummaries)
      rows: 0
      columns:
        - name: group
          title: Risk Group
          type: text
        - name: n_patients
          title: N
          type: integer
        - name: percent
          title: Percent
          type: number
        - name: median_score
          title: Median Score
          type: number
        - name: events
          title: Events
          type: integer
      clearWith:
          - calculateRiskScore
          - outcome
          - outcomeLevel
          - explanatory
          - contexpl
          - numRiskGroups
          # - use_modelSelection

    - name: riskScoreSummary
      title: ''
      type: Html
      visible: (calculateRiskScore && showSummaries)
      clearWith:
          - calculateRiskScore
          - outcome
          - explanatory
          - contexpl


    - name: riskScoreMetrics
      title: Risk Score Model Metrics
      type: Html
      visible: (calculateRiskScore)
      clearWith:
          - calculateRiskScore
          - outcome
          - outcomeLevel
          - explanatory
          - contexpl
          - numRiskGroups
          # - use_modelSelection



    - name: riskGroupPlot
      title: Risk Group Survival Plot
      type: Image
      width: 600
      height: 450
      renderFun: .plotRiskGroups
      requiresData: true
      visible: (plotRiskGroups)
      clearWith:
          - calculateRiskScore
          - outcome
          - outcomeLevel
          - explanatory
          - contexpl
          - numRiskGroups
          # - use_modelSelection


# Startification

    - name: stratificationExplanation
      title: Stratification Notes
      type: Html
      visible: (use_stratify)
      clearWith:
          - calculateRiskScore
          - outcome
          - outcomeLevel
          - explanatory
          - contexpl
          - numRiskGroups
          # - use_modelSelection


# Outputs

    - name: calculatedtime
      title: Add Calculated Time to Data
      type: Output
      varTitle: '`Calculated Time in Multivariable Survival Function - from ${ dxdate } to { fudate }`'
      varDescription: Calculated Time from given Dates in Multivariable Survival Analysis
      clearWith:
          - tint
          - dxdate
          - fudate


    - name: outcomeredefined
      title: Add Redefined Outcome to Data
      type: Output
      varTitle: '`Redefined Outcome in Multivariable Survival Function - from ${ outcome } for analysis { analysistype }`'
      varDescription: Redefined Outcome from Outcome based on Analysis Type in Multivariable Survival Analysis
      clearWith:
          - outcome
          - analysistype
          - multievent



    - name: addRiskScore
      title: Add Calculated Risk Score to Data
      type: Output
      varTitle: '`Calculated Risk Score in Multivariable Survival Function`'
      varDescription: Calculated Risk Score Based on Model
      clearWith:
          - addRiskScore
          - calculateRiskScore
          - outcome
          - outcomeLevel
          - elapsedtime
          - explanatory
          - contexpl
          - fudate
          - dxdate
          - tint
          - multievent
          - addRiskGroup


    - name: addRiskGroup
      title: Add Calculated Risk Group to Data
      type: Output
      varTitle: '`Calculated Risk Group in Multivariable Survival Function`'
      varDescription: Calculated Risk Group Based on Model
      clearWith:
          - addRiskScore
          - calculateRiskScore
          - outcome
          - outcomeLevel
          - elapsedtime
          - explanatory
          - contexpl
          - fudate
          - dxdate
          - tint
          - multievent
          - addRiskGroup


    # - name:  mydataview_plot_adj
    #   title: mydataview_plot_adj
    #   type:  Preformatted


    # - name:  mydataview_calculateAdjustedStats
    #   title: mydataview_calculateAdjustedStats
    #   type:  Preformatted

    - name:  adjustedSurvivalHeading
      title: Adjusted Survival Analysis
      type:  Preformatted
      visible: (ac)
      

    - name: plot_adj
      title: Adjusted Survival Plot
      type: Image
      width: 600
      height: 450
      renderFun: .plot_adj
      visible: (ac)
      refs: survminer
      clearWith:
          - ac
          - adjexplanatory
          - ci95
          - risktable
          - ac_method
          - endplot
          - byplot
          - outcome
          - outcomeLevel
          - elapsedtime
          - explanatory
          - contexpl
          - fudate
          - dxdate
          - tint
          - multievent
          - adjexplanatory
          - pplot
          - censored
          - medianline
          # - use_modelSelection

    # Adjusted Survival Summary (right after adjusted survival analysis)
    - name: adjustedSurvivalSummaryHeading
      title: 'Adjusted Survival Natural Language Summary'
      type: Preformatted
      visible: (ac && showSummaries)

    - name: adjustedSurvivalSummary
      title: ''
      type: Html
      visible: (ac && showSummaries)
      clearWith:
          - ac
          - adjexplanatory
          - outcome


# Nomogram

    # - name:  mydataview_nomogram2
    #   title: mydataview_nomogram2
    #   type:  Preformatted

    # - name:  mydataview_nomogram
    #   title: mydataview_nomogram
    #   type:  Preformatted

    - name:  nomogramHeading
      title: Nomogram Analysis
      type:  Preformatted
      visible: (showNomogram)
      

    - name: plot_nomogram
      title: Nomogram
      type: Image
      width: 800
      height: 600
      requiresData: true
      renderFun: .plot_nomogram
      visible: (showNomogram)

    - name: nomogram_display
      title: "Nomogram Scoring Guide"
      type: Html
      visible: (showNomogram)

    # Nomogram Summary (right after nomogram analysis)
    - name: nomogramSummaryHeading
      title: 'Nomogram Natural Language Summary'
      type: Preformatted
      visible: (showNomogram && showSummaries)

    - name: nomogramSummary
      title: ''
      type: Html
      visible: (showNomogram && showSummaries)
      clearWith:
          - showNomogram
          - explanatory
          - outcome

    # # Survival Decision Tree ----
    # 
    # 
    #     - name:  mydataview_survivaldecisiontree
    #       title: mydataview_survivaldecisiontree
    #       type:  Preformatted
    #       visible: (FALSE)
    # 
    #     - name:  survivalTreeHeading
    #       title: Survival Decision Tree
    #       type:  Preformatted
    #       visible: (use_tree)
    #       
    # 
    #     # Survival Decision Tree Summary (right after tree analysis)
    #     - name: treeSummaryHeading
    #       title: 'Decision Tree Natural Language Summary'
    #       type: Preformatted
    #       visible: (use_tree && showSummaries)
    # 
    #     - name: tree_summary
    #       title: ''
    #       type: Html
    #       visible: (use_tree && showSummaries)
    #       clearWith:
    #           - use_tree
    #           - min_node
    #           - complexity
    #           - max_depth
    #           - outcome
    #           - outcomeLevel
    #           - elapsedtime
    #           - explanatory
    #           - contexpl
    # 
    #     - name: tree_plot
    #       title: 'Survival Decision Tree'
    #       type: Image
    #       width: 800
    #       height: 600
    #       renderFun: .plotTree
    #       requiresData: true
    #       visible: (use_tree)
    #       clearWith:
    #           - use_tree
    #           - min_node
    #           - complexity
    #           - max_depth
    #           - outcome
    #           - outcomeLevel
    #           - elapsedtime
    #           - explanatory
    #           - contexpl
    # 
    #     - name: node_survival_plots
    #       title: 'Survival Curves for Terminal Nodes'
    #       type: Image
    #       width: 800
    #       height: 600
    #       renderFun: .plotNodeSurvival
    #       requiresData: true
    #       visible: (use_tree && show_terminal_nodes)
    #       clearWith:
    #           - use_tree
    #     - min_node
    #     - complexity
    #     - max_depth
    #     - show_terminal_nodes
    #     - outcome
    #     - outcomeLevel
    #     - elapsedtime
    #     - explanatory
    #     - contexpl



    # - name:  mydataview_modelselection
    #   title: mydataview_modelselection
    #   type:  Preformatted


    # - name:  text_model_selection
    #   title: Multivariable Survival with Model Selection
    #   type:  Html
    #   refs: finalfit
    #   visible: (use_modelSelection)
    #   clearWith:
    #       - outcome
    #       - outcomeLevel
    #       - elapsedtime
    #       - explanatory
    #       - contexpl
    #       - fudate
    #       - dxdate
    #       - tint
    #       - multievent
    #       # - use_modelSelection
    #       - modelSelection
    #       - selectionCriteria
    #       - pEntry
    #       - pRemoval

    # - name:  selection_method
    #   title: ''
    #   type:  Html
    #   refs: finalfit
    #   visible: (use_modelSelection)
    #   clearWith:
    #       - outcome
    #       - outcomeLevel
    #       - elapsedtime
    #       - explanatory
    #       - contexpl
    #       - fudate
    #       - dxdate
    #       - tint
    #       - multievent
    #       # - use_modelSelection
    #       - modelSelection
    #       - selectionCriteria
    #       - pEntry
    #       - pRemoval


    # - name:  text2_model_selection
    #   title: ''
    #   type:  Html
    #   refs: finalfit
    #   visible: (use_modelSelection)
    #   clearWith:
    #       - outcome
    #       - outcomeLevel
    #       - elapsedtime
    #       - explanatory
    #       - contexpl
    #       - fudate
    #       - dxdate
    #       - tint
    #       - multievent
    #       # - use_modelSelection
    #       - modelSelection
    #       - selectionCriteria
    #       - pEntry
    #       - pRemoval



    # - name:  text3_model_selection
    #   title: ''
    #   type:  Html
    #   refs: finalfit
    #   visible: (use_modelSelection)
    #   clearWith:
    #       - outcome
    #       - outcomeLevel
    #       - elapsedtime
    #       - explanatory
    #       - contexpl
    #       - fudate
    #       - dxdate
    #       - tint
    #       - multievent
    #       # - use_modelSelection
    #       - modelSelection
    #       - selectionCriteria
    #       - pEntry
    #       - pRemoval





    # - name: adjustedSummaryTable2
    #   title: Adjusted Survival Summary 2
    #   type: Preformatted
    #   visible: (ac_summary)


    # - name: adjustedSummaryTable
    #   title: Adjusted Survival Summary
    #   type: Table
    #   visible: (ac_summary)
    #   rows: 0
    #   columns:
    #     - name: Level
    #       title: Level
    #       type: text
    #     - name: Timepoint
    #       title: "Time"
    #       type: integer
    #     - name: Survival
    #       title: "Adjusted Survival"
    #       type: number
    #       format: proportion
    #     - name: SE
    #       title: "SE"
    #       type: number
    #     - name: CI_Lower
    #       title: "95% CI Lower"
    #       type: number
    #       format: proportion
    #     - name: CI_Upper
    #       title: "95% CI Upper"
    #       type: number
    #       format: proportion
    #   clearWith:
    #       - ac_summary
    #       - ac_timepoints
    #       - ac_method
    #       - adjexplanatory

    # - name: adjustedComparison
    #   title: Statistical Comparison of Adjusted Curves
    #   type: Preformatted
    #   visible: (ac_compare)
    #   clearWith:
    #       - ac_compare
    #       - ac_method
    #       - adjexplanatory

    # - name: adjustedComparison_survdiff_res
    #   title: Statistical Comparison of Adjusted Curves
    #   type: Preformatted
    #   visible: (ac_compare)
    #   clearWith:
    #       - ac_compare
    #       - ac_method
    #       - adjexplanatory

    # - name: adjustedSurvTable2
    #   title: Adjusted Survival Table 2
    #   type: Preformatted


    # - name: adjustedSurvTable
    #   title: Adjusted Survival Table
    #   type: Table
    #   rows: 0
    #   columns:
    #     - name: strata
    #       title: "Level"
    #       type: text
    #     - name: time
    #       title: "Time"
    #       type: integer
    #     - name: n.risk
    #       title: "Number at Risk"
    #       type: integer
    #     - name: n.event
    #       title: "Events"
    #       type: integer
    #     - name: surv
    #       title: "Adjusted Survival"
    #       type: text
    #     - name: lower
    #       title: "95% CI Lower"
    #       type: text
    #     - name: upper
    #       title: "95% CI Upper"
    #       type: text
    #   clearWith:
    #       - ac
    #       - ac_timepoints
    #       - adjexplanatory

    # - name: adjustedSurvTableSummary
    #   title: Adjusted Survival Summary
    #   type: Html
    #   clearWith:
    #       - ac
    #       - ac_timepoints
    #       - adjexplanatory

    # - name: adjustedPairwiseTable
    #   title: Pairwise Comparisons of Adjusted Survival
    #   type: Table
    #   rows: 0
    #   columns:
    #     - name: rowname
    #       title: "Group 1"
    #       type: text
    #     - name: name
    #       title: "Group 2"
    #       type: text
    #     - name: value
    #       title: "Adjusted p-value"
    #       type: number
    #       format: zto,pvalue
    #   visible: (ac_compare)
    #   clearWith:
    #       - ac
    #       - ac_compare
    #       - adjexplanatory
    #       - padjustmethod
    #   refs:
    #       - padjust

    # - name: adjustedPairwiseSummary
    #   title: Pairwise Comparison Summary
    #   type: Html
    #   visible: (ac_compare)
    #   clearWith:
    #       - ac
    #       - ac_compare
    #       - adjexplanatory
    #       - padjustmethod

    # - name: adjustedMedianTable
    #   title: Adjusted Median Survival
    #   type: Table
    #   rows: 0
    #   columns:
    #     - name: factor
    #       title: "Level"
    #       type: text
    #     - name: records
    #       title: "Records"
    #       type: integer
    #     - name: events
    #       title: "Events"
    #       type: integer
    #     - name: median
    #       title: "Median"
    #       type: number
    #     - name: x0_95lcl
    #       title: "Lower"
    #       superTitle: "95% CI"
    #       type: number
    #     - name: x0_95ucl
    #       title: "Upper"
    #       superTitle: "95% CI"
    #       type: number
    #   clearWith:
    #       - ac
    #       - adjexplanatory

    # - name: adjustedMedianSummary
    #   title: Adjusted Median Survival Summary
    #   type: Html
    #   clearWith:
    #       - ac
    #       - adjexplanatory

    # - name: adjustedCoxTable
    #   title: Adjusted Cox Model Results
    #   type: Table
    #   rows: 0
    #   columns:
    #     - name: Variable
    #       title: "Variable"
    #       type: text
    #     - name: HR
    #       title: "HR (95% CI)"
    #       type: text
    #     - name: Pvalue
    #       title: "P-value"
    #       type: number
    #       format: zto,pvalue
    #   clearWith:
    #       - ac
    #       - adjexplanatory

    # - name: adjustedCoxText
    #   title: Adjusted Cox Model Metrics
    #   type: Html
    #   clearWith:
    #       - ac
    #       - adjexplanatory

    # - name: adjustedCoxSummary
    #   title: Adjusted Cox Model Interpretation
    #   type: Html
    #   clearWith:
    #       - ac
    #       - adjexplanatory

    # - name: adjustedCoxPH
    #   title: Proportional Hazards Test
    #   type: Html
    #   visible: (ph_cox)
    #   clearWith:
    #       - ac
    #       - adjexplanatory
    #       - ph_cox

    # - name: adjustedCoxPHPlot
    #   title: Proportional Hazards Plot
    #   type: Image
    #   width: 600
    #   height: 450
    #   renderFun: .plotAdjustedPH
    #   visible: (ph_cox)
    #   clearWith:
    #       - ac
    #       - adjexplanatory
    #       - ph_cox



    # - name: model_comparison
    #   title: Model Comparison
    #   type: Html
    #   visible: (compare_models)

    # - name: reduced_model_metrics
    #   title: Reduced Model Performance Metrics
    #   type: Html
    #   visible: (compare_models)




    # - name:  text_model_selection
    #   title: Multivariable Survival with Model Selection
    #   type:  Html
    #   refs: finalfit
    #   visible: (use_modelSelection)
    #   clearWith:
    #       - outcome
    #       - outcomeLevel
    #       - elapsedtime
    #       - explanatory
    #       - contexpl
    #       - fudate
    #       - dxdate
    #       - tint
    #       - multievent
    #       - modelSelection
    #       - selectionCriteria
    #       - pEntry
    #       - pRemoval


    # - name:  text2_model_selection
    #   title: ''
    #   type:  Html
    #   refs: finalfit
    #   visible: (use_modelSelection)
    #   clearWith:
    #       - outcome
    #       - outcomeLevel
    #       - elapsedtime
    #       - explanatory
    #       - contexpl
    #       - fudate
    #       - dxdate
    #       - tint
    #       - multievent
    #       - modelSelection
    #       - selectionCriteria
    #       - pEntry
    #       - pRemoval

    # - name: selectionSteps
    #   title: Model Selection Steps
    #   type: Table
    #   visible: (use_modelSelection)
    #   columns:
    #     - name: step
    #       title: Step
    #       type: integer
    #     - name: variable
    #       title: Variable
    #       type: text
    #     - name: action
    #       title: Action
    #       type: text
    #     - name: criterion
    #       title: Criterion Value
    #       type: number
    #     - name: pvalue
    #       title: P-value
    #       type: number
    #   refs: finalfit
    #   clearWith:
    #       - outcome
    #       - outcomeLevel
    #       - elapsedtime
    #       - explanatory
    #       - contexpl
    #       - fudate
    #       - dxdate
    #       - tint
    #       - multievent
    #       - modelSelection
    #       - selectionCriteria
    #       - pEntry
    #       - pRemoval

    # Multivariable Cox Regression Explanation
    - name: multivariableCoxExplanation
      title: 'Understanding Multivariable Cox Regression'
      type: Html
      visible: (showExplanations)
      clearWith:
          - explanatory
          - contexpl
          - outcome

    - name:  multivariableCoxHeading3
      title: Multivariable Cox Explanations
      type:  Preformatted
      visible: (showExplanations)

    # Adjusted Survival Curves Explanation
    - name: adjustedSurvivalExplanation
      title: 'Understanding Adjusted Survival Curves'
      type: Html
      visible: (ac && showExplanations)
      clearWith:
          - ac
          - adjexplanatory
          - outcome

    # Risk Score Analysis Explanation
    - name: riskScoreExplanation
      title: 'Understanding Risk Score Analysis'
      type: Html
      visible: (calculateRiskScore && showExplanations)
      clearWith:
          - calculateRiskScore
          - numRiskGroups
          - outcome

    # Nomogram Explanation
    - name: nomogramExplanation
      title: 'Understanding Nomograms'
      type: Html
      visible: (showNomogram && showExplanations)
      clearWith:
          - showNomogram
          - explanatory
          - outcome

    # Person-Time Analysis Explanation
    - name: personTimeExplanation
      title: 'Understanding Person-Time Analysis'
      type: Html
      visible: (person_time && showExplanations)
      clearWith:
          - person_time
          - time_intervals
          - outcome

    # Stratified Analysis Explanation
    - name: stratifiedAnalysisExplanation
      title: 'Understanding Stratified Cox Regression'
      type: Html
      visible: (use_stratify && showExplanations)
      clearWith:
          - use_stratify
          - stratvar
          - outcome

    - name:  survivalPlotsHeading3
      title: Survival Plots Explanations
      type:  Preformatted
      visible: ((ac || hr) && showExplanations)

    # Survival Plots Explanation
    - name: survivalPlotsExplanation
      title: Understanding Adjusted Survival Curves and Plots
      type: Html
      visible: ((ac || hr) && showExplanations)
      clearWith:
          - ac
          - hr
          - outcome

    #     # Machine Learning Results Section
    #     - name: ml_variable_importance
    #       title: 'Variable Importance (Machine Learning)'
    #       type: Table
    #       visible: (ml_method != 'cox')
    #       rows: 0
    #       columns:
    #           - name: variable
    #             title: 'Variable'
    #             type: text
    #           - name: importance
    #             title: 'Importance'
    #             type: number
    #           - name: rank
    #             title: 'Rank'
    #             type: integer
    #       clearWith:
    #           - ml_method
    #           - explanatory
    #           - contexpl
    #           - outcome
    # 
    #     - name: ml_performance_metrics
    #       title: 'Machine Learning Model Performance'
    #       type: Html
    #       visible: (ml_method != 'cox')
    #       clearWith:
    #           - ml_method
    #           - ml_validation
    #           - ml_cv_folds
    #           - outcome
    # 
    #     - name: ml_feature_selection_results
    #       title: 'Feature Selection Results'
    #       type: Table
    #       visible: (ml_feature_selection)
    #       rows: 0
    #       columns:
    #           - name: variable
    #             title: 'Variable'
    #             type: text
    #           - name: selected
    #             title: 'Selected'
    #             type: text
    #           - name: selection_frequency
    #             title: 'Selection Frequency'
    #             type: number
    #           - name: importance_score
    #             title: 'Importance Score'
    #             type: number
    #       clearWith:
    #           - ml_feature_selection
    #           - ml_method
    #           - explanatory
    #           - contexpl
    # 
    #     - name: ml_ensemble_summary
    #       title: 'Ensemble Model Summary'
    #       type: Html
    #       visible: (ml_method == 'ensemble' && showSummaries)
    #       clearWith:
    #           - ml_method
    #           - ml_ensemble_weights
    #           - outcome
    # 
    #     - name: ml_prediction_intervals
    #       title: 'Prediction Intervals (Machine Learning)'
    #       type: Table
    #       visible: (ml_method != 'cox')
    #       rows: 0
    #       columns:
    #           - name: observation
    #             title: 'Observation'
    #             type: integer
    #           - name: prediction
    #             title: 'Predicted Risk'
    #             type: number
    #           - name: lower_ci
    #             title: 'Lower 95% CI'
    #             type: number
    #           - name: upper_ci
    #             title: 'Upper 95% CI'
    #             type: number
    #           - name: risk_group
    #             title: 'Risk Group'
    #             type: text
    #       clearWith:
    #           - ml_method
    #           - outcome
    # 
    #     - name: ml_cross_validation_summary
    #       title: 'Cross-Validation Performance'
    #       type: Html
    #       visible: (ml_method != 'cox' && ml_validation == 'cv')
    #       clearWith:
    #           - ml_method
    #           - ml_validation
    #           - ml_cv_folds
          - outcome

refs:
    - multivariable
    - survivaltutorial
    - survivalrwnahhas
    - ClinicoPathJamoviModule
    - survival
    - lubridate
    - rms
    - finalfit
    - survminer
...
