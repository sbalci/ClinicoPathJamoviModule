name: clinicalnomograms
title: Clinical Nomograms & Risk Calculators
menuGroup: ClinicoPathD
menuSubgroup: Clinical Translation
menuSubtitle: 'Prognostic Tools for Clinical Practice'
version: '1.0.0'
jas: '1.2'

description:
    main: |
        Comprehensive toolkit for developing clinical nomograms, risk score calculators, 
        and decision support tools. Transforms statistical models into practical clinical 
        instruments for personalized risk assessment and treatment planning.
    R:
        dontrun: true
        usage: |
            # Example: Cox model nomogram
            clinicalnomograms(
                data = clinical_data,
                time = survival_months,
                status = death_event,
                covariates = c("age", "stage", "grade"),
                nomogram_type = "survival_nomogram"
            )

options:
    - name: data
      type: Data
      description:
          R: The data as a data frame.

    - name: time_var
      title: 'Time Variable'
      type: Variable
      suggested: [ continuous ]
      permitted: [ numeric ]
      description:
          ui: >
            Follow-up time variable (for survival nomograms)
          R: >
            Time to event or censoring

    - name: status_var
      title: 'Event Status'
      type: Variable
      suggested: [ nominal, continuous ]
      permitted: [ factor, numeric ]
      description:
          ui: >
            Event status (0 = censored, 1 = event)
          R: >
            Event indicator variable

    - name: outcome_var
      title: 'Outcome Variable'
      type: Variable
      suggested: [ nominal, continuous ]
      permitted: [ factor, numeric ]
      description:
          ui: >
            Outcome variable (for non-survival nomograms)
          R: >
            Binary or continuous outcome

    - name: covariates
      title: 'Predictor Variables'
      type: Variables
      suggested: [ continuous, nominal, ordinal ]
      permitted: [ numeric, factor ]
      description:
          ui: >
            Variables to include in the nomogram
          R: >
            Predictor variables for model building

    - name: nomogram_type
      title: 'Nomogram Type'
      type: List
      options:
        - name: survival_nomogram
          title: Survival Nomogram
        - name: logistic_nomogram
          title: Logistic Regression Nomogram
        - name: linear_nomogram
          title: Linear Regression Nomogram
        - name: competing_risks
          title: Competing Risks Nomogram
        - name: multi_state
          title: Multi-State Nomogram
      default: survival_nomogram
      description:
          ui: >
            Type of clinical nomogram to create
          R: >
            Nomogram model specification

    - name: model_selection
      title: 'Model Selection Method'
      type: List
      options:
        - name: all_variables
          title: Include All Variables
        - name: stepwise
          title: Stepwise Selection
        - name: lasso_selection
          title: LASSO Regularization
        - name: best_subset
          title: Best Subset Selection
        - name: clinical_judgment
          title: Clinical Judgment Based
      default: all_variables
      description:
          ui: >
            Method for selecting variables in the model
          R: >
            Variable selection approach

    - name: prediction_times
      title: 'Prediction Times'
      type: String
      default: "1,3,5,10"
      description:
          ui: >
            Time points for survival predictions (comma-separated)
          R: >
            Times for survival probability estimation

    - name: confidence_level
      title: 'Confidence Level'
      type: Number
      min: 0.5
      max: 0.99
      default: 0.95
      description:
          ui: >
            Confidence level for intervals
          R: >
            CI level for nomogram

    - name: validation_method
      title: 'Internal Validation'
      type: List
      options:
        - name: none
          title: No Internal Validation
        - name: bootstrap
          title: Bootstrap Validation
        - name: cross_validation
          title: Cross-Validation
        - name: split_sample
          title: Split-Sample Validation
      default: bootstrap
      description:
          ui: >
            Method for internal validation
          R: >
            Validation approach

    - name: bootstrap_samples
      title: 'Bootstrap Samples'
      type: Number
      min: 100
      max: 5000
      default: 1000
      description:
          ui: >
            Number of bootstrap samples for validation
          R: >
            Bootstrap iteration count

    - name: cv_folds
      title: 'Cross-Validation Folds'
      type: Number
      min: 3
      max: 20
      default: 10
      description:
          ui: >
            Number of folds for cross-validation
          R: >
            CV fold specification

    - name: nomogram_title
      title: 'Nomogram Title'
      type: String
      default: "Clinical Risk Assessment Nomogram"
      description:
          ui: >
            Title for the nomogram visualization
          R: >
            Nomogram plot title

    - name: points_scale
      title: 'Points Scale'
      type: Number
      min: 50
      max: 500
      default: 100
      description:
          ui: >
            Maximum points on nomogram scale
          R: >
            Point scale range

    - name: calibration_assessment
      title: 'Calibration Assessment'
      type: Bool
      default: true
      description:
          ui: >
            Perform calibration analysis
          R: >
            Enable calibration evaluation

    - name: discrimination_assessment
      title: 'Discrimination Assessment'
      type: Bool
      default: true
      description:
          ui: >
            Assess model discrimination performance
          R: >
            Enable discrimination analysis

    - name: decision_curve_analysis
      title: 'Decision Curve Analysis'
      type: Bool
      default: true
      description:
          ui: >
            Perform decision curve analysis for clinical utility
          R: >
            Enable DCA analysis

    - name: risk_groups
      title: 'Risk Group Classification'
      type: Bool
      default: true
      description:
          ui: >
            Create risk group classifications
          R: >
            Enable risk stratification

    - name: risk_thresholds
      title: 'Risk Group Thresholds'
      type: String
      default: "0.33,0.67"
      description:
          ui: >
            Probability thresholds for risk groups (comma-separated)
          R: >
            Risk stratification cutpoints

    - name: interactive_nomogram
      title: 'Interactive Nomogram'
      type: Bool
      default: true
      description:
          ui: >
            Create interactive web-based nomogram
          R: >
            Enable interactive visualization

    - name: risk_calculator
      title: 'Risk Calculator Table'
      type: Bool
      default: true
      description:
          ui: >
            Generate risk calculation reference table
          R: >
            Create lookup table

    - name: clinical_scenarios
      title: 'Clinical Scenarios'
      type: Bool
      default: true
      description:
          ui: >
            Include example clinical scenarios
          R: >
            Generate clinical examples

    - name: model_equation
      title: 'Display Model Equation'
      type: Bool
      default: true
      description:
          ui: >
            Show the underlying mathematical equation
          R: >
            Display regression equation

    - name: confidence_intervals
      title: 'Show Confidence Intervals'
      type: Bool
      default: true
      description:
          ui: >
            Include confidence intervals in predictions
          R: >
            Display prediction intervals

    - name: external_validation
      title: 'External Validation Dataset'
      type: String
      default: ""
      description:
          ui: >
            Path to external validation dataset (optional)
          R: >
            External validation data source

    - name: performance_metrics
      title: 'Performance Metrics'
      type: Bool
      default: true
      description:
          ui: >
            Calculate comprehensive performance metrics
          R: >
            Enable performance assessment

    - name: variable_importance
      title: 'Variable Importance'
      type: Bool
      default: true
      description:
          ui: >
            Assess relative importance of variables
          R: >
            Calculate variable contributions

    - name: sensitivity_analysis
      title: 'Sensitivity Analysis'
      type: Bool
      default: false
      description:
          ui: >
            Perform sensitivity analysis for model assumptions
          R: >
            Enable sensitivity testing

    - name: missing_data_handling
      title: 'Missing Data Handling'
      type: List
      options:
        - name: complete_case
          title: Complete Case Analysis
        - name: multiple_imputation
          title: Multiple Imputation
        - name: median_mode
          title: Median/Mode Imputation
        - name: missforest
          title: MissForest Imputation
      default: complete_case
      description:
          ui: >
            Method for handling missing data
          R: >
            Missing data strategy

    - name: export_formats
      title: 'Export Formats'
      type: Bool
      default: true
      description:
          ui: >
            Export nomogram in multiple formats (PDF, PNG, HTML)
          R: >
            Enable multi-format export

    - name: reporting_guidelines
      title: 'Reporting Guidelines'
      type: List
      options:
        - name: tripod
          title: TRIPOD Guidelines
        - name: remark
          title: REMARK Guidelines
        - name: transparent
          title: TRANSPARENT Guidelines
        - name: custom
          title: Custom Reporting
      default: tripod
      description:
          ui: >
            Clinical prediction model reporting guidelines
          R: >
            Structured reporting standard

    - name: clinical_implementation
      title: 'Clinical Implementation Guide'
      type: Bool
      default: true
      description:
          ui: >
            Generate implementation guidance for clinical practice
          R: >
            Create implementation recommendations
