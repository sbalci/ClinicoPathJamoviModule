---
name: diagnosticperformance
title: Diagnostic Performance Analysis
jrs: '1.1'

items:
    - name: text
      title: Diagnostic Performance Analysis Results
      type: Html

    - name: performanceTable
      title: Diagnostic Performance Metrics
      type: Table
      visible: (showMetrics)
      rows: 0
      columns:
        - name: predictor
          title: "Predictor"
          type: text
        - name: auc
          title: "AUC"
          type: number
        - name: auc_ci_lower
          title: "AUC 95% CI Lower"
          type: number
        - name: auc_ci_upper
          title: "AUC 95% CI Upper"
          type: number
        - name: sensitivity
          title: "Sensitivity"
          type: number
        - name: specificity
          title: "Specificity"
          type: number
        - name: ppv
          title: "PPV"
          type: number
        - name: npv
          title: "NPV"
          type: number
        - name: accuracy
          title: "Accuracy"
          type: number
        - name: f1_score
          title: "F1 Score"
          type: number

    - name: cutoffTable
      title: Optimal Cutoff Analysis
      type: Table
      visible: (showCutoffAnalysis)
      rows: 0
      columns:
        - name: predictor
          title: "Predictor"
          type: text
        - name: method
          title: "Method"
          type: text
        - name: cutoff
          title: "Optimal Cutoff"
          type: number
        - name: sensitivity
          title: "Sensitivity"
          type: number
        - name: specificity
          title: "Specificity"
          type: number
        - name: youden_index
          title: "Youden Index"
          type: number
        - name: lr_positive
          title: "LR+"
          type: number
        - name: lr_negative
          title: "LR-"
          type: number

    - name: comparisonTable
      title: ROC Curve Comparison
      type: Table
      rows: 0
      columns:
        - name: comparison
          title: "Comparison"
          type: text
        - name: method
          title: "Method"  
          type: text
        - name: test_statistic
          title: "Test Statistic"
          type: number
        - name: p_value
          title: "p-value"
          type: number
        - name: significance
          title: "Significance"
          type: text
        - name: auc_diff
          title: "AUC Difference"
          type: number

    - name: validationTable
      title: Cross-Validation Results
      type: Table
      visible: (validationMethod:crossval || validationMethod:bootstrap)
      rows: 0
      columns:
        - name: predictor
          title: "Predictor"
          type: text
        - name: method
          title: "Validation Method"
          type: text
        - name: mean_auc
          title: "Mean AUC"
          type: number
        - name: sd_auc
          title: "SD AUC"
          type: number
        - name: ci_lower
          title: "95% CI Lower"
          type: number
        - name: ci_upper
          title: "95% CI Upper"
          type: number
        - name: optimism
          title: "Optimism"
          type: number

    - name: rocPlot
      title: ROC Curves
      type: Image
      width: 600
      height: 450
      renderFun: .plotROC
      visible: (plotROC)

    - name: prPlot
      title: Precision-Recall Curves
      type: Image
      width: 600
      height: 450
      renderFun: .plotPR
      visible: (plotPR)

    - name: calibrationPlot
      title: Calibration Plot
      type: Image
      width: 600
      height: 450
      renderFun: .plotCalibration
      visible: (plotCalibration)

    - name: stratifiedResults
      title: Stratified Analysis Results
      type: Table
      visible: (stratifyBy)
      rows: 0
      columns:
        - name: stratum
          title: "Stratum"
          type: text
        - name: n
          title: "N"
          type: integer
        - name: events
          title: "Events"
          type: integer
        - name: auc
          title: "AUC"
          type: number
        - name: ci_lower
          title: "95% CI Lower"
          type: number
        - name: ci_upper
          title: "95% CI Upper"
          type: number

    - name: interpretation
      title: Clinical Interpretation
      type: Html

    - name: recommendations
      title: Recommendations
      type: Html

...