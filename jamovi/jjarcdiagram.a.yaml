---
name: jjarcdiagram
title: Arc Diagram
menuGroup: JJStatsPlot
menuSubgroup: Network
version: '0.0.32'
jas: '1.2'

description:
    main: |
        'Creates arc diagrams for network visualization using the arcdiagram package.'
    R:
        dontrun: true
        usage: |
            # Basic social network visualization
            data(jjarcdiagram_social_network, package = "ClinicoPath")
            jjarcdiagram(
                data = social_network_data,
                source = "source",
                target = "target",
                weight = "weight",
                group = "group",
                showNodes = TRUE,
                nodeSize = "degree",
                sortNodes = "group"
            )
            
            # Gene regulatory network
            data(jjarcdiagram_gene_network, package = "ClinicoPath")
            jjarcdiagram(
                data = gene_network_data,
                source = "regulator",
                target = "target",
                weight = "regulation_score",
                group = "pathway",
                nodeSize = "degree",
                sortNodes = "group"
            )
            
            # Academic collaboration network
            data(jjarcdiagram_academic_network, package = "ClinicoPath")
            jjarcdiagram(
                data = academic_network_data,
                source = "author1",
                target = "author2",
                weight = "publications",
                group = "department",
                showNodes = TRUE,
                nodeSize = "degree"
            )
            
            # Organizational hierarchy
            data(jjarcdiagram_org_hierarchy, package = "ClinicoPath")
            jjarcdiagram(
                data = org_hierarchy_data,
                source = "employee",
                target = "reports_to",
                weight = "relationship_strength",
                group = "department",
                nodeSize = "fixed",
                nodeSizeValue = 3
            )
            
            # Simple minimal network
            data(jjarcdiagram_minimal_network, package = "ClinicoPath")
            jjarcdiagram(
                data = minimal_network_data,
                source = "from",
                target = "to",
                weight = "strength"
            )

options:
    - name: data
      type: Data
      description:
          R: >
            The data as a data frame.

    - name: source
      title: Source Node (From)
      type: Variable
      suggested: [ nominal ]
      permitted: [ factor ]
      description:
          R: >
            Starting entity in each relationship. Select the variable containing the "from" nodes.

            Clinical Examples:
            â€¢ Gene regulatory networks: Regulator gene (e.g., TP53, BRCA1)
            â€¢ Patient networks: First patient in similarity pair (Patient_ID)
            â€¢ Disease co-occurrence: Primary diagnosis (ICD10 code)
            â€¢ Protein interactions: Upstream protein
            â€¢ Treatment pathways: Initial intervention

    - name: target
      title: Target Node (To)
      type: Variable
      suggested: [ nominal ]
      permitted: [ factor ]
      description:
          R: >
            Ending entity in each relationship. Select the variable containing the "to" nodes.

            Clinical Examples:
            â€¢ Gene regulatory networks: Target gene being regulated (e.g., CDK4, MYC)
            â€¢ Patient networks: Second patient in similarity pair
            â€¢ Disease co-occurrence: Secondary diagnosis or comorbidity
            â€¢ Protein interactions: Downstream protein
            â€¢ Treatment pathways: Next intervention in sequence

    - name: weight
      title: Edge Weight (Strength)
      type: Variable
      suggested: [ continuous ]
      permitted: [ numeric ]
      default: NULL
      description:
          R: >
            Optional numeric measure of connection strength or importance.

            Clinical Examples:
            â€¢ Gene networks: Correlation coefficient (0-1), fold-change, or interaction score
            â€¢ Patient networks: Similarity score (e.g., Jaccard index, cosine similarity)
            â€¢ Disease co-occurrence: Number of co-occurrences or relative risk
            â€¢ Protein interactions: Binding affinity (Kd) or confidence score
            â€¢ Treatment pathways: Transition probability (0-1)

            Leave empty for unweighted networks (all edges treated equally).

    - name: group
      title: Node Categories (Color Coding)
      type: Variable
      suggested: [ nominal ]
      permitted: [ factor ]
      default: NULL
      description:
          R: >
            Optional grouping variable for color-coding entities. Examples: Gene families, 
            patient subtypes, disease categories, or functional classifications.

    - name: analysisPreset
      title: Analysis Type
      type: List
      options:
        - name: custom
          title: Custom Network
        - name: gene_interaction  
          title: Gene Interaction Network (ðŸ§¬ Recommended)
        - name: patient_network
          title: Patient Similarity Network (ðŸ‘¥ Clinical)
        - name: pathway_network
          title: Biological Pathway Network (ðŸ”¬ Research)
        - name: comorbidity_network
          title: Disease Co-occurrence Network (ðŸ¥ Epidemiology)
      default: custom
      description:
          R: >
            Choose a preset configuration optimized for specific clinical or research scenarios. 
            Gene networks focus on regulatory relationships, patient networks on similarity patterns, 
            pathway networks on biological processes, and comorbidity networks on disease associations.

    - name: showNodes
      title: Show Nodes
      type: Bool
      default: false
      description:
          R: >
            Whether to display node points along the arc baseline. When enabled, nodes are shown as circles at their sorted positions.

    - name: nodeSize
      title: Node Size
      type: List
      options:
        - title: Fixed
          name: fixed
        - title: By Degree
          name: degree
      default: fixed
      description:
          R: >
            Method for determining node sizes. 'Fixed' uses constant size, 'By Degree' scales nodes proportionally to their connectivity (number of connections).

    - name: nodeSizeValue
      title: Fixed Node Size
      type: Number
      default: 2
      min: 0.1
      max: 10
      description:
          R: >
            Size of nodes when using fixed sizing, or base size multiplier when using degree-based sizing. Range: 0.1 to 10.

    - name: sortNodes
      title: Sort Nodes
      type: List
      options:
        - title: None
          name: none
        - title: By Name
          name: name
        - title: By Group
          name: group
        - title: By Degree
          name: degree
      default: none
      description:
          R: >
            Order in which nodes are arranged along the baseline. 'None' preserves original order, 'By Name' sorts alphabetically, 'By Group' clusters by categories, 'By Degree' orders by connectivity.

    - name: sortDecreasing
      title: Sort Decreasing
      type: Bool
      default: false
      description:
          R: >
            When sorting nodes, whether to use descending order. Only applies when Sort Nodes is not 'None'.

    - name: horizontal
      title: Horizontal Layout
      type: Bool
      default: false
      description:
          R: >
            Layout orientation of the arc diagram. When TRUE, nodes are arranged horizontally with arcs above. When FALSE, nodes are arranged vertically with arcs to the side.

    - name: arcWidth
      title: Arc Width
      type: List
      options:
        - title: Fixed
          name: fixed
        - title: By Weight
          name: weight
      default: fixed
      description:
          R: >
            Method for determining arc line widths. 'Fixed' uses constant width, 'By Weight' scales arc thickness proportionally to edge weights.

    - name: arcWidthValue
      title: Fixed Arc Width
      type: Number
      default: 1
      min: 0.1
      max: 5
      description:
          R: >
            Width of arcs when using fixed sizing, or base width when using weight-based sizing. Range: 0.1 to 5.

    - name: arcTransparency
      title: Arc Transparency
      type: Number
      default: 0.5
      min: 0
      max: 1
      description:
          R: >
            Transparency level of arc lines. 0 = fully transparent (invisible), 1 = fully opaque. Lower values reduce visual clutter in dense networks.

    - name: directed
      title: Directed Network
      type: Bool
      default: false
      description:
          R: >
            Whether to treat the network as directed (edges have direction from source to target) or undirected (edges represent bidirectional relationships).

    - name: aggregateEdges
      title: Aggregate Duplicate Edges
      type: Bool
      default: true
      description:
          R: >
            âœ… RECOMMENDED: Combine multiple edges between the same nodes by summing weights.

            Why it matters:
            â€¢ Ensures network density â‰¤ 1.0 (without aggregation, density can exceed 1.0)
            â€¢ Prevents inflated centrality measures
            â€¢ Provides accurate statistical summaries

            Example: If Gene Aâ†’Gene B appears 3 times with weights [2, 3, 5],
            aggregation creates a single edge with weight 10.

            When to disable: Only if you specifically need to preserve parallel edges for specialized analyses.

    - name: weightMode
      title: Edge Weight Interpretation
      type: List
      options:
        - name: strength
          title: Strength (higher = stronger connection)
        - name: distance
          title: Distance (higher = longer path)
      default: strength
      description:
          R: >
            How edge weights should be interpreted for centrality calculations.

            â€¢ STRENGTH mode (default): Higher values = stronger connections
              âœ… Use for: Correlations, interaction scores, similarity indices
              Examples: r=0.8 (strong), binding affinity score=90

            â€¢ DISTANCE mode: Higher values = longer paths/weaker connections
              âš ï¸ Use for: Costs, physical distances, dissimilarity measures
              Examples: Euclidean distance, cost metrics

            Most clinical/biological networks use STRENGTH mode.

    - name: arcColorMode
      title: Arc Coloring (for Groups)
      type: List
      options:
        - name: source
          title: Color by Source Node
        - name: target
          title: Color by Target Node
        - name: gradient
          title: Gradient (Source to Target)
      default: source
      description:
          R: >
            How to color arcs when nodes are grouped. 'Source' colors arcs by source node's group,
            'Target' by target node's group, 'Gradient' creates a gradient from source to target colors.
            Only applies when Color Nodes by Group is enabled.

    - name: colorByGroup
      title: Color Nodes by Group
      type: Bool
      default: false
      description:
          R: >
            When a grouping variable is specified, whether to color-code nodes by their group membership. Requires a group variable.

    - name: showStats
      title: Show Network Statistics
      type: Bool
      default: false
      description:
          R: >
            Whether to display network statistics including number of nodes, edges, density, and centrality measures.

    - name: showLegend
      title: Show Legend
      type: Bool
      default: false
      description:
          R: >
            Whether to display a color legend when nodes are colored by groups. Only appears when grouping variable is specified and color by group is enabled.

    - name: labelSize
      title: Label Size
      type: Number
      default: 0.8
      min: 0.1
      max: 2
      description:
          R: >
            Size of node labels (text). 0.8 is standard size, values above 1.0 increase label size, below 1.0 decrease it. Range: 0.1 to 2.0.

    - name: plotTitle
      title: Plot Title
      type: String
      default: ""
      description:
          R: >
            Optional title to display above the arc diagram. Leave empty for no title.

    - name: showSummary
      title: Show Copy-Ready Summary
      type: Bool
      default: true
      description:
          R: >
            Whether to display a natural-language summary paragraph suitable for copying into reports or publications. Includes network overview, key findings, and grouping information.

    - name: showAssumptions
      title: Show Assumptions & Guidelines
      type: Bool
      default: true
      description:
          R: >
            Whether to display detailed assumptions, interpretation guidelines, and common pitfalls panel. Includes network requirements, centrality measure explanations, and important notes for proper interpretation.

    - name: showGlossary
      title: Show Glossary
      type: Bool
      default: false
      description:
          R: >
            Whether to display a glossary panel with definitions of key network analysis terms (nodes, edges, centrality measures, density). Useful for users new to network analysis.

...
