---
name:  decision
title: Medical Decision
menuGroup: meddecide
menuSubgroup: Decision
menuSubtitle: Sensitivity, Specificity, PPV, NPV
version: '0.0.32'
jas: '1.2'

description:
    main: >
        Function for Medical Decision Analysis. Sensitivity, Specificity, Positive Predictive Value,
        Negative Predictive Value.
    R:
        dontrun: true
        usage: |
            # example will be added


options:
    - name: data
      type: Data
      description:
          R: The data as a data frame. The data frame should contain the variables specified in the 'variables' option.


    - name: gold
      title: Gold Standard (Reference)
      type: Variable
      suggested: [ nominal ]
      permitted: [ factor ]
      description:
          ui: >
            The gold standard reference variable (true disease status). 
            This should be the most reliable test or diagnosis available (e.g., biopsy, final diagnosis).
          R: >
            The gold standard reference variable representing true disease status.


    - name: goldPositive
      title: Disease Present Level
      type: Level
      variable: (gold)
      description:
          ui: >
            Select the level that indicates disease is present in your gold standard variable.
            This represents the condition you want to detect or diagnose.
          R: >
            The level indicating presence of disease in the gold standard variable.

    - name: newtest
      title: Test Under Evaluation
      type: Variable
      suggested: [ nominal ]
      permitted: [ factor ]
      description:
          ui: >
            The diagnostic test being evaluated for performance.
            This is typically a new, faster, or less expensive test compared to the gold standard.
          R: >
            The diagnostic test variable being evaluated for performance.

    - name: testPositive
      title: Test Positive Level
      type: Level
      variable: (newtest)
      description:
          ui: >
            Select the level that represents a positive test result.
            This should correspond to the level indicating suspected disease presence.
          R: >
            The level representing a positive result for the test under evaluation.

    - name: goldNegative
      title: Disease Absent Level
      type: Level
      variable: (gold)
      description:
          ui: >
            Select the level that indicates disease is absent in your gold standard variable.
            If not specified, all levels other than the Disease Present level will be treated as negative.
          R: >
            The level indicating absence of disease in the gold standard variable.

    - name: testNegative
      title: Test Negative Level
      type: Level
      variable: (newtest)
      description:
          ui: >
            Select the level that represents a negative test result.
            If not specified, all levels other than the Test Positive level will be treated as negative.
          R: >
            The level representing a negative result for the test under evaluation.





    - name: pp
      title: Use Known Population Prevalence
      type: Bool
      default: false
      description:
          ui: >
            Use known disease prevalence from population data instead of study prevalence.
            Enable this when your study sample may not represent the target population.
          R: >
            Boolean selection whether to use known population prevalence instead of study prevalence.

    - name: pprob
      title: Population Disease Prevalence
      type: Number
      default: 0.300
      min: 0.001
      max: 0.999
      description:
          ui: >
            Known disease prevalence in the target population (as proportion: 0.0-1.0).
            Examples: rare diseases (0.001-0.01), common conditions (0.05-0.20).
            This affects post-test probabilities and predictive values.
          R: >
            Population disease prevalence as a proportion between 0.001 and 0.999.


    - name: od
      title: Show Raw Data Tables
      type: Bool
      default: false
      description:
          ui: >
            Display the original contingency tables and raw data summaries.
            Useful for verifying data entry and understanding the underlying counts.
          R: >
            Boolean selection whether to show original data frequency tables.

    - name: fnote
      title: Show Explanatory Footnotes
      type: Bool
      default: false
      description:
          ui: >
            Add detailed explanatory footnotes to all tables with clinical interpretation guidance.
            Helpful for understanding what each statistic means and how to interpret the results.
          R: >
            Boolean selection whether to show detailed explanatory footnotes.

    - name: ci
      title: '95% Confidence Intervals'
      type: Bool
      default: false
      description:
          ui: >
            Calculate and display 95% confidence intervals for all diagnostic statistics.
            Provides uncertainty estimates around point estimates of sensitivity, specificity, etc.
          R: >
            Boolean selection whether to calculate and display 95% confidence intervals.


    - name: fagan
      title: 'Fagan Nomogram Plot'
      type: Bool
      default: false
      description:
          ui: >
            Generate a Fagan nomogram for visual interpretation of test results.
            Shows how test results change the probability of disease from pre-test to post-test.
          R: >
            Boolean selection whether to generate a Fagan nomogram plot.

    - name: showNaturalLanguage
      title: 'Show Clinical Summary'
      type: Bool
      default: false
      description:
          ui: >
            Display a natural language clinical summary of the diagnostic test performance.
            Provides an easy-to-understand interpretation of results for clinical use.
          R: >
            Boolean selection whether to show the natural language clinical summary.

    - name: showClinicalInterpretation
      title: 'Show Clinical Interpretation Guide'
      type: Bool
      default: false
      description:
          ui: >
            Display detailed clinical interpretation with likelihood ratio guidance.
            Helps understand the clinical significance of test results.
          R: >
            Boolean selection whether to show the clinical interpretation guide.

    - name: showReportTemplate
      title: 'Show Copy-Ready Report'
      type: Bool
      default: false
      description:
          ui: >
            Generate a copy-ready clinical report template for documentation.
            Formatted text that can be copied directly into clinical reports.
          R: >
            Boolean selection whether to show the copy-ready report template.

    - name: showAboutAnalysis
      title: 'Show About This Analysis'
      type: Bool
      default: false
      description:
          ui: >
            Display educational information about diagnostic test evaluation.
            Explains concepts and provides interpretation guidelines.
          R: >
            Boolean selection whether to show the about analysis section.

    - name: showMisclassified
      title: 'Show Misclassified Cases Analysis'
      type: Bool
      default: false
      description:
          ui: >
            Display detailed tables of false positive and false negative cases.
            Helps identify patterns in diagnostic errors and understand which cases
            are being misclassified by the test. Inspired by Orange Data Mining's
            interactive confusion matrix feature, adapted for static jamovi output.
          R: >
            Boolean selection whether to show detailed misclassified cases tables.

    - name: maxCasesShow
      title: 'Maximum Cases to Display'
      type: Integer
      default: 50
      min: 10
      max: 500
      description:
          ui: >
            Maximum number of misclassified cases to display in each table.
            Large datasets may have many misclassifications; this limits the output.
          R: >
            Maximum number of misclassified cases to display in tables.

    - name: saveClassifications
      title: 'Save Classifications to Data'
      type: Output
      varTitle: "Classification Group"
      varDescription: "Classification of each case: True Positive, False Positive, False Negative, or True Negative"
      measureType: nominal
      clearWith:
        - gold
        - newtest
        - goldPositive
        - testPositive
      description:
          ui: >
            Save the classification results (True Positive, False Positive, False Negative, True Negative)
            as a new column in your dataset. This allows you to use the classification groups
            in other analyses.
          R: >
            Output variable to save classification results to the dataset.



...
