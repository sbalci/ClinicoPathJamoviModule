---
name:  singlearm
title: Single Arm Survival
jrs:   '1.1'

items:

    - name:  todo
      title: To Do
      type:  Html
      clearWith:
          - outcome
          - outcomeLevel
          - elapsedtime
          - fudate
          - dxdate
          - tint
          - multievent


    # - name:  mydataview
    #   title: mydataview
    #   type:  Preformatted

    - name:  medianHeading
      title: Median Survival Analysis
      type:  Preformatted
      


    - name:  medianTable
      title: Median Survival Table
      type:  Table
      rows: 0
      columns:
        - name: records
          title: "Records"
          type: integer
        # - name: n_max
        #   title: "n_max"
        #   type: number
        # - name: n_start
        #   title: "n_start"
        #   type: number
        - name: events
          title: "Events"
          type: integer
        - name: rmean
          title: "rmean"
          type: number
        - name: se_rmean
          title: "se_rmean"
          type: number
        - name: median
          title: "Median"
          type: number
        - name: x0_95lcl
          title: "Lower"
          superTitle: '95% Confidence Interval'
          type: number
        - name: x0_95ucl
          title: "Upper"
          superTitle: '95% Confidence Interval'
          type: number
      clearWith:
          - outcome
          - outcomeLevel
          - elapsedtime
          - fudate
          - dxdate
          - tint
          - multievent



    - name:  medianSummary
      title: Median Survival Analysis Natural Language Summary
      type:  Preformatted
      visible: (showSummaries)
      clearWith:
          - outcome
          - outcomeLevel
          - elapsedtime
          - fudate
          - dxdate
          - tint
          - multievent
          - showExplanations


    - name:  medianHeading3
      title: Median Survival Analysis Explanations
      type:  Preformatted
      visible: (showExplanations)


    - name: medianSurvivalExplanation
      title: 'Understanding Median Survival Analysis'
      type: Html
      visible: (showExplanations)
      clearWith:
          - outcome
          - outcomeLevel
          - elapsedtime
          - fudate
          - dxdate
          - tint
          - multievent
          - showExplanations




    - name:  survTableHeading
      title: '1, 3, 5 year Survival Table'
      type:  Preformatted
      


    - name:  survTable
      title: '1, 3, 5 year Survival'
      type:  Table
      rows: 0
      columns:
        - name: 'time'
          title: "time"
          type: integer
        - name: n.risk
          title: "Number at Risk"
          type: integer
        - name: n.event
          title: "Number of Events"
          type: integer
        - name: surv
          title: "Survival"
          type: number
          format: pc
        - name: lower
          title: "Lower"
          superTitle: '95% Confidence Interval'
          type: number
          format: pc
        - name: upper
          title: "Upper"
          superTitle: '95% Confidence Interval'
          type: number
          format: pc
      clearWith:
          - outcome
          - outcomeLevel
          - elapsedtime
          - fudate
          - dxdate
          - tint
          - multievent
          - showExplanations



    - name:  survTableSummary
      title: '1, 3, 5-yr Survival Natural Language Summary'
      type:  Preformatted
      visible: (showSummaries)
      clearWith:
          - outcome
          - outcomeLevel
          - elapsedtime
          - fudate
          - dxdate
          - tint
          - multievent
          - showExplanations


    - name:  survTableHeading3
      title: Survival Table Explanations
      type:  Preformatted
      visible: (showExplanations)
      
    - name: survivalProbabilityExplanation
      title: 'Understanding Survival Probabilities'
      type: Html
      visible: (showExplanations)
      clearWith:
          - outcome
          - outcomeLevel
          - elapsedtime
          - fudate
          - dxdate
          - tint
          - multievent
          - showExplanations



    - name:  personTimeHeading
      title: Person-Time Analysis
      type:  Preformatted
      visible: (person_time)


    - name: personTimeTable
      title: 'Person-Time Analysis'
      type: Table
      visible: (person_time)
      rows: 0
      columns:
        - name: interval
          title: "Time Interval"
          type: text
        - name: events
          title: "Events"
          type: integer
        - name: person_time
          title: "Person-Time"
          type: number
          format: zto
        - name: rate
          title: "Incidence Rate"
          type: number
          format: zto
        - name: rate_ci_lower
          title: "Lower"
          superTitle: '95% CI'
          type: number
          format: zto
        - name: rate_ci_upper
          title: "Upper"
          superTitle: '95% CI'
          type: number
          format: zto
      clearWith:
        - outcome
        - outcomeLevel
        - elapsedtime
        - rate_multiplier
        - time_intervals
        - person_time
        - outcome
        - outcomeLevel
        - fudate
        - dxdate
        - tint
        - multievent
        - showExplanations


    - name:  personTimeHeading2
      title: Person-Time Analysis Natural Language Summary
      type:  Preformatted
      visible: (person_time)


    - name: personTimeSummary
      title: 'Person-Time Summary'
      type: Html
      visible: (person_time && showSummaries)
      clearWith:
        - outcome
        - outcomeLevel
        - elapsedtime
        - rate_multiplier
        - time_intervals
        - person_time
        - outcome
        - outcomeLevel
        - fudate
        - dxdate
        - tint
        - multievent

    - name:  personTimeHeading3
      title: Person-Time Analysis Explanations
      type:  Preformatted
      visible: (person_time && showExplanations)

    - name: personTimeExplanation
      title: 'Understanding Person-Time Analysis'
      type: Html
      visible: (person_time && showExplanations)
      clearWith:
        - person_time
        - rate_multiplier
        - time_intervals
        - outcome
        - outcomeLevel
        - elapsedtime
        - showExplanations



    - name: plot
      title: Survival Plot
      type: Image
      width:  600
      height: 450
      renderFun: .plot
      visible: (sc)
      requiresData: true
      clearWith:
          - sc
          - endplot
          - byplot
          - sas
          - ci95
          - risktable
          - censored
          - outcome
          - outcomeLevel
          - elapsedtime
          - fudate
          - dxdate
          - tint
          - multievent
          - medianline



    - name: plot2
      title: Cumulative Events
      type: Image
      width:  600
      height: 450
      renderFun: .plot2
      visible: (ce)
      requiresData: true
      clearWith:
          - ce
          - endplot
          - byplot
          - sas
          - ci95
          - risktable
          - censored
          - outcome
          - outcomeLevel
          - elapsedtime
          - fudate
          - dxdate
          - tint
          - multievent



    - name: plot3
      title: Cumulative Hazard
      type: Image
      width:  600
      height: 450
      renderFun: .plot3
      visible: (ch)
      requiresData: true
      clearWith:
          - ch
          - endplot
          - byplot
          - sas
          - ci95
          - risktable
          - censored
          - outcome
          - outcomeLevel
          - elapsedtime
          - fudate
          - dxdate
          - tint
          - multievent



    - name: plot6
      title: 'KMunicate-Style Plot'
      type: Image
      width:  600
      height: 450
      renderFun: .plot6
      visible: (kmunicate)
      requiresData: true
      clearWith:
          - kmunicate
          - endplot
          - byplot
          - sas
          - outcome
          - outcomeLevel
          - elapsedtime
          - fudate
          - dxdate
          - tint
          - multievent
      refs:
          - KMunicate
          - KMunicate2


    - name:  survivalPlotsHeading3
      title: Survival Plots Explanations
      type:  Preformatted
      visible: ((sc || ce || ch || kmunicate) && showExplanations)

    # Survival Plots Explanation
    - name: survivalPlotsExplanation
      title: Understanding Survival Curves and Plots
      type: Html
      visible: ((sc || ce || ch || kmunicate) && showExplanations)
      clearWith:
          - sc
          - ce
          - ch
          - kmunicate
          - outcome
          - outcomeLevel



    # Baseline Hazard Analysis Outputs
    - name:  baselineHazardHeading
      title: Baseline Hazard Analysis
      type:  Preformatted
      visible: (baseline_hazard)

    - name: baselineHazardTable
      title: 'Baseline Hazard Estimates'
      type: Table
      visible: (baseline_hazard)
      rows: 0
      columns:
        - name: time
          title: "Time"
          type: number
          format: zto
        - name: hazard
          title: "Hazard Rate"
          type: number
          format: zto
        - name: hazard_lower
          title: "Lower"
          superTitle: '95% CI'
          type: number
          format: zto
        - name: hazard_upper
          title: "Upper"
          superTitle: '95% CI'
          type: number
          format: zto
      clearWith:
        - outcome
        - outcomeLevel
        - elapsedtime
        - fudate
        - dxdate
        - tint
        - multievent
        - baseline_hazard

    - name: baselineHazardPlot
      title: 'Baseline Hazard Function'
      type: Image
      width:  600
      height: 450
      renderFun: .baselineHazardPlot
      visible: (baseline_hazard)
      requiresData: true
      clearWith:
        - outcome
        - outcomeLevel
        - elapsedtime
        - fudate
        - dxdate
        - tint
        - multievent
        - baseline_hazard

    - name: smoothedHazardPlot
      title: 'Smoothed Hazard Function'
      type: Image
      width:  600
      height: 450
      renderFun: .smoothedHazardPlot
      visible: (hazard_smoothing)
      requiresData: true
      clearWith:
        - outcome
        - outcomeLevel
        - elapsedtime
        - fudate
        - dxdate
        - tint
        - multievent
        - hazard_smoothing

    - name: baselineHazardSummary
      title: 'Baseline Hazard Analysis Summary'
      type: Html
      visible: (baseline_hazard && showSummaries)
      clearWith:
        - outcome
        - outcomeLevel
        - elapsedtime
        - fudate
        - dxdate
        - tint
        - multievent
        - baseline_hazard
        - showSummaries

    - name:  baselineHazardHeading3
      title: Baseline Hazard Analysis Explanations
      type:  Preformatted
      visible: (baseline_hazard && showExplanations)

    - name: baselineHazardExplanation
      title: 'Understanding Baseline Hazard Analysis'
      type: Html
      visible: (baseline_hazard && showExplanations)
      clearWith:
        - baseline_hazard
        - showExplanations


    # Advanced Diagnostics Outputs
    - name:  dataQualityHeading
      title: Data Quality Assessment
      type:  Preformatted
      visible: (advancedDiagnostics)

    - name: dataQualityTable
      title: 'Data Quality Metrics'
      type: Table
      visible: (advancedDiagnostics)
      rows: 0
      columns:
        - name: metric
          title: "Metric"
          type: text
        - name: value
          title: "Value"
          type: text
        - name: assessment
          title: "Assessment"
          type: text
      clearWith:
        - outcome
        - outcomeLevel
        - elapsedtime
        - advancedDiagnostics

    - name: dataQualitySummary
      title: 'Data Quality Assessment Summary'
      type: Html
      visible: (advancedDiagnostics && showSummaries)
      clearWith:
        - outcome
        - outcomeLevel
        - elapsedtime
        - advancedDiagnostics
        - showSummaries


    - name: calculatedtime
      title: Add Calculated Time to Data
      type: Output
      varTitle: 'Calculated Time Single Arm'
      varDescription: '`Calculated Time from given Dates in Single Arm Analysis - from ${ dxdate } to { fudate }`'
      clearWith:
          - tint
          - dxdate
          - fudate


    - name: outcomeredefined
      title: Add Redefined Outcome to Data
      type: Output
      varTitle: 'Redefined Outcome Single Arm'
      varDescription: '`Redefined Outcome - from ${ outcome } for analysis { analysistype } in Single Arm Analysis`'
      clearWith:
          - outcome
          - analysistype
          - multievent
          - outcomeLevel

refs:
    - finalfit
    - survival
    - survminer
    - ClinicoPathJamoviModule
    - survivaltutorial
    - survivalrwnahhas


...
