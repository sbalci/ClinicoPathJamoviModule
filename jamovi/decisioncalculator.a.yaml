---
name:  decisioncalculator
title: Medical Decision Calculator
menuGroup: meddecide
menuSubgroup: Decision Calculators
menuSubtitle: Sensitivity, Specificity, PPV, NPV, ...
version: '0.0.31'
jas: '1.2'

description:
    main: |
        Medical Decision Calculator for diagnostic test evaluation when you have 
        the four key counts: True Positives (TP), False Positives (FP), True 
        Negatives (TN), and False Negatives (FN). Calculates comprehensive 
        diagnostic performance metrics including sensitivity, specificity, 
        positive and negative predictive values, likelihood ratios, and 
        post-test probabilities. Supports confidence interval estimation and 
        Fagan nomogram visualization for clinical decision making.
    R:
        dontrun: false
        usage: |
            # Basic diagnostic test evaluation with known counts
            result1 <- decisioncalculator(
              TP = 90,  # True positives
              FN = 10,  # False negatives  
              TN = 80,  # True negatives
              FP = 20   # False positives
            )
            
            # Include 95% confidence intervals
            result2 <- decisioncalculator(
              TP = 90, FN = 10, TN = 80, FP = 20,
              ci = TRUE
            )
            
            # Complete analysis with Fagan nomogram
            result3 <- decisioncalculator(
              TP = 90, FN = 10, TN = 80, FP = 20,
              ci = TRUE, pp = TRUE, pprob = 0.15, fagan = TRUE
            )


options:
    - name: TP
      title: 'True Positive (TP)'
      type: Number
      default: 90
      description:
          ui: >
            Number of cases correctly identified as positive (diseased) by the test.
          R: >
            True Positive count: cases with disease that tested positive.

    - name: TN
      title: 'True Negative (TN)'
      type: Number
      default: 80
      description:
          ui: >
            Number of cases correctly identified as negative (healthy) by the test.
          R: >
            True Negative count: cases without disease that tested negative.

    - name: FP
      title: 'False Positive (FP)'
      type: Number
      default: 30
      description:
          ui: >
            Number of cases incorrectly identified as positive (healthy subjects that tested positive).
          R: >
            False Positive count: cases without disease that tested positive.

    - name: FN
      title: 'False Negative (FN)'
      type: Number
      default: 20
      description:
          ui: >
            Number of cases incorrectly identified as negative (diseased subjects that tested negative).
          R: >
            False Negative count: cases with disease that tested negative.

    - name: pp
      title: Use Known Population Prevalence
      type: Bool
      default: false
      description:
          ui: >
            Use known disease prevalence from population data instead of study prevalence.
            Enable this when your study sample may not represent the target population.
          R: >
            Boolean selection whether to use known population prevalence.



    - name: pprob
      title: Prior Probability (prevalence)
      type: Number
      default: 0.300
      min: 0.001
      max: 0.999
      description:
          ui: >
            Prior probability (disease prevalence in the community).
            Requires a value between 0.001 and 0.999, default 0.300.
          R: >
            Prior probability (disease prevalence in the community).
            Requires a value between 0.001 and 0.999, default 0.300.



    - name: fnote
      title: Show Explanatory Footnotes
      type: Bool
      default: false
      description:
          ui: >
            Add detailed explanatory footnotes to all tables with clinical interpretation guidance.
            Helpful for understanding what each statistic means.
          R: >
            Boolean selection whether to show detailed explanatory footnotes.

    - name: ci
      title: '95% Confidence Intervals'
      type: Bool
      default: false
      description:
          ui: >
            Calculate and display 95% confidence intervals for all diagnostic statistics.
            Provides uncertainty estimates around point estimates.
          R: >
            Boolean selection whether to calculate 95% confidence intervals.


    - name: fagan
      title: 'Fagan Nomogram Plot'
      type: Bool
      default: false
      description:
          ui: >
            Generate a Fagan nomogram for visual interpretation of test results.
            Shows how test results change the probability of disease.
          R: >
            Boolean selection whether to generate a Fagan nomogram plot.

    - name: showWelcome
      title: Show Welcome Message
      type: Bool
      default: true
      description:
          ui: >
            Display introductory message with quick start guide.
            Helpful for first-time users to understand the tool.
          R: >
            Boolean selection whether to show welcome message.

    - name: showSummary
      title: Show Plain-Language Summary
      type: Bool
      default: false
      description:
          ui: >
            Display natural-language interpretation with key findings and clinical guidance.
            Presents results in plain English without statistical jargon.
          R: >
            Boolean selection whether to show plain-language summary of results.

    - name: showAbout
      title: Show About This Analysis
      type: Bool
      default: false
      description:
          ui: >
            Show explanatory panels describing test evaluation methodology, assumptions, and clinical guidance.
            Helpful for understanding when and how to use this analysis.
          R: >
            Boolean selection whether to show about and assumptions panels.

    - name: showGlossary
      title: Show Clinical Terms Glossary
      type: Bool
      default: false
      description:
          ui: >
            Display glossary defining clinical terms (sensitivity, specificity, PPV, NPV, likelihood ratios, etc.)
            with plain-language explanations and interpretation guides.
          R: >
            Boolean selection whether to show clinical glossary.

    # Multiple cut-off evaluation (DiagROC inspired)
    - name: multiplecuts
      title: 'Multiple Cut-off Evaluation'
      type: Bool
      default: false
      description:
          ui: >
            Compare multiple diagnostic cut-off scenarios to identify optimal thresholds.
            Useful for evaluating different test interpretation criteria.
          R: >
            Boolean selection whether to evaluate multiple cut-off scenarios.
      
    - name: cutoff1
      title: 'Cut-off Scenario 1 Name'
      type: String
      default: 'Conservative'
      description:
          ui: >
            Descriptive name for the first cut-off scenario (e.g., 'Conservative', 'Sensitive').
          R: >
            Name identifier for cut-off scenario 1.
      
    - name: tp1
      title: 'TP (Cut-off 1)'
      type: Number
      default: 85
      
    - name: fp1
      title: 'FP (Cut-off 1)'
      type: Number
      default: 10
      
    - name: tn1
      title: 'TN (Cut-off 1)'
      type: Number
      default: 190
      
    - name: fn1
      title: 'FN (Cut-off 1)'
      type: Number
      default: 15
      
    - name: cutoff2
      title: 'Cut-off Scenario 2 Name'
      type: String
      default: 'Aggressive'
      description:
          ui: >
            Descriptive name for the second cut-off scenario (e.g., 'Aggressive', 'Specific').
          R: >
            Name identifier for cut-off scenario 2.
      
    - name: tp2
      title: 'TP (Cut-off 2)'
      type: Number
      default: 95
      
    - name: fp2
      title: 'FP (Cut-off 2)'
      type: Number
      default: 25
      
    - name: tn2
      title: 'TN (Cut-off 2)'
      type: Number
      default: 175
      
    - name: fn2
      title: 'FN (Cut-off 2)'
      type: Number
      default: 5


...
