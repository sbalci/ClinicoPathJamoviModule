---
name:  decisioncalculator
title: Medical Decision Calculator
menuGroup: meddecideD
menuSubgroup: Decision
menuSubtitle: Sensitivity, Specificity, PPV, NPV, ...
version: '0.0.3'
jas: '1.2'

description:
    main: |
        Medical Decision Calculator for diagnostic test evaluation when you have 
        the four key counts: True Positives (TP), False Positives (FP), True 
        Negatives (TN), and False Negatives (FN). Calculates comprehensive 
        diagnostic performance metrics including sensitivity, specificity, 
        positive and negative predictive values, likelihood ratios, and 
        post-test probabilities. Supports confidence interval estimation and 
        Fagan nomogram visualization for clinical decision making.
    R:
        dontrun: false
        usage: |
            # Basic diagnostic test evaluation with known counts
            result1 <- decisioncalculator(
              TP = 90,  # True positives
              FN = 10,  # False negatives  
              TN = 80,  # True negatives
              FP = 20   # False positives
            )
            
            # Include 95% confidence intervals
            result2 <- decisioncalculator(
              TP = 90, FN = 10, TN = 80, FP = 20,
              ci = TRUE
            )
            
            # Complete analysis with Fagan nomogram
            result3 <- decisioncalculator(
              TP = 90, FN = 10, TN = 80, FP = 20,
              ci = TRUE, pp = TRUE, pprob = 0.15, fagan = TRUE
            )


options:
    - name: TP
      title: 'True Positive ='
      type: Number
      default: 90

    - name: TN
      title: 'True Negative ='
      type: Number
      default: 80

    - name: FP
      title: 'False Positive ='
      type: Number
      default: 30

    - name: FN
      title: 'False Negative ='
      type: Number
      default: 20

    - name: pp
      title: Prior Probability (prevalence)
      type: Bool
      default: false



    - name: pprob
      title: Prior Probability (prevalence)
      type: Number
      default: 0.300
      min: 0.001
      max: 0.999
      description:
          ui: >
            Prior probability (disease prevalence in the community).
            Requires a value between 0.001 and 0.999, default 0.300.
          R: >
            Prior probability (disease prevalence in the community).
            Requires a value between 0.001 and 0.999, default 0.300.



    - name: fnote
      title: Show Footnote
      type: Bool
      default: false

    - name: ci
      title: 'Show 95% CI'
      type: Bool
      default: false


    - name: fagan
      title: 'Fagan Nomogram'
      type: Bool
      default: false
      
    # Multiple cut-off evaluation (DiagROC inspired)
    - name: multiplecuts
      title: 'Multiple Cut-off Evaluation'
      type: Bool
      default: false
      
    - name: cutoff1
      title: 'Cut-off Scenario 1 Name'
      type: String
      default: 'Conservative'
      
    - name: tp1
      title: 'TP (Cut-off 1)'
      type: Number
      default: 85
      
    - name: fp1
      title: 'FP (Cut-off 1)'
      type: Number
      default: 10
      
    - name: tn1
      title: 'TN (Cut-off 1)'
      type: Number
      default: 190
      
    - name: fn1
      title: 'FN (Cut-off 1)'
      type: Number
      default: 15
      
    - name: cutoff2
      title: 'Cut-off Scenario 2 Name'
      type: String
      default: 'Aggressive'
      
    - name: tp2
      title: 'TP (Cut-off 2)'
      type: Number
      default: 95
      
    - name: fp2
      title: 'FP (Cut-off 2)'
      type: Number
      default: 25
      
    - name: tn2
      title: 'TN (Cut-off 2)'
      type: Number
      default: 175
      
    - name: fn2
      title: 'FN (Cut-off 2)'
      type: Number
      default: 5


...
