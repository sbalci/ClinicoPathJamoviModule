---
name: aivalidation
title: AI Model Validation
jrs: '1.1'

items:
    # Welcome/Instructions/Error messages
    - name: instructions
      title: Instructions
      type: Html
      visible: false

    # Core Performance Metrics (ACTIVE)
    - name: performanceTable
      title: Model Performance Metrics
      type: Table
      description: Performance metrics for each predictor variable
      clearWith:
        - predictorVars
        - outcomeVar
        - positiveLevel
      columns:
        - name: predictor
          title: Predictor
          type: text
        - name: auc
          title: AUC
          type: number
          format: zto
        - name: auc_lower
          title: AUC 95% CI Lower
          type: number
          format: zto
        - name: auc_upper
          title: AUC 95% CI Upper
          type: number
          format: zto
        - name: sensitivity
          title: Sensitivity
          type: number
          format: zto
        - name: specificity
          title: Specificity
          type: number
          format: zto
        - name: threshold
          title: Optimal Threshold
          type: number
        - name: youdens_j
          title: Youden's J
          type: number
          format: zto
          visible: (youdensJ)
        - name: mcc
          title: MCC
          type: number
          format: zto
          visible: (matthewsCC)

    # Pairwise Model Comparisons (ACTIVE)
    - name: comparisonTable
      title: Model Comparison (DeLong Test)
      type: Table
      description: Statistical comparison between predictor models using DeLong test
      visible: (compareModels)
      clearWith:
        - predictorVars
        - outcomeVar
        - compareModels
      columns:
        - name: comparison
          title: Comparison
          type: text
        - name: auc1
          title: AUC (Model 1)
          type: number
          format: zto
        - name: auc2
          title: AUC (Model 2)
          type: number
          format: zto
        - name: difference
          title: Difference
          type: number
        - name: p_value
          title: p-value
          type: number
          format: zto,pvalue

    # Cross-Validation Results (ACTIVE)
    - name: cvPerformanceTable
      title: Cross-Validation Performance
      type: Table
      description: Cross-validated performance metrics for each predictor
      visible: (!crossValidation:none)
      clearWith:
        - predictorVars
        - outcomeVar
        - positiveLevel
        - crossValidation
        - stratified
        - randomSeed
      columns:
        - name: predictor
          title: Predictor
          type: text
        - name: mean_auc
          title: Mean AUC
          type: number
          format: zto
        - name: sd_auc
          title: SD AUC
          type: number
        - name: mean_sensitivity
          title: Mean Sensitivity
          type: number
          format: zto
        - name: sd_sensitivity
          title: SD Sensitivity
          type: number
        - name: mean_specificity
          title: Mean Specificity
          type: number
          format: zto
        - name: sd_specificity
          title: SD Specificity
          type: number

    # Visualization (ACTIVE)
    - name: rocPlot
      title: ROC Curves
      type: Image
      description: ROC curves for all predictor models
      visible: (rocPlot)
      requiresData: true
      width: 600
      height: 450
      renderFun: .plotROC
      clearWith:
        - predictorVars
        - outcomeVar
        - positiveLevel

    # Help & Documentation (ACTIVE)
    - name: methodologyExplanation
      title: Methodology
      type: Html
      visible: (showExplanations)

    - name: resultsInterpretation
      title: Interpretation
      type: Html
      visible: (showSummaries)

# ============================================================================
# ARCHIVED FEATURES - For Future Implementation
# ============================================================================
#
# The following features were removed to simplify architecture and avoid
# resource limit errors. They can be re-implemented incrementally.
#
# CROSS-VALIDATION FEATURES:
#   - cvPerformanceTable: Cross-validated performance metrics
#   - cvFoldResults: Fold-by-fold performance details
#   - cvPerformancePlot: Box plots of CV performance
#
# MODEL SELECTION FEATURES:
#   - modelSelectionTable: AIC/BIC/LASSO/Ridge results
#   - variableImportanceTable: Variable importance scores
#   - variableImportancePlot: Importance visualization
#
# ADVANCED METRICS:
#   - nriIdiTable: Net Reclassification & Integrated Discrimination Indices
#   - calibrationTable: Hosmer-Lemeshow and calibration metrics
#   - calibrationPlot: Observed vs predicted probabilities
#
# STATISTICAL TESTS:
#   - McNemar's test for paired binary predictions
#   - Bootstrap confidence intervals
#
# VISUALIZATION:
#   - comparisonPlot: Forest plot for model comparisons
#   - ROC plots with cross-validation confidence bands
#
# See git history for full implementations of these features.
# ============================================================================
...
