# Configuration file for _updateModules.R
# This file defines module settings, file mappings, and deployment parameters

# Usage: Rscript _updateModules.R [config_file]

# run  /Applications/jamovi.app/Contents/MacOS/jamovi


# ==============================================
# MOST FREQUENTLY CHANGED SETTINGS - EDIT HERE 
# ==============================================

new_version: "0.0.31.75"
new_date: "2025-09-24"
quick: false
TEST: true
meddecide: false
jjstatsplot: false
jsurvival: false
ClinicoPathDescriptives: false
OncoPath: false

# ========================================
# DETAILED CONFIGURATION BELOW
# ========================================

# Global settings (for backward compatibility)
global:
  base_repo_dir: "/Users/serdarbalci/Documents/GitHub/ClinicoPathJamoviModule"

# Operation modes (for backward compatibility)  
modes:
  check: false
  extended: true
  webpage: false
  commit_modules: false
  WIP: false
  
  # File copying control modes
  copy_vignettes: false       # Enable/disable vignette file copying
  copy_data_files: false      # Enable/disable data file copying
  copy_test_files: false      # Enable/disable test file copying
  copy_r_files: true         # Enable/disable R utility file copying
  use_legacy_copying: false   # Use legacy hardcoded file lists instead of config-based copying
  
  # NAMESPACE-DESCRIPTION synchronization
  sync_namespace_description: true  # Enable NAMESPACE to DESCRIPTION package synchronization
  namespace_sync_dry_run: false     # Perform dry run only (show what would be changed)

# Module directories (hardcoded for simplicity)
modules:
  jjstatsplot:
    directory: "/Users/serdarbalci/Documents/GitHub/jjstatsplot"
    r_files:
      - "utils.R"
  meddecide:
    directory: "/Users/serdarbalci/Documents/GitHub/meddecide"
    r_files:
      - "utils.R"
      - "decisiongraph_utils.R"
      - "psychopdaROC_utilities.R"
  jsurvival:
    directory: "/Users/serdarbalci/Documents/GitHub/jsurvival"
    r_files:
      - "utils.R"
  ClinicoPathDescriptives:
    directory: "/Users/serdarbalci/Documents/GitHub/ClinicoPathDescriptives"
    r_files:
      - "utils.R"
  OncoPath:
    directory: "/Users/serdarbalci/Documents/GitHub/OncoPath"
    r_files:
      - "utils.R"
      - "ihc_utilities.R"
  JamoviTest:
    directory: "/Users/serdarbalci/Documents/GitHub/JamoviTest"
    enabled: false  # Automatically enabled when TEST mode is active
    test_patterns:
      - "menuGroup: JJStatsPlotT$"
      - "menuGroup: meddecideT$"
      - "menuGroup: SurvivalT$"
      - "menuGroup: ExplorationT$"
      - "menuGroup: OncoPathT$"
    data_files:
      - "histopathology.rda"
    r_files: 
      - "utils.R"
      - "decisiongraph_utils.R"
      - "ihc_utilities.R"
      - "psychopdaROC_utilities.R"
    vignette_files: []
    test_files: []
    required_directories:
      - "R"
      - "jamovi"

# ========================================
# DETAILED CONFIGURATION BELOW
# ========================================

# Required packages for validation
required_packages:
  - xfun
  - fs
  - jmvtools
  - devtools
  - purrr
  - digest
  - yaml
  - future

# Vignette folder-to-module mapping
vignette_folders:
  # Direct folder mapping (source folder -> target modules)
  folder_mapping:
    vignettes-ClinicoPathDescriptives: ["ClinicoPathDescriptives"]
    vignettes-jjstatsplot: ["jjstatsplot"]
    vignettes-meddecide: ["meddecide"]
    vignettes-jsurvival: ["jsurvival"]
    # vignettes: ["jjstatsplot", "meddecide", "jsurvival", "ClinicoPathDescriptives"]  # General vignettes to all modules

  # Special files that don't follow domain pattern (from vignettes/ folder)
  special_files:
    "use-jjstatsplot-in-R.Rmd": ["jjstatsplot"]
   # "module-development-jamovi.Rmd": ["jjstatsplot", "meddecide", "jsurvival", "ClinicoPathDescriptives"]
   # "users-of-clinicopath.Rmd": ["jjstatsplot", "meddecide", "jsurvival", "ClinicoPathDescriptives"]
   # "pkgnet-report.Rmd": ["ClinicoPathDescriptives"]
   # "_workflows.Rmd": ["jjstatsplot", "meddecide", "jsurvival", "ClinicoPathDescriptives"]
   # "_wf_master.Rmd": ["jjstatsplot", "meddecide", "jsurvival", "ClinicoPathDescriptives"]
   # "_wf_child.Rmd": ["jjstatsplot", "meddecide", "jsurvival", "ClinicoPathDescriptives"]

  # Files to exclude from copying (internal or temporary files)
  exclude_patterns:
    - "*-legacy.Rmd"      # Legacy vignettes
    - "test-*.Rmd"        # Test vignettes
    - "temp-*.Rmd"        # Temporary vignettes
    - "draft-*.Rmd"       # Draft vignettes
    - ".*\\.tmp\\."       # Temporary files

  # File extensions to process
  extensions: [".qmd", ".Rmd", ".md"]

  # Copy mode settings
  copy_settings:
    use_folder_based: true        # Enable folder-based copying
    use_manual_lists: false       # Use manual vignette_files lists
    include_general: false         # Copy general vignettes folder to all modules
    overwrite_existing: true      # Overwrite existing vignette files
    create_directories: true      # Create vignette directories if missing

# File extensions to copy for jamovi modules
jamovi_extensions:
  - ".b.R"
  - ".a.yaml"
  - ".r.yaml"
  - ".u.yaml"
  - ".js"      # JavaScript event files
  - ".html"    # HTML content files

# Security settings
security:
  validate_paths: true
  verify_checksums: true
  max_file_size_mb: 100

# Performance settings
performance:
  parallel_processing: false
  max_workers: 4
  incremental_updates: true

# Backup settings
backup:
  enabled: true
  retention_days: 10
  backup_location: "backups"
