
# This file is automatically generated, you probably don't want to edit this

psychopdaROCOptions <- if (requireNamespace("jmvcore", quietly=TRUE)) R6::R6Class(
    "psychopdaROCOptions",
    inherit = jmvcore::Options,
    public = list(
        initialize = function(
            clinicalMode = "basic",
            dependentVars = NULL,
            classVar = NULL,
            positiveClass = NULL,
            subGroup = NULL,
            clinicalPreset = "none",
            method = "maximize_metric",
            metric = "youden",
            direction = ">=",
            specifyCutScore = "",
            tol_metric = 0.05,
            break_ties = "mean",
            allObserved = FALSE,
            boot_runs = 0,
            usePriorPrev = FALSE,
            priorPrev = 0.5,
            costratioFP = 1,
            sensSpecTable = FALSE,
            showThresholdTable = FALSE,
            maxThresholds = 20,
            delongTest = FALSE,
            plotROC = TRUE,
            combinePlots = TRUE,
            cleanPlot = FALSE,
            showOptimalPoint = TRUE,
            displaySE = FALSE,
            smoothing = FALSE,
            showConfidenceBands = FALSE,
            legendPosition = "right",
            directLabel = FALSE,
            interactiveROC = FALSE,
            showCriterionPlot = FALSE,
            showPrevalencePlot = FALSE,
            showDotPlot = FALSE,
            precisionRecallCurve = FALSE,
            partialAUC = FALSE,
            partialAUCfrom = 0.8,
            partialAUCto = 1,
            rocSmoothingMethod = "none",
            bootstrapCI = FALSE,
            bootstrapReps = 2000,
            quantileCIs = FALSE,
            quantiles = "0.1,0.25,0.5,0.75,0.9",
            compareClassifiers = FALSE,
            calculateIDI = FALSE,
            calculateNRI = FALSE,
            refVar = NULL,
            nriThresholds = "",
            idiNriBootRuns = 1000,
            effectSizeAnalysis = FALSE,
            effectSizeMethod = "cohens_d",
            powerAnalysis = FALSE,
            powerAnalysisType = "post_hoc",
            expectedAUCDifference = 0.1,
            targetPower = 0.8,
            significanceLevel = 0.05,
            correlationROCs = 0.5,
            advancedMetrics = FALSE,
            bayesianAnalysis = FALSE,
            priorAUC = 0.7,
            priorPrecision = 10,
            clinicalUtilityAnalysis = FALSE,
            treatmentThreshold = "0.05,0.5,0.05",
            harmBenefitRatio = 0.25,
            interventionCost = FALSE,
            fixedSensSpecAnalysis = FALSE,
            fixedAnalysisType = "sensitivity",
            fixedSensitivityValue = 0.9,
            fixedSpecificityValue = 0.9,
            showFixedROC = TRUE,
            fixedInterpolation = "linear",
            showFixedExplanation = TRUE,
            metaAnalysis = FALSE,
            metaAnalysisMethod = "both",
            heterogeneityTest = TRUE,
            forestPlot = FALSE, ...) {

            super$initialize(
                package="ClinicoPath",
                name="psychopdaROC",
                requiresData=TRUE,
                ...)

            private$..clinicalMode <- jmvcore::OptionList$new(
                "clinicalMode",
                clinicalMode,
                options=list(
                    "basic",
                    "advanced",
                    "comprehensive"),
                default="basic")
            private$..dependentVars <- jmvcore::OptionVariables$new(
                "dependentVars",
                dependentVars,
                suggested=list(
                    "continuous"),
                permitted=list(
                    "numeric"))
            private$..classVar <- jmvcore::OptionVariable$new(
                "classVar",
                classVar,
                suggested=list(
                    "nominal"),
                permitted=list(
                    "factor"))
            private$..positiveClass <- jmvcore::OptionLevel$new(
                "positiveClass",
                positiveClass,
                variable="(classVar)")
            private$..subGroup <- jmvcore::OptionVariable$new(
                "subGroup",
                subGroup,
                suggested=list(
                    "nominal"),
                permitted=list(
                    "factor"))
            private$..clinicalPreset <- jmvcore::OptionList$new(
                "clinicalPreset",
                clinicalPreset,
                options=list(
                    "none",
                    "screening",
                    "confirmation",
                    "balanced",
                    "research"),
                default="none")
            private$..method <- jmvcore::OptionList$new(
                "method",
                method,
                options=list(
                    "maximize_metric",
                    "minimize_metric",
                    "maximize_loess_metric",
                    "minimize_loess_metric",
                    "maximize_spline_metric",
                    "minimize_spline_metric",
                    "maximize_boot_metric",
                    "minimize_boot_metric",
                    "oc_youden_kernel",
                    "oc_youden_normal",
                    "oc_manual",
                    "oc_cost_ratio",
                    "oc_equal_sens_spec",
                    "oc_closest_01"),
                default="maximize_metric")
            private$..metric <- jmvcore::OptionList$new(
                "metric",
                metric,
                options=list(
                    "youden",
                    "sum_sens_spec",
                    "accuracy",
                    "sum_ppv_npv",
                    "prod_sens_spec",
                    "prod_ppv_npv",
                    "cohens_kappa",
                    "abs_d_sens_spec",
                    "abs_d_ppv_npv",
                    "F1_score",
                    "odds_ratio",
                    "risk_ratio",
                    "misclassification_cost",
                    "total_utility",
                    "roc01",
                    "p_chisquared"),
                default="youden")
            private$..direction <- jmvcore::OptionList$new(
                "direction",
                direction,
                options=list(
                    ">=",
                    "<="),
                default=">=")
            private$..specifyCutScore <- jmvcore::OptionString$new(
                "specifyCutScore",
                specifyCutScore,
                default="")
            private$..tol_metric <- jmvcore::OptionNumber$new(
                "tol_metric",
                tol_metric,
                default=0.05,
                min=0,
                max=1)
            private$..break_ties <- jmvcore::OptionList$new(
                "break_ties",
                break_ties,
                options=list(
                    "mean",
                    "median",
                    "c"),
                default="mean")
            private$..allObserved <- jmvcore::OptionBool$new(
                "allObserved",
                allObserved,
                default=FALSE)
            private$..boot_runs <- jmvcore::OptionNumber$new(
                "boot_runs",
                boot_runs,
                default=0,
                min=0,
                max=10000)
            private$..usePriorPrev <- jmvcore::OptionBool$new(
                "usePriorPrev",
                usePriorPrev,
                default=FALSE)
            private$..priorPrev <- jmvcore::OptionNumber$new(
                "priorPrev",
                priorPrev,
                default=0.5,
                min=0.001,
                max=0.999)
            private$..costratioFP <- jmvcore::OptionNumber$new(
                "costratioFP",
                costratioFP,
                default=1,
                min=0.01,
                max=100)
            private$..sensSpecTable <- jmvcore::OptionBool$new(
                "sensSpecTable",
                sensSpecTable,
                default=FALSE)
            private$..showThresholdTable <- jmvcore::OptionBool$new(
                "showThresholdTable",
                showThresholdTable,
                default=FALSE)
            private$..maxThresholds <- jmvcore::OptionNumber$new(
                "maxThresholds",
                maxThresholds,
                default=20,
                min=5,
                max=100)
            private$..delongTest <- jmvcore::OptionBool$new(
                "delongTest",
                delongTest,
                default=FALSE)
            private$..plotROC <- jmvcore::OptionBool$new(
                "plotROC",
                plotROC,
                default=TRUE)
            private$..combinePlots <- jmvcore::OptionBool$new(
                "combinePlots",
                combinePlots,
                default=TRUE)
            private$..cleanPlot <- jmvcore::OptionBool$new(
                "cleanPlot",
                cleanPlot,
                default=FALSE)
            private$..showOptimalPoint <- jmvcore::OptionBool$new(
                "showOptimalPoint",
                showOptimalPoint,
                default=TRUE)
            private$..displaySE <- jmvcore::OptionBool$new(
                "displaySE",
                displaySE,
                default=FALSE)
            private$..smoothing <- jmvcore::OptionBool$new(
                "smoothing",
                smoothing,
                default=FALSE)
            private$..showConfidenceBands <- jmvcore::OptionBool$new(
                "showConfidenceBands",
                showConfidenceBands,
                default=FALSE)
            private$..legendPosition <- jmvcore::OptionList$new(
                "legendPosition",
                legendPosition,
                options=list(
                    "none",
                    "right",
                    "bottom",
                    "topleft",
                    "topright"),
                default="right")
            private$..directLabel <- jmvcore::OptionBool$new(
                "directLabel",
                directLabel,
                default=FALSE)
            private$..interactiveROC <- jmvcore::OptionBool$new(
                "interactiveROC",
                interactiveROC,
                default=FALSE)
            private$..showCriterionPlot <- jmvcore::OptionBool$new(
                "showCriterionPlot",
                showCriterionPlot,
                default=FALSE)
            private$..showPrevalencePlot <- jmvcore::OptionBool$new(
                "showPrevalencePlot",
                showPrevalencePlot,
                default=FALSE)
            private$..showDotPlot <- jmvcore::OptionBool$new(
                "showDotPlot",
                showDotPlot,
                default=FALSE)
            private$..precisionRecallCurve <- jmvcore::OptionBool$new(
                "precisionRecallCurve",
                precisionRecallCurve,
                default=FALSE)
            private$..partialAUC <- jmvcore::OptionBool$new(
                "partialAUC",
                partialAUC,
                default=FALSE)
            private$..partialAUCfrom <- jmvcore::OptionNumber$new(
                "partialAUCfrom",
                partialAUCfrom,
                default=0.8,
                min=0,
                max=1)
            private$..partialAUCto <- jmvcore::OptionNumber$new(
                "partialAUCto",
                partialAUCto,
                default=1,
                min=0,
                max=1)
            private$..rocSmoothingMethod <- jmvcore::OptionList$new(
                "rocSmoothingMethod",
                rocSmoothingMethod,
                options=list(
                    "none",
                    "binormal",
                    "density",
                    "fitdistr"),
                default="none")
            private$..bootstrapCI <- jmvcore::OptionBool$new(
                "bootstrapCI",
                bootstrapCI,
                default=FALSE)
            private$..bootstrapReps <- jmvcore::OptionNumber$new(
                "bootstrapReps",
                bootstrapReps,
                default=2000,
                min=100,
                max=10000)
            private$..quantileCIs <- jmvcore::OptionBool$new(
                "quantileCIs",
                quantileCIs,
                default=FALSE)
            private$..quantiles <- jmvcore::OptionString$new(
                "quantiles",
                quantiles,
                default="0.1,0.25,0.5,0.75,0.9")
            private$..compareClassifiers <- jmvcore::OptionBool$new(
                "compareClassifiers",
                compareClassifiers,
                default=FALSE)
            private$..calculateIDI <- jmvcore::OptionBool$new(
                "calculateIDI",
                calculateIDI,
                default=FALSE)
            private$..calculateNRI <- jmvcore::OptionBool$new(
                "calculateNRI",
                calculateNRI,
                default=FALSE)
            private$..refVar <- jmvcore::OptionLevel$new(
                "refVar",
                refVar,
                variable="(dependentVars)")
            private$..nriThresholds <- jmvcore::OptionString$new(
                "nriThresholds",
                nriThresholds,
                default="")
            private$..idiNriBootRuns <- jmvcore::OptionNumber$new(
                "idiNriBootRuns",
                idiNriBootRuns,
                default=1000,
                min=100,
                max=10000)
            private$..effectSizeAnalysis <- jmvcore::OptionBool$new(
                "effectSizeAnalysis",
                effectSizeAnalysis,
                default=FALSE)
            private$..effectSizeMethod <- jmvcore::OptionList$new(
                "effectSizeMethod",
                effectSizeMethod,
                options=list(
                    "cohens_d",
                    "delta_auc",
                    "overlap_coefficient",
                    "net_benefit_difference"),
                default="cohens_d")
            private$..powerAnalysis <- jmvcore::OptionBool$new(
                "powerAnalysis",
                powerAnalysis,
                default=FALSE)
            private$..powerAnalysisType <- jmvcore::OptionList$new(
                "powerAnalysisType",
                powerAnalysisType,
                options=list(
                    "post_hoc",
                    "prospective",
                    "sample_size"),
                default="post_hoc")
            private$..expectedAUCDifference <- jmvcore::OptionNumber$new(
                "expectedAUCDifference",
                expectedAUCDifference,
                default=0.1,
                min=0.01,
                max=0.5)
            private$..targetPower <- jmvcore::OptionNumber$new(
                "targetPower",
                targetPower,
                default=0.8,
                min=0.5,
                max=0.99)
            private$..significanceLevel <- jmvcore::OptionNumber$new(
                "significanceLevel",
                significanceLevel,
                default=0.05,
                min=0.001,
                max=0.1)
            private$..correlationROCs <- jmvcore::OptionNumber$new(
                "correlationROCs",
                correlationROCs,
                default=0.5,
                min=-1,
                max=1)
            private$..advancedMetrics <- jmvcore::OptionBool$new(
                "advancedMetrics",
                advancedMetrics,
                default=FALSE)
            private$..bayesianAnalysis <- jmvcore::OptionBool$new(
                "bayesianAnalysis",
                bayesianAnalysis,
                default=FALSE)
            private$..priorAUC <- jmvcore::OptionNumber$new(
                "priorAUC",
                priorAUC,
                default=0.7,
                min=0.5,
                max=1)
            private$..priorPrecision <- jmvcore::OptionNumber$new(
                "priorPrecision",
                priorPrecision,
                default=10,
                min=1,
                max=100)
            private$..clinicalUtilityAnalysis <- jmvcore::OptionBool$new(
                "clinicalUtilityAnalysis",
                clinicalUtilityAnalysis,
                default=FALSE)
            private$..treatmentThreshold <- jmvcore::OptionString$new(
                "treatmentThreshold",
                treatmentThreshold,
                default="0.05,0.5,0.05")
            private$..harmBenefitRatio <- jmvcore::OptionNumber$new(
                "harmBenefitRatio",
                harmBenefitRatio,
                default=0.25,
                min=0.01,
                max=10)
            private$..interventionCost <- jmvcore::OptionBool$new(
                "interventionCost",
                interventionCost,
                default=FALSE)
            private$..fixedSensSpecAnalysis <- jmvcore::OptionBool$new(
                "fixedSensSpecAnalysis",
                fixedSensSpecAnalysis,
                default=FALSE)
            private$..fixedAnalysisType <- jmvcore::OptionList$new(
                "fixedAnalysisType",
                fixedAnalysisType,
                options=list(
                    "sensitivity",
                    "specificity"),
                default="sensitivity")
            private$..fixedSensitivityValue <- jmvcore::OptionNumber$new(
                "fixedSensitivityValue",
                fixedSensitivityValue,
                default=0.9,
                min=0.01,
                max=0.99)
            private$..fixedSpecificityValue <- jmvcore::OptionNumber$new(
                "fixedSpecificityValue",
                fixedSpecificityValue,
                default=0.9,
                min=0.01,
                max=0.99)
            private$..showFixedROC <- jmvcore::OptionBool$new(
                "showFixedROC",
                showFixedROC,
                default=TRUE)
            private$..fixedInterpolation <- jmvcore::OptionList$new(
                "fixedInterpolation",
                fixedInterpolation,
                options=list(
                    "linear",
                    "nearest",
                    "stepwise"),
                default="linear")
            private$..showFixedExplanation <- jmvcore::OptionBool$new(
                "showFixedExplanation",
                showFixedExplanation,
                default=TRUE)
            private$..metaAnalysis <- jmvcore::OptionBool$new(
                "metaAnalysis",
                metaAnalysis,
                default=FALSE)
            private$..metaAnalysisMethod <- jmvcore::OptionList$new(
                "metaAnalysisMethod",
                metaAnalysisMethod,
                options=list(
                    "fixed",
                    "random",
                    "both"),
                default="both")
            private$..heterogeneityTest <- jmvcore::OptionBool$new(
                "heterogeneityTest",
                heterogeneityTest,
                default=TRUE)
            private$..forestPlot <- jmvcore::OptionBool$new(
                "forestPlot",
                forestPlot,
                default=FALSE)

            self$.addOption(private$..clinicalMode)
            self$.addOption(private$..dependentVars)
            self$.addOption(private$..classVar)
            self$.addOption(private$..positiveClass)
            self$.addOption(private$..subGroup)
            self$.addOption(private$..clinicalPreset)
            self$.addOption(private$..method)
            self$.addOption(private$..metric)
            self$.addOption(private$..direction)
            self$.addOption(private$..specifyCutScore)
            self$.addOption(private$..tol_metric)
            self$.addOption(private$..break_ties)
            self$.addOption(private$..allObserved)
            self$.addOption(private$..boot_runs)
            self$.addOption(private$..usePriorPrev)
            self$.addOption(private$..priorPrev)
            self$.addOption(private$..costratioFP)
            self$.addOption(private$..sensSpecTable)
            self$.addOption(private$..showThresholdTable)
            self$.addOption(private$..maxThresholds)
            self$.addOption(private$..delongTest)
            self$.addOption(private$..plotROC)
            self$.addOption(private$..combinePlots)
            self$.addOption(private$..cleanPlot)
            self$.addOption(private$..showOptimalPoint)
            self$.addOption(private$..displaySE)
            self$.addOption(private$..smoothing)
            self$.addOption(private$..showConfidenceBands)
            self$.addOption(private$..legendPosition)
            self$.addOption(private$..directLabel)
            self$.addOption(private$..interactiveROC)
            self$.addOption(private$..showCriterionPlot)
            self$.addOption(private$..showPrevalencePlot)
            self$.addOption(private$..showDotPlot)
            self$.addOption(private$..precisionRecallCurve)
            self$.addOption(private$..partialAUC)
            self$.addOption(private$..partialAUCfrom)
            self$.addOption(private$..partialAUCto)
            self$.addOption(private$..rocSmoothingMethod)
            self$.addOption(private$..bootstrapCI)
            self$.addOption(private$..bootstrapReps)
            self$.addOption(private$..quantileCIs)
            self$.addOption(private$..quantiles)
            self$.addOption(private$..compareClassifiers)
            self$.addOption(private$..calculateIDI)
            self$.addOption(private$..calculateNRI)
            self$.addOption(private$..refVar)
            self$.addOption(private$..nriThresholds)
            self$.addOption(private$..idiNriBootRuns)
            self$.addOption(private$..effectSizeAnalysis)
            self$.addOption(private$..effectSizeMethod)
            self$.addOption(private$..powerAnalysis)
            self$.addOption(private$..powerAnalysisType)
            self$.addOption(private$..expectedAUCDifference)
            self$.addOption(private$..targetPower)
            self$.addOption(private$..significanceLevel)
            self$.addOption(private$..correlationROCs)
            self$.addOption(private$..advancedMetrics)
            self$.addOption(private$..bayesianAnalysis)
            self$.addOption(private$..priorAUC)
            self$.addOption(private$..priorPrecision)
            self$.addOption(private$..clinicalUtilityAnalysis)
            self$.addOption(private$..treatmentThreshold)
            self$.addOption(private$..harmBenefitRatio)
            self$.addOption(private$..interventionCost)
            self$.addOption(private$..fixedSensSpecAnalysis)
            self$.addOption(private$..fixedAnalysisType)
            self$.addOption(private$..fixedSensitivityValue)
            self$.addOption(private$..fixedSpecificityValue)
            self$.addOption(private$..showFixedROC)
            self$.addOption(private$..fixedInterpolation)
            self$.addOption(private$..showFixedExplanation)
            self$.addOption(private$..metaAnalysis)
            self$.addOption(private$..metaAnalysisMethod)
            self$.addOption(private$..heterogeneityTest)
            self$.addOption(private$..forestPlot)
        }),
    active = list(
        clinicalMode = function() private$..clinicalMode$value,
        dependentVars = function() private$..dependentVars$value,
        classVar = function() private$..classVar$value,
        positiveClass = function() private$..positiveClass$value,
        subGroup = function() private$..subGroup$value,
        clinicalPreset = function() private$..clinicalPreset$value,
        method = function() private$..method$value,
        metric = function() private$..metric$value,
        direction = function() private$..direction$value,
        specifyCutScore = function() private$..specifyCutScore$value,
        tol_metric = function() private$..tol_metric$value,
        break_ties = function() private$..break_ties$value,
        allObserved = function() private$..allObserved$value,
        boot_runs = function() private$..boot_runs$value,
        usePriorPrev = function() private$..usePriorPrev$value,
        priorPrev = function() private$..priorPrev$value,
        costratioFP = function() private$..costratioFP$value,
        sensSpecTable = function() private$..sensSpecTable$value,
        showThresholdTable = function() private$..showThresholdTable$value,
        maxThresholds = function() private$..maxThresholds$value,
        delongTest = function() private$..delongTest$value,
        plotROC = function() private$..plotROC$value,
        combinePlots = function() private$..combinePlots$value,
        cleanPlot = function() private$..cleanPlot$value,
        showOptimalPoint = function() private$..showOptimalPoint$value,
        displaySE = function() private$..displaySE$value,
        smoothing = function() private$..smoothing$value,
        showConfidenceBands = function() private$..showConfidenceBands$value,
        legendPosition = function() private$..legendPosition$value,
        directLabel = function() private$..directLabel$value,
        interactiveROC = function() private$..interactiveROC$value,
        showCriterionPlot = function() private$..showCriterionPlot$value,
        showPrevalencePlot = function() private$..showPrevalencePlot$value,
        showDotPlot = function() private$..showDotPlot$value,
        precisionRecallCurve = function() private$..precisionRecallCurve$value,
        partialAUC = function() private$..partialAUC$value,
        partialAUCfrom = function() private$..partialAUCfrom$value,
        partialAUCto = function() private$..partialAUCto$value,
        rocSmoothingMethod = function() private$..rocSmoothingMethod$value,
        bootstrapCI = function() private$..bootstrapCI$value,
        bootstrapReps = function() private$..bootstrapReps$value,
        quantileCIs = function() private$..quantileCIs$value,
        quantiles = function() private$..quantiles$value,
        compareClassifiers = function() private$..compareClassifiers$value,
        calculateIDI = function() private$..calculateIDI$value,
        calculateNRI = function() private$..calculateNRI$value,
        refVar = function() private$..refVar$value,
        nriThresholds = function() private$..nriThresholds$value,
        idiNriBootRuns = function() private$..idiNriBootRuns$value,
        effectSizeAnalysis = function() private$..effectSizeAnalysis$value,
        effectSizeMethod = function() private$..effectSizeMethod$value,
        powerAnalysis = function() private$..powerAnalysis$value,
        powerAnalysisType = function() private$..powerAnalysisType$value,
        expectedAUCDifference = function() private$..expectedAUCDifference$value,
        targetPower = function() private$..targetPower$value,
        significanceLevel = function() private$..significanceLevel$value,
        correlationROCs = function() private$..correlationROCs$value,
        advancedMetrics = function() private$..advancedMetrics$value,
        bayesianAnalysis = function() private$..bayesianAnalysis$value,
        priorAUC = function() private$..priorAUC$value,
        priorPrecision = function() private$..priorPrecision$value,
        clinicalUtilityAnalysis = function() private$..clinicalUtilityAnalysis$value,
        treatmentThreshold = function() private$..treatmentThreshold$value,
        harmBenefitRatio = function() private$..harmBenefitRatio$value,
        interventionCost = function() private$..interventionCost$value,
        fixedSensSpecAnalysis = function() private$..fixedSensSpecAnalysis$value,
        fixedAnalysisType = function() private$..fixedAnalysisType$value,
        fixedSensitivityValue = function() private$..fixedSensitivityValue$value,
        fixedSpecificityValue = function() private$..fixedSpecificityValue$value,
        showFixedROC = function() private$..showFixedROC$value,
        fixedInterpolation = function() private$..fixedInterpolation$value,
        showFixedExplanation = function() private$..showFixedExplanation$value,
        metaAnalysis = function() private$..metaAnalysis$value,
        metaAnalysisMethod = function() private$..metaAnalysisMethod$value,
        heterogeneityTest = function() private$..heterogeneityTest$value,
        forestPlot = function() private$..forestPlot$value),
    private = list(
        ..clinicalMode = NA,
        ..dependentVars = NA,
        ..classVar = NA,
        ..positiveClass = NA,
        ..subGroup = NA,
        ..clinicalPreset = NA,
        ..method = NA,
        ..metric = NA,
        ..direction = NA,
        ..specifyCutScore = NA,
        ..tol_metric = NA,
        ..break_ties = NA,
        ..allObserved = NA,
        ..boot_runs = NA,
        ..usePriorPrev = NA,
        ..priorPrev = NA,
        ..costratioFP = NA,
        ..sensSpecTable = NA,
        ..showThresholdTable = NA,
        ..maxThresholds = NA,
        ..delongTest = NA,
        ..plotROC = NA,
        ..combinePlots = NA,
        ..cleanPlot = NA,
        ..showOptimalPoint = NA,
        ..displaySE = NA,
        ..smoothing = NA,
        ..showConfidenceBands = NA,
        ..legendPosition = NA,
        ..directLabel = NA,
        ..interactiveROC = NA,
        ..showCriterionPlot = NA,
        ..showPrevalencePlot = NA,
        ..showDotPlot = NA,
        ..precisionRecallCurve = NA,
        ..partialAUC = NA,
        ..partialAUCfrom = NA,
        ..partialAUCto = NA,
        ..rocSmoothingMethod = NA,
        ..bootstrapCI = NA,
        ..bootstrapReps = NA,
        ..quantileCIs = NA,
        ..quantiles = NA,
        ..compareClassifiers = NA,
        ..calculateIDI = NA,
        ..calculateNRI = NA,
        ..refVar = NA,
        ..nriThresholds = NA,
        ..idiNriBootRuns = NA,
        ..effectSizeAnalysis = NA,
        ..effectSizeMethod = NA,
        ..powerAnalysis = NA,
        ..powerAnalysisType = NA,
        ..expectedAUCDifference = NA,
        ..targetPower = NA,
        ..significanceLevel = NA,
        ..correlationROCs = NA,
        ..advancedMetrics = NA,
        ..bayesianAnalysis = NA,
        ..priorAUC = NA,
        ..priorPrecision = NA,
        ..clinicalUtilityAnalysis = NA,
        ..treatmentThreshold = NA,
        ..harmBenefitRatio = NA,
        ..interventionCost = NA,
        ..fixedSensSpecAnalysis = NA,
        ..fixedAnalysisType = NA,
        ..fixedSensitivityValue = NA,
        ..fixedSpecificityValue = NA,
        ..showFixedROC = NA,
        ..fixedInterpolation = NA,
        ..showFixedExplanation = NA,
        ..metaAnalysis = NA,
        ..metaAnalysisMethod = NA,
        ..heterogeneityTest = NA,
        ..forestPlot = NA)
)

psychopdaROCResults <- if (requireNamespace("jmvcore", quietly=TRUE)) R6::R6Class(
    "psychopdaROCResults",
    inherit = jmvcore::Group,
    active = list(
        instructions = function() private$.items[["instructions"]],
        procedureNotes = function() private$.items[["procedureNotes"]],
        simpleResultsTable = function() private$.items[["simpleResultsTable"]],
        clinicalInterpretationTable = function() private$.items[["clinicalInterpretationTable"]],
        resultsTable = function() private$.items[["resultsTable"]],
        sensSpecTable = function() private$.items[["sensSpecTable"]],
        thresholdTable = function() private$.items[["thresholdTable"]],
        fixedSensSpecTable = function() private$.items[["fixedSensSpecTable"]],
        fixedSensSpecExplanation = function() private$.items[["fixedSensSpecExplanation"]],
        aucSummaryTable = function() private$.items[["aucSummaryTable"]],
        delongComparisonTable = function() private$.items[["delongComparisonTable"]],
        delongTest = function() private$.items[["delongTest"]],
        plotROC = function() private$.items[["plotROC"]],
        interactivePlot = function() private$.items[["interactivePlot"]],
        fixedSensSpecROC = function() private$.items[["fixedSensSpecROC"]],
        criterionPlot = function() private$.items[["criterionPlot"]],
        prevalencePlot = function() private$.items[["prevalencePlot"]],
        dotPlot = function() private$.items[["dotPlot"]],
        dotPlotMessage = function() private$.items[["dotPlotMessage"]],
        precisionRecallPlot = function() private$.items[["precisionRecallPlot"]],
        idiTable = function() private$.items[["idiTable"]],
        nriTable = function() private$.items[["nriTable"]],
        effectSizeTable = function() private$.items[["effectSizeTable"]],
        powerAnalysisTable = function() private$.items[["powerAnalysisTable"]],
        bayesianROCTable = function() private$.items[["bayesianROCTable"]],
        clinicalUtilityTable = function() private$.items[["clinicalUtilityTable"]],
        metaAnalysisTable = function() private$.items[["metaAnalysisTable"]],
        sensitivityAnalysisTable = function() private$.items[["sensitivityAnalysisTable"]],
        decisionCurveTable = function() private$.items[["decisionCurveTable"]],
        partialAUCTable = function() private$.items[["partialAUCTable"]],
        bootstrapCITable = function() private$.items[["bootstrapCITable"]],
        rocComparisonTable = function() private$.items[["rocComparisonTable"]],
        effectSizePlot = function() private$.items[["effectSizePlot"]],
        powerCurvePlot = function() private$.items[["powerCurvePlot"]],
        bayesianTracePlot = function() private$.items[["bayesianTracePlot"]],
        decisionCurvePlot = function() private$.items[["decisionCurvePlot"]],
        metaAnalysisForestPlot = function() private$.items[["metaAnalysisForestPlot"]],
        sensitivityAnalysisPlot = function() private$.items[["sensitivityAnalysisPlot"]]),
    private = list(),
    public=list(
        initialize=function(options) {
            super$initialize(
                options=options,
                name="",
                title="Advanced ROC Analysis",
                refs=list(
                    "ClinicoPathJamoviModule",
                    "cutpointr",
                    "pROC",
                    "MASS",
                    "plotROC",
                    "Cohen1988",
                    "Hedges1981",
                    "Faul2007",
                    "Kruschke2014",
                    "McElreath2020",
                    "Vickers2006",
                    "Steyerberg2010",
                    "Higgins2003",
                    "DerSimonian1986",
                    "tools",
                    "tidyr",
                    "scales"))
            self$add(jmvcore::Html$new(
                options=options,
                name="instructions",
                visible=TRUE))
            self$add(jmvcore::Html$new(
                options=options,
                name="procedureNotes",
                visible=TRUE))
            self$add(jmvcore::Table$new(
                options=options,
                name="simpleResultsTable",
                title="ROC Analysis Summary",
                visible=TRUE,
                columns=list(
                    list(
                        `name`="variable", 
                        `title`="Variable", 
                        `type`="text"),
                    list(
                        `name`="auc", 
                        `title`="AUC", 
                        `type`="number", 
                        `format`="zto,pvalue"),
                    list(
                        `name`="ci_lower", 
                        `title`="95% CI Lower", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="ci_upper", 
                        `title`="95% CI Upper", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="p", 
                        `title`="p-value", 
                        `type`="number", 
                        `format`="zto,pvalue"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="clinicalInterpretationTable",
                title="Clinical Interpretation",
                visible="(clinicalMode:basic || clinicalMode:advanced || clinicalMode:comprehensive)",
                columns=list(
                    list(
                        `name`="variable", 
                        `title`="Test", 
                        `type`="text"),
                    list(
                        `name`="performance_level", 
                        `title`="Performance Level", 
                        `type`="text"),
                    list(
                        `name`="clinical_recommendation", 
                        `title`="Clinical Recommendation", 
                        `type`="text"),
                    list(
                        `name`="interpretation_text", 
                        `title`="Detailed Interpretation", 
                        `type`="text"))))
            self$add(jmvcore::Array$new(
                options=options,
                name="resultsTable",
                title="Optimal Cutpoints and Performance",
                visible=TRUE,
                refs=list(
                    "cutpointr"),
                clearWith=list(
                    "dependentVars",
                    "classVar",
                    "positiveClass",
                    "subGroup",
                    "method",
                    "metric",
                    "direction",
                    "allObserved",
                    "specifyCutScore",
                    "boot_runs",
                    "break_ties",
                    "tol_metric"),
                template=jmvcore::Table$new(
                    options=options,
                    rows=0,
                    columns=list(
                        list(
                            `name`="cutpoint", 
                            `title`="Cutpoint", 
                            `type`="number", 
                            `format`="zto"),
                        list(
                            `name`="sensitivity", 
                            `title`="Sensitivity", 
                            `type`="number", 
                            `format`="pc"),
                        list(
                            `name`="specificity", 
                            `title`="Specificity", 
                            `type`="number", 
                            `format`="pc"),
                        list(
                            `name`="ppv", 
                            `title`="PPV", 
                            `type`="number", 
                            `format`="pc"),
                        list(
                            `name`="npv", 
                            `title`="NPV", 
                            `type`="number", 
                            `format`="pc"),
                        list(
                            `name`="youden", 
                            `title`="Youden's J", 
                            `type`="number", 
                            `format`="zto"),
                        list(
                            `name`="AUC", 
                            `title`="AUC", 
                            `type`="number", 
                            `format`="zto"),
                        list(
                            `name`="metricValue", 
                            `title`="Metric Score", 
                            `type`="number", 
                            `format`="zto")))))
            self$add(jmvcore::Array$new(
                options=options,
                name="sensSpecTable",
                title="Confusion Matrices",
                visible="(sensSpecTable)",
                clearWith=list(
                    "dependentVars",
                    "classVar",
                    "positiveClass",
                    "subGroup",
                    "method",
                    "allObserved",
                    "specifyCutScore"),
                template=jmvcore::Html$new(
                    options=options)))
            self$add(jmvcore::Table$new(
                options=options,
                name="thresholdTable",
                title="Detailed Threshold Performance",
                visible="(showThresholdTable)",
                clearWith=list(
                    "dependentVars",
                    "classVar",
                    "positiveClass",
                    "subGroup",
                    "direction"),
                columns=list(
                    list(
                        `name`="threshold", 
                        `title`="Cut-off", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="sensitivity", 
                        `title`="Sensitivity", 
                        `type`="number", 
                        `format`="pc"),
                    list(
                        `name`="specificity", 
                        `title`="Specificity", 
                        `type`="number", 
                        `format`="pc"),
                    list(
                        `name`="accuracy", 
                        `title`="Accuracy", 
                        `type`="number", 
                        `format`="pc"),
                    list(
                        `name`="ppv", 
                        `title`="PPV", 
                        `type`="number", 
                        `format`="pc"),
                    list(
                        `name`="npv", 
                        `title`="NPV", 
                        `type`="number", 
                        `format`="pc"),
                    list(
                        `name`="plr", 
                        `title`="+LR", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="nlr", 
                        `title`="-LR", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="youden", 
                        `title`="Youden's J", 
                        `type`="number", 
                        `format`="zto"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="fixedSensSpecTable",
                title="Fixed Sensitivity/Specificity Results",
                visible="(fixedSensSpecAnalysis)",
                clearWith=list(
                    "dependentVars",
                    "classVar",
                    "positiveClass",
                    "fixedAnalysisType",
                    "fixedSensitivityValue",
                    "fixedSpecificityValue",
                    "fixedInterpolation"),
                columns=list(
                    list(
                        `name`="variable", 
                        `title`="Variable", 
                        `type`="text"),
                    list(
                        `name`="analysis_type", 
                        `title`="Analysis Type", 
                        `type`="text"),
                    list(
                        `name`="target_value", 
                        `title`="Target Value", 
                        `type`="number", 
                        `format`="pc"),
                    list(
                        `name`="cutpoint", 
                        `title`="Determined Cutpoint", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="achieved_sensitivity", 
                        `title`="Achieved Sensitivity", 
                        `type`="number", 
                        `format`="pc"),
                    list(
                        `name`="achieved_specificity", 
                        `title`="Achieved Specificity", 
                        `type`="number", 
                        `format`="pc"),
                    list(
                        `name`="ppv", 
                        `title`="PPV", 
                        `type`="number", 
                        `format`="pc"),
                    list(
                        `name`="npv", 
                        `title`="NPV", 
                        `type`="number", 
                        `format`="pc"),
                    list(
                        `name`="accuracy", 
                        `title`="Accuracy", 
                        `type`="number", 
                        `format`="pc"),
                    list(
                        `name`="youden", 
                        `title`="Youden's J", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="interpolation_used", 
                        `title`="Interpolation Method", 
                        `type`="text"))))
            self$add(jmvcore::Html$new(
                options=options,
                name="fixedSensSpecExplanation",
                title="Fixed Sensitivity/Specificity Analysis Guide",
                visible="(fixedSensSpecAnalysis && showFixedExplanation)"))
            self$add(jmvcore::Table$new(
                options=options,
                name="aucSummaryTable",
                title="Area Under the ROC Curve",
                visible=TRUE,
                columns=list(
                    list(
                        `name`="variable", 
                        `title`="Variable", 
                        `type`="text"),
                    list(
                        `name`="auc", 
                        `title`="AUC", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="ci_lower", 
                        `title`="95% CI Lower", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="ci_upper", 
                        `title`="95% CI Upper", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="p", 
                        `title`="p-value", 
                        `type`="number", 
                        `format`="zto,pvalue"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="delongComparisonTable",
                title="DeLong Test Pairwise Comparisons",
                visible="(delongTest)",
                clearWith=list(
                    "dependentVars",
                    "classVar",
                    "positiveClass"),
                columns=list(
                    list(
                        `name`="comparison", 
                        `title`="Comparison", 
                        `type`="text"),
                    list(
                        `name`="auc_diff", 
                        `title`="AUC Difference", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="ci_lower", 
                        `title`="95% CI Lower", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="ci_upper", 
                        `title`="95% CI Upper", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="z", 
                        `title`="Z-statistic", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="p", 
                        `title`="p-value", 
                        `type`="number", 
                        `format`="zto,pvalue"))))
            self$add(jmvcore::Preformatted$new(
                options=options,
                name="delongTest",
                title="DeLong Test Details",
                visible="(delongTest)",
                clearWith=list(
                    "dependentVars",
                    "classVar",
                    "positiveClass"),
                refs=list(
                    "DeLong1988")))
            self$add(jmvcore::Array$new(
                options=options,
                name="plotROC",
                title="ROC Curves",
                visible="(plotROC)",
                template=jmvcore::Image$new(
                    options=options,
                    width=550,
                    height=450,
                    renderFun=".plotROC",
                    clearWith=list(
                        "dependentVars",
                        "classVar",
                        "positiveClass",
                        "subGroup",
                        "direction",
                        "smoothing",
                        "showOptimalPoint",
                        "cleanPlot",
                        "showConfidenceBands",
                        "quantileCIs"))))
            self$add(jmvcore::Image$new(
                options=options,
                name="interactivePlot",
                title="Interactive ROC Plot",
                width=650,
                height=500,
                renderFun=".plotInteractiveROC",
                visible="(interactiveROC)",
                clearWith=list(
                    "dependentVars",
                    "classVar",
                    "positiveClass",
                    "subGroup"),
                refs=list(
                    "plotROC")))
            self$add(jmvcore::Array$new(
                options=options,
                name="fixedSensSpecROC",
                title="Fixed Sensitivity/Specificity ROC Curves",
                visible="(fixedSensSpecAnalysis && showFixedROC)",
                template=jmvcore::Image$new(
                    options=options,
                    width=550,
                    height=450,
                    renderFun=".plotFixedSensSpecROC",
                    clearWith=list(
                        "dependentVars",
                        "classVar",
                        "positiveClass",
                        "subGroup",
                        "fixedAnalysisType",
                        "fixedSensitivityValue",
                        "fixedSpecificityValue",
                        "fixedInterpolation"))))
            self$add(jmvcore::Array$new(
                options=options,
                name="criterionPlot",
                title="Sensitivity/Specificity vs. Threshold",
                visible="(showCriterionPlot)",
                template=jmvcore::Image$new(
                    options=options,
                    title="$key",
                    width=600,
                    height=400,
                    renderFun=".plotCriterion",
                    requiresData=TRUE,
                    clearWith=list(
                        "dependentVars",
                        "classVar",
                        "positiveClass",
                        "subGroup",
                        "method",
                        "metric",
                        "direction"))))
            self$add(jmvcore::Array$new(
                options=options,
                name="prevalencePlot",
                title="Predictive Values vs. Prevalence",
                visible="(showPrevalencePlot)",
                template=jmvcore::Image$new(
                    options=options,
                    title="$key",
                    width=600,
                    height=400,
                    renderFun=".plotPrevalence",
                    requiresData=TRUE,
                    clearWith=list(
                        "dependentVars",
                        "classVar",
                        "positiveClass",
                        "subGroup",
                        "usePriorPrev",
                        "priorPrev"))))
            self$add(jmvcore::Array$new(
                options=options,
                name="dotPlot",
                title="Test Values Distribution",
                visible="(showDotPlot)",
                template=jmvcore::Image$new(
                    options=options,
                    title="$key",
                    width=600,
                    height=400,
                    renderFun=".plotDot",
                    requiresData=TRUE,
                    clearWith=list(
                        "dependentVars",
                        "classVar",
                        "positiveClass",
                        "subGroup",
                        "direction"))))
            self$add(jmvcore::Html$new(
                options=options,
                name="dotPlotMessage",
                title="Dot Plot Note",
                visible="(showDotPlot && combinePlots)"))
            self$add(jmvcore::Array$new(
                options=options,
                name="precisionRecallPlot",
                title="Precision-Recall Curves",
                visible="(precisionRecallCurve)",
                template=jmvcore::Image$new(
                    options=options,
                    width=550,
                    height=450,
                    renderFun=".plotPrecisionRecall",
                    clearWith=list(
                        "dependentVars",
                        "classVar",
                        "positiveClass",
                        "subGroup"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="idiTable",
                title="Integrated Discrimination Improvement (IDI)",
                visible="(calculateIDI)",
                clearWith=list(
                    "dependentVars",
                    "classVar",
                    "positiveClass",
                    "refVar",
                    "idiNriBootRuns",
                    "direction"),
                columns=list(
                    list(
                        `name`="variable", 
                        `title`="Variable", 
                        `type`="text"),
                    list(
                        `name`="refVar", 
                        `title`="Reference", 
                        `type`="text"),
                    list(
                        `name`="idi", 
                        `title`="IDI", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="ci_lower", 
                        `title`="95% CI Lower", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="ci_upper", 
                        `title`="95% CI Upper", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="p", 
                        `title`="p-value", 
                        `type`="number", 
                        `format`="zto,pvalue")),
                refs=list(
                    "Pencina2008")))
            self$add(jmvcore::Table$new(
                options=options,
                name="nriTable",
                title="Net Reclassification Index (NRI)",
                visible="(calculateNRI)",
                clearWith=list(
                    "dependentVars",
                    "classVar",
                    "positiveClass",
                    "refVar",
                    "nriThresholds",
                    "idiNriBootRuns",
                    "direction"),
                columns=list(
                    list(
                        `name`="variable", 
                        `title`="Variable", 
                        `type`="text"),
                    list(
                        `name`="refVar", 
                        `title`="Reference", 
                        `type`="text"),
                    list(
                        `name`="nri", 
                        `title`="NRI", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="event_nri", 
                        `title`="Event NRI", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="non_event_nri", 
                        `title`="Non-Event NRI", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="ci_lower", 
                        `title`="95% CI Lower", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="ci_upper", 
                        `title`="95% CI Upper", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="p", 
                        `title`="p-value", 
                        `type`="number", 
                        `format`="zto,pvalue")),
                refs=list(
                    "Pencina2008",
                    "Pencina2011")))
            self$add(jmvcore::Table$new(
                options=options,
                name="effectSizeTable",
                title="Effect Size Analysis",
                visible="(effectSizeAnalysis)",
                clearWith=list(
                    "dependentVars",
                    "classVar",
                    "positiveClass"),
                columns=list(
                    list(
                        `name`="comparison", 
                        `title`="Comparison", 
                        `type`="text"),
                    list(
                        `name`="cohens_d", 
                        `title`="Cohen's d", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="glass_delta", 
                        `title`="Glass' \u0394", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="hedges_g", 
                        `title`="Hedges' g", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="effect_magnitude", 
                        `title`="Effect Magnitude", 
                        `type`="text"),
                    list(
                        `name`="clinical_importance", 
                        `title`="Clinical Importance", 
                        `type`="text")),
                refs=list(
                    "Cohen1988",
                    "Hedges1981")))
            self$add(jmvcore::Table$new(
                options=options,
                name="powerAnalysisTable",
                title="Power Analysis Results",
                visible="(powerAnalysis)",
                clearWith=list(
                    "dependentVars",
                    "classVar",
                    "positiveClass",
                    "targetPower",
                    "targetEffectSize"),
                columns=list(
                    list(
                        `name`="variable", 
                        `title`="Variable", 
                        `type`="text"),
                    list(
                        `name`="observed_power", 
                        `title`="Observed Power", 
                        `type`="number", 
                        `format`="pc"),
                    list(
                        `name`="required_n", 
                        `title`="Required N", 
                        `type`="integer"),
                    list(
                        `name`="target_effect_size", 
                        `title`="Target Effect Size", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="power_adequacy", 
                        `title`="Power Adequacy", 
                        `type`="text"),
                    list(
                        `name`="recommendation", 
                        `title`="Recommendation", 
                        `type`="text")),
                refs=list(
                    "Cohen1988",
                    "Faul2007")))
            self$add(jmvcore::Table$new(
                options=options,
                name="bayesianROCTable",
                title="Bayesian ROC Analysis",
                visible="(bayesianAnalysis)",
                clearWith=list(
                    "dependentVars",
                    "classVar",
                    "positiveClass",
                    "bayesianPrior",
                    "mcmcSamples"),
                columns=list(
                    list(
                        `name`="variable", 
                        `title`="Variable", 
                        `type`="text"),
                    list(
                        `name`="posterior_auc_mean", 
                        `title`="Posterior AUC Mean", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="credible_lower", 
                        `title`="95% Credible Lower", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="credible_upper", 
                        `title`="95% Credible Upper", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="bayes_factor", 
                        `title`="Bayes Factor", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="evidence_strength", 
                        `title`="Evidence Strength", 
                        `type`="text"),
                    list(
                        `name`="prior_influence", 
                        `title`="Prior Influence", 
                        `type`="text")),
                refs=list(
                    "Kruschke2014",
                    "McElreath2020")))
            self$add(jmvcore::Table$new(
                options=options,
                name="clinicalUtilityTable",
                title="Clinical Utility Analysis",
                visible="(clinicalUtilityAnalysis)",
                clearWith=list(
                    "dependentVars",
                    "classVar",
                    "positiveClass",
                    "treatmentBenefit",
                    "treatmentHarm"),
                columns=list(
                    list(
                        `name`="variable", 
                        `title`="Variable", 
                        `type`="text"),
                    list(
                        `name`="threshold_probability", 
                        `title`="Threshold Probability", 
                        `type`="number", 
                        `format`="pc"),
                    list(
                        `name`="net_benefit", 
                        `title`="Net Benefit", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="treat_all_benefit", 
                        `title`="Treat All Net Benefit", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="treat_none_benefit", 
                        `title`="Treat None Net Benefit", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="standardized_net_benefit", 
                        `title`="Standardized Net Benefit", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="clinical_utility", 
                        `title`="Clinical Utility", 
                        `type`="text")),
                refs=list(
                    "Vickers2006",
                    "Steyerberg2010")))
            self$add(jmvcore::Table$new(
                options=options,
                name="metaAnalysisTable",
                title="Meta-Analysis Results",
                visible="(metaAnalysis)",
                clearWith=list(
                    "dependentVars",
                    "classVar",
                    "positiveClass"),
                columns=list(
                    list(
                        `name`="model_type", 
                        `title`="Model Type", 
                        `type`="text"),
                    list(
                        `name`="pooled_auc", 
                        `title`="Pooled AUC", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="ci_lower", 
                        `title`="95% CI Lower", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="ci_upper", 
                        `title`="95% CI Upper", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="heterogeneity_i2", 
                        `title`="I\u00B2 Heterogeneity", 
                        `type`="number", 
                        `format`="pc"),
                    list(
                        `name`="tau_squared", 
                        `title`="\u03C4\u00B2 Between-Study Variance", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="cochran_q", 
                        `title`="Cochran's Q", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="q_p_value", 
                        `title`="Q p-value", 
                        `type`="number", 
                        `format`="zto,pvalue")),
                refs=list(
                    "Higgins2003",
                    "DerSimonian1986")))
            self$add(jmvcore::Table$new(
                options=options,
                name="sensitivityAnalysisTable",
                title="Sensitivity Analysis",
                visible=FALSE,
                clearWith=list(
                    "dependentVars",
                    "classVar",
                    "positiveClass"),
                columns=list(
                    list(
                        `name`="scenario", 
                        `title`="Scenario", 
                        `type`="text"),
                    list(
                        `name`="auc_change", 
                        `title`="AUC Change", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="percent_change", 
                        `title`="Percent Change", 
                        `type`="number", 
                        `format`="pc"),
                    list(
                        `name`="robustness", 
                        `title`="Robustness", 
                        `type`="text"),
                    list(
                        `name`="clinical_impact", 
                        `title`="Clinical Impact", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="decisionCurveTable",
                title="Decision Curve Analysis",
                visible="(clinicalUtilityAnalysis)",
                clearWith=list(
                    "dependentVars",
                    "classVar",
                    "positiveClass",
                    "treatmentBenefit",
                    "treatmentHarm"),
                columns=list(
                    list(
                        `name`="variable", 
                        `title`="Variable", 
                        `type`="text"),
                    list(
                        `name`="threshold", 
                        `title`="Threshold", 
                        `type`="number", 
                        `format`="pc"),
                    list(
                        `name`="net_benefit", 
                        `title`="Net Benefit", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="interventions_avoided", 
                        `title`="Interventions Avoided", 
                        `type`="integer"),
                    list(
                        `name`="cases_detected", 
                        `title`="Cases Detected", 
                        `type`="integer"),
                    list(
                        `name`="clinical_value", 
                        `title`="Clinical Value", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="partialAUCTable",
                title="Partial AUC Results",
                visible="(partialAUC)",
                clearWith=list(
                    "dependentVars",
                    "classVar",
                    "positiveClass",
                    "partialAUCfrom",
                    "partialAUCto"),
                columns=list(
                    list(
                        `name`="variable", 
                        `title`="Variable", 
                        `type`="text"),
                    list(
                        `name`="pAUC", 
                        `title`="Partial AUC", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="pAUC_normalized", 
                        `title`="Normalized pAUC", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="ci_lower", 
                        `title`="95% CI Lower", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="ci_upper", 
                        `title`="95% CI Upper", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="spec_range", 
                        `title`="Specificity Range", 
                        `type`="text")),
                refs=list(
                    "McClish1989")))
            self$add(jmvcore::Table$new(
                options=options,
                name="bootstrapCITable",
                title="Bootstrap Confidence Intervals",
                visible="(bootstrapCI)",
                clearWith=list(
                    "dependentVars",
                    "classVar",
                    "positiveClass",
                    "bootstrapReps"),
                columns=list(
                    list(
                        `name`="variable", 
                        `title`="Variable", 
                        `type`="text"),
                    list(
                        `name`="parameter", 
                        `title`="Parameter", 
                        `type`="text"),
                    list(
                        `name`="estimate", 
                        `title`="Estimate", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="ci_lower", 
                        `title`="95% CI Lower", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="ci_upper", 
                        `title`="95% CI Upper", 
                        `type`="number", 
                        `format`="zto"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="rocComparisonTable",
                title="Classifier Performance Comparison",
                visible="(compareClassifiers)",
                clearWith=list(
                    "dependentVars",
                    "classVar",
                    "positiveClass"),
                columns=list(
                    list(
                        `name`="variable", 
                        `title`="Variable", 
                        `type`="text"),
                    list(
                        `name`="auc", 
                        `title`="AUC", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="auprc", 
                        `title`="AUPRC", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="brier", 
                        `title`="Brier Score", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="f1_score", 
                        `title`="F1 Score", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="accuracy", 
                        `title`="Accuracy", 
                        `type`="number", 
                        `format`="pc"),
                    list(
                        `name`="balanced_accuracy", 
                        `title`="Balanced Accuracy", 
                        `type`="number", 
                        `format`="pc"))))
            self$add(jmvcore::Array$new(
                options=options,
                name="effectSizePlot",
                title="Effect Size Visualization",
                visible="(effectSizeAnalysis)",
                template=jmvcore::Image$new(
                    options=options,
                    width=600,
                    height=400,
                    renderFun=".plotEffectSize",
                    clearWith=list(
                        "dependentVars",
                        "classVar",
                        "positiveClass"))))
            self$add(jmvcore::Array$new(
                options=options,
                name="powerCurvePlot",
                title="Power Analysis Curves",
                visible="(powerAnalysis)",
                template=jmvcore::Image$new(
                    options=options,
                    width=650,
                    height=450,
                    renderFun=".plotPowerCurves",
                    clearWith=list(
                        "dependentVars",
                        "classVar",
                        "positiveClass",
                        "targetPower",
                        "targetEffectSize"))))
            self$add(jmvcore::Array$new(
                options=options,
                name="bayesianTracePlot",
                title="Bayesian MCMC Traces",
                visible="(bayesianAnalysis)",
                template=jmvcore::Image$new(
                    options=options,
                    width=700,
                    height=500,
                    renderFun=".plotBayesianTrace",
                    clearWith=list(
                        "dependentVars",
                        "classVar",
                        "positiveClass",
                        "mcmcSamples"))))
            self$add(jmvcore::Array$new(
                options=options,
                name="decisionCurvePlot",
                title="Decision Curve Analysis",
                visible="(clinicalUtilityAnalysis)",
                template=jmvcore::Image$new(
                    options=options,
                    width=700,
                    height=500,
                    renderFun=".plotDecisionCurve",
                    clearWith=list(
                        "dependentVars",
                        "classVar",
                        "positiveClass",
                        "treatmentBenefit",
                        "treatmentHarm"))))
            self$add(jmvcore::Array$new(
                options=options,
                name="metaAnalysisForestPlot",
                title="Meta-Analysis Forest Plot",
                visible="(metaAnalysis && forestPlot)",
                template=jmvcore::Image$new(
                    options=options,
                    width=800,
                    height=600,
                    renderFun=".plotMetaAnalysisForest",
                    clearWith=list(
                        "dependentVars",
                        "classVar",
                        "positiveClass"))))
            self$add(jmvcore::Array$new(
                options=options,
                name="sensitivityAnalysisPlot",
                title="Sensitivity Analysis Plot",
                visible=FALSE,
                template=jmvcore::Image$new(
                    options=options,
                    width=650,
                    height=450,
                    renderFun=".plotSensitivityAnalysis",
                    clearWith=list(
                        "dependentVars",
                        "classVar",
                        "positiveClass"))))}))

psychopdaROCBase <- if (requireNamespace("jmvcore", quietly=TRUE)) R6::R6Class(
    "psychopdaROCBase",
    inherit = jmvcore::Analysis,
    public = list(
        initialize = function(options, data=NULL, datasetId="", analysisId="", revision=0) {
            super$initialize(
                package = "ClinicoPath",
                name = "psychopdaROC",
                version = c(0,0,31),
                options = options,
                results = psychopdaROCResults$new(options=options),
                data = data,
                datasetId = datasetId,
                analysisId = analysisId,
                revision = revision,
                pause = NULL,
                completeWhenFilled = FALSE,
                requiresMissings = FALSE,
                weightsSupport = 'auto')
        }))

#' Advanced ROC Analysis
#'
#' Receiver Operating Characteristic (ROC) curve analysis with optimal 
#' cutpoint determination.
#' 
#' @param clinicalMode Select the complexity level of analysis: Basic -
#'   Essential ROC metrics for clinical decision making Advanced - Additional
#'   statistical comparisons and metrics Comprehensive - Full research-grade
#'   analysis with all options
#' @param data The data as a data frame.
#' @param dependentVars Test variable(s) to be evaluated for classification
#'   performance. Multiple variables can be selected for comparison.
#' @param classVar Binary classification variable representing the true class
#'   (gold standard). Must have exactly two levels.
#' @param positiveClass Specifies which level of the class variable should be
#'   treated as the positive class.
#' @param subGroup Optional grouping variable for stratified analysis.  ROC
#'   curves will be calculated separately for each group.
#' @param clinicalPreset Choose a preset configuration optimized for specific
#'   clinical scenarios: Screening - High sensitivity to avoid missing cases
#'   Confirmation - High specificity to avoid false positives Balanced - Equal
#'   weight to sensitivity and specificity Research - Comprehensive analysis for
#'   publication
#' @param method Method for determining the optimal cutpoint. Different
#'   methods optimize different aspects of classifier performance.
#' @param metric Metric to optimize when determining the cutpoint.  Only
#'   applies to maximize/minimize methods.
#' @param direction Direction of classification relative to the cutpoint. Use
#'   '>=' when higher test values indicate the positive class.
#' @param specifyCutScore Specific cutpoint value to use when method is set to
#'   'Manual cutpoint'.
#' @param tol_metric Tolerance for the metric value when multiple cutpoints
#'   yield similar performance. Cutpoints within this tolerance are considered
#'   equivalent.
#' @param break_ties Method for handling ties when multiple cutpoints achieve
#'   the same metric value.
#' @param allObserved Display performance metrics for all observed test values
#'   as potential cutpoints, not just the optimal cutpoint.
#' @param boot_runs Number of bootstrap iterations for methods using
#'   bootstrapping. Set to 0 to disable bootstrapping.
#' @param usePriorPrev Use a specified prior prevalence instead of the sample
#'   prevalence for calculating predictive values.
#' @param priorPrev Population prevalence to use for predictive value
#'   calculations. Only used when 'Use Prior Prevalence' is checked.
#' @param costratioFP Relative cost of false positives compared to false
#'   negatives. Values > 1 penalize false positives more heavily.
#' @param sensSpecTable Display detailed confusion matrices at optimal
#'   cutpoints.
#' @param showThresholdTable Display detailed table with performance metrics
#'   at multiple thresholds.
#' @param maxThresholds Maximum number of threshold values to show in the
#'   threshold table.
#' @param delongTest Test whether the diagnostic performance differs
#'   significantly between multiple tests. Uses DeLong's method to compare Area
#'   Under the Curve (AUC) values. Requires at least two test variables.
#' @param plotROC Display ROC curves for visual assessment of classifier
#'   performance.
#' @param combinePlots When multiple test variables are selected, combine all
#'   ROC curves in a single plot.
#' @param cleanPlot Create clean ROC curves without annotations, suitable for
#'   publications.
#' @param showOptimalPoint Display the optimal cutpoint on the ROC curve.
#' @param displaySE Display standard error bands on ROC curves (when LOESS
#'   smoothing is applied).
#' @param smoothing Apply LOESS smoothing to ROC curves for visualization.
#' @param showConfidenceBands Display confidence bands around the ROC curve.
#' @param legendPosition Position of the legend in plots with multiple ROC
#'   curves.
#' @param directLabel Label curves directly on the plot instead of using a
#'   legend.
#' @param interactiveROC Create an interactive HTML ROC plot (requires plotROC
#'   package).
#' @param showCriterionPlot Plot showing how sensitivity and specificity
#'   change across different thresholds.
#' @param showPrevalencePlot Plot showing how PPV and NPV change with disease
#'   prevalence.
#' @param showDotPlot Dot plot showing the distribution of test values by
#'   class.
#' @param precisionRecallCurve Display precision-recall curves alongside ROC
#'   curves.
#' @param partialAUC Calculate AUC for a specific region of the ROC curve.
#' @param partialAUCfrom Lower bound of specificity range for partial AUC
#'   calculation.
#' @param partialAUCto Upper bound of specificity range for partial AUC
#'   calculation.
#' @param rocSmoothingMethod Method for smoothing the ROC curve (requires pROC
#'   package).
#' @param bootstrapCI Calculate bootstrap confidence intervals for AUC and
#'   optimal cutpoints.
#' @param bootstrapReps Number of bootstrap replications for confidence
#'   interval calculation.
#' @param quantileCIs Display confidence intervals at specific quantiles of
#'   the test variable.
#' @param quantiles Comma-separated list of quantiles (0-1) at which to
#'   display confidence intervals.
#' @param compareClassifiers Perform comprehensive comparison of classifier
#'   performance metrics.
#' @param calculateIDI Calculate how much better one test is at discriminating
#'   between diseased and healthy patients. IDI (Integrated Discrimination
#'   Improvement) measures the average improvement in predicted probabilities.
#' @param calculateNRI Calculate how many patients are correctly reclassified
#'   when using a new test. NRI (Net Reclassification Index) measures the net
#'   improvement in patient classification.
#' @param refVar Reference test variable for IDI and NRI calculations. Other
#'   variables will be compared against this reference.
#' @param nriThresholds Comma-separated probability thresholds (0-1) defining
#'   risk categories for NRI. Leave empty for continuous NRI.
#' @param idiNriBootRuns Number of bootstrap iterations for IDI and NRI
#'   confidence intervals.
#' @param effectSizeAnalysis Calculate effect sizes for ROC curve differences
#'   using Cohen's conventions and standardized mean differences between AUC
#'   values.
#' @param effectSizeMethod Method for calculating effect sizes between ROC
#'   curves.
#' @param powerAnalysis Perform statistical power analysis for ROC curve
#'   comparisons including sample size estimation and power calculations for
#'   detecting AUC differences.
#' @param powerAnalysisType Type of power analysis to perform.
#' @param expectedAUCDifference Expected difference in AUC values for power
#'   calculations and sample size estimation.
#' @param targetPower Target statistical power for sample size calculations
#'   (typically 0.8 or 0.9).
#' @param significanceLevel Type I error rate for power calculations
#'   (typically 0.05).
#' @param correlationROCs Expected correlation between paired ROC curves for
#'   power calculations. Use 0.5 for moderate correlation, 0.0 for independent
#'   samples.
#' @param advancedMetrics Calculate additional advanced metrics including
#'   H-measure, Kolmogorov-Smirnov statistic, and Gini coefficient for
#'   comprehensive model evaluation.
#' @param bayesianAnalysis Perform Bayesian analysis of ROC curves with
#'   credible intervals and posterior probability assessments.
#' @param priorAUC Prior belief about AUC value for Bayesian analysis (center
#'   of prior distribution).
#' @param priorPrecision Precision of prior belief (higher values = more
#'   confident prior).
#' @param clinicalUtilityAnalysis Perform clinical utility analysis including
#'   net benefit curves, decision curve analysis, and clinical impact
#'   assessment.
#' @param treatmentThreshold Treatment threshold range for decision curve
#'   analysis (min,max,step). Example: "0.05,0.5,0.05" creates thresholds from
#'   5\% to 50\% in 5\% steps.
#' @param harmBenefitRatio Ratio of harm from unnecessary treatment to benefit
#'   from necessary treatment. Lower values favor more aggressive treatment
#'   policies.
#' @param interventionCost Include cost-effectiveness considerations in
#'   clinical utility analysis.
#' @param fixedSensSpecAnalysis Determine cutoffs based on fixed sensitivity
#'   or specificity values and display corresponding performance metrics.
#' @param fixedAnalysisType Choose whether to fix sensitivity or specificity
#'   value for cutoff determination.
#' @param fixedSensitivityValue Target sensitivity value (0-1) for determining
#'   the corresponding cutoff and specificity.
#' @param fixedSpecificityValue Target specificity value (0-1) for determining
#'   the corresponding cutoff and sensitivity.
#' @param showFixedROC Display separate ROC curve highlighting the fixed
#'   sensitivity/specificity point.
#' @param fixedInterpolation Method for interpolating between observed points
#'   to achieve target sensitivity/specificity.
#' @param showFixedExplanation Display explanatory guide for fixed
#'   sensitivity/specificity analysis including  clinical interpretation,
#'   interpolation methods, and usage recommendations.
#' @param metaAnalysis Perform meta-analysis of AUC values across multiple
#'   test variables. Requires at least 3 test variables to enable pooled effect
#'   estimation.
#' @param metaAnalysisMethod Statistical method for combining AUC estimates
#'   across studies/variables.
#' @param heterogeneityTest Perform Cochran's Q test and calculate I
#'   statistic to assess heterogeneity between AUC estimates.
#' @param forestPlot Create forest plot visualization of individual and pooled
#'   AUC estimates with confidence intervals.
#' @return A results object containing:
#' \tabular{llllll}{
#'   \code{results$instructions} \tab \tab \tab \tab \tab a html \cr
#'   \code{results$procedureNotes} \tab \tab \tab \tab \tab a html \cr
#'   \code{results$simpleResultsTable} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$clinicalInterpretationTable} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$resultsTable} \tab \tab \tab \tab \tab an array of tables \cr
#'   \code{results$sensSpecTable} \tab \tab \tab \tab \tab an array of htmls \cr
#'   \code{results$thresholdTable} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$fixedSensSpecTable} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$fixedSensSpecExplanation} \tab \tab \tab \tab \tab a html \cr
#'   \code{results$aucSummaryTable} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$delongComparisonTable} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$delongTest} \tab \tab \tab \tab \tab a preformatted \cr
#'   \code{results$plotROC} \tab \tab \tab \tab \tab an array of images \cr
#'   \code{results$interactivePlot} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$fixedSensSpecROC} \tab \tab \tab \tab \tab an array of images \cr
#'   \code{results$criterionPlot} \tab \tab \tab \tab \tab an array of images \cr
#'   \code{results$prevalencePlot} \tab \tab \tab \tab \tab an array of images \cr
#'   \code{results$dotPlot} \tab \tab \tab \tab \tab an array of images \cr
#'   \code{results$dotPlotMessage} \tab \tab \tab \tab \tab a html \cr
#'   \code{results$precisionRecallPlot} \tab \tab \tab \tab \tab an array of images \cr
#'   \code{results$idiTable} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$nriTable} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$effectSizeTable} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$powerAnalysisTable} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$bayesianROCTable} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$clinicalUtilityTable} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$metaAnalysisTable} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$sensitivityAnalysisTable} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$decisionCurveTable} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$partialAUCTable} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$bootstrapCITable} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$rocComparisonTable} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$effectSizePlot} \tab \tab \tab \tab \tab an array of images \cr
#'   \code{results$powerCurvePlot} \tab \tab \tab \tab \tab an array of images \cr
#'   \code{results$bayesianTracePlot} \tab \tab \tab \tab \tab an array of images \cr
#'   \code{results$decisionCurvePlot} \tab \tab \tab \tab \tab an array of images \cr
#'   \code{results$metaAnalysisForestPlot} \tab \tab \tab \tab \tab an array of images \cr
#'   \code{results$sensitivityAnalysisPlot} \tab \tab \tab \tab \tab an array of images \cr
#' }
#'
#' Tables can be converted to data frames with \code{asDF} or \code{\link{as.data.frame}}. For example:
#'
#' \code{results$simpleResultsTable$asDF}
#'
#' \code{as.data.frame(results$simpleResultsTable)}
#'
#' @export
psychopdaROC <- function(
    clinicalMode = "basic",
    data,
    dependentVars,
    classVar,
    positiveClass,
    subGroup,
    clinicalPreset = "none",
    method = "maximize_metric",
    metric = "youden",
    direction = ">=",
    specifyCutScore = "",
    tol_metric = 0.05,
    break_ties = "mean",
    allObserved = FALSE,
    boot_runs = 0,
    usePriorPrev = FALSE,
    priorPrev = 0.5,
    costratioFP = 1,
    sensSpecTable = FALSE,
    showThresholdTable = FALSE,
    maxThresholds = 20,
    delongTest = FALSE,
    plotROC = TRUE,
    combinePlots = TRUE,
    cleanPlot = FALSE,
    showOptimalPoint = TRUE,
    displaySE = FALSE,
    smoothing = FALSE,
    showConfidenceBands = FALSE,
    legendPosition = "right",
    directLabel = FALSE,
    interactiveROC = FALSE,
    showCriterionPlot = FALSE,
    showPrevalencePlot = FALSE,
    showDotPlot = FALSE,
    precisionRecallCurve = FALSE,
    partialAUC = FALSE,
    partialAUCfrom = 0.8,
    partialAUCto = 1,
    rocSmoothingMethod = "none",
    bootstrapCI = FALSE,
    bootstrapReps = 2000,
    quantileCIs = FALSE,
    quantiles = "0.1,0.25,0.5,0.75,0.9",
    compareClassifiers = FALSE,
    calculateIDI = FALSE,
    calculateNRI = FALSE,
    refVar,
    nriThresholds = "",
    idiNriBootRuns = 1000,
    effectSizeAnalysis = FALSE,
    effectSizeMethod = "cohens_d",
    powerAnalysis = FALSE,
    powerAnalysisType = "post_hoc",
    expectedAUCDifference = 0.1,
    targetPower = 0.8,
    significanceLevel = 0.05,
    correlationROCs = 0.5,
    advancedMetrics = FALSE,
    bayesianAnalysis = FALSE,
    priorAUC = 0.7,
    priorPrecision = 10,
    clinicalUtilityAnalysis = FALSE,
    treatmentThreshold = "0.05,0.5,0.05",
    harmBenefitRatio = 0.25,
    interventionCost = FALSE,
    fixedSensSpecAnalysis = FALSE,
    fixedAnalysisType = "sensitivity",
    fixedSensitivityValue = 0.9,
    fixedSpecificityValue = 0.9,
    showFixedROC = TRUE,
    fixedInterpolation = "linear",
    showFixedExplanation = TRUE,
    metaAnalysis = FALSE,
    metaAnalysisMethod = "both",
    heterogeneityTest = TRUE,
    forestPlot = FALSE) {

    if ( ! requireNamespace("jmvcore", quietly=TRUE))
        stop("psychopdaROC requires jmvcore to be installed (restart may be required)")

    if ( ! missing(dependentVars)) dependentVars <- jmvcore::resolveQuo(jmvcore::enquo(dependentVars))
    if ( ! missing(classVar)) classVar <- jmvcore::resolveQuo(jmvcore::enquo(classVar))
    if ( ! missing(subGroup)) subGroup <- jmvcore::resolveQuo(jmvcore::enquo(subGroup))
    if (missing(data))
        data <- jmvcore::marshalData(
            parent.frame(),
            `if`( ! missing(dependentVars), dependentVars, NULL),
            `if`( ! missing(classVar), classVar, NULL),
            `if`( ! missing(subGroup), subGroup, NULL))

    for (v in classVar) if (v %in% names(data)) data[[v]] <- as.factor(data[[v]])
    for (v in subGroup) if (v %in% names(data)) data[[v]] <- as.factor(data[[v]])

    options <- psychopdaROCOptions$new(
        clinicalMode = clinicalMode,
        dependentVars = dependentVars,
        classVar = classVar,
        positiveClass = positiveClass,
        subGroup = subGroup,
        clinicalPreset = clinicalPreset,
        method = method,
        metric = metric,
        direction = direction,
        specifyCutScore = specifyCutScore,
        tol_metric = tol_metric,
        break_ties = break_ties,
        allObserved = allObserved,
        boot_runs = boot_runs,
        usePriorPrev = usePriorPrev,
        priorPrev = priorPrev,
        costratioFP = costratioFP,
        sensSpecTable = sensSpecTable,
        showThresholdTable = showThresholdTable,
        maxThresholds = maxThresholds,
        delongTest = delongTest,
        plotROC = plotROC,
        combinePlots = combinePlots,
        cleanPlot = cleanPlot,
        showOptimalPoint = showOptimalPoint,
        displaySE = displaySE,
        smoothing = smoothing,
        showConfidenceBands = showConfidenceBands,
        legendPosition = legendPosition,
        directLabel = directLabel,
        interactiveROC = interactiveROC,
        showCriterionPlot = showCriterionPlot,
        showPrevalencePlot = showPrevalencePlot,
        showDotPlot = showDotPlot,
        precisionRecallCurve = precisionRecallCurve,
        partialAUC = partialAUC,
        partialAUCfrom = partialAUCfrom,
        partialAUCto = partialAUCto,
        rocSmoothingMethod = rocSmoothingMethod,
        bootstrapCI = bootstrapCI,
        bootstrapReps = bootstrapReps,
        quantileCIs = quantileCIs,
        quantiles = quantiles,
        compareClassifiers = compareClassifiers,
        calculateIDI = calculateIDI,
        calculateNRI = calculateNRI,
        refVar = refVar,
        nriThresholds = nriThresholds,
        idiNriBootRuns = idiNriBootRuns,
        effectSizeAnalysis = effectSizeAnalysis,
        effectSizeMethod = effectSizeMethod,
        powerAnalysis = powerAnalysis,
        powerAnalysisType = powerAnalysisType,
        expectedAUCDifference = expectedAUCDifference,
        targetPower = targetPower,
        significanceLevel = significanceLevel,
        correlationROCs = correlationROCs,
        advancedMetrics = advancedMetrics,
        bayesianAnalysis = bayesianAnalysis,
        priorAUC = priorAUC,
        priorPrecision = priorPrecision,
        clinicalUtilityAnalysis = clinicalUtilityAnalysis,
        treatmentThreshold = treatmentThreshold,
        harmBenefitRatio = harmBenefitRatio,
        interventionCost = interventionCost,
        fixedSensSpecAnalysis = fixedSensSpecAnalysis,
        fixedAnalysisType = fixedAnalysisType,
        fixedSensitivityValue = fixedSensitivityValue,
        fixedSpecificityValue = fixedSpecificityValue,
        showFixedROC = showFixedROC,
        fixedInterpolation = fixedInterpolation,
        showFixedExplanation = showFixedExplanation,
        metaAnalysis = metaAnalysis,
        metaAnalysisMethod = metaAnalysisMethod,
        heterogeneityTest = heterogeneityTest,
        forestPlot = forestPlot)

    analysis <- psychopdaROCClass$new(
        options = options,
        data = data)

    analysis$run()

    analysis$results
}

