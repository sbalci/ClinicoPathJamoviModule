
# This file is automatically generated, you probably don't want to edit this

spikeslabpriorsOptions <- if (requireNamespace("jmvcore", quietly=TRUE)) R6::R6Class(
    "spikeslabpriorsOptions",
    inherit = jmvcore::Options,
    public = list(
        initialize = function(
            outcome = NULL,
            predictors = NULL,
            outcomeLevel = NULL,
            time_variable = NULL,
            status_variable = NULL,
            model_type = "regression",
            spike_slab_type = "binary",
            prior_inclusion_prob = 0.5,
            expected_model_size = 5,
            spike_variance = 0.001,
            slab_variance = 1,
            hyperprior_type = "empirical_bayes",
            hyperprior_alpha = 1,
            hyperprior_beta = 1,
            selection_criterion = "median_probability",
            inclusion_threshold = 0.5,
            bayes_factor_threshold = 3,
            mcmc_samples = 10000,
            mcmc_burnin = 5000,
            mcmc_thin = 1,
            mcmc_chains = 3,
            model_averaging = TRUE,
            prediction_method = "bma",
            cross_validation = FALSE,
            cv_folds = 10,
            standardize_predictors = TRUE,
            center_predictors = TRUE,
            max_model_size = 50,
            dimension_reduction = "none",
            prescreening_threshold = 0.1,
            show_variable_selection = TRUE,
            show_inclusion_probabilities = TRUE,
            show_model_probabilities = TRUE,
            show_coefficient_estimates = TRUE,
            show_prediction_performance = TRUE,
            show_convergence_diagnostics = TRUE,
            show_variable_importance = TRUE,
            show_model_comparison = FALSE,
            show_interpretation = TRUE,
            interaction_terms = FALSE,
            max_interactions = 2,
            heredity_constraint = "weak",
            group_variables = FALSE,
            group_structure = NULL,
            clinical_context = "biomarker_discovery",
            confidence_level = 0.95,
            set_seed = TRUE,
            seed_value = 42,
            parallel_processing = TRUE,
            n_cores = 2, ...) {

            super$initialize(
                package="ClinicoPath",
                name="spikeslabpriors",
                requiresData=TRUE,
                ...)

            private$..outcome <- jmvcore::OptionVariable$new(
                "outcome",
                outcome,
                suggested=list(
                    "continuous",
                    "nominal"),
                permitted=list(
                    "numeric",
                    "factor"))
            private$..predictors <- jmvcore::OptionVariables$new(
                "predictors",
                predictors,
                suggested=list(
                    "continuous",
                    "ordinal"),
                permitted=list(
                    "numeric",
                    "factor"))
            private$..outcomeLevel <- jmvcore::OptionLevel$new(
                "outcomeLevel",
                outcomeLevel,
                variable="(outcome)")
            private$..time_variable <- jmvcore::OptionVariable$new(
                "time_variable",
                time_variable,
                suggested=list(
                    "continuous"),
                permitted=list(
                    "numeric"),
                default=NULL)
            private$..status_variable <- jmvcore::OptionVariable$new(
                "status_variable",
                status_variable,
                suggested=list(
                    "nominal",
                    "ordinal"),
                permitted=list(
                    "factor",
                    "numeric"),
                default=NULL)
            private$..model_type <- jmvcore::OptionList$new(
                "model_type",
                model_type,
                options=list(
                    "regression",
                    "logistic",
                    "poisson",
                    "cox",
                    "probit",
                    "quantile"),
                default="regression")
            private$..spike_slab_type <- jmvcore::OptionList$new(
                "spike_slab_type",
                spike_slab_type,
                options=list(
                    "binary",
                    "continuous",
                    "george_mcculloch",
                    "ishwaran_rao",
                    "ssvs"),
                default="binary")
            private$..prior_inclusion_prob <- jmvcore::OptionNumber$new(
                "prior_inclusion_prob",
                prior_inclusion_prob,
                default=0.5,
                min=0.001,
                max=0.999)
            private$..expected_model_size <- jmvcore::OptionInteger$new(
                "expected_model_size",
                expected_model_size,
                default=5,
                min=1,
                max=100)
            private$..spike_variance <- jmvcore::OptionNumber$new(
                "spike_variance",
                spike_variance,
                default=0.001,
                min=0.0001,
                max=0.1)
            private$..slab_variance <- jmvcore::OptionNumber$new(
                "slab_variance",
                slab_variance,
                default=1,
                min=0.1,
                max=100)
            private$..hyperprior_type <- jmvcore::OptionList$new(
                "hyperprior_type",
                hyperprior_type,
                options=list(
                    "empirical_bayes",
                    "full_bayes",
                    "fixed",
                    "beta_binomial"),
                default="empirical_bayes")
            private$..hyperprior_alpha <- jmvcore::OptionNumber$new(
                "hyperprior_alpha",
                hyperprior_alpha,
                default=1,
                min=0.1,
                max=10)
            private$..hyperprior_beta <- jmvcore::OptionNumber$new(
                "hyperprior_beta",
                hyperprior_beta,
                default=1,
                min=0.1,
                max=10)
            private$..selection_criterion <- jmvcore::OptionList$new(
                "selection_criterion",
                selection_criterion,
                options=list(
                    "median_probability",
                    "hpd",
                    "bayes_factor",
                    "pip",
                    "mip"),
                default="median_probability")
            private$..inclusion_threshold <- jmvcore::OptionNumber$new(
                "inclusion_threshold",
                inclusion_threshold,
                default=0.5,
                min=0.1,
                max=0.99)
            private$..bayes_factor_threshold <- jmvcore::OptionNumber$new(
                "bayes_factor_threshold",
                bayes_factor_threshold,
                default=3,
                min=1,
                max=100)
            private$..mcmc_samples <- jmvcore::OptionInteger$new(
                "mcmc_samples",
                mcmc_samples,
                default=10000,
                min=2000,
                max=100000)
            private$..mcmc_burnin <- jmvcore::OptionInteger$new(
                "mcmc_burnin",
                mcmc_burnin,
                default=5000,
                min=1000,
                max=50000)
            private$..mcmc_thin <- jmvcore::OptionInteger$new(
                "mcmc_thin",
                mcmc_thin,
                default=1,
                min=1,
                max=50)
            private$..mcmc_chains <- jmvcore::OptionInteger$new(
                "mcmc_chains",
                mcmc_chains,
                default=3,
                min=1,
                max=8)
            private$..model_averaging <- jmvcore::OptionBool$new(
                "model_averaging",
                model_averaging,
                default=TRUE)
            private$..prediction_method <- jmvcore::OptionList$new(
                "prediction_method",
                prediction_method,
                options=list(
                    "bma",
                    "best_model",
                    "median_model",
                    "full_posterior"),
                default="bma")
            private$..cross_validation <- jmvcore::OptionBool$new(
                "cross_validation",
                cross_validation,
                default=FALSE)
            private$..cv_folds <- jmvcore::OptionInteger$new(
                "cv_folds",
                cv_folds,
                default=10,
                min=3,
                max=20)
            private$..standardize_predictors <- jmvcore::OptionBool$new(
                "standardize_predictors",
                standardize_predictors,
                default=TRUE)
            private$..center_predictors <- jmvcore::OptionBool$new(
                "center_predictors",
                center_predictors,
                default=TRUE)
            private$..max_model_size <- jmvcore::OptionInteger$new(
                "max_model_size",
                max_model_size,
                default=50,
                min=1,
                max=500)
            private$..dimension_reduction <- jmvcore::OptionList$new(
                "dimension_reduction",
                dimension_reduction,
                options=list(
                    "none",
                    "sis",
                    "marginal_correlation",
                    "lasso_prescreening"),
                default="none")
            private$..prescreening_threshold <- jmvcore::OptionNumber$new(
                "prescreening_threshold",
                prescreening_threshold,
                default=0.1,
                min=0.01,
                max=0.5)
            private$..show_variable_selection <- jmvcore::OptionBool$new(
                "show_variable_selection",
                show_variable_selection,
                default=TRUE)
            private$..show_inclusion_probabilities <- jmvcore::OptionBool$new(
                "show_inclusion_probabilities",
                show_inclusion_probabilities,
                default=TRUE)
            private$..show_model_probabilities <- jmvcore::OptionBool$new(
                "show_model_probabilities",
                show_model_probabilities,
                default=TRUE)
            private$..show_coefficient_estimates <- jmvcore::OptionBool$new(
                "show_coefficient_estimates",
                show_coefficient_estimates,
                default=TRUE)
            private$..show_prediction_performance <- jmvcore::OptionBool$new(
                "show_prediction_performance",
                show_prediction_performance,
                default=TRUE)
            private$..show_convergence_diagnostics <- jmvcore::OptionBool$new(
                "show_convergence_diagnostics",
                show_convergence_diagnostics,
                default=TRUE)
            private$..show_variable_importance <- jmvcore::OptionBool$new(
                "show_variable_importance",
                show_variable_importance,
                default=TRUE)
            private$..show_model_comparison <- jmvcore::OptionBool$new(
                "show_model_comparison",
                show_model_comparison,
                default=FALSE)
            private$..show_interpretation <- jmvcore::OptionBool$new(
                "show_interpretation",
                show_interpretation,
                default=TRUE)
            private$..interaction_terms <- jmvcore::OptionBool$new(
                "interaction_terms",
                interaction_terms,
                default=FALSE)
            private$..max_interactions <- jmvcore::OptionInteger$new(
                "max_interactions",
                max_interactions,
                default=2,
                min=2,
                max=3)
            private$..heredity_constraint <- jmvcore::OptionList$new(
                "heredity_constraint",
                heredity_constraint,
                options=list(
                    "none",
                    "weak",
                    "strong"),
                default="weak")
            private$..group_variables <- jmvcore::OptionBool$new(
                "group_variables",
                group_variables,
                default=FALSE)
            private$..group_structure <- jmvcore::OptionVariable$new(
                "group_structure",
                group_structure,
                suggested=list(
                    "nominal",
                    "ordinal"),
                permitted=list(
                    "factor"),
                default=NULL)
            private$..clinical_context <- jmvcore::OptionList$new(
                "clinical_context",
                clinical_context,
                options=list(
                    "biomarker_discovery",
                    "genomic",
                    "radiomics",
                    "clinical_risk",
                    "multi_omics",
                    "general"),
                default="biomarker_discovery")
            private$..confidence_level <- jmvcore::OptionNumber$new(
                "confidence_level",
                confidence_level,
                default=0.95,
                min=0.8,
                max=0.99)
            private$..set_seed <- jmvcore::OptionBool$new(
                "set_seed",
                set_seed,
                default=TRUE)
            private$..seed_value <- jmvcore::OptionInteger$new(
                "seed_value",
                seed_value,
                default=42,
                min=1,
                max=999999)
            private$..parallel_processing <- jmvcore::OptionBool$new(
                "parallel_processing",
                parallel_processing,
                default=TRUE)
            private$..n_cores <- jmvcore::OptionInteger$new(
                "n_cores",
                n_cores,
                default=2,
                min=1,
                max=8)

            self$.addOption(private$..outcome)
            self$.addOption(private$..predictors)
            self$.addOption(private$..outcomeLevel)
            self$.addOption(private$..time_variable)
            self$.addOption(private$..status_variable)
            self$.addOption(private$..model_type)
            self$.addOption(private$..spike_slab_type)
            self$.addOption(private$..prior_inclusion_prob)
            self$.addOption(private$..expected_model_size)
            self$.addOption(private$..spike_variance)
            self$.addOption(private$..slab_variance)
            self$.addOption(private$..hyperprior_type)
            self$.addOption(private$..hyperprior_alpha)
            self$.addOption(private$..hyperprior_beta)
            self$.addOption(private$..selection_criterion)
            self$.addOption(private$..inclusion_threshold)
            self$.addOption(private$..bayes_factor_threshold)
            self$.addOption(private$..mcmc_samples)
            self$.addOption(private$..mcmc_burnin)
            self$.addOption(private$..mcmc_thin)
            self$.addOption(private$..mcmc_chains)
            self$.addOption(private$..model_averaging)
            self$.addOption(private$..prediction_method)
            self$.addOption(private$..cross_validation)
            self$.addOption(private$..cv_folds)
            self$.addOption(private$..standardize_predictors)
            self$.addOption(private$..center_predictors)
            self$.addOption(private$..max_model_size)
            self$.addOption(private$..dimension_reduction)
            self$.addOption(private$..prescreening_threshold)
            self$.addOption(private$..show_variable_selection)
            self$.addOption(private$..show_inclusion_probabilities)
            self$.addOption(private$..show_model_probabilities)
            self$.addOption(private$..show_coefficient_estimates)
            self$.addOption(private$..show_prediction_performance)
            self$.addOption(private$..show_convergence_diagnostics)
            self$.addOption(private$..show_variable_importance)
            self$.addOption(private$..show_model_comparison)
            self$.addOption(private$..show_interpretation)
            self$.addOption(private$..interaction_terms)
            self$.addOption(private$..max_interactions)
            self$.addOption(private$..heredity_constraint)
            self$.addOption(private$..group_variables)
            self$.addOption(private$..group_structure)
            self$.addOption(private$..clinical_context)
            self$.addOption(private$..confidence_level)
            self$.addOption(private$..set_seed)
            self$.addOption(private$..seed_value)
            self$.addOption(private$..parallel_processing)
            self$.addOption(private$..n_cores)
        }),
    active = list(
        outcome = function() private$..outcome$value,
        predictors = function() private$..predictors$value,
        outcomeLevel = function() private$..outcomeLevel$value,
        time_variable = function() private$..time_variable$value,
        status_variable = function() private$..status_variable$value,
        model_type = function() private$..model_type$value,
        spike_slab_type = function() private$..spike_slab_type$value,
        prior_inclusion_prob = function() private$..prior_inclusion_prob$value,
        expected_model_size = function() private$..expected_model_size$value,
        spike_variance = function() private$..spike_variance$value,
        slab_variance = function() private$..slab_variance$value,
        hyperprior_type = function() private$..hyperprior_type$value,
        hyperprior_alpha = function() private$..hyperprior_alpha$value,
        hyperprior_beta = function() private$..hyperprior_beta$value,
        selection_criterion = function() private$..selection_criterion$value,
        inclusion_threshold = function() private$..inclusion_threshold$value,
        bayes_factor_threshold = function() private$..bayes_factor_threshold$value,
        mcmc_samples = function() private$..mcmc_samples$value,
        mcmc_burnin = function() private$..mcmc_burnin$value,
        mcmc_thin = function() private$..mcmc_thin$value,
        mcmc_chains = function() private$..mcmc_chains$value,
        model_averaging = function() private$..model_averaging$value,
        prediction_method = function() private$..prediction_method$value,
        cross_validation = function() private$..cross_validation$value,
        cv_folds = function() private$..cv_folds$value,
        standardize_predictors = function() private$..standardize_predictors$value,
        center_predictors = function() private$..center_predictors$value,
        max_model_size = function() private$..max_model_size$value,
        dimension_reduction = function() private$..dimension_reduction$value,
        prescreening_threshold = function() private$..prescreening_threshold$value,
        show_variable_selection = function() private$..show_variable_selection$value,
        show_inclusion_probabilities = function() private$..show_inclusion_probabilities$value,
        show_model_probabilities = function() private$..show_model_probabilities$value,
        show_coefficient_estimates = function() private$..show_coefficient_estimates$value,
        show_prediction_performance = function() private$..show_prediction_performance$value,
        show_convergence_diagnostics = function() private$..show_convergence_diagnostics$value,
        show_variable_importance = function() private$..show_variable_importance$value,
        show_model_comparison = function() private$..show_model_comparison$value,
        show_interpretation = function() private$..show_interpretation$value,
        interaction_terms = function() private$..interaction_terms$value,
        max_interactions = function() private$..max_interactions$value,
        heredity_constraint = function() private$..heredity_constraint$value,
        group_variables = function() private$..group_variables$value,
        group_structure = function() private$..group_structure$value,
        clinical_context = function() private$..clinical_context$value,
        confidence_level = function() private$..confidence_level$value,
        set_seed = function() private$..set_seed$value,
        seed_value = function() private$..seed_value$value,
        parallel_processing = function() private$..parallel_processing$value,
        n_cores = function() private$..n_cores$value),
    private = list(
        ..outcome = NA,
        ..predictors = NA,
        ..outcomeLevel = NA,
        ..time_variable = NA,
        ..status_variable = NA,
        ..model_type = NA,
        ..spike_slab_type = NA,
        ..prior_inclusion_prob = NA,
        ..expected_model_size = NA,
        ..spike_variance = NA,
        ..slab_variance = NA,
        ..hyperprior_type = NA,
        ..hyperprior_alpha = NA,
        ..hyperprior_beta = NA,
        ..selection_criterion = NA,
        ..inclusion_threshold = NA,
        ..bayes_factor_threshold = NA,
        ..mcmc_samples = NA,
        ..mcmc_burnin = NA,
        ..mcmc_thin = NA,
        ..mcmc_chains = NA,
        ..model_averaging = NA,
        ..prediction_method = NA,
        ..cross_validation = NA,
        ..cv_folds = NA,
        ..standardize_predictors = NA,
        ..center_predictors = NA,
        ..max_model_size = NA,
        ..dimension_reduction = NA,
        ..prescreening_threshold = NA,
        ..show_variable_selection = NA,
        ..show_inclusion_probabilities = NA,
        ..show_model_probabilities = NA,
        ..show_coefficient_estimates = NA,
        ..show_prediction_performance = NA,
        ..show_convergence_diagnostics = NA,
        ..show_variable_importance = NA,
        ..show_model_comparison = NA,
        ..show_interpretation = NA,
        ..interaction_terms = NA,
        ..max_interactions = NA,
        ..heredity_constraint = NA,
        ..group_variables = NA,
        ..group_structure = NA,
        ..clinical_context = NA,
        ..confidence_level = NA,
        ..set_seed = NA,
        ..seed_value = NA,
        ..parallel_processing = NA,
        ..n_cores = NA)
)

spikeslabpriorsResults <- if (requireNamespace("jmvcore", quietly=TRUE)) R6::R6Class(
    "spikeslabpriorsResults",
    inherit = jmvcore::Group,
    active = list(
        variableSelection = function() private$.items[["variableSelection"]],
        inclusionProbabilities = function() private$.items[["inclusionProbabilities"]],
        modelProbabilities = function() private$.items[["modelProbabilities"]],
        coefficientEstimates = function() private$.items[["coefficientEstimates"]],
        predictionPerformance = function() private$.items[["predictionPerformance"]],
        convergenceDiagnostics = function() private$.items[["convergenceDiagnostics"]],
        variableImportance = function() private$.items[["variableImportance"]],
        modelComparison = function() private$.items[["modelComparison"]],
        dimensionSummary = function() private$.items[["dimensionSummary"]],
        groupSelection = function() private$.items[["groupSelection"]],
        clinicalInterpretation = function() private$.items[["clinicalInterpretation"]],
        methodsExplanation = function() private$.items[["methodsExplanation"]],
        inclusionProbabilityPlot = function() private$.items[["inclusionProbabilityPlot"]],
        modelSizePlot = function() private$.items[["modelSizePlot"]],
        coefficientPlot = function() private$.items[["coefficientPlot"]],
        variableImportancePlot = function() private$.items[["variableImportancePlot"]],
        convergencePlots = function() private$.items[["convergencePlots"]],
        posteriorDistributionPlots = function() private$.items[["posteriorDistributionPlots"]],
        modelComparisonPlot = function() private$.items[["modelComparisonPlot"]],
        predictionPerformancePlot = function() private$.items[["predictionPerformancePlot"]]),
    private = list(),
    public=list(
        initialize=function(options) {
            super$initialize(
                options=options,
                name="",
                title="Analysis Results")
            self$add(jmvcore::Table$new(
                options=options,
                name="variableSelection",
                title="Variable Selection Results",
                columns=list(
                    list(
                        `name`="variable", 
                        `title`="Variable", 
                        `type`="text"),
                    list(
                        `name`="inclusion_probability", 
                        `title`="Inclusion Probability", 
                        `type`="number"),
                    list(
                        `name`="bayes_factor", 
                        `title`="Bayes Factor", 
                        `type`="number"),
                    list(
                        `name`="selected", 
                        `title`="Selected", 
                        `type`="text"),
                    list(
                        `name`="rank", 
                        `title`="Importance Rank", 
                        `type`="integer"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="inclusionProbabilities",
                title="Posterior Inclusion Probabilities",
                columns=list(
                    list(
                        `name`="variable", 
                        `title`="Variable", 
                        `type`="text"),
                    list(
                        `name`="posterior_pip", 
                        `title`="Posterior PIP", 
                        `type`="number"),
                    list(
                        `name`="prior_pip", 
                        `title`="Prior PIP", 
                        `type`="number"),
                    list(
                        `name`="bf_inclusion", 
                        `title`="BF (Inclusion)", 
                        `type`="number"),
                    list(
                        `name`="credible_interval_lower", 
                        `title`="PIP CI Lower", 
                        `type`="number"),
                    list(
                        `name`="credible_interval_upper", 
                        `title`="PIP CI Upper", 
                        `type`="number"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="modelProbabilities",
                title="Top Model Probabilities",
                columns=list(
                    list(
                        `name`="model_id", 
                        `title`="Model ID", 
                        `type`="integer"),
                    list(
                        `name`="variables_included", 
                        `title`="Variables Included", 
                        `type`="text"),
                    list(
                        `name`="model_size", 
                        `title`="Model Size", 
                        `type`="integer"),
                    list(
                        `name`="posterior_probability", 
                        `title`="Posterior Probability", 
                        `type`="number"),
                    list(
                        `name`="bayes_factor", 
                        `title`="Bayes Factor", 
                        `type`="number"),
                    list(
                        `name`="cumulative_probability", 
                        `title`="Cumulative Probability", 
                        `type`="number"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="coefficientEstimates",
                title="Coefficient Estimates (Model Averaged)",
                columns=list(
                    list(
                        `name`="variable", 
                        `title`="Variable", 
                        `type`="text"),
                    list(
                        `name`="posterior_mean", 
                        `title`="Posterior Mean", 
                        `type`="number"),
                    list(
                        `name`="posterior_sd", 
                        `title`="Posterior SD", 
                        `type`="number"),
                    list(
                        `name`="credible_interval_lower", 
                        `title`="CI Lower", 
                        `type`="number"),
                    list(
                        `name`="credible_interval_upper", 
                        `title`="CI Upper", 
                        `type`="number"),
                    list(
                        `name`="conditional_mean", 
                        `title`="Conditional Mean", 
                        `type`="number"),
                    list(
                        `name`="conditional_sd", 
                        `title`="Conditional SD", 
                        `type`="number"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="predictionPerformance",
                title="Prediction Performance Metrics",
                columns=list(
                    list(
                        `name`="metric", 
                        `title`="Performance Metric", 
                        `type`="text"),
                    list(
                        `name`="value", 
                        `title`="Value", 
                        `type`="number"),
                    list(
                        `name`="ci_lower", 
                        `title`="CI Lower", 
                        `type`="number"),
                    list(
                        `name`="ci_upper", 
                        `title`="CI Upper", 
                        `type`="number"),
                    list(
                        `name`="interpretation", 
                        `title`="Interpretation", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="convergenceDiagnostics",
                title="MCMC Convergence Diagnostics",
                columns=list(
                    list(
                        `name`="parameter", 
                        `title`="Parameter", 
                        `type`="text"),
                    list(
                        `name`="rhat", 
                        `title`="R\u0302", 
                        `type`="number"),
                    list(
                        `name`="ess_bulk", 
                        `title`="Bulk ESS", 
                        `type`="integer"),
                    list(
                        `name`="ess_tail", 
                        `title`="Tail ESS", 
                        `type`="integer"),
                    list(
                        `name`="mcse", 
                        `title`="Monte Carlo SE", 
                        `type`="number"),
                    list(
                        `name`="convergence_status", 
                        `title`="Convergence Status", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="variableImportance",
                title="Variable Importance Scores",
                columns=list(
                    list(
                        `name`="variable", 
                        `title`="Variable", 
                        `type`="text"),
                    list(
                        `name`="importance_score", 
                        `title`="Importance Score", 
                        `type`="number"),
                    list(
                        `name`="scaled_importance", 
                        `title`="Scaled Importance", 
                        `type`="number"),
                    list(
                        `name`="cumulative_importance", 
                        `title`="Cumulative Importance", 
                        `type`="number"),
                    list(
                        `name`="category", 
                        `title`="Importance Category", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="modelComparison",
                title="Model Comparison Results",
                columns=list(
                    list(
                        `name`="model_type", 
                        `title`="Model Type", 
                        `type`="text"),
                    list(
                        `name`="dic", 
                        `title`="DIC", 
                        `type`="number"),
                    list(
                        `name`="waic", 
                        `title`="WAIC", 
                        `type`="number"),
                    list(
                        `name`="loo", 
                        `title`="LOO", 
                        `type`="number"),
                    list(
                        `name`="marginal_likelihood", 
                        `title`="Marginal Likelihood", 
                        `type`="number"),
                    list(
                        `name`="preferred", 
                        `title`="Preferred Model", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="dimensionSummary",
                title="Dimension Reduction Summary",
                columns=list(
                    list(
                        `name`="stage", 
                        `title`="Analysis Stage", 
                        `type`="text"),
                    list(
                        `name`="n_variables", 
                        `title`="Number of Variables", 
                        `type`="integer"),
                    list(
                        `name`="reduction_method", 
                        `title`="Method Used", 
                        `type`="text"),
                    list(
                        `name`="reduction_ratio", 
                        `title`="Reduction Ratio", 
                        `type`="number"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="groupSelection",
                title="Group Variable Selection Results",
                columns=list(
                    list(
                        `name`="group", 
                        `title`="Variable Group", 
                        `type`="text"),
                    list(
                        `name`="n_variables", 
                        `title`="Variables in Group", 
                        `type`="integer"),
                    list(
                        `name`="group_inclusion_prob", 
                        `title`="Group Inclusion Probability", 
                        `type`="number"),
                    list(
                        `name`="n_selected", 
                        `title`="Variables Selected", 
                        `type`="integer"),
                    list(
                        `name`="group_selected", 
                        `title`="Group Selected", 
                        `type`="text"))))
            self$add(jmvcore::Html$new(
                options=options,
                name="clinicalInterpretation",
                title="Clinical Interpretation and Recommendations"))
            self$add(jmvcore::Html$new(
                options=options,
                name="methodsExplanation",
                title="Spike-and-Slab Methods and Theory"))
            self$add(jmvcore::Image$new(
                options=options,
                name="inclusionProbabilityPlot",
                title="Variable Inclusion Probability Plot",
                width=600,
                height=500,
                renderFun=".plotInclusionProbabilities"))
            self$add(jmvcore::Image$new(
                options=options,
                name="modelSizePlot",
                title="Model Size Distribution",
                width=500,
                height=400,
                renderFun=".plotModelSize"))
            self$add(jmvcore::Image$new(
                options=options,
                name="coefficientPlot",
                title="Coefficient Estimates with Uncertainty",
                width=600,
                height=500,
                renderFun=".plotCoefficients"))
            self$add(jmvcore::Image$new(
                options=options,
                name="variableImportancePlot",
                title="Variable Importance Visualization",
                width=600,
                height=450,
                renderFun=".plotVariableImportance"))
            self$add(jmvcore::Image$new(
                options=options,
                name="convergencePlots",
                title="MCMC Convergence Plots",
                width=600,
                height=400,
                renderFun=".plotConvergence"))
            self$add(jmvcore::Image$new(
                options=options,
                name="posteriorDistributionPlots",
                title="Posterior Distribution Plots",
                width=700,
                height=500,
                renderFun=".plotPosteriorDistributions"))
            self$add(jmvcore::Image$new(
                options=options,
                name="modelComparisonPlot",
                title="Model Comparison Visualization",
                width=600,
                height=400,
                renderFun=".plotModelComparison"))
            self$add(jmvcore::Image$new(
                options=options,
                name="predictionPerformancePlot",
                title="Prediction Performance Visualization",
                width=600,
                height=400,
                renderFun=".plotPredictionPerformance"))}))

spikeslabpriorsBase <- if (requireNamespace("jmvcore", quietly=TRUE)) R6::R6Class(
    "spikeslabpriorsBase",
    inherit = jmvcore::Analysis,
    public = list(
        initialize = function(options, data=NULL, datasetId="", analysisId="", revision=0) {
            super$initialize(
                package = "ClinicoPath",
                name = "spikeslabpriors",
                version = c(0,0,31),
                options = options,
                results = spikeslabpriorsResults$new(options=options),
                data = data,
                datasetId = datasetId,
                analysisId = analysisId,
                revision = revision,
                pause = NULL,
                completeWhenFilled = FALSE,
                requiresMissings = FALSE,
                weightsSupport = 'auto')
        }))

#' Spike-and-Slab Variable Selection
#'
#' Advanced Bayesian variable selection using spike-and-slab priors for
#' high-dimensional data analysis. Supports regression, classification, and
#' survival analysis with automatic variable selection, model averaging, and
#' uncertainty quantification for clinical biomarker discovery.
#' 
#'
#' @examples
#' # Spike-and-slab variable selection
#' spikeslabpriors(
#'     data = biomarker_data,
#'     outcome = "clinical_response",
#'     predictors = c("gene1", "gene2", "gene3", ..., "gene1000"),
#'     model_type = "regression",
#'     prior_inclusion_prob = 0.1
#' )
#'
#' @param data The data as a data frame for spike-and-slab variable selection.
#' @param outcome .
#' @param predictors .
#' @param outcomeLevel .
#' @param time_variable For survival analysis
#' @param status_variable For survival analysis
#' @param model_type .
#' @param spike_slab_type .
#' @param prior_inclusion_prob Prior probability that each variable is
#'   included
#' @param expected_model_size Expected number of active predictors
#' @param spike_variance Variance for spike component (near-zero effects)
#' @param slab_variance Variance for slab component (non-zero effects)
#' @param hyperprior_type .
#' @param hyperprior_alpha .
#' @param hyperprior_beta .
#' @param selection_criterion .
#' @param inclusion_threshold .
#' @param bayes_factor_threshold .
#' @param mcmc_samples .
#' @param mcmc_burnin .
#' @param mcmc_thin .
#' @param mcmc_chains .
#' @param model_averaging .
#' @param prediction_method .
#' @param cross_validation .
#' @param cv_folds .
#' @param standardize_predictors .
#' @param center_predictors .
#' @param max_model_size Maximum number of variables to include
#' @param dimension_reduction .
#' @param prescreening_threshold .
#' @param show_variable_selection .
#' @param show_inclusion_probabilities .
#' @param show_model_probabilities .
#' @param show_coefficient_estimates .
#' @param show_prediction_performance .
#' @param show_convergence_diagnostics .
#' @param show_variable_importance .
#' @param show_model_comparison .
#' @param show_interpretation .
#' @param interaction_terms .
#' @param max_interactions .
#' @param heredity_constraint .
#' @param group_variables .
#' @param group_structure .
#' @param clinical_context .
#' @param confidence_level .
#' @param set_seed .
#' @param seed_value .
#' @param parallel_processing .
#' @param n_cores .
#' @return A results object containing:
#' \tabular{llllll}{
#'   \code{results$variableSelection} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$inclusionProbabilities} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$modelProbabilities} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$coefficientEstimates} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$predictionPerformance} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$convergenceDiagnostics} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$variableImportance} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$modelComparison} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$dimensionSummary} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$groupSelection} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$clinicalInterpretation} \tab \tab \tab \tab \tab a html \cr
#'   \code{results$methodsExplanation} \tab \tab \tab \tab \tab a html \cr
#'   \code{results$inclusionProbabilityPlot} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$modelSizePlot} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$coefficientPlot} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$variableImportancePlot} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$convergencePlots} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$posteriorDistributionPlots} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$modelComparisonPlot} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$predictionPerformancePlot} \tab \tab \tab \tab \tab an image \cr
#' }
#'
#' Tables can be converted to data frames with \code{asDF} or \code{\link{as.data.frame}}. For example:
#'
#' \code{results$variableSelection$asDF}
#'
#' \code{as.data.frame(results$variableSelection)}
#'
#' @export
spikeslabpriors <- function(
    data,
    outcome,
    predictors,
    outcomeLevel,
    time_variable = NULL,
    status_variable = NULL,
    model_type = "regression",
    spike_slab_type = "binary",
    prior_inclusion_prob = 0.5,
    expected_model_size = 5,
    spike_variance = 0.001,
    slab_variance = 1,
    hyperprior_type = "empirical_bayes",
    hyperprior_alpha = 1,
    hyperprior_beta = 1,
    selection_criterion = "median_probability",
    inclusion_threshold = 0.5,
    bayes_factor_threshold = 3,
    mcmc_samples = 10000,
    mcmc_burnin = 5000,
    mcmc_thin = 1,
    mcmc_chains = 3,
    model_averaging = TRUE,
    prediction_method = "bma",
    cross_validation = FALSE,
    cv_folds = 10,
    standardize_predictors = TRUE,
    center_predictors = TRUE,
    max_model_size = 50,
    dimension_reduction = "none",
    prescreening_threshold = 0.1,
    show_variable_selection = TRUE,
    show_inclusion_probabilities = TRUE,
    show_model_probabilities = TRUE,
    show_coefficient_estimates = TRUE,
    show_prediction_performance = TRUE,
    show_convergence_diagnostics = TRUE,
    show_variable_importance = TRUE,
    show_model_comparison = FALSE,
    show_interpretation = TRUE,
    interaction_terms = FALSE,
    max_interactions = 2,
    heredity_constraint = "weak",
    group_variables = FALSE,
    group_structure = NULL,
    clinical_context = "biomarker_discovery",
    confidence_level = 0.95,
    set_seed = TRUE,
    seed_value = 42,
    parallel_processing = TRUE,
    n_cores = 2) {

    if ( ! requireNamespace("jmvcore", quietly=TRUE))
        stop("spikeslabpriors requires jmvcore to be installed (restart may be required)")

    if ( ! missing(outcome)) outcome <- jmvcore::resolveQuo(jmvcore::enquo(outcome))
    if ( ! missing(predictors)) predictors <- jmvcore::resolveQuo(jmvcore::enquo(predictors))
    if ( ! missing(time_variable)) time_variable <- jmvcore::resolveQuo(jmvcore::enquo(time_variable))
    if ( ! missing(status_variable)) status_variable <- jmvcore::resolveQuo(jmvcore::enquo(status_variable))
    if ( ! missing(group_structure)) group_structure <- jmvcore::resolveQuo(jmvcore::enquo(group_structure))
    if (missing(data))
        data <- jmvcore::marshalData(
            parent.frame(),
            `if`( ! missing(outcome), outcome, NULL),
            `if`( ! missing(predictors), predictors, NULL),
            `if`( ! missing(time_variable), time_variable, NULL),
            `if`( ! missing(status_variable), status_variable, NULL),
            `if`( ! missing(group_structure), group_structure, NULL))

    for (v in group_structure) if (v %in% names(data)) data[[v]] <- as.factor(data[[v]])

    options <- spikeslabpriorsOptions$new(
        outcome = outcome,
        predictors = predictors,
        outcomeLevel = outcomeLevel,
        time_variable = time_variable,
        status_variable = status_variable,
        model_type = model_type,
        spike_slab_type = spike_slab_type,
        prior_inclusion_prob = prior_inclusion_prob,
        expected_model_size = expected_model_size,
        spike_variance = spike_variance,
        slab_variance = slab_variance,
        hyperprior_type = hyperprior_type,
        hyperprior_alpha = hyperprior_alpha,
        hyperprior_beta = hyperprior_beta,
        selection_criterion = selection_criterion,
        inclusion_threshold = inclusion_threshold,
        bayes_factor_threshold = bayes_factor_threshold,
        mcmc_samples = mcmc_samples,
        mcmc_burnin = mcmc_burnin,
        mcmc_thin = mcmc_thin,
        mcmc_chains = mcmc_chains,
        model_averaging = model_averaging,
        prediction_method = prediction_method,
        cross_validation = cross_validation,
        cv_folds = cv_folds,
        standardize_predictors = standardize_predictors,
        center_predictors = center_predictors,
        max_model_size = max_model_size,
        dimension_reduction = dimension_reduction,
        prescreening_threshold = prescreening_threshold,
        show_variable_selection = show_variable_selection,
        show_inclusion_probabilities = show_inclusion_probabilities,
        show_model_probabilities = show_model_probabilities,
        show_coefficient_estimates = show_coefficient_estimates,
        show_prediction_performance = show_prediction_performance,
        show_convergence_diagnostics = show_convergence_diagnostics,
        show_variable_importance = show_variable_importance,
        show_model_comparison = show_model_comparison,
        show_interpretation = show_interpretation,
        interaction_terms = interaction_terms,
        max_interactions = max_interactions,
        heredity_constraint = heredity_constraint,
        group_variables = group_variables,
        group_structure = group_structure,
        clinical_context = clinical_context,
        confidence_level = confidence_level,
        set_seed = set_seed,
        seed_value = seed_value,
        parallel_processing = parallel_processing,
        n_cores = n_cores)

    analysis <- spikeslabpriorsClass$new(
        options = options,
        data = data)

    analysis$run()

    analysis$results
}

