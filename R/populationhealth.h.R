
# This file is automatically generated, you probably don't want to edit this

populationhealthOptions <- if (requireNamespace("jmvcore", quietly=TRUE)) R6::R6Class(
    "populationhealthOptions",
    inherit = jmvcore::Options,
    public = list(
        initialize = function(
            patientID = NULL,
            healthOutcomes = NULL,
            demographics = NULL,
            geographic = NULL,
            timeVariable = NULL,
            riskFactors = NULL,
            healthcareUtilization = NULL,
            population_stratification = TRUE,
            risk_stratification = TRUE,
            geographic_analysis = TRUE,
            temporal_trends = TRUE,
            health_disparities = TRUE,
            predictive_modeling = TRUE,
            population_type = "general",
            analysis_scope = "comprehensive",
            geographic_level = "county",
            time_window = 12,
            risk_threshold = 0.7,
            disparity_analysis = TRUE,
            social_determinants = TRUE,
            intervention_analysis = FALSE,
            comparative_analysis = TRUE,
            quality_metrics = TRUE,
            surveillance_system = TRUE,
            outcome_prediction = TRUE,
            resource_allocation = FALSE,
            population_visualization = TRUE,
            geographic_mapping = TRUE,
            trend_visualization = TRUE,
            disparity_plots = TRUE,
            interactive_dashboard = TRUE, ...) {

            super$initialize(
                package="ClinicoPath",
                name="populationhealth",
                requiresData=TRUE,
                ...)

            private$..patientID <- jmvcore::OptionVariable$new(
                "patientID",
                patientID,
                suggested=list(
                    "nominal"),
                permitted=list(
                    "factor",
                    "id"))
            private$..healthOutcomes <- jmvcore::OptionVariables$new(
                "healthOutcomes",
                healthOutcomes,
                suggested=list(
                    "continuous"),
                permitted=list(
                    "numeric"))
            private$..demographics <- jmvcore::OptionVariables$new(
                "demographics",
                demographics,
                suggested=list(
                    "nominal"),
                permitted=list(
                    "factor",
                    "numeric"))
            private$..geographic <- jmvcore::OptionVariables$new(
                "geographic",
                geographic,
                suggested=list(
                    "nominal"),
                permitted=list(
                    "factor"))
            private$..timeVariable <- jmvcore::OptionVariables$new(
                "timeVariable",
                timeVariable,
                suggested=list(
                    "continuous"),
                permitted=list(
                    "numeric"))
            private$..riskFactors <- jmvcore::OptionVariables$new(
                "riskFactors",
                riskFactors,
                suggested=list(
                    "nominal"),
                permitted=list(
                    "factor",
                    "numeric"))
            private$..healthcareUtilization <- jmvcore::OptionVariables$new(
                "healthcareUtilization",
                healthcareUtilization,
                suggested=list(
                    "continuous"),
                permitted=list(
                    "numeric"))
            private$..population_stratification <- jmvcore::OptionBool$new(
                "population_stratification",
                population_stratification,
                default=TRUE)
            private$..risk_stratification <- jmvcore::OptionBool$new(
                "risk_stratification",
                risk_stratification,
                default=TRUE)
            private$..geographic_analysis <- jmvcore::OptionBool$new(
                "geographic_analysis",
                geographic_analysis,
                default=TRUE)
            private$..temporal_trends <- jmvcore::OptionBool$new(
                "temporal_trends",
                temporal_trends,
                default=TRUE)
            private$..health_disparities <- jmvcore::OptionBool$new(
                "health_disparities",
                health_disparities,
                default=TRUE)
            private$..predictive_modeling <- jmvcore::OptionBool$new(
                "predictive_modeling",
                predictive_modeling,
                default=TRUE)
            private$..population_type <- jmvcore::OptionList$new(
                "population_type",
                population_type,
                options=list(
                    "general",
                    "chronic_disease",
                    "preventive_care",
                    "high_risk",
                    "pediatric",
                    "geriatric"),
                default="general")
            private$..analysis_scope <- jmvcore::OptionList$new(
                "analysis_scope",
                analysis_scope,
                options=list(
                    "comprehensive",
                    "surveillance",
                    "intervention",
                    "outcomes",
                    "quality"),
                default="comprehensive")
            private$..geographic_level <- jmvcore::OptionList$new(
                "geographic_level",
                geographic_level,
                options=list(
                    "individual",
                    "neighborhood",
                    "county",
                    "state",
                    "regional",
                    "national"),
                default="county")
            private$..time_window <- jmvcore::OptionInteger$new(
                "time_window",
                time_window,
                min=1,
                max=120,
                default=12)
            private$..risk_threshold <- jmvcore::OptionNumber$new(
                "risk_threshold",
                risk_threshold,
                min=0.1,
                max=0.9,
                default=0.7)
            private$..disparity_analysis <- jmvcore::OptionBool$new(
                "disparity_analysis",
                disparity_analysis,
                default=TRUE)
            private$..social_determinants <- jmvcore::OptionBool$new(
                "social_determinants",
                social_determinants,
                default=TRUE)
            private$..intervention_analysis <- jmvcore::OptionBool$new(
                "intervention_analysis",
                intervention_analysis,
                default=FALSE)
            private$..comparative_analysis <- jmvcore::OptionBool$new(
                "comparative_analysis",
                comparative_analysis,
                default=TRUE)
            private$..quality_metrics <- jmvcore::OptionBool$new(
                "quality_metrics",
                quality_metrics,
                default=TRUE)
            private$..surveillance_system <- jmvcore::OptionBool$new(
                "surveillance_system",
                surveillance_system,
                default=TRUE)
            private$..outcome_prediction <- jmvcore::OptionBool$new(
                "outcome_prediction",
                outcome_prediction,
                default=TRUE)
            private$..resource_allocation <- jmvcore::OptionBool$new(
                "resource_allocation",
                resource_allocation,
                default=FALSE)
            private$..population_visualization <- jmvcore::OptionBool$new(
                "population_visualization",
                population_visualization,
                default=TRUE)
            private$..geographic_mapping <- jmvcore::OptionBool$new(
                "geographic_mapping",
                geographic_mapping,
                default=TRUE)
            private$..trend_visualization <- jmvcore::OptionBool$new(
                "trend_visualization",
                trend_visualization,
                default=TRUE)
            private$..disparity_plots <- jmvcore::OptionBool$new(
                "disparity_plots",
                disparity_plots,
                default=TRUE)
            private$..interactive_dashboard <- jmvcore::OptionBool$new(
                "interactive_dashboard",
                interactive_dashboard,
                default=TRUE)

            self$.addOption(private$..patientID)
            self$.addOption(private$..healthOutcomes)
            self$.addOption(private$..demographics)
            self$.addOption(private$..geographic)
            self$.addOption(private$..timeVariable)
            self$.addOption(private$..riskFactors)
            self$.addOption(private$..healthcareUtilization)
            self$.addOption(private$..population_stratification)
            self$.addOption(private$..risk_stratification)
            self$.addOption(private$..geographic_analysis)
            self$.addOption(private$..temporal_trends)
            self$.addOption(private$..health_disparities)
            self$.addOption(private$..predictive_modeling)
            self$.addOption(private$..population_type)
            self$.addOption(private$..analysis_scope)
            self$.addOption(private$..geographic_level)
            self$.addOption(private$..time_window)
            self$.addOption(private$..risk_threshold)
            self$.addOption(private$..disparity_analysis)
            self$.addOption(private$..social_determinants)
            self$.addOption(private$..intervention_analysis)
            self$.addOption(private$..comparative_analysis)
            self$.addOption(private$..quality_metrics)
            self$.addOption(private$..surveillance_system)
            self$.addOption(private$..outcome_prediction)
            self$.addOption(private$..resource_allocation)
            self$.addOption(private$..population_visualization)
            self$.addOption(private$..geographic_mapping)
            self$.addOption(private$..trend_visualization)
            self$.addOption(private$..disparity_plots)
            self$.addOption(private$..interactive_dashboard)
        }),
    active = list(
        patientID = function() private$..patientID$value,
        healthOutcomes = function() private$..healthOutcomes$value,
        demographics = function() private$..demographics$value,
        geographic = function() private$..geographic$value,
        timeVariable = function() private$..timeVariable$value,
        riskFactors = function() private$..riskFactors$value,
        healthcareUtilization = function() private$..healthcareUtilization$value,
        population_stratification = function() private$..population_stratification$value,
        risk_stratification = function() private$..risk_stratification$value,
        geographic_analysis = function() private$..geographic_analysis$value,
        temporal_trends = function() private$..temporal_trends$value,
        health_disparities = function() private$..health_disparities$value,
        predictive_modeling = function() private$..predictive_modeling$value,
        population_type = function() private$..population_type$value,
        analysis_scope = function() private$..analysis_scope$value,
        geographic_level = function() private$..geographic_level$value,
        time_window = function() private$..time_window$value,
        risk_threshold = function() private$..risk_threshold$value,
        disparity_analysis = function() private$..disparity_analysis$value,
        social_determinants = function() private$..social_determinants$value,
        intervention_analysis = function() private$..intervention_analysis$value,
        comparative_analysis = function() private$..comparative_analysis$value,
        quality_metrics = function() private$..quality_metrics$value,
        surveillance_system = function() private$..surveillance_system$value,
        outcome_prediction = function() private$..outcome_prediction$value,
        resource_allocation = function() private$..resource_allocation$value,
        population_visualization = function() private$..population_visualization$value,
        geographic_mapping = function() private$..geographic_mapping$value,
        trend_visualization = function() private$..trend_visualization$value,
        disparity_plots = function() private$..disparity_plots$value,
        interactive_dashboard = function() private$..interactive_dashboard$value),
    private = list(
        ..patientID = NA,
        ..healthOutcomes = NA,
        ..demographics = NA,
        ..geographic = NA,
        ..timeVariable = NA,
        ..riskFactors = NA,
        ..healthcareUtilization = NA,
        ..population_stratification = NA,
        ..risk_stratification = NA,
        ..geographic_analysis = NA,
        ..temporal_trends = NA,
        ..health_disparities = NA,
        ..predictive_modeling = NA,
        ..population_type = NA,
        ..analysis_scope = NA,
        ..geographic_level = NA,
        ..time_window = NA,
        ..risk_threshold = NA,
        ..disparity_analysis = NA,
        ..social_determinants = NA,
        ..intervention_analysis = NA,
        ..comparative_analysis = NA,
        ..quality_metrics = NA,
        ..surveillance_system = NA,
        ..outcome_prediction = NA,
        ..resource_allocation = NA,
        ..population_visualization = NA,
        ..geographic_mapping = NA,
        ..trend_visualization = NA,
        ..disparity_plots = NA,
        ..interactive_dashboard = NA)
)

populationhealthResults <- if (requireNamespace("jmvcore", quietly=TRUE)) R6::R6Class(
    "populationhealthResults",
    inherit = jmvcore::Group,
    active = list(
        todo = function() private$.items[["todo"]],
        populationSummary = function() private$.items[["populationSummary"]],
        demographicsTable = function() private$.items[["demographicsTable"]],
        healthOutcomesTable = function() private$.items[["healthOutcomesTable"]],
        riskStratificationTable = function() private$.items[["riskStratificationTable"]],
        geographicAnalysisTable = function() private$.items[["geographicAnalysisTable"]],
        temporalTrendsTable = function() private$.items[["temporalTrendsTable"]],
        healthDisparitiesTable = function() private$.items[["healthDisparitiesTable"]],
        predictiveModelingTable = function() private$.items[["predictiveModelingTable"]],
        surveillanceTable = function() private$.items[["surveillanceTable"]],
        qualityMetricsTable = function() private$.items[["qualityMetricsTable"]],
        interventionAnalysisTable = function() private$.items[["interventionAnalysisTable"]],
        resourceAllocationTable = function() private$.items[["resourceAllocationTable"]],
        populationReport = function() private$.items[["populationReport"]],
        executiveSummary = function() private$.items[["executiveSummary"]],
        populationDashboard = function() private$.items[["populationDashboard"]],
        populationOverviewPlot = function() private$.items[["populationOverviewPlot"]],
        geographicHealthMap = function() private$.items[["geographicHealthMap"]],
        temporalTrendsPlot = function() private$.items[["temporalTrendsPlot"]],
        riskStratificationPlot = function() private$.items[["riskStratificationPlot"]],
        healthDisparityPlot = function() private$.items[["healthDisparityPlot"]],
        predictiveModelingPlot = function() private$.items[["predictiveModelingPlot"]],
        interactivePopulationDashboard = function() private$.items[["interactivePopulationDashboard"]]),
    private = list(),
    public=list(
        initialize=function(options) {
            super$initialize(
                options=options,
                name="",
                title="Population Health Analytics",
                refs=list(
                    "ClinicoPathJamoviModule",
                    "reshape2",
                    "gridExtra",
                    "htmltools"))
            self$add(jmvcore::Html$new(
                options=options,
                name="todo",
                title="Population Health Overview",
                refs=list(
                    "patientID",
                    "healthOutcomes",
                    "demographics")))
            self$add(jmvcore::Html$new(
                options=options,
                name="populationSummary",
                title="Population Summary",
                clearWith=list(
                    "patientID",
                    "healthOutcomes",
                    "demographics",
                    "geographic")))
            self$add(jmvcore::Table$new(
                options=options,
                name="demographicsTable",
                title="Population Demographics",
                rows="(demographics)",
                clearWith=list(
                    "demographics",
                    "population_stratification"),
                columns=list(
                    list(
                        `name`="demographic_category", 
                        `title`="Demographic Category", 
                        `type`="text"),
                    list(
                        `name`="subgroup", 
                        `title`="Subgroup", 
                        `type`="text"),
                    list(
                        `name`="population_size", 
                        `title`="Population Size", 
                        `type`="integer"),
                    list(
                        `name`="percentage", 
                        `title`="Percentage", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="health_status", 
                        `title`="Health Status", 
                        `type`="text"),
                    list(
                        `name`="risk_level", 
                        `title`="Risk Level", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="healthOutcomesTable",
                title="Population Health Outcomes",
                rows="(healthOutcomes)",
                clearWith=list(
                    "healthOutcomes",
                    "demographics",
                    "population_stratification"),
                columns=list(
                    list(
                        `name`="outcome_measure", 
                        `title`="Health Outcome", 
                        `type`="text"),
                    list(
                        `name`="population_mean", 
                        `title`="Population Mean", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="standard_deviation", 
                        `title`="Standard Deviation", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="median_value", 
                        `title`="Median", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="percentile_25", 
                        `title`="25th Percentile", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="percentile_75", 
                        `title`="75th Percentile", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="healthy_range", 
                        `title`="Healthy Range", 
                        `type`="text"),
                    list(
                        `name`="population_status", 
                        `title`="Population Status", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="riskStratificationTable",
                title="Population Risk Stratification",
                visible="(risk_stratification)",
                clearWith=list(
                    "healthOutcomes",
                    "demographics",
                    "riskFactors",
                    "risk_stratification"),
                columns=list(
                    list(
                        `name`="risk_category", 
                        `title`="Risk Category", 
                        `type`="text"),
                    list(
                        `name`="population_count", 
                        `title`="Population Count", 
                        `type`="integer"),
                    list(
                        `name`="percentage_population", 
                        `title`="Percentage of Population", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="risk_factors", 
                        `title`="Primary Risk Factors", 
                        `type`="text"),
                    list(
                        `name`="health_indicators", 
                        `title`="Health Indicators", 
                        `type`="text"),
                    list(
                        `name`="intervention_priority", 
                        `title`="Intervention Priority", 
                        `type`="text"),
                    list(
                        `name`="estimated_outcomes", 
                        `title`="Projected Outcomes", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="geographicAnalysisTable",
                title="Geographic Health Analysis",
                visible="(geographic_analysis)",
                clearWith=list(
                    "geographic",
                    "healthOutcomes",
                    "geographic_analysis"),
                columns=list(
                    list(
                        `name`="geographic_region", 
                        `title`="Geographic Region", 
                        `type`="text"),
                    list(
                        `name`="population_size", 
                        `title`="Population Size", 
                        `type`="integer"),
                    list(
                        `name`="health_score", 
                        `title`="Health Score", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="primary_concerns", 
                        `title`="Primary Health Concerns", 
                        `type`="text"),
                    list(
                        `name`="resource_availability", 
                        `title`="Resource Availability", 
                        `type`="text"),
                    list(
                        `name`="disparity_index", 
                        `title`="Health Disparity Index", 
                        `type`="number", 
                        `format`="zto"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="temporalTrendsTable",
                title="Population Health Trends",
                visible="(temporal_trends)",
                clearWith=list(
                    "timeVariable",
                    "healthOutcomes",
                    "temporal_trends"),
                columns=list(
                    list(
                        `name`="time_period", 
                        `title`="Time Period", 
                        `type`="text"),
                    list(
                        `name`="outcome_measure", 
                        `title`="Health Outcome", 
                        `type`="text"),
                    list(
                        `name`="trend_direction", 
                        `title`="Trend Direction", 
                        `type`="text"),
                    list(
                        `name`="change_rate", 
                        `title`="Rate of Change", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="statistical_significance", 
                        `title`="Statistical Significance", 
                        `type`="text"),
                    list(
                        `name`="clinical_significance", 
                        `title`="Clinical Significance", 
                        `type`="text"),
                    list(
                        `name`="contributing_factors", 
                        `title`="Contributing Factors", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="healthDisparitiesTable",
                title="Health Disparities Analysis",
                visible="(health_disparities)",
                clearWith=list(
                    "demographics",
                    "healthOutcomes",
                    "health_disparities"),
                columns=list(
                    list(
                        `name`="comparison_groups", 
                        `title`="Comparison Groups", 
                        `type`="text"),
                    list(
                        `name`="health_outcome", 
                        `title`="Health Outcome", 
                        `type`="text"),
                    list(
                        `name`="disparity_measure", 
                        `title`="Disparity Measure", 
                        `type`="text"),
                    list(
                        `name`="disparity_value", 
                        `title`="Disparity Value", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="statistical_significance", 
                        `title`="Statistical Significance", 
                        `type`="text"),
                    list(
                        `name`="effect_size", 
                        `title`="Effect Size", 
                        `type`="text"),
                    list(
                        `name`="equity_recommendations", 
                        `title`="Equity Recommendations", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="predictiveModelingTable",
                title="Population Health Predictions",
                visible="(predictive_modeling)",
                clearWith=list(
                    "healthOutcomes",
                    "demographics",
                    "riskFactors",
                    "predictive_modeling"),
                columns=list(
                    list(
                        `name`="prediction_model", 
                        `title`="Prediction Model", 
                        `type`="text"),
                    list(
                        `name`="target_outcome", 
                        `title`="Target Outcome", 
                        `type`="text"),
                    list(
                        `name`="prediction_accuracy", 
                        `title`="Model Accuracy", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="predicted_trend", 
                        `title`="Predicted Trend", 
                        `type`="text"),
                    list(
                        `name`="confidence_interval", 
                        `title`="Confidence Interval", 
                        `type`="text"),
                    list(
                        `name`="risk_population", 
                        `title`="At-Risk Population", 
                        `type`="integer"),
                    list(
                        `name`="intervention_recommendations", 
                        `title`="Intervention Recommendations", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="surveillanceTable",
                title="Public Health Surveillance",
                visible="(surveillance_system)",
                clearWith=list(
                    "healthOutcomes",
                    "demographics",
                    "timeVariable",
                    "surveillance_system"),
                columns=list(
                    list(
                        `name`="surveillance_indicator", 
                        `title`="Surveillance Indicator", 
                        `type`="text"),
                    list(
                        `name`="current_status", 
                        `title`="Current Status", 
                        `type`="text"),
                    list(
                        `name`="threshold_value", 
                        `title`="Alert Threshold", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="trend_status", 
                        `title`="Trend Status", 
                        `type`="text"),
                    list(
                        `name`="alert_level", 
                        `title`="Alert Level", 
                        `type`="text"),
                    list(
                        `name`="recommended_action", 
                        `title`="Recommended Action", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="qualityMetricsTable",
                title="Population Health Quality Metrics",
                visible="(quality_metrics)",
                clearWith=list(
                    "healthOutcomes",
                    "demographics",
                    "quality_metrics"),
                columns=list(
                    list(
                        `name`="quality_indicator", 
                        `title`="Quality Indicator", 
                        `type`="text"),
                    list(
                        `name`="current_value", 
                        `title`="Current Value", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="target_value", 
                        `title`="Target Value", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="performance_status", 
                        `title`="Performance Status", 
                        `type`="text"),
                    list(
                        `name`="benchmark_comparison", 
                        `title`="Benchmark Comparison", 
                        `type`="text"),
                    list(
                        `name`="improvement_opportunity", 
                        `title`="Improvement Opportunity", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="interventionAnalysisTable",
                title="Intervention Impact Analysis",
                visible="(intervention_analysis)",
                clearWith=list(
                    "healthOutcomes",
                    "timeVariable",
                    "intervention_analysis"),
                columns=list(
                    list(
                        `name`="intervention_type", 
                        `title`="Intervention Type", 
                        `type`="text"),
                    list(
                        `name`="target_population", 
                        `title`="Target Population", 
                        `type`="text"),
                    list(
                        `name`="implementation_period", 
                        `title`="Implementation Period", 
                        `type`="text"),
                    list(
                        `name`="outcome_measure", 
                        `title`="Outcome Measure", 
                        `type`="text"),
                    list(
                        `name`="baseline_value", 
                        `title`="Baseline Value", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="post_intervention_value", 
                        `title`="Post-Intervention Value", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="effect_size", 
                        `title`="Effect Size", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="statistical_significance", 
                        `title`="Statistical Significance", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="resourceAllocationTable",
                title="Healthcare Resource Allocation",
                visible="(resource_allocation)",
                clearWith=list(
                    "demographics",
                    "geographic",
                    "healthcareUtilization",
                    "resource_allocation"),
                columns=list(
                    list(
                        `name`="resource_category", 
                        `title`="Resource Category", 
                        `type`="text"),
                    list(
                        `name`="current_allocation", 
                        `title`="Current Allocation", 
                        `type`="text"),
                    list(
                        `name`="population_need", 
                        `title`="Population Need", 
                        `type`="text"),
                    list(
                        `name`="gap_analysis", 
                        `title`="Gap Analysis", 
                        `type`="text"),
                    list(
                        `name`="optimization_recommendation", 
                        `title`="Optimization Recommendation", 
                        `type`="text"),
                    list(
                        `name`="expected_impact", 
                        `title`="Expected Impact", 
                        `type`="text"))))
            self$add(jmvcore::Html$new(
                options=options,
                name="populationReport",
                title="Population Health Report",
                clearWith=list(
                    "patientID",
                    "healthOutcomes",
                    "demographics",
                    "geographic")))
            self$add(jmvcore::Html$new(
                options=options,
                name="executiveSummary",
                title="Executive Summary",
                visible="(analysis_scope)",
                clearWith=list(
                    "healthOutcomes",
                    "demographics",
                    "analysis_scope")))
            self$add(jmvcore::Html$new(
                options=options,
                name="populationDashboard",
                title="Population Health Dashboard",
                visible="(interactive_dashboard)",
                clearWith=list(
                    "patientID",
                    "healthOutcomes",
                    "demographics",
                    "interactive_dashboard")))
            self$add(jmvcore::Image$new(
                options=options,
                name="populationOverviewPlot",
                title="Population Health Overview",
                width=900,
                height=600,
                renderFun=".populationOverviewPlot",
                visible="(population_visualization)",
                requiresData=TRUE,
                clearWith=list(
                    "healthOutcomes",
                    "demographics",
                    "population_visualization")))
            self$add(jmvcore::Image$new(
                options=options,
                name="geographicHealthMap",
                title="Geographic Health Map",
                width=1000,
                height=700,
                renderFun=".geographicHealthMap",
                visible="(geographic_mapping)",
                requiresData=TRUE,
                clearWith=list(
                    "geographic",
                    "healthOutcomes",
                    "geographic_mapping")))
            self$add(jmvcore::Image$new(
                options=options,
                name="temporalTrendsPlot",
                title="Population Health Trends",
                width=900,
                height=600,
                renderFun=".temporalTrendsPlot",
                visible="(trend_visualization)",
                requiresData=TRUE,
                clearWith=list(
                    "timeVariable",
                    "healthOutcomes",
                    "trend_visualization")))
            self$add(jmvcore::Image$new(
                options=options,
                name="riskStratificationPlot",
                title="Population Risk Stratification",
                width=800,
                height=600,
                renderFun=".riskStratificationPlot",
                visible="(risk_stratification)",
                requiresData=TRUE,
                clearWith=list(
                    "healthOutcomes",
                    "demographics",
                    "riskFactors",
                    "risk_stratification")))
            self$add(jmvcore::Image$new(
                options=options,
                name="healthDisparityPlot",
                title="Health Disparities Visualization",
                width=900,
                height=700,
                renderFun=".healthDisparityPlot",
                visible="(disparity_plots)",
                requiresData=TRUE,
                clearWith=list(
                    "demographics",
                    "healthOutcomes",
                    "disparity_plots")))
            self$add(jmvcore::Image$new(
                options=options,
                name="predictiveModelingPlot",
                title="Predictive Health Outcomes",
                width=800,
                height=600,
                renderFun=".predictiveModelingPlot",
                visible="(predictive_modeling)",
                requiresData=TRUE,
                clearWith=list(
                    "healthOutcomes",
                    "timeVariable",
                    "predictive_modeling")))
            self$add(jmvcore::Image$new(
                options=options,
                name="interactivePopulationDashboard",
                title="Interactive Population Health Dashboard",
                width=1200,
                height=800,
                renderFun=".interactivePopulationDashboard",
                visible="(interactive_dashboard)",
                requiresData=TRUE,
                clearWith=list(
                    "patientID",
                    "healthOutcomes",
                    "demographics",
                    "geographic",
                    "interactive_dashboard")))}))

populationhealthBase <- if (requireNamespace("jmvcore", quietly=TRUE)) R6::R6Class(
    "populationhealthBase",
    inherit = jmvcore::Analysis,
    public = list(
        initialize = function(options, data=NULL, datasetId="", analysisId="", revision=0) {
            super$initialize(
                package = "ClinicoPath",
                name = "populationhealth",
                version = c(1,0,0),
                options = options,
                results = populationhealthResults$new(options=options),
                data = data,
                datasetId = datasetId,
                analysisId = analysisId,
                revision = revision,
                pause = NULL,
                completeWhenFilled = TRUE,
                requiresMissings = FALSE,
                weightsSupport = 'auto')
        }))

#' Population Health Analytics
#'
#' Population Health Analytics provides comprehensive cohort-level health 
#' status 
#' monitoring and epidemiological analysis with population health metrics, 
#' risk 
#' stratification, geographic health mapping, and predictive health outcome 
#' modeling for public health surveillance, population management, and 
#' healthcare 
#' system optimization through evidence-based population health insights.
#' 
#'
#' @examples
#' data('population_health', package='ClinicoPath')
#'
#' # Basic population health analytics
#' populationhealth(population_health,
#'                patientID = 'PatientID',
#'                healthOutcomes = c('BMI', 'BloodPressure', 'Cholesterol'),
#'                demographics = c('Age', 'Gender', 'Ethnicity'),
#'                geographic = 'ZipCode',
#'                risk_stratification = TRUE,
#'                predictive_modeling = TRUE)
#'
#' @param data .
#' @param patientID Unique patient identifier for population tracking and
#'   analysis
#' @param healthOutcomes Health outcome measures (BMI, blood pressure, lab
#'   values, disease indicators)
#' @param demographics Demographic characteristics (age, gender, ethnicity,
#'   socioeconomic status)
#' @param geographic Geographic identifiers (zip code, county, region,
#'   coordinates) (optional)
#' @param timeVariable Time variables for temporal health trend analysis
#'   (optional)
#' @param riskFactors Risk factors (smoking, lifestyle, comorbidities,
#'   environmental) (optional)
#' @param healthcareUtilization Healthcare utilization metrics (visits,
#'   admissions, procedures) (optional)
#' @param population_stratification Enable population stratification analysis
#'   by demographics and risk factors
#' @param risk_stratification Perform population-level risk stratification and
#'   early identification
#' @param geographic_analysis Enable geographic health mapping and spatial
#'   analysis
#' @param temporal_trends Analyze temporal trends in population health
#'   outcomes
#' @param health_disparities Assess health disparities across demographic and
#'   socioeconomic groups
#' @param predictive_modeling Enable predictive modeling for population health
#'   outcomes
#' @param population_type Type of population for specialized analysis
#'   approaches
#' @param analysis_scope Scope of population health analysis
#' @param geographic_level Geographic level for spatial health analysis
#' @param time_window Time window for population health analysis and trending
#' @param risk_threshold Threshold for high-risk population identification
#' @param disparity_analysis Enable advanced health disparity analysis methods
#' @param social_determinants Include social determinants of health in
#'   analysis
#' @param intervention_analysis Analyze impact of population health
#'   interventions
#' @param comparative_analysis Enable comparison across different population
#'   segments
#' @param quality_metrics Calculate population health quality and performance
#'   indicators
#' @param surveillance_system Enable public health surveillance and monitoring
#'   capabilities
#' @param outcome_prediction Predict future population health outcomes and
#'   trends
#' @param resource_allocation Analyze healthcare resource allocation and
#'   optimization
#' @param population_visualization Create comprehensive population health
#'   visualizations
#' @param geographic_mapping Generate geographic health maps and spatial
#'   visualizations
#' @param trend_visualization Create temporal trend visualizations for
#'   population health
#' @param disparity_plots Generate health disparity and equity visualizations
#' @param interactive_dashboard Create interactive population health
#'   dashboards and monitoring tools
#' @return A results object containing:
#' \tabular{llllll}{
#'   \code{results$todo} \tab \tab \tab \tab \tab a html \cr
#'   \code{results$populationSummary} \tab \tab \tab \tab \tab a html \cr
#'   \code{results$demographicsTable} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$healthOutcomesTable} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$riskStratificationTable} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$geographicAnalysisTable} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$temporalTrendsTable} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$healthDisparitiesTable} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$predictiveModelingTable} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$surveillanceTable} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$qualityMetricsTable} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$interventionAnalysisTable} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$resourceAllocationTable} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$populationReport} \tab \tab \tab \tab \tab a html \cr
#'   \code{results$executiveSummary} \tab \tab \tab \tab \tab a html \cr
#'   \code{results$populationDashboard} \tab \tab \tab \tab \tab a html \cr
#'   \code{results$populationOverviewPlot} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$geographicHealthMap} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$temporalTrendsPlot} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$riskStratificationPlot} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$healthDisparityPlot} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$predictiveModelingPlot} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$interactivePopulationDashboard} \tab \tab \tab \tab \tab an image \cr
#' }
#'
#' Tables can be converted to data frames with \code{asDF} or \code{\link{as.data.frame}}. For example:
#'
#' \code{results$demographicsTable$asDF}
#'
#' \code{as.data.frame(results$demographicsTable)}
#'
#' @export
populationhealth <- function(
    data,
    patientID,
    healthOutcomes,
    demographics,
    geographic,
    timeVariable,
    riskFactors,
    healthcareUtilization,
    population_stratification = TRUE,
    risk_stratification = TRUE,
    geographic_analysis = TRUE,
    temporal_trends = TRUE,
    health_disparities = TRUE,
    predictive_modeling = TRUE,
    population_type = "general",
    analysis_scope = "comprehensive",
    geographic_level = "county",
    time_window = 12,
    risk_threshold = 0.7,
    disparity_analysis = TRUE,
    social_determinants = TRUE,
    intervention_analysis = FALSE,
    comparative_analysis = TRUE,
    quality_metrics = TRUE,
    surveillance_system = TRUE,
    outcome_prediction = TRUE,
    resource_allocation = FALSE,
    population_visualization = TRUE,
    geographic_mapping = TRUE,
    trend_visualization = TRUE,
    disparity_plots = TRUE,
    interactive_dashboard = TRUE) {

    if ( ! requireNamespace("jmvcore", quietly=TRUE))
        stop("populationhealth requires jmvcore to be installed (restart may be required)")

    if ( ! missing(patientID)) patientID <- jmvcore::resolveQuo(jmvcore::enquo(patientID))
    if ( ! missing(healthOutcomes)) healthOutcomes <- jmvcore::resolveQuo(jmvcore::enquo(healthOutcomes))
    if ( ! missing(demographics)) demographics <- jmvcore::resolveQuo(jmvcore::enquo(demographics))
    if ( ! missing(geographic)) geographic <- jmvcore::resolveQuo(jmvcore::enquo(geographic))
    if ( ! missing(timeVariable)) timeVariable <- jmvcore::resolveQuo(jmvcore::enquo(timeVariable))
    if ( ! missing(riskFactors)) riskFactors <- jmvcore::resolveQuo(jmvcore::enquo(riskFactors))
    if ( ! missing(healthcareUtilization)) healthcareUtilization <- jmvcore::resolveQuo(jmvcore::enquo(healthcareUtilization))
    if (missing(data))
        data <- jmvcore::marshalData(
            parent.frame(),
            `if`( ! missing(patientID), patientID, NULL),
            `if`( ! missing(healthOutcomes), healthOutcomes, NULL),
            `if`( ! missing(demographics), demographics, NULL),
            `if`( ! missing(geographic), geographic, NULL),
            `if`( ! missing(timeVariable), timeVariable, NULL),
            `if`( ! missing(riskFactors), riskFactors, NULL),
            `if`( ! missing(healthcareUtilization), healthcareUtilization, NULL))

    for (v in geographic) if (v %in% names(data)) data[[v]] <- as.factor(data[[v]])

    options <- populationhealthOptions$new(
        patientID = patientID,
        healthOutcomes = healthOutcomes,
        demographics = demographics,
        geographic = geographic,
        timeVariable = timeVariable,
        riskFactors = riskFactors,
        healthcareUtilization = healthcareUtilization,
        population_stratification = population_stratification,
        risk_stratification = risk_stratification,
        geographic_analysis = geographic_analysis,
        temporal_trends = temporal_trends,
        health_disparities = health_disparities,
        predictive_modeling = predictive_modeling,
        population_type = population_type,
        analysis_scope = analysis_scope,
        geographic_level = geographic_level,
        time_window = time_window,
        risk_threshold = risk_threshold,
        disparity_analysis = disparity_analysis,
        social_determinants = social_determinants,
        intervention_analysis = intervention_analysis,
        comparative_analysis = comparative_analysis,
        quality_metrics = quality_metrics,
        surveillance_system = surveillance_system,
        outcome_prediction = outcome_prediction,
        resource_allocation = resource_allocation,
        population_visualization = population_visualization,
        geographic_mapping = geographic_mapping,
        trend_visualization = trend_visualization,
        disparity_plots = disparity_plots,
        interactive_dashboard = interactive_dashboard)

    analysis <- populationhealthClass$new(
        options = options,
        data = data)

    analysis$run()

    analysis$results
}

