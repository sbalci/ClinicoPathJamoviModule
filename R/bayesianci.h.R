
# This file is automatically generated, you probably don't want to edit this

bayesianciOptions <- if (requireNamespace("jmvcore", quietly=TRUE)) R6::R6Class(
    "bayesianciOptions",
    inherit = jmvcore::Options,
    public = list(
        initialize = function(
            outcome = NULL,
            group_var = NULL,
            covariates = NULL,
            outcome_type = "continuous",
            credible_level = 0.95,
            additional_levels = "0.50,0.80,0.90",
            prior_type = "uniform",
            beta_alpha = 1,
            beta_beta = 1,
            normal_mean = 0,
            normal_sd = 1,
            gamma_shape = 1,
            gamma_rate = 1,
            mcmc_method = "analytical",
            mcmc_samples = 10000,
            burnin_samples = 2000,
            thinning = 1,
            chains = 3,
            posterior_summary = TRUE,
            convergence_diagnostics = TRUE,
            prior_posterior_comparison = TRUE,
            credible_vs_confidence = TRUE,
            hpd_intervals = TRUE,
            sensitivity_analysis = TRUE,
            robustness_check = TRUE,
            clinical_interpretation = TRUE,
            posterior_plots = TRUE,
            trace_plots = TRUE, ...) {

            super$initialize(
                package="ClinicoPath",
                name="bayesianci",
                requiresData=TRUE,
                ...)

            private$..outcome <- jmvcore::OptionVariable$new(
                "outcome",
                outcome,
                suggested=list(
                    "continuous"),
                permitted=list(
                    "numeric",
                    "factor"))
            private$..group_var <- jmvcore::OptionVariable$new(
                "group_var",
                group_var,
                suggested=list(
                    "nominal"),
                permitted=list(
                    "factor"))
            private$..covariates <- jmvcore::OptionVariables$new(
                "covariates",
                covariates,
                suggested=list(
                    "continuous",
                    "nominal"),
                permitted=list(
                    "numeric",
                    "factor"))
            private$..outcome_type <- jmvcore::OptionList$new(
                "outcome_type",
                outcome_type,
                options=list(
                    "continuous",
                    "binary",
                    "count",
                    "ordinal"),
                default="continuous")
            private$..credible_level <- jmvcore::OptionNumber$new(
                "credible_level",
                credible_level,
                min=0.5,
                max=0.99,
                default=0.95)
            private$..additional_levels <- jmvcore::OptionString$new(
                "additional_levels",
                additional_levels,
                default="0.50,0.80,0.90")
            private$..prior_type <- jmvcore::OptionList$new(
                "prior_type",
                prior_type,
                options=list(
                    "uniform",
                    "jeffreys",
                    "beta",
                    "normal",
                    "gamma",
                    "informative"),
                default="uniform")
            private$..beta_alpha <- jmvcore::OptionNumber$new(
                "beta_alpha",
                beta_alpha,
                min=0.1,
                max=100,
                default=1)
            private$..beta_beta <- jmvcore::OptionNumber$new(
                "beta_beta",
                beta_beta,
                min=0.1,
                max=100,
                default=1)
            private$..normal_mean <- jmvcore::OptionNumber$new(
                "normal_mean",
                normal_mean,
                default=0)
            private$..normal_sd <- jmvcore::OptionNumber$new(
                "normal_sd",
                normal_sd,
                min=0.1,
                max=100,
                default=1)
            private$..gamma_shape <- jmvcore::OptionNumber$new(
                "gamma_shape",
                gamma_shape,
                min=0.1,
                max=100,
                default=1)
            private$..gamma_rate <- jmvcore::OptionNumber$new(
                "gamma_rate",
                gamma_rate,
                min=0.1,
                max=100,
                default=1)
            private$..mcmc_method <- jmvcore::OptionList$new(
                "mcmc_method",
                mcmc_method,
                options=list(
                    "analytical",
                    "gibbs",
                    "metropolis",
                    "stan",
                    "jags"),
                default="analytical")
            private$..mcmc_samples <- jmvcore::OptionInteger$new(
                "mcmc_samples",
                mcmc_samples,
                min=1000,
                max=50000,
                default=10000)
            private$..burnin_samples <- jmvcore::OptionInteger$new(
                "burnin_samples",
                burnin_samples,
                min=100,
                max=10000,
                default=2000)
            private$..thinning <- jmvcore::OptionInteger$new(
                "thinning",
                thinning,
                min=1,
                max=100,
                default=1)
            private$..chains <- jmvcore::OptionInteger$new(
                "chains",
                chains,
                min=1,
                max=8,
                default=3)
            private$..posterior_summary <- jmvcore::OptionBool$new(
                "posterior_summary",
                posterior_summary,
                default=TRUE)
            private$..convergence_diagnostics <- jmvcore::OptionBool$new(
                "convergence_diagnostics",
                convergence_diagnostics,
                default=TRUE)
            private$..prior_posterior_comparison <- jmvcore::OptionBool$new(
                "prior_posterior_comparison",
                prior_posterior_comparison,
                default=TRUE)
            private$..credible_vs_confidence <- jmvcore::OptionBool$new(
                "credible_vs_confidence",
                credible_vs_confidence,
                default=TRUE)
            private$..hpd_intervals <- jmvcore::OptionBool$new(
                "hpd_intervals",
                hpd_intervals,
                default=TRUE)
            private$..sensitivity_analysis <- jmvcore::OptionBool$new(
                "sensitivity_analysis",
                sensitivity_analysis,
                default=TRUE)
            private$..robustness_check <- jmvcore::OptionBool$new(
                "robustness_check",
                robustness_check,
                default=TRUE)
            private$..clinical_interpretation <- jmvcore::OptionBool$new(
                "clinical_interpretation",
                clinical_interpretation,
                default=TRUE)
            private$..posterior_plots <- jmvcore::OptionBool$new(
                "posterior_plots",
                posterior_plots,
                default=TRUE)
            private$..trace_plots <- jmvcore::OptionBool$new(
                "trace_plots",
                trace_plots,
                default=TRUE)

            self$.addOption(private$..outcome)
            self$.addOption(private$..group_var)
            self$.addOption(private$..covariates)
            self$.addOption(private$..outcome_type)
            self$.addOption(private$..credible_level)
            self$.addOption(private$..additional_levels)
            self$.addOption(private$..prior_type)
            self$.addOption(private$..beta_alpha)
            self$.addOption(private$..beta_beta)
            self$.addOption(private$..normal_mean)
            self$.addOption(private$..normal_sd)
            self$.addOption(private$..gamma_shape)
            self$.addOption(private$..gamma_rate)
            self$.addOption(private$..mcmc_method)
            self$.addOption(private$..mcmc_samples)
            self$.addOption(private$..burnin_samples)
            self$.addOption(private$..thinning)
            self$.addOption(private$..chains)
            self$.addOption(private$..posterior_summary)
            self$.addOption(private$..convergence_diagnostics)
            self$.addOption(private$..prior_posterior_comparison)
            self$.addOption(private$..credible_vs_confidence)
            self$.addOption(private$..hpd_intervals)
            self$.addOption(private$..sensitivity_analysis)
            self$.addOption(private$..robustness_check)
            self$.addOption(private$..clinical_interpretation)
            self$.addOption(private$..posterior_plots)
            self$.addOption(private$..trace_plots)
        }),
    active = list(
        outcome = function() private$..outcome$value,
        group_var = function() private$..group_var$value,
        covariates = function() private$..covariates$value,
        outcome_type = function() private$..outcome_type$value,
        credible_level = function() private$..credible_level$value,
        additional_levels = function() private$..additional_levels$value,
        prior_type = function() private$..prior_type$value,
        beta_alpha = function() private$..beta_alpha$value,
        beta_beta = function() private$..beta_beta$value,
        normal_mean = function() private$..normal_mean$value,
        normal_sd = function() private$..normal_sd$value,
        gamma_shape = function() private$..gamma_shape$value,
        gamma_rate = function() private$..gamma_rate$value,
        mcmc_method = function() private$..mcmc_method$value,
        mcmc_samples = function() private$..mcmc_samples$value,
        burnin_samples = function() private$..burnin_samples$value,
        thinning = function() private$..thinning$value,
        chains = function() private$..chains$value,
        posterior_summary = function() private$..posterior_summary$value,
        convergence_diagnostics = function() private$..convergence_diagnostics$value,
        prior_posterior_comparison = function() private$..prior_posterior_comparison$value,
        credible_vs_confidence = function() private$..credible_vs_confidence$value,
        hpd_intervals = function() private$..hpd_intervals$value,
        sensitivity_analysis = function() private$..sensitivity_analysis$value,
        robustness_check = function() private$..robustness_check$value,
        clinical_interpretation = function() private$..clinical_interpretation$value,
        posterior_plots = function() private$..posterior_plots$value,
        trace_plots = function() private$..trace_plots$value),
    private = list(
        ..outcome = NA,
        ..group_var = NA,
        ..covariates = NA,
        ..outcome_type = NA,
        ..credible_level = NA,
        ..additional_levels = NA,
        ..prior_type = NA,
        ..beta_alpha = NA,
        ..beta_beta = NA,
        ..normal_mean = NA,
        ..normal_sd = NA,
        ..gamma_shape = NA,
        ..gamma_rate = NA,
        ..mcmc_method = NA,
        ..mcmc_samples = NA,
        ..burnin_samples = NA,
        ..thinning = NA,
        ..chains = NA,
        ..posterior_summary = NA,
        ..convergence_diagnostics = NA,
        ..prior_posterior_comparison = NA,
        ..credible_vs_confidence = NA,
        ..hpd_intervals = NA,
        ..sensitivity_analysis = NA,
        ..robustness_check = NA,
        ..clinical_interpretation = NA,
        ..posterior_plots = NA,
        ..trace_plots = NA)
)

bayesianciResults <- if (requireNamespace("jmvcore", quietly=TRUE)) R6::R6Class(
    "bayesianciResults",
    inherit = jmvcore::Group,
    active = list(
        instructions = function() private$.items[["instructions"]],
        dataInfo = function() private$.items[["dataInfo"]],
        priorSpecification = function() private$.items[["priorSpecification"]],
        posteriorSummary = function() private$.items[["posteriorSummary"]],
        credibleIntervals = function() private$.items[["credibleIntervals"]],
        hpdIntervals = function() private$.items[["hpdIntervals"]],
        comparisonTable = function() private$.items[["comparisonTable"]],
        convergenceDiagnostics = function() private$.items[["convergenceDiagnostics"]],
        sensitivityAnalysis = function() private$.items[["sensitivityAnalysis"]],
        robustnessCheck = function() private$.items[["robustnessCheck"]],
        clinicalInterpretation = function() private$.items[["clinicalInterpretation"]],
        posteriorPlot = function() private$.items[["posteriorPlot"]],
        priorPosteriorPlot = function() private$.items[["priorPosteriorPlot"]],
        tracePlots = function() private$.items[["tracePlots"]],
        credibleComparisonPlot = function() private$.items[["credibleComparisonPlot"]],
        sensitivityPlot = function() private$.items[["sensitivityPlot"]],
        methodExplanation = function() private$.items[["methodExplanation"]]),
    private = list(),
    public=list(
        initialize=function(options) {
            super$initialize(
                options=options,
                name="",
                title="Bayesian Confidence Intervals (Credible Intervals)",
                refs=list(
                    "ClinicoPathJamoviModule",
                    "tools"))
            self$add(jmvcore::Html$new(
                options=options,
                name="instructions",
                title="Analysis Instructions",
                visible=TRUE))
            self$add(jmvcore::Table$new(
                options=options,
                name="dataInfo",
                title="Data Summary",
                visible=TRUE,
                rows=1,
                clearWith=list(
                    "outcome",
                    "group_var"),
                columns=list(
                    list(
                        `name`="characteristic", 
                        `title`="Characteristic", 
                        `type`="text"),
                    list(
                        `name`="value", 
                        `title`="Value", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="priorSpecification",
                title="Prior Specification Summary",
                visible=TRUE,
                rows=1,
                clearWith=list(
                    "prior_type",
                    "beta_alpha",
                    "beta_beta",
                    "normal_mean",
                    "normal_sd",
                    "gamma_shape",
                    "gamma_rate"),
                columns=list(
                    list(
                        `name`="parameter", 
                        `title`="Parameter", 
                        `type`="text"),
                    list(
                        `name`="distribution", 
                        `title`="Prior Distribution", 
                        `type`="text"),
                    list(
                        `name`="parameters", 
                        `title`="Prior Parameters", 
                        `type`="text"),
                    list(
                        `name`="mean", 
                        `title`="Prior Mean", 
                        `type`="number", 
                        `format`="zto:4"),
                    list(
                        `name`="variance", 
                        `title`="Prior Variance", 
                        `type`="number", 
                        `format`="zto:4"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="posteriorSummary",
                title="Posterior Summary Statistics",
                visible="(posterior_summary)",
                rows=1,
                clearWith=list(
                    "posterior_summary",
                    "outcome",
                    "group_var",
                    "mcmc_method"),
                columns=list(
                    list(
                        `name`="parameter", 
                        `title`="Parameter", 
                        `type`="text"),
                    list(
                        `name`="mean", 
                        `title`="Posterior Mean", 
                        `type`="number", 
                        `format`="zto:4"),
                    list(
                        `name`="median", 
                        `title`="Posterior Median", 
                        `type`="number", 
                        `format`="zto:4"),
                    list(
                        `name`="mode", 
                        `title`="Posterior Mode", 
                        `type`="number", 
                        `format`="zto:4"),
                    list(
                        `name`="sd", 
                        `title`="Posterior SD", 
                        `type`="number", 
                        `format`="zto:4"),
                    list(
                        `name`="se_mean", 
                        `title`="SE of Mean", 
                        `type`="number", 
                        `format`="zto:4"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="credibleIntervals",
                title="Bayesian Credible Intervals",
                visible=TRUE,
                rows=1,
                clearWith=list(
                    "outcome",
                    "credible_level",
                    "additional_levels",
                    "mcmc_method"),
                columns=list(
                    list(
                        `name`="parameter", 
                        `title`="Parameter", 
                        `type`="text"),
                    list(
                        `name`="level", 
                        `title`="Credible Level", 
                        `type`="text"),
                    list(
                        `name`="lower_bound", 
                        `title`="Lower Bound", 
                        `type`="number", 
                        `format`="zto:4"),
                    list(
                        `name`="upper_bound", 
                        `title`="Upper Bound", 
                        `type`="number", 
                        `format`="zto:4"),
                    list(
                        `name`="width", 
                        `title`="Interval Width", 
                        `type`="number", 
                        `format`="zto:4"),
                    list(
                        `name`="interpretation", 
                        `title`="Interpretation", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="hpdIntervals",
                title="Highest Posterior Density Intervals",
                visible="(hpd_intervals)",
                rows=1,
                clearWith=list(
                    "hpd_intervals",
                    "outcome",
                    "credible_level"),
                columns=list(
                    list(
                        `name`="parameter", 
                        `title`="Parameter", 
                        `type`="text"),
                    list(
                        `name`="level", 
                        `title`="HPD Level", 
                        `type`="text"),
                    list(
                        `name`="lower_hpd", 
                        `title`="HPD Lower", 
                        `type`="number", 
                        `format`="zto:4"),
                    list(
                        `name`="upper_hpd", 
                        `title`="HPD Upper", 
                        `type`="number", 
                        `format`="zto:4"),
                    list(
                        `name`="hpd_width", 
                        `title`="HPD Width", 
                        `type`="number", 
                        `format`="zto:4"),
                    list(
                        `name`="coverage_prob", 
                        `title`="Coverage Probability", 
                        `type`="number", 
                        `format`="zto:4"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="comparisonTable",
                title="Credible vs Confidence Intervals Comparison",
                visible="(credible_vs_confidence)",
                rows=1,
                clearWith=list(
                    "credible_vs_confidence",
                    "outcome",
                    "credible_level"),
                columns=list(
                    list(
                        `name`="parameter", 
                        `title`="Parameter", 
                        `type`="text"),
                    list(
                        `name`="bayesian_lower", 
                        `title`="Bayesian Lower", 
                        `type`="number", 
                        `format`="zto:4"),
                    list(
                        `name`="bayesian_upper", 
                        `title`="Bayesian Upper", 
                        `type`="number", 
                        `format`="zto:4"),
                    list(
                        `name`="frequentist_lower", 
                        `title`="Frequentist Lower", 
                        `type`="number", 
                        `format`="zto:4"),
                    list(
                        `name`="frequentist_upper", 
                        `title`="Frequentist Upper", 
                        `type`="number", 
                        `format`="zto:4"),
                    list(
                        `name`="width_difference", 
                        `title`="Width Difference", 
                        `type`="number", 
                        `format`="zto:4"),
                    list(
                        `name`="interpretation_difference", 
                        `title`="Interpretation Difference", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="convergenceDiagnostics",
                title="MCMC Convergence Diagnostics",
                visible="(convergence_diagnostics)",
                rows=1,
                clearWith=list(
                    "convergence_diagnostics",
                    "mcmc_samples",
                    "chains"),
                columns=list(
                    list(
                        `name`="parameter", 
                        `title`="Parameter", 
                        `type`="text"),
                    list(
                        `name`="rhat", 
                        `title`="R-hat", 
                        `type`="number", 
                        `format`="zto:4"),
                    list(
                        `name`="eff_sample_size", 
                        `title`="Effective Sample Size", 
                        `type`="integer"),
                    list(
                        `name`="ess_bulk", 
                        `title`="ESS Bulk", 
                        `type`="integer"),
                    list(
                        `name`="ess_tail", 
                        `title`="ESS Tail", 
                        `type`="integer"),
                    list(
                        `name`="convergence_status", 
                        `title`="Convergence Status", 
                        `type`="text"),
                    list(
                        `name`="recommendation", 
                        `title`="Recommendation", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="sensitivityAnalysis",
                title="Prior Sensitivity Analysis",
                visible="(sensitivity_analysis)",
                rows=1,
                clearWith=list(
                    "sensitivity_analysis",
                    "prior_type",
                    "outcome"),
                columns=list(
                    list(
                        `name`="prior_specification", 
                        `title`="Prior Specification", 
                        `type`="text"),
                    list(
                        `name`="posterior_mean", 
                        `title`="Posterior Mean", 
                        `type`="number", 
                        `format`="zto:4"),
                    list(
                        `name`="credible_lower", 
                        `title`="Credible Lower", 
                        `type`="number", 
                        `format`="zto:4"),
                    list(
                        `name`="credible_upper", 
                        `title`="Credible Upper", 
                        `type`="number", 
                        `format`="zto:4"),
                    list(
                        `name`="sensitivity_measure", 
                        `title`="Sensitivity Measure", 
                        `type`="number", 
                        `format`="zto:4"),
                    list(
                        `name`="robustness_assessment", 
                        `title`="Robustness Assessment", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="robustnessCheck",
                title="Robustness Check Results",
                visible="(robustness_check)",
                rows=1,
                clearWith=list(
                    "robustness_check",
                    "outcome",
                    "prior_type"),
                columns=list(
                    list(
                        `name`="test_scenario", 
                        `title`="Test Scenario", 
                        `type`="text"),
                    list(
                        `name`="prior_description", 
                        `title`="Prior Description", 
                        `type`="text"),
                    list(
                        `name`="posterior_change", 
                        `title`="Posterior Change (%)", 
                        `type`="number", 
                        `format`="zto:2"),
                    list(
                        `name`="interval_change", 
                        `title`="Interval Width Change (%)", 
                        `type`="number", 
                        `format`="zto:2"),
                    list(
                        `name`="robustness_rating", 
                        `title`="Robustness Rating", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="clinicalInterpretation",
                title="Clinical Interpretation Guide",
                visible="(clinical_interpretation)",
                rows=1,
                clearWith=list(
                    "clinical_interpretation",
                    "outcome",
                    "credible_level"),
                columns=list(
                    list(
                        `name`="clinical_aspect", 
                        `title`="Clinical Aspect", 
                        `type`="text"),
                    list(
                        `name`="bayesian_finding", 
                        `title`="Bayesian Finding", 
                        `type`="text"),
                    list(
                        `name`="clinical_interpretation", 
                        `title`="Clinical Interpretation", 
                        `type`="text"),
                    list(
                        `name`="decision_guidance", 
                        `title`="Decision Guidance", 
                        `type`="text"),
                    list(
                        `name`="uncertainty_assessment", 
                        `title`="Uncertainty Assessment", 
                        `type`="text"))))
            self$add(jmvcore::Image$new(
                options=options,
                name="posteriorPlot",
                title="Posterior Distribution and Credible Intervals",
                visible="(posterior_plots)",
                requiresData=TRUE,
                width=800,
                height=600,
                renderFun=".plotPosterior",
                clearWith=list(
                    "posterior_plots",
                    "outcome",
                    "credible_level")))
            self$add(jmvcore::Image$new(
                options=options,
                name="priorPosteriorPlot",
                title="Prior vs Posterior Comparison",
                visible="(prior_posterior_comparison)",
                requiresData=TRUE,
                width=700,
                height=500,
                renderFun=".plotPriorPosterior",
                clearWith=list(
                    "prior_posterior_comparison",
                    "outcome",
                    "prior_type")))
            self$add(jmvcore::Image$new(
                options=options,
                name="tracePlots",
                title="MCMC Trace Plots",
                visible="(trace_plots)",
                requiresData=TRUE,
                width=800,
                height=600,
                renderFun=".plotTraces",
                clearWith=list(
                    "trace_plots",
                    "mcmc_samples",
                    "chains")))
            self$add(jmvcore::Image$new(
                options=options,
                name="credibleComparisonPlot",
                title="Credible vs Confidence Intervals Comparison",
                visible="(credible_vs_confidence)",
                requiresData=TRUE,
                width=700,
                height=500,
                renderFun=".plotCredibleComparison",
                clearWith=list(
                    "credible_vs_confidence",
                    "outcome",
                    "credible_level")))
            self$add(jmvcore::Image$new(
                options=options,
                name="sensitivityPlot",
                title="Prior Sensitivity Visualization",
                visible="(sensitivity_analysis)",
                requiresData=TRUE,
                width=800,
                height=600,
                renderFun=".plotSensitivity",
                clearWith=list(
                    "sensitivity_analysis",
                    "prior_type",
                    "outcome")))
            self$add(jmvcore::Html$new(
                options=options,
                name="methodExplanation",
                title="Method and Clinical Context",
                visible=TRUE))}))

bayesianciBase <- if (requireNamespace("jmvcore", quietly=TRUE)) R6::R6Class(
    "bayesianciBase",
    inherit = jmvcore::Analysis,
    public = list(
        initialize = function(options, data=NULL, datasetId="", analysisId="", revision=0) {
            super$initialize(
                package = "ClinicoPath",
                name = "bayesianci",
                version = c(1,0,0),
                options = options,
                results = bayesianciResults$new(options=options),
                data = data,
                datasetId = datasetId,
                analysisId = analysisId,
                revision = revision,
                pause = NULL,
                completeWhenFilled = FALSE,
                requiresMissings = FALSE,
                weightsSupport = 'auto')
        }))

#' Bayesian Confidence Intervals (Credible Intervals)
#'
#' Bayesian confidence intervals (credible intervals) as alternative to 
#' frequentist confidence intervals. This analysis provides credible intervals 
#' using Beta-posterior distributions, Monte Carlo sampling, and various prior 
#' specifications for continuous and binary outcome data. Essential for 
#' Bayesian statistical inference in clinical research.
#' 
#'
#' @examples
#' data \%>\%
#' bayesianci(
#'     outcome = "response",
#'     credible_level = 0.95,
#'     prior_type = "uniform",
#'     mcmc_method = "gibbs"
#' )
#'
#' @param data the data as a data frame
#' @param outcome Outcome variable for credible interval estimation
#' @param group_var Grouping variable for stratified analysis
#' @param covariates Covariate variables for adjusted analysis
#' @param outcome_type Type of outcome variable for appropriate modeling
#' @param credible_level Level for Bayesian credible intervals
#' @param additional_levels Comma-separated additional credible levels to
#'   compute
#' @param prior_type Prior distribution specification for Bayesian analysis
#' @param beta_alpha Alpha parameter for Beta prior distribution
#' @param beta_beta Beta parameter for Beta prior distribution
#' @param normal_mean Mean parameter for Normal prior distribution
#' @param normal_sd Standard deviation for Normal prior distribution
#' @param gamma_shape Shape parameter for Gamma prior distribution
#' @param gamma_rate Rate parameter for Gamma prior distribution
#' @param mcmc_method Method for posterior sampling and credible interval
#'   computation
#' @param mcmc_samples Number of MCMC samples for posterior estimation
#' @param burnin_samples Number of burn-in samples to discard
#' @param thinning Thinning interval for MCMC chains
#' @param chains Number of parallel MCMC chains
#' @param posterior_summary Compute posterior mean, median, mode, and credible
#'   intervals
#' @param convergence_diagnostics Assess MCMC convergence using R-hat and
#'   effective sample size
#' @param prior_posterior_comparison Compare prior and posterior distributions
#' @param credible_vs_confidence Compare Bayesian credible intervals with
#'   frequentist confidence intervals
#' @param hpd_intervals Compute highest posterior density (HPD) credible
#'   intervals
#' @param sensitivity_analysis Assess sensitivity to prior specification
#' @param robustness_check Perform robustness checks with different prior
#'   specifications
#' @param clinical_interpretation Provide clinical interpretation of credible
#'   intervals
#' @param posterior_plots Create posterior distribution and credible interval
#'   visualizations
#' @param trace_plots Generate MCMC trace plots for convergence assessment
#' @return A results object containing:
#' \tabular{llllll}{
#'   \code{results$instructions} \tab \tab \tab \tab \tab a html \cr
#'   \code{results$dataInfo} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$priorSpecification} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$posteriorSummary} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$credibleIntervals} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$hpdIntervals} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$comparisonTable} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$convergenceDiagnostics} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$sensitivityAnalysis} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$robustnessCheck} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$clinicalInterpretation} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$posteriorPlot} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$priorPosteriorPlot} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$tracePlots} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$credibleComparisonPlot} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$sensitivityPlot} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$methodExplanation} \tab \tab \tab \tab \tab a html \cr
#' }
#'
#' Tables can be converted to data frames with \code{asDF} or \code{\link{as.data.frame}}. For example:
#'
#' \code{results$dataInfo$asDF}
#'
#' \code{as.data.frame(results$dataInfo)}
#'
#' @export
bayesianci <- function(
    data,
    outcome,
    group_var,
    covariates,
    outcome_type = "continuous",
    credible_level = 0.95,
    additional_levels = "0.50,0.80,0.90",
    prior_type = "uniform",
    beta_alpha = 1,
    beta_beta = 1,
    normal_mean = 0,
    normal_sd = 1,
    gamma_shape = 1,
    gamma_rate = 1,
    mcmc_method = "analytical",
    mcmc_samples = 10000,
    burnin_samples = 2000,
    thinning = 1,
    chains = 3,
    posterior_summary = TRUE,
    convergence_diagnostics = TRUE,
    prior_posterior_comparison = TRUE,
    credible_vs_confidence = TRUE,
    hpd_intervals = TRUE,
    sensitivity_analysis = TRUE,
    robustness_check = TRUE,
    clinical_interpretation = TRUE,
    posterior_plots = TRUE,
    trace_plots = TRUE) {

    if ( ! requireNamespace("jmvcore", quietly=TRUE))
        stop("bayesianci requires jmvcore to be installed (restart may be required)")

    if ( ! missing(outcome)) outcome <- jmvcore::resolveQuo(jmvcore::enquo(outcome))
    if ( ! missing(group_var)) group_var <- jmvcore::resolveQuo(jmvcore::enquo(group_var))
    if ( ! missing(covariates)) covariates <- jmvcore::resolveQuo(jmvcore::enquo(covariates))
    if (missing(data))
        data <- jmvcore::marshalData(
            parent.frame(),
            `if`( ! missing(outcome), outcome, NULL),
            `if`( ! missing(group_var), group_var, NULL),
            `if`( ! missing(covariates), covariates, NULL))

    for (v in group_var) if (v %in% names(data)) data[[v]] <- as.factor(data[[v]])

    options <- bayesianciOptions$new(
        outcome = outcome,
        group_var = group_var,
        covariates = covariates,
        outcome_type = outcome_type,
        credible_level = credible_level,
        additional_levels = additional_levels,
        prior_type = prior_type,
        beta_alpha = beta_alpha,
        beta_beta = beta_beta,
        normal_mean = normal_mean,
        normal_sd = normal_sd,
        gamma_shape = gamma_shape,
        gamma_rate = gamma_rate,
        mcmc_method = mcmc_method,
        mcmc_samples = mcmc_samples,
        burnin_samples = burnin_samples,
        thinning = thinning,
        chains = chains,
        posterior_summary = posterior_summary,
        convergence_diagnostics = convergence_diagnostics,
        prior_posterior_comparison = prior_posterior_comparison,
        credible_vs_confidence = credible_vs_confidence,
        hpd_intervals = hpd_intervals,
        sensitivity_analysis = sensitivity_analysis,
        robustness_check = robustness_check,
        clinical_interpretation = clinical_interpretation,
        posterior_plots = posterior_plots,
        trace_plots = trace_plots)

    analysis <- bayesianciClass$new(
        options = options,
        data = data)

    analysis$run()

    analysis$results
}

