
# This file is automatically generated, you probably don't want to edit this

bayesianclinicalOptions <- if (requireNamespace("jmvcore", quietly=TRUE)) R6::R6Class(
    "bayesianclinicalOptions",
    inherit = jmvcore::Options,
    public = list(
        initialize = function(
            outcome_var = NULL,
            treatment_var = NULL,
            covariates = NULL,
            patient_id = NULL,
            time_var = NULL,
            center_var = NULL,
            analysis_type = "treatment_effect",
            outcome_type = "continuous",
            prior_type = "weakly_informative",
            prior_mean = 0,
            prior_sd = 1,
            historical_data_weight = 0.1,
            mcmc_chains = 4,
            mcmc_iterations = 2000,
            mcmc_warmup = 1000,
            mcmc_thinning = 1,
            credible_interval = 0.95,
            rope_lower = -0.1,
            rope_upper = 0.1,
            minimum_effect_size = 0.2,
            decision_analysis = FALSE,
            benefit_utility = 1,
            harm_utility = -0.5,
            cost_consideration = FALSE,
            model_diagnostics = TRUE,
            convergence_diagnostics = TRUE,
            posterior_predictive_checks = TRUE,
            leave_one_out_cv = FALSE,
            hierarchical_modeling = FALSE,
            mixture_modeling = FALSE,
            nonparametric_methods = FALSE,
            adaptive_design = FALSE,
            model_comparison = FALSE,
            bayes_factor_analysis = TRUE,
            evidence_thresholds = TRUE,
            probability_statements = TRUE,
            prediction_intervals = TRUE,
            sensitivity_to_priors = FALSE,
            posterior_plots = TRUE,
            trace_plots = TRUE,
            forest_plots = FALSE,
            decision_plots = FALSE,
            comprehensive_report = TRUE,
            clinical_interpretation = TRUE,
            regulatory_documentation = FALSE,
            layman_summary = TRUE, ...) {

            super$initialize(
                package="ClinicoPath",
                name="bayesianclinical",
                requiresData=TRUE,
                ...)

            private$..outcome_var <- jmvcore::OptionVariable$new(
                "outcome_var",
                outcome_var,
                suggested=list(
                    "continuous",
                    "nominal"),
                permitted=list(
                    "numeric",
                    "factor"))
            private$..treatment_var <- jmvcore::OptionVariable$new(
                "treatment_var",
                treatment_var,
                suggested=list(
                    "nominal"),
                permitted=list(
                    "factor"))
            private$..covariates <- jmvcore::OptionVariables$new(
                "covariates",
                covariates,
                suggested=list(
                    "continuous",
                    "nominal"),
                permitted=list(
                    "numeric",
                    "factor"))
            private$..patient_id <- jmvcore::OptionVariable$new(
                "patient_id",
                patient_id,
                suggested=list(
                    "nominal"),
                permitted=list(
                    "factor",
                    "id"))
            private$..time_var <- jmvcore::OptionVariable$new(
                "time_var",
                time_var,
                suggested=list(
                    "continuous"),
                permitted=list(
                    "numeric"))
            private$..center_var <- jmvcore::OptionVariable$new(
                "center_var",
                center_var,
                suggested=list(
                    "nominal"),
                permitted=list(
                    "factor"))
            private$..analysis_type <- jmvcore::OptionList$new(
                "analysis_type",
                analysis_type,
                options=list(
                    "treatment_effect",
                    "diagnostic_test",
                    "predictive_modeling",
                    "dose_response",
                    "survival_analysis",
                    "meta_analysis"),
                default="treatment_effect")
            private$..outcome_type <- jmvcore::OptionList$new(
                "outcome_type",
                outcome_type,
                options=list(
                    "continuous",
                    "binary",
                    "count",
                    "ordinal",
                    "time_to_event"),
                default="continuous")
            private$..prior_type <- jmvcore::OptionList$new(
                "prior_type",
                prior_type,
                options=list(
                    "noninformative",
                    "weakly_informative",
                    "informative",
                    "skeptical",
                    "enthusiastic",
                    "custom"),
                default="weakly_informative")
            private$..prior_mean <- jmvcore::OptionNumber$new(
                "prior_mean",
                prior_mean,
                default=0)
            private$..prior_sd <- jmvcore::OptionNumber$new(
                "prior_sd",
                prior_sd,
                min=0.01,
                max=10,
                default=1)
            private$..historical_data_weight <- jmvcore::OptionNumber$new(
                "historical_data_weight",
                historical_data_weight,
                min=0,
                max=1,
                default=0.1)
            private$..mcmc_chains <- jmvcore::OptionInteger$new(
                "mcmc_chains",
                mcmc_chains,
                min=1,
                max=8,
                default=4)
            private$..mcmc_iterations <- jmvcore::OptionInteger$new(
                "mcmc_iterations",
                mcmc_iterations,
                min=1000,
                max=20000,
                default=2000)
            private$..mcmc_warmup <- jmvcore::OptionInteger$new(
                "mcmc_warmup",
                mcmc_warmup,
                min=500,
                max=10000,
                default=1000)
            private$..mcmc_thinning <- jmvcore::OptionInteger$new(
                "mcmc_thinning",
                mcmc_thinning,
                min=1,
                max=20,
                default=1)
            private$..credible_interval <- jmvcore::OptionNumber$new(
                "credible_interval",
                credible_interval,
                min=0.8,
                max=0.99,
                default=0.95)
            private$..rope_lower <- jmvcore::OptionNumber$new(
                "rope_lower",
                rope_lower,
                default=-0.1)
            private$..rope_upper <- jmvcore::OptionNumber$new(
                "rope_upper",
                rope_upper,
                default=0.1)
            private$..minimum_effect_size <- jmvcore::OptionNumber$new(
                "minimum_effect_size",
                minimum_effect_size,
                default=0.2)
            private$..decision_analysis <- jmvcore::OptionBool$new(
                "decision_analysis",
                decision_analysis,
                default=FALSE)
            private$..benefit_utility <- jmvcore::OptionNumber$new(
                "benefit_utility",
                benefit_utility,
                default=1)
            private$..harm_utility <- jmvcore::OptionNumber$new(
                "harm_utility",
                harm_utility,
                default=-0.5)
            private$..cost_consideration <- jmvcore::OptionBool$new(
                "cost_consideration",
                cost_consideration,
                default=FALSE)
            private$..model_diagnostics <- jmvcore::OptionBool$new(
                "model_diagnostics",
                model_diagnostics,
                default=TRUE)
            private$..convergence_diagnostics <- jmvcore::OptionBool$new(
                "convergence_diagnostics",
                convergence_diagnostics,
                default=TRUE)
            private$..posterior_predictive_checks <- jmvcore::OptionBool$new(
                "posterior_predictive_checks",
                posterior_predictive_checks,
                default=TRUE)
            private$..leave_one_out_cv <- jmvcore::OptionBool$new(
                "leave_one_out_cv",
                leave_one_out_cv,
                default=FALSE)
            private$..hierarchical_modeling <- jmvcore::OptionBool$new(
                "hierarchical_modeling",
                hierarchical_modeling,
                default=FALSE)
            private$..mixture_modeling <- jmvcore::OptionBool$new(
                "mixture_modeling",
                mixture_modeling,
                default=FALSE)
            private$..nonparametric_methods <- jmvcore::OptionBool$new(
                "nonparametric_methods",
                nonparametric_methods,
                default=FALSE)
            private$..adaptive_design <- jmvcore::OptionBool$new(
                "adaptive_design",
                adaptive_design,
                default=FALSE)
            private$..model_comparison <- jmvcore::OptionBool$new(
                "model_comparison",
                model_comparison,
                default=FALSE)
            private$..bayes_factor_analysis <- jmvcore::OptionBool$new(
                "bayes_factor_analysis",
                bayes_factor_analysis,
                default=TRUE)
            private$..evidence_thresholds <- jmvcore::OptionBool$new(
                "evidence_thresholds",
                evidence_thresholds,
                default=TRUE)
            private$..probability_statements <- jmvcore::OptionBool$new(
                "probability_statements",
                probability_statements,
                default=TRUE)
            private$..prediction_intervals <- jmvcore::OptionBool$new(
                "prediction_intervals",
                prediction_intervals,
                default=TRUE)
            private$..sensitivity_to_priors <- jmvcore::OptionBool$new(
                "sensitivity_to_priors",
                sensitivity_to_priors,
                default=FALSE)
            private$..posterior_plots <- jmvcore::OptionBool$new(
                "posterior_plots",
                posterior_plots,
                default=TRUE)
            private$..trace_plots <- jmvcore::OptionBool$new(
                "trace_plots",
                trace_plots,
                default=TRUE)
            private$..forest_plots <- jmvcore::OptionBool$new(
                "forest_plots",
                forest_plots,
                default=FALSE)
            private$..decision_plots <- jmvcore::OptionBool$new(
                "decision_plots",
                decision_plots,
                default=FALSE)
            private$..comprehensive_report <- jmvcore::OptionBool$new(
                "comprehensive_report",
                comprehensive_report,
                default=TRUE)
            private$..clinical_interpretation <- jmvcore::OptionBool$new(
                "clinical_interpretation",
                clinical_interpretation,
                default=TRUE)
            private$..regulatory_documentation <- jmvcore::OptionBool$new(
                "regulatory_documentation",
                regulatory_documentation,
                default=FALSE)
            private$..layman_summary <- jmvcore::OptionBool$new(
                "layman_summary",
                layman_summary,
                default=TRUE)

            self$.addOption(private$..outcome_var)
            self$.addOption(private$..treatment_var)
            self$.addOption(private$..covariates)
            self$.addOption(private$..patient_id)
            self$.addOption(private$..time_var)
            self$.addOption(private$..center_var)
            self$.addOption(private$..analysis_type)
            self$.addOption(private$..outcome_type)
            self$.addOption(private$..prior_type)
            self$.addOption(private$..prior_mean)
            self$.addOption(private$..prior_sd)
            self$.addOption(private$..historical_data_weight)
            self$.addOption(private$..mcmc_chains)
            self$.addOption(private$..mcmc_iterations)
            self$.addOption(private$..mcmc_warmup)
            self$.addOption(private$..mcmc_thinning)
            self$.addOption(private$..credible_interval)
            self$.addOption(private$..rope_lower)
            self$.addOption(private$..rope_upper)
            self$.addOption(private$..minimum_effect_size)
            self$.addOption(private$..decision_analysis)
            self$.addOption(private$..benefit_utility)
            self$.addOption(private$..harm_utility)
            self$.addOption(private$..cost_consideration)
            self$.addOption(private$..model_diagnostics)
            self$.addOption(private$..convergence_diagnostics)
            self$.addOption(private$..posterior_predictive_checks)
            self$.addOption(private$..leave_one_out_cv)
            self$.addOption(private$..hierarchical_modeling)
            self$.addOption(private$..mixture_modeling)
            self$.addOption(private$..nonparametric_methods)
            self$.addOption(private$..adaptive_design)
            self$.addOption(private$..model_comparison)
            self$.addOption(private$..bayes_factor_analysis)
            self$.addOption(private$..evidence_thresholds)
            self$.addOption(private$..probability_statements)
            self$.addOption(private$..prediction_intervals)
            self$.addOption(private$..sensitivity_to_priors)
            self$.addOption(private$..posterior_plots)
            self$.addOption(private$..trace_plots)
            self$.addOption(private$..forest_plots)
            self$.addOption(private$..decision_plots)
            self$.addOption(private$..comprehensive_report)
            self$.addOption(private$..clinical_interpretation)
            self$.addOption(private$..regulatory_documentation)
            self$.addOption(private$..layman_summary)
        }),
    active = list(
        outcome_var = function() private$..outcome_var$value,
        treatment_var = function() private$..treatment_var$value,
        covariates = function() private$..covariates$value,
        patient_id = function() private$..patient_id$value,
        time_var = function() private$..time_var$value,
        center_var = function() private$..center_var$value,
        analysis_type = function() private$..analysis_type$value,
        outcome_type = function() private$..outcome_type$value,
        prior_type = function() private$..prior_type$value,
        prior_mean = function() private$..prior_mean$value,
        prior_sd = function() private$..prior_sd$value,
        historical_data_weight = function() private$..historical_data_weight$value,
        mcmc_chains = function() private$..mcmc_chains$value,
        mcmc_iterations = function() private$..mcmc_iterations$value,
        mcmc_warmup = function() private$..mcmc_warmup$value,
        mcmc_thinning = function() private$..mcmc_thinning$value,
        credible_interval = function() private$..credible_interval$value,
        rope_lower = function() private$..rope_lower$value,
        rope_upper = function() private$..rope_upper$value,
        minimum_effect_size = function() private$..minimum_effect_size$value,
        decision_analysis = function() private$..decision_analysis$value,
        benefit_utility = function() private$..benefit_utility$value,
        harm_utility = function() private$..harm_utility$value,
        cost_consideration = function() private$..cost_consideration$value,
        model_diagnostics = function() private$..model_diagnostics$value,
        convergence_diagnostics = function() private$..convergence_diagnostics$value,
        posterior_predictive_checks = function() private$..posterior_predictive_checks$value,
        leave_one_out_cv = function() private$..leave_one_out_cv$value,
        hierarchical_modeling = function() private$..hierarchical_modeling$value,
        mixture_modeling = function() private$..mixture_modeling$value,
        nonparametric_methods = function() private$..nonparametric_methods$value,
        adaptive_design = function() private$..adaptive_design$value,
        model_comparison = function() private$..model_comparison$value,
        bayes_factor_analysis = function() private$..bayes_factor_analysis$value,
        evidence_thresholds = function() private$..evidence_thresholds$value,
        probability_statements = function() private$..probability_statements$value,
        prediction_intervals = function() private$..prediction_intervals$value,
        sensitivity_to_priors = function() private$..sensitivity_to_priors$value,
        posterior_plots = function() private$..posterior_plots$value,
        trace_plots = function() private$..trace_plots$value,
        forest_plots = function() private$..forest_plots$value,
        decision_plots = function() private$..decision_plots$value,
        comprehensive_report = function() private$..comprehensive_report$value,
        clinical_interpretation = function() private$..clinical_interpretation$value,
        regulatory_documentation = function() private$..regulatory_documentation$value,
        layman_summary = function() private$..layman_summary$value),
    private = list(
        ..outcome_var = NA,
        ..treatment_var = NA,
        ..covariates = NA,
        ..patient_id = NA,
        ..time_var = NA,
        ..center_var = NA,
        ..analysis_type = NA,
        ..outcome_type = NA,
        ..prior_type = NA,
        ..prior_mean = NA,
        ..prior_sd = NA,
        ..historical_data_weight = NA,
        ..mcmc_chains = NA,
        ..mcmc_iterations = NA,
        ..mcmc_warmup = NA,
        ..mcmc_thinning = NA,
        ..credible_interval = NA,
        ..rope_lower = NA,
        ..rope_upper = NA,
        ..minimum_effect_size = NA,
        ..decision_analysis = NA,
        ..benefit_utility = NA,
        ..harm_utility = NA,
        ..cost_consideration = NA,
        ..model_diagnostics = NA,
        ..convergence_diagnostics = NA,
        ..posterior_predictive_checks = NA,
        ..leave_one_out_cv = NA,
        ..hierarchical_modeling = NA,
        ..mixture_modeling = NA,
        ..nonparametric_methods = NA,
        ..adaptive_design = NA,
        ..model_comparison = NA,
        ..bayes_factor_analysis = NA,
        ..evidence_thresholds = NA,
        ..probability_statements = NA,
        ..prediction_intervals = NA,
        ..sensitivity_to_priors = NA,
        ..posterior_plots = NA,
        ..trace_plots = NA,
        ..forest_plots = NA,
        ..decision_plots = NA,
        ..comprehensive_report = NA,
        ..clinical_interpretation = NA,
        ..regulatory_documentation = NA,
        ..layman_summary = NA)
)

bayesianclinicalResults <- if (requireNamespace("jmvcore", quietly=TRUE)) R6::R6Class(
    "bayesianclinicalResults",
    inherit = jmvcore::Group,
    active = list(
        bayesian_overview = function() private$.items[["bayesian_overview"]],
        posterior_summary = function() private$.items[["posterior_summary"]],
        treatment_effect_analysis = function() private$.items[["treatment_effect_analysis"]],
        bayes_factors = function() private$.items[["bayes_factors"]],
        model_diagnostics_summary = function() private$.items[["model_diagnostics_summary"]],
        prior_posterior_comparison = function() private$.items[["prior_posterior_comparison"]],
        decision_analysis_results = function() private$.items[["decision_analysis_results"]],
        predictive_intervals = function() private$.items[["predictive_intervals"]],
        sensitivity_to_priors = function() private$.items[["sensitivity_to_priors"]],
        probability_statements = function() private$.items[["probability_statements"]],
        model_comparison = function() private$.items[["model_comparison"]],
        posterior_distribution_plot = function() private$.items[["posterior_distribution_plot"]],
        trace_plots = function() private$.items[["trace_plots"]],
        prior_posterior_plot = function() private$.items[["prior_posterior_plot"]],
        bayesian_forest_plot = function() private$.items[["bayesian_forest_plot"]],
        decision_analysis_plot = function() private$.items[["decision_analysis_plot"]],
        predictive_checks_plot = function() private$.items[["predictive_checks_plot"]],
        comprehensive_report = function() private$.items[["comprehensive_report"]],
        clinical_interpretation_report = function() private$.items[["clinical_interpretation_report"]],
        layman_summary_report = function() private$.items[["layman_summary_report"]]),
    private = list(),
    public=list(
        initialize=function(options) {
            super$initialize(
                options=options,
                name="",
                title="Bayesian Clinical Analysis & Decision Making")
            self$add(jmvcore::Table$new(
                options=options,
                name="bayesian_overview",
                title="Bayesian Analysis Overview",
                columns=list(
                    list(
                        `name`="characteristic", 
                        `title`="Characteristic", 
                        `type`="text"),
                    list(
                        `name`="value", 
                        `title`="Value", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="posterior_summary",
                title="Posterior Parameter Summary",
                columns=list(
                    list(
                        `name`="parameter", 
                        `title`="Parameter", 
                        `type`="text"),
                    list(
                        `name`="mean", 
                        `title`="Posterior Mean", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="sd", 
                        `title`="Posterior SD", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="ci_lower", 
                        `title`="95% CrI Lower", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="ci_upper", 
                        `title`="95% CrI Upper", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="prob_positive", 
                        `title`="P(\u03B2 > 0)", 
                        `type`="number", 
                        `format`="pc"),
                    list(
                        `name`="prob_meaningful", 
                        `title`="P(|\u03B2| > MID)", 
                        `type`="number", 
                        `format`="pc"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="treatment_effect_analysis",
                title="Bayesian Treatment Effect Analysis",
                visible="(analysis_type:treatment_effect)",
                columns=list(
                    list(
                        `name`="comparison", 
                        `title`="Treatment Comparison", 
                        `type`="text"),
                    list(
                        `name`="effect_size", 
                        `title`="Effect Size", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="ci_lower", 
                        `title`="95% CrI Lower", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="ci_upper", 
                        `title`="95% CrI Upper", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="prob_superiority", 
                        `title`="P(Treatment > Control)", 
                        `type`="number", 
                        `format`="pc"),
                    list(
                        `name`="prob_equivalence", 
                        `title`="P(ROPE)", 
                        `type`="number", 
                        `format`="pc"),
                    list(
                        `name`="clinical_interpretation", 
                        `title`="Clinical Interpretation", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="bayes_factors",
                title="Bayes Factor Analysis",
                visible="(bayes_factor_analysis)",
                columns=list(
                    list(
                        `name`="hypothesis", 
                        `title`="Hypothesis", 
                        `type`="text"),
                    list(
                        `name`="bayes_factor", 
                        `title`="Bayes Factor", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="log_bf", 
                        `title`="log(BF)", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="evidence_strength", 
                        `title`="Evidence Strength", 
                        `type`="text"),
                    list(
                        `name`="interpretation", 
                        `title`="Interpretation", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="model_diagnostics_summary",
                title="MCMC Diagnostics Summary",
                visible="(model_diagnostics)",
                columns=list(
                    list(
                        `name`="parameter", 
                        `title`="Parameter", 
                        `type`="text"),
                    list(
                        `name`="rhat", 
                        `title`="R-hat", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="ess_bulk", 
                        `title`="ESS (Bulk)", 
                        `type`="integer"),
                    list(
                        `name`="ess_tail", 
                        `title`="ESS (Tail)", 
                        `type`="integer"),
                    list(
                        `name`="mcmc_se", 
                        `title`="MCMC SE", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="convergence_status", 
                        `title`="Convergence", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="prior_posterior_comparison",
                title="Prior vs Posterior Comparison",
                columns=list(
                    list(
                        `name`="parameter", 
                        `title`="Parameter", 
                        `type`="text"),
                    list(
                        `name`="prior_mean", 
                        `title`="Prior Mean", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="prior_sd", 
                        `title`="Prior SD", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="posterior_mean", 
                        `title`="Posterior Mean", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="posterior_sd", 
                        `title`="Posterior SD", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="learning_ratio", 
                        `title`="Learning Ratio", 
                        `type`="number", 
                        `format`="zto"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="decision_analysis_results",
                title="Bayesian Decision Analysis",
                visible="(decision_analysis)",
                columns=list(
                    list(
                        `name`="decision_option", 
                        `title`="Decision Option", 
                        `type`="text"),
                    list(
                        `name`="expected_utility", 
                        `title`="Expected Utility", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="probability_optimal", 
                        `title`="P(Optimal)", 
                        `type`="number", 
                        `format`="pc"),
                    list(
                        `name`="value_of_information", 
                        `title`="Value of Information", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="recommendation", 
                        `title`="Recommendation", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="predictive_intervals",
                title="Bayesian Prediction Intervals",
                visible="(prediction_intervals)",
                columns=list(
                    list(
                        `name`="prediction_type", 
                        `title`="Prediction Type", 
                        `type`="text"),
                    list(
                        `name`="predicted_value", 
                        `title`="Predicted Value", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="pi_lower", 
                        `title`="95% PI Lower", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="pi_upper", 
                        `title`="95% PI Upper", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="prediction_se", 
                        `title`="Prediction SE", 
                        `type`="number", 
                        `format`="zto"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="sensitivity_to_priors",
                title="Prior Sensitivity Analysis",
                visible="(sensitivity_to_priors)",
                columns=list(
                    list(
                        `name`="prior_specification", 
                        `title`="Prior Specification", 
                        `type`="text"),
                    list(
                        `name`="posterior_mean", 
                        `title`="Posterior Mean", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="posterior_sd", 
                        `title`="Posterior SD", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="relative_change", 
                        `title`="Relative Change (%)", 
                        `type`="number", 
                        `format`="pc"),
                    list(
                        `name`="robustness_assessment", 
                        `title`="Robustness", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="probability_statements",
                title="Clinical Probability Statements",
                visible="(probability_statements)",
                columns=list(
                    list(
                        `name`="clinical_question", 
                        `title`="Clinical Question", 
                        `type`="text"),
                    list(
                        `name`="probability", 
                        `title`="Probability", 
                        `type`="number", 
                        `format`="pc"),
                    list(
                        `name`="credible_interval", 
                        `title`="95% Credible Interval", 
                        `type`="text"),
                    list(
                        `name`="clinical_significance", 
                        `title`="Clinical Significance", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="model_comparison",
                title="Bayesian Model Comparison",
                visible="(model_comparison)",
                columns=list(
                    list(
                        `name`="model", 
                        `title`="Model", 
                        `type`="text"),
                    list(
                        `name`="loo_ic", 
                        `title`="LOO-IC", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="loo_se", 
                        `title`="LOO-IC SE", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="waic", 
                        `title`="WAIC", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="model_weight", 
                        `title`="Model Weight", 
                        `type`="number", 
                        `format`="pc"),
                    list(
                        `name`="relative_performance", 
                        `title`="Relative Performance", 
                        `type`="text"))))
            self$add(jmvcore::Image$new(
                options=options,
                name="posterior_distribution_plot",
                title="Posterior Distributions",
                visible="(posterior_plots)",
                width=600,
                height=400,
                requiresData=TRUE))
            self$add(jmvcore::Image$new(
                options=options,
                name="trace_plots",
                title="MCMC Trace Plots",
                visible="(trace_plots)",
                width=600,
                height=400,
                requiresData=TRUE))
            self$add(jmvcore::Image$new(
                options=options,
                name="prior_posterior_plot",
                title="Prior vs Posterior Comparison Plot",
                width=600,
                height=400,
                requiresData=TRUE))
            self$add(jmvcore::Image$new(
                options=options,
                name="bayesian_forest_plot",
                title="Bayesian Forest Plot",
                visible="(forest_plots)",
                width=600,
                height=400,
                requiresData=TRUE))
            self$add(jmvcore::Image$new(
                options=options,
                name="decision_analysis_plot",
                title="Decision Analysis Visualization",
                visible="(decision_plots && decision_analysis)",
                width=600,
                height=400,
                requiresData=TRUE))
            self$add(jmvcore::Image$new(
                options=options,
                name="predictive_checks_plot",
                title="Posterior Predictive Checks",
                visible="(posterior_predictive_checks)",
                width=600,
                height=400,
                requiresData=TRUE))
            self$add(jmvcore::Html$new(
                options=options,
                name="comprehensive_report",
                title="Comprehensive Bayesian Analysis Report",
                visible="(comprehensive_report)",
                clearWith=list(
                    "outcome_var",
                    "treatment_var",
                    "analysis_type")))
            self$add(jmvcore::Html$new(
                options=options,
                name="clinical_interpretation_report",
                title="Clinical Interpretation & Summary",
                visible="(clinical_interpretation)",
                clearWith=list(
                    "outcome_var",
                    "treatment_var")))
            self$add(jmvcore::Html$new(
                options=options,
                name="layman_summary_report",
                title="Plain Language Summary",
                visible="(layman_summary)",
                clearWith=list(
                    "outcome_var",
                    "treatment_var")))}))

bayesianclinicalBase <- if (requireNamespace("jmvcore", quietly=TRUE)) R6::R6Class(
    "bayesianclinicalBase",
    inherit = jmvcore::Analysis,
    public = list(
        initialize = function(options, data=NULL, datasetId="", analysisId="", revision=0) {
            super$initialize(
                package = "ClinicoPath",
                name = "bayesianclinical",
                version = c(1,0,0),
                options = options,
                results = bayesianclinicalResults$new(options=options),
                data = data,
                datasetId = datasetId,
                analysisId = analysisId,
                revision = revision,
                pause = NULL,
                completeWhenFilled = FALSE,
                requiresMissings = FALSE,
                weightsSupport = 'auto')
        }))

#' Bayesian Clinical Analysis & Decision Making
#'
#' Comprehensive Bayesian analysis for clinical research and medical decision 
#' making using tabular
#' clinical data. Implements Bayesian hypothesis testing, parameter 
#' estimation, predictive modeling,
#' and decision analysis. Provides intuitive interpretation of evidence, 
#' uncertainty quantification,
#' and clinical decision support. Essential for evidence-based medicine, 
#' clinical guidelines, and
#' personalized treatment decisions with proper uncertainty communication.
#' 
#'
#' @examples
#' data('clinical_data')
#'
#' bayesianclinical(
#'     data = clinical_data,
#'     outcome_var = "treatment_success",
#'     treatment_var = "treatment_group",
#'     covariates = c("age", "severity", "comorbidity")
#' )
#'
#' @param data the data as a data frame
#' @param outcome_var Primary clinical outcome of interest
#' @param treatment_var Treatment group or intervention variable
#' @param covariates Clinical covariates and baseline characteristics
#' @param patient_id Patient identifier for hierarchical models
#' @param time_var Time variable for longitudinal Bayesian analysis
#' @param center_var Center or site variable for hierarchical models
#' @param analysis_type Type of Bayesian analysis to perform
#' @param outcome_type Type of outcome variable
#' @param prior_type Type of prior distributions to use
#' @param prior_mean Prior mean for treatment effect or main parameter
#' @param prior_sd Prior standard deviation for main parameter
#' @param historical_data_weight Weight for historical data in prior (0=no
#'   weight, 1=full weight)
#' @param mcmc_chains Number of MCMC chains
#' @param mcmc_iterations Number of MCMC iterations per chain
#' @param mcmc_warmup Number of warmup (burn-in) iterations
#' @param mcmc_thinning Thinning interval for MCMC samples
#' @param credible_interval Level for Bayesian credible intervals
#' @param rope_lower Lower bound for Region of Practical Equivalence (ROPE)
#' @param rope_upper Upper bound for Region of Practical Equivalence (ROPE)
#' @param minimum_effect_size Minimum effect size considered clinically
#'   important
#' @param decision_analysis Perform Bayesian decision analysis with utilities
#' @param benefit_utility Utility value for treatment benefit
#' @param harm_utility Utility value for treatment harm (negative)
#' @param cost_consideration Include cost considerations in decision analysis
#' @param model_diagnostics Perform MCMC diagnostics and model validation
#' @param convergence_diagnostics Check MCMC convergence (R-hat, ESS, etc.)
#' @param posterior_predictive_checks Perform posterior predictive model
#'   checking
#' @param leave_one_out_cv Perform LOO-CV for model comparison
#' @param hierarchical_modeling Use hierarchical/multilevel Bayesian models
#' @param mixture_modeling Use Bayesian mixture models for heterogeneity
#' @param nonparametric_methods Use nonparametric Bayesian approaches
#' @param adaptive_design Perform adaptive trial design analysis
#' @param model_comparison Compare multiple Bayesian models
#' @param bayes_factor_analysis Calculate Bayes factors for hypothesis testing
#' @param evidence_thresholds Classify evidence strength using standard
#'   thresholds
#' @param probability_statements Generate clinically relevant probability
#'   statements
#' @param prediction_intervals Calculate Bayesian prediction intervals
#' @param sensitivity_to_priors Assess sensitivity to prior specifications
#' @param posterior_plots Generate posterior distribution visualizations
#' @param trace_plots Generate MCMC trace plots for diagnostics
#' @param forest_plots Generate Bayesian forest plots for meta-analysis
#' @param decision_plots Generate decision analysis visualization
#' @param comprehensive_report Generate comprehensive Bayesian analysis report
#' @param clinical_interpretation Provide clinical interpretation of Bayesian
#'   results
#' @param regulatory_documentation Include regulatory-compliant documentation
#' @param layman_summary Provide plain language summary of results
#' @return A results object containing:
#' \tabular{llllll}{
#'   \code{results$bayesian_overview} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$posterior_summary} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$treatment_effect_analysis} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$bayes_factors} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$model_diagnostics_summary} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$prior_posterior_comparison} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$decision_analysis_results} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$predictive_intervals} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$sensitivity_to_priors} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$probability_statements} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$model_comparison} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$posterior_distribution_plot} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$trace_plots} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$prior_posterior_plot} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$bayesian_forest_plot} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$decision_analysis_plot} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$predictive_checks_plot} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$comprehensive_report} \tab \tab \tab \tab \tab a html \cr
#'   \code{results$clinical_interpretation_report} \tab \tab \tab \tab \tab a html \cr
#'   \code{results$layman_summary_report} \tab \tab \tab \tab \tab a html \cr
#' }
#'
#' Tables can be converted to data frames with \code{asDF} or \code{\link{as.data.frame}}. For example:
#'
#' \code{results$bayesian_overview$asDF}
#'
#' \code{as.data.frame(results$bayesian_overview)}
#'
#' @export
bayesianclinical <- function(
    data,
    outcome_var,
    treatment_var,
    covariates,
    patient_id,
    time_var,
    center_var,
    analysis_type = "treatment_effect",
    outcome_type = "continuous",
    prior_type = "weakly_informative",
    prior_mean = 0,
    prior_sd = 1,
    historical_data_weight = 0.1,
    mcmc_chains = 4,
    mcmc_iterations = 2000,
    mcmc_warmup = 1000,
    mcmc_thinning = 1,
    credible_interval = 0.95,
    rope_lower = -0.1,
    rope_upper = 0.1,
    minimum_effect_size = 0.2,
    decision_analysis = FALSE,
    benefit_utility = 1,
    harm_utility = -0.5,
    cost_consideration = FALSE,
    model_diagnostics = TRUE,
    convergence_diagnostics = TRUE,
    posterior_predictive_checks = TRUE,
    leave_one_out_cv = FALSE,
    hierarchical_modeling = FALSE,
    mixture_modeling = FALSE,
    nonparametric_methods = FALSE,
    adaptive_design = FALSE,
    model_comparison = FALSE,
    bayes_factor_analysis = TRUE,
    evidence_thresholds = TRUE,
    probability_statements = TRUE,
    prediction_intervals = TRUE,
    sensitivity_to_priors = FALSE,
    posterior_plots = TRUE,
    trace_plots = TRUE,
    forest_plots = FALSE,
    decision_plots = FALSE,
    comprehensive_report = TRUE,
    clinical_interpretation = TRUE,
    regulatory_documentation = FALSE,
    layman_summary = TRUE) {

    if ( ! requireNamespace("jmvcore", quietly=TRUE))
        stop("bayesianclinical requires jmvcore to be installed (restart may be required)")

    if ( ! missing(outcome_var)) outcome_var <- jmvcore::resolveQuo(jmvcore::enquo(outcome_var))
    if ( ! missing(treatment_var)) treatment_var <- jmvcore::resolveQuo(jmvcore::enquo(treatment_var))
    if ( ! missing(covariates)) covariates <- jmvcore::resolveQuo(jmvcore::enquo(covariates))
    if ( ! missing(patient_id)) patient_id <- jmvcore::resolveQuo(jmvcore::enquo(patient_id))
    if ( ! missing(time_var)) time_var <- jmvcore::resolveQuo(jmvcore::enquo(time_var))
    if ( ! missing(center_var)) center_var <- jmvcore::resolveQuo(jmvcore::enquo(center_var))
    if (missing(data))
        data <- jmvcore::marshalData(
            parent.frame(),
            `if`( ! missing(outcome_var), outcome_var, NULL),
            `if`( ! missing(treatment_var), treatment_var, NULL),
            `if`( ! missing(covariates), covariates, NULL),
            `if`( ! missing(patient_id), patient_id, NULL),
            `if`( ! missing(time_var), time_var, NULL),
            `if`( ! missing(center_var), center_var, NULL))

    for (v in treatment_var) if (v %in% names(data)) data[[v]] <- as.factor(data[[v]])
    for (v in center_var) if (v %in% names(data)) data[[v]] <- as.factor(data[[v]])

    options <- bayesianclinicalOptions$new(
        outcome_var = outcome_var,
        treatment_var = treatment_var,
        covariates = covariates,
        patient_id = patient_id,
        time_var = time_var,
        center_var = center_var,
        analysis_type = analysis_type,
        outcome_type = outcome_type,
        prior_type = prior_type,
        prior_mean = prior_mean,
        prior_sd = prior_sd,
        historical_data_weight = historical_data_weight,
        mcmc_chains = mcmc_chains,
        mcmc_iterations = mcmc_iterations,
        mcmc_warmup = mcmc_warmup,
        mcmc_thinning = mcmc_thinning,
        credible_interval = credible_interval,
        rope_lower = rope_lower,
        rope_upper = rope_upper,
        minimum_effect_size = minimum_effect_size,
        decision_analysis = decision_analysis,
        benefit_utility = benefit_utility,
        harm_utility = harm_utility,
        cost_consideration = cost_consideration,
        model_diagnostics = model_diagnostics,
        convergence_diagnostics = convergence_diagnostics,
        posterior_predictive_checks = posterior_predictive_checks,
        leave_one_out_cv = leave_one_out_cv,
        hierarchical_modeling = hierarchical_modeling,
        mixture_modeling = mixture_modeling,
        nonparametric_methods = nonparametric_methods,
        adaptive_design = adaptive_design,
        model_comparison = model_comparison,
        bayes_factor_analysis = bayes_factor_analysis,
        evidence_thresholds = evidence_thresholds,
        probability_statements = probability_statements,
        prediction_intervals = prediction_intervals,
        sensitivity_to_priors = sensitivity_to_priors,
        posterior_plots = posterior_plots,
        trace_plots = trace_plots,
        forest_plots = forest_plots,
        decision_plots = decision_plots,
        comprehensive_report = comprehensive_report,
        clinical_interpretation = clinical_interpretation,
        regulatory_documentation = regulatory_documentation,
        layman_summary = layman_summary)

    analysis <- bayesianclinicalClass$new(
        options = options,
        data = data)

    analysis$run()

    analysis$results
}

