
# This file is automatically generated, you probably don't want to edit this

spatialbayesiansurvivalOptions <- if (requireNamespace("jmvcore", quietly=TRUE)) R6::R6Class(
    "spatialbayesiansurvivalOptions",
    inherit = jmvcore::Options,
    public = list(
        initialize = function(
            time = NULL,
            status = NULL,
            statusLevel = NULL,
            predictors = NULL,
            spatial_coords = NULL,
            region_id = NULL,
            adjacency_matrix = "",
            spatial_model = "car",
            spatial_prior = "icar",
            distance_method = "great_circle",
            neighborhood_threshold = 50,
            num_neighbors = 5,
            baseline_hazard = "weibull",
            piecewise_intervals = 5,
            spline_knots = 5,
            mcmc_samples = 5000,
            mcmc_burnin = 2000,
            mcmc_thin = 1,
            mcmc_chains = 3,
            covariate_priors = "normal_weak",
            covariate_prior_sd = 10,
            spatial_precision_prior = "gamma",
            spatial_precision_shape = 1,
            spatial_precision_rate = 0.5,
            model_comparison = TRUE,
            cross_validation = FALSE,
            cv_folds = 5,
            model_selection_criteria = "dic",
            spatial_prediction = TRUE,
            prediction_grid_size = 50,
            prediction_time_points = "12,24,36,60",
            confidence_level = 0.95,
            show_model_summary = TRUE,
            show_parameter_estimates = TRUE,
            show_spatial_effects = TRUE,
            show_residual_maps = TRUE,
            show_survival_maps = TRUE,
            show_hazard_maps = FALSE,
            show_convergence_diagnostics = TRUE,
            show_model_comparison = TRUE,
            show_interpretation = TRUE,
            standardize_predictors = TRUE,
            include_intercept = TRUE,
            missing_data_handling = "complete_cases",
            parallel_processing = TRUE,
            n_cores = 2,
            clinical_context = "cancer_epidemiology",
            set_seed = TRUE,
            seed_value = 42, ...) {

            super$initialize(
                package="ClinicoPath",
                name="spatialbayesiansurvival",
                requiresData=TRUE,
                ...)

            private$..time <- jmvcore::OptionVariable$new(
                "time",
                time,
                suggested=list(
                    "continuous"),
                permitted=list(
                    "numeric"))
            private$..status <- jmvcore::OptionVariable$new(
                "status",
                status,
                suggested=list(
                    "nominal",
                    "ordinal"),
                permitted=list(
                    "factor",
                    "numeric"))
            private$..statusLevel <- jmvcore::OptionLevel$new(
                "statusLevel",
                statusLevel,
                variable="(status)")
            private$..predictors <- jmvcore::OptionVariables$new(
                "predictors",
                predictors,
                suggested=list(
                    "continuous",
                    "ordinal",
                    "nominal"),
                permitted=list(
                    "numeric",
                    "factor"))
            private$..spatial_coords <- jmvcore::OptionVariables$new(
                "spatial_coords",
                spatial_coords,
                suggested=list(
                    "continuous"),
                permitted=list(
                    "numeric"))
            private$..region_id <- jmvcore::OptionVariable$new(
                "region_id",
                region_id,
                suggested=list(
                    "nominal",
                    "ordinal"),
                permitted=list(
                    "factor",
                    "numeric"),
                default=NULL)
            private$..adjacency_matrix <- jmvcore::OptionString$new(
                "adjacency_matrix",
                adjacency_matrix,
                default="")
            private$..spatial_model <- jmvcore::OptionList$new(
                "spatial_model",
                spatial_model,
                options=list(
                    "car",
                    "sar",
                    "gaussian_process",
                    "bym",
                    "leroux",
                    "distance_exp",
                    "distance_gaussian"),
                default="car")
            private$..spatial_prior <- jmvcore::OptionList$new(
                "spatial_prior",
                spatial_prior,
                options=list(
                    "icar",
                    "proper_car",
                    "scaled_inv_wishart",
                    "inv_gamma"),
                default="icar")
            private$..distance_method <- jmvcore::OptionList$new(
                "distance_method",
                distance_method,
                options=list(
                    "euclidean",
                    "great_circle",
                    "manhattan",
                    "haversine"),
                default="great_circle")
            private$..neighborhood_threshold <- jmvcore::OptionNumber$new(
                "neighborhood_threshold",
                neighborhood_threshold,
                default=50,
                min=0.1,
                max=1000)
            private$..num_neighbors <- jmvcore::OptionInteger$new(
                "num_neighbors",
                num_neighbors,
                default=5,
                min=1,
                max=20)
            private$..baseline_hazard <- jmvcore::OptionList$new(
                "baseline_hazard",
                baseline_hazard,
                options=list(
                    "weibull",
                    "exponential",
                    "piecewise",
                    "bspline",
                    "gamma_process"),
                default="weibull")
            private$..piecewise_intervals <- jmvcore::OptionInteger$new(
                "piecewise_intervals",
                piecewise_intervals,
                default=5,
                min=2,
                max=20)
            private$..spline_knots <- jmvcore::OptionInteger$new(
                "spline_knots",
                spline_knots,
                default=5,
                min=3,
                max=15)
            private$..mcmc_samples <- jmvcore::OptionInteger$new(
                "mcmc_samples",
                mcmc_samples,
                default=5000,
                min=1000,
                max=50000)
            private$..mcmc_burnin <- jmvcore::OptionInteger$new(
                "mcmc_burnin",
                mcmc_burnin,
                default=2000,
                min=500,
                max=20000)
            private$..mcmc_thin <- jmvcore::OptionInteger$new(
                "mcmc_thin",
                mcmc_thin,
                default=1,
                min=1,
                max=50)
            private$..mcmc_chains <- jmvcore::OptionInteger$new(
                "mcmc_chains",
                mcmc_chains,
                default=3,
                min=1,
                max=8)
            private$..covariate_priors <- jmvcore::OptionList$new(
                "covariate_priors",
                covariate_priors,
                options=list(
                    "normal_weak",
                    "normal_informative",
                    "horseshoe",
                    "spike_slab",
                    "lasso"),
                default="normal_weak")
            private$..covariate_prior_sd <- jmvcore::OptionNumber$new(
                "covariate_prior_sd",
                covariate_prior_sd,
                default=10,
                min=0.1,
                max=100)
            private$..spatial_precision_prior <- jmvcore::OptionList$new(
                "spatial_precision_prior",
                spatial_precision_prior,
                options=list(
                    "gamma",
                    "lognormal",
                    "inv_gamma",
                    "pc_prior"),
                default="gamma")
            private$..spatial_precision_shape <- jmvcore::OptionNumber$new(
                "spatial_precision_shape",
                spatial_precision_shape,
                default=1,
                min=0.1,
                max=10)
            private$..spatial_precision_rate <- jmvcore::OptionNumber$new(
                "spatial_precision_rate",
                spatial_precision_rate,
                default=0.5,
                min=0.01,
                max=10)
            private$..model_comparison <- jmvcore::OptionBool$new(
                "model_comparison",
                model_comparison,
                default=TRUE)
            private$..cross_validation <- jmvcore::OptionBool$new(
                "cross_validation",
                cross_validation,
                default=FALSE)
            private$..cv_folds <- jmvcore::OptionInteger$new(
                "cv_folds",
                cv_folds,
                default=5,
                min=3,
                max=10)
            private$..model_selection_criteria <- jmvcore::OptionList$new(
                "model_selection_criteria",
                model_selection_criteria,
                options=list(
                    "dic",
                    "waic",
                    "loo",
                    "lpml"),
                default="dic")
            private$..spatial_prediction <- jmvcore::OptionBool$new(
                "spatial_prediction",
                spatial_prediction,
                default=TRUE)
            private$..prediction_grid_size <- jmvcore::OptionInteger$new(
                "prediction_grid_size",
                prediction_grid_size,
                default=50,
                min=10,
                max=200)
            private$..prediction_time_points <- jmvcore::OptionString$new(
                "prediction_time_points",
                prediction_time_points,
                default="12,24,36,60")
            private$..confidence_level <- jmvcore::OptionNumber$new(
                "confidence_level",
                confidence_level,
                default=0.95,
                min=0.8,
                max=0.99)
            private$..show_model_summary <- jmvcore::OptionBool$new(
                "show_model_summary",
                show_model_summary,
                default=TRUE)
            private$..show_parameter_estimates <- jmvcore::OptionBool$new(
                "show_parameter_estimates",
                show_parameter_estimates,
                default=TRUE)
            private$..show_spatial_effects <- jmvcore::OptionBool$new(
                "show_spatial_effects",
                show_spatial_effects,
                default=TRUE)
            private$..show_residual_maps <- jmvcore::OptionBool$new(
                "show_residual_maps",
                show_residual_maps,
                default=TRUE)
            private$..show_survival_maps <- jmvcore::OptionBool$new(
                "show_survival_maps",
                show_survival_maps,
                default=TRUE)
            private$..show_hazard_maps <- jmvcore::OptionBool$new(
                "show_hazard_maps",
                show_hazard_maps,
                default=FALSE)
            private$..show_convergence_diagnostics <- jmvcore::OptionBool$new(
                "show_convergence_diagnostics",
                show_convergence_diagnostics,
                default=TRUE)
            private$..show_model_comparison <- jmvcore::OptionBool$new(
                "show_model_comparison",
                show_model_comparison,
                default=TRUE)
            private$..show_interpretation <- jmvcore::OptionBool$new(
                "show_interpretation",
                show_interpretation,
                default=TRUE)
            private$..standardize_predictors <- jmvcore::OptionBool$new(
                "standardize_predictors",
                standardize_predictors,
                default=TRUE)
            private$..include_intercept <- jmvcore::OptionBool$new(
                "include_intercept",
                include_intercept,
                default=TRUE)
            private$..missing_data_handling <- jmvcore::OptionList$new(
                "missing_data_handling",
                missing_data_handling,
                options=list(
                    "complete_cases",
                    "multiple_imputation",
                    "bayesian_imputation"),
                default="complete_cases")
            private$..parallel_processing <- jmvcore::OptionBool$new(
                "parallel_processing",
                parallel_processing,
                default=TRUE)
            private$..n_cores <- jmvcore::OptionInteger$new(
                "n_cores",
                n_cores,
                default=2,
                min=1,
                max=8)
            private$..clinical_context <- jmvcore::OptionList$new(
                "clinical_context",
                clinical_context,
                options=list(
                    "cancer_epidemiology",
                    "disease_surveillance",
                    "environmental_health",
                    "health_services",
                    "infectious_disease",
                    "general"),
                default="cancer_epidemiology")
            private$..set_seed <- jmvcore::OptionBool$new(
                "set_seed",
                set_seed,
                default=TRUE)
            private$..seed_value <- jmvcore::OptionInteger$new(
                "seed_value",
                seed_value,
                default=42,
                min=1,
                max=999999)

            self$.addOption(private$..time)
            self$.addOption(private$..status)
            self$.addOption(private$..statusLevel)
            self$.addOption(private$..predictors)
            self$.addOption(private$..spatial_coords)
            self$.addOption(private$..region_id)
            self$.addOption(private$..adjacency_matrix)
            self$.addOption(private$..spatial_model)
            self$.addOption(private$..spatial_prior)
            self$.addOption(private$..distance_method)
            self$.addOption(private$..neighborhood_threshold)
            self$.addOption(private$..num_neighbors)
            self$.addOption(private$..baseline_hazard)
            self$.addOption(private$..piecewise_intervals)
            self$.addOption(private$..spline_knots)
            self$.addOption(private$..mcmc_samples)
            self$.addOption(private$..mcmc_burnin)
            self$.addOption(private$..mcmc_thin)
            self$.addOption(private$..mcmc_chains)
            self$.addOption(private$..covariate_priors)
            self$.addOption(private$..covariate_prior_sd)
            self$.addOption(private$..spatial_precision_prior)
            self$.addOption(private$..spatial_precision_shape)
            self$.addOption(private$..spatial_precision_rate)
            self$.addOption(private$..model_comparison)
            self$.addOption(private$..cross_validation)
            self$.addOption(private$..cv_folds)
            self$.addOption(private$..model_selection_criteria)
            self$.addOption(private$..spatial_prediction)
            self$.addOption(private$..prediction_grid_size)
            self$.addOption(private$..prediction_time_points)
            self$.addOption(private$..confidence_level)
            self$.addOption(private$..show_model_summary)
            self$.addOption(private$..show_parameter_estimates)
            self$.addOption(private$..show_spatial_effects)
            self$.addOption(private$..show_residual_maps)
            self$.addOption(private$..show_survival_maps)
            self$.addOption(private$..show_hazard_maps)
            self$.addOption(private$..show_convergence_diagnostics)
            self$.addOption(private$..show_model_comparison)
            self$.addOption(private$..show_interpretation)
            self$.addOption(private$..standardize_predictors)
            self$.addOption(private$..include_intercept)
            self$.addOption(private$..missing_data_handling)
            self$.addOption(private$..parallel_processing)
            self$.addOption(private$..n_cores)
            self$.addOption(private$..clinical_context)
            self$.addOption(private$..set_seed)
            self$.addOption(private$..seed_value)
        }),
    active = list(
        time = function() private$..time$value,
        status = function() private$..status$value,
        statusLevel = function() private$..statusLevel$value,
        predictors = function() private$..predictors$value,
        spatial_coords = function() private$..spatial_coords$value,
        region_id = function() private$..region_id$value,
        adjacency_matrix = function() private$..adjacency_matrix$value,
        spatial_model = function() private$..spatial_model$value,
        spatial_prior = function() private$..spatial_prior$value,
        distance_method = function() private$..distance_method$value,
        neighborhood_threshold = function() private$..neighborhood_threshold$value,
        num_neighbors = function() private$..num_neighbors$value,
        baseline_hazard = function() private$..baseline_hazard$value,
        piecewise_intervals = function() private$..piecewise_intervals$value,
        spline_knots = function() private$..spline_knots$value,
        mcmc_samples = function() private$..mcmc_samples$value,
        mcmc_burnin = function() private$..mcmc_burnin$value,
        mcmc_thin = function() private$..mcmc_thin$value,
        mcmc_chains = function() private$..mcmc_chains$value,
        covariate_priors = function() private$..covariate_priors$value,
        covariate_prior_sd = function() private$..covariate_prior_sd$value,
        spatial_precision_prior = function() private$..spatial_precision_prior$value,
        spatial_precision_shape = function() private$..spatial_precision_shape$value,
        spatial_precision_rate = function() private$..spatial_precision_rate$value,
        model_comparison = function() private$..model_comparison$value,
        cross_validation = function() private$..cross_validation$value,
        cv_folds = function() private$..cv_folds$value,
        model_selection_criteria = function() private$..model_selection_criteria$value,
        spatial_prediction = function() private$..spatial_prediction$value,
        prediction_grid_size = function() private$..prediction_grid_size$value,
        prediction_time_points = function() private$..prediction_time_points$value,
        confidence_level = function() private$..confidence_level$value,
        show_model_summary = function() private$..show_model_summary$value,
        show_parameter_estimates = function() private$..show_parameter_estimates$value,
        show_spatial_effects = function() private$..show_spatial_effects$value,
        show_residual_maps = function() private$..show_residual_maps$value,
        show_survival_maps = function() private$..show_survival_maps$value,
        show_hazard_maps = function() private$..show_hazard_maps$value,
        show_convergence_diagnostics = function() private$..show_convergence_diagnostics$value,
        show_model_comparison = function() private$..show_model_comparison$value,
        show_interpretation = function() private$..show_interpretation$value,
        standardize_predictors = function() private$..standardize_predictors$value,
        include_intercept = function() private$..include_intercept$value,
        missing_data_handling = function() private$..missing_data_handling$value,
        parallel_processing = function() private$..parallel_processing$value,
        n_cores = function() private$..n_cores$value,
        clinical_context = function() private$..clinical_context$value,
        set_seed = function() private$..set_seed$value,
        seed_value = function() private$..seed_value$value),
    private = list(
        ..time = NA,
        ..status = NA,
        ..statusLevel = NA,
        ..predictors = NA,
        ..spatial_coords = NA,
        ..region_id = NA,
        ..adjacency_matrix = NA,
        ..spatial_model = NA,
        ..spatial_prior = NA,
        ..distance_method = NA,
        ..neighborhood_threshold = NA,
        ..num_neighbors = NA,
        ..baseline_hazard = NA,
        ..piecewise_intervals = NA,
        ..spline_knots = NA,
        ..mcmc_samples = NA,
        ..mcmc_burnin = NA,
        ..mcmc_thin = NA,
        ..mcmc_chains = NA,
        ..covariate_priors = NA,
        ..covariate_prior_sd = NA,
        ..spatial_precision_prior = NA,
        ..spatial_precision_shape = NA,
        ..spatial_precision_rate = NA,
        ..model_comparison = NA,
        ..cross_validation = NA,
        ..cv_folds = NA,
        ..model_selection_criteria = NA,
        ..spatial_prediction = NA,
        ..prediction_grid_size = NA,
        ..prediction_time_points = NA,
        ..confidence_level = NA,
        ..show_model_summary = NA,
        ..show_parameter_estimates = NA,
        ..show_spatial_effects = NA,
        ..show_residual_maps = NA,
        ..show_survival_maps = NA,
        ..show_hazard_maps = NA,
        ..show_convergence_diagnostics = NA,
        ..show_model_comparison = NA,
        ..show_interpretation = NA,
        ..standardize_predictors = NA,
        ..include_intercept = NA,
        ..missing_data_handling = NA,
        ..parallel_processing = NA,
        ..n_cores = NA,
        ..clinical_context = NA,
        ..set_seed = NA,
        ..seed_value = NA)
)

spatialbayesiansurvivalResults <- if (requireNamespace("jmvcore", quietly=TRUE)) R6::R6Class(
    "spatialbayesiansurvivalResults",
    inherit = jmvcore::Group,
    active = list(
        modelSummary = function() private$.items[["modelSummary"]],
        parameterEstimates = function() private$.items[["parameterEstimates"]],
        spatialEffects = function() private$.items[["spatialEffects"]],
        modelFit = function() private$.items[["modelFit"]],
        spatialCorrelation = function() private$.items[["spatialCorrelation"]],
        modelComparison = function() private$.items[["modelComparison"]],
        convergenceDiagnostics = function() private$.items[["convergenceDiagnostics"]],
        survivalPredictions = function() private$.items[["survivalPredictions"]],
        spatialValidation = function() private$.items[["spatialValidation"]],
        clinicalInterpretation = function() private$.items[["clinicalInterpretation"]],
        methodsExplanation = function() private$.items[["methodsExplanation"]],
        spatialMaps = function() private$.items[["spatialMaps"]],
        survivalMaps = function() private$.items[["survivalMaps"]],
        hazardMaps = function() private$.items[["hazardMaps"]],
        residualMaps = function() private$.items[["residualMaps"]],
        convergencePlots = function() private$.items[["convergencePlots"]],
        posteriorPlots = function() private$.items[["posteriorPlots"]],
        spatialCorrelationPlot = function() private$.items[["spatialCorrelationPlot"]]),
    private = list(),
    public=list(
        initialize=function(options) {
            super$initialize(
                options=options,
                name="",
                title="Analysis Results")
            self$add(jmvcore::Table$new(
                options=options,
                name="modelSummary",
                title="Spatial Bayesian Survival Model Summary",
                columns=list(
                    list(
                        `name`="parameter", 
                        `title`="Parameter", 
                        `type`="text"),
                    list(
                        `name`="value", 
                        `title`="Value", 
                        `type`="text"),
                    list(
                        `name`="interpretation", 
                        `title`="Interpretation", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="parameterEstimates",
                title="Posterior Parameter Estimates",
                columns=list(
                    list(
                        `name`="parameter", 
                        `title`="Parameter", 
                        `type`="text"),
                    list(
                        `name`="mean", 
                        `title`="Posterior Mean", 
                        `type`="number"),
                    list(
                        `name`="sd", 
                        `title`="Posterior SD", 
                        `type`="number"),
                    list(
                        `name`="ci_lower", 
                        `title`="CI Lower", 
                        `type`="number"),
                    list(
                        `name`="ci_upper", 
                        `title`="CI Upper", 
                        `type`="number"),
                    list(
                        `name`="rhat", 
                        `title`="R\u0302", 
                        `type`="number"),
                    list(
                        `name`="ess", 
                        `title`="Effective Sample Size", 
                        `type`="integer"),
                    list(
                        `name`="significance", 
                        `title`="Significance", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="spatialEffects",
                title="Spatial Random Effects",
                columns=list(
                    list(
                        `name`="region", 
                        `title`="Region/Location", 
                        `type`="text"),
                    list(
                        `name`="spatial_effect", 
                        `title`="Spatial Effect", 
                        `type`="number"),
                    list(
                        `name`="ci_lower", 
                        `title`="CI Lower", 
                        `type`="number"),
                    list(
                        `name`="ci_upper", 
                        `title`="CI Upper", 
                        `type`="number"),
                    list(
                        `name`="relative_risk", 
                        `title`="Relative Risk", 
                        `type`="number"),
                    list(
                        `name`="interpretation", 
                        `title`="Risk Assessment", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="modelFit",
                title="Model Fit and Diagnostics",
                columns=list(
                    list(
                        `name`="criterion", 
                        `title`="Criterion", 
                        `type`="text"),
                    list(
                        `name`="value", 
                        `title`="Value", 
                        `type`="number"),
                    list(
                        `name`="effective_parameters", 
                        `title`="Effective Parameters", 
                        `type`="number"),
                    list(
                        `name`="interpretation", 
                        `title`="Interpretation", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="spatialCorrelation",
                title="Spatial Correlation Structure",
                columns=list(
                    list(
                        `name`="parameter", 
                        `title`="Parameter", 
                        `type`="text"),
                    list(
                        `name`="estimate", 
                        `title`="Estimate", 
                        `type`="number"),
                    list(
                        `name`="ci_lower", 
                        `title`="CI Lower", 
                        `type`="number"),
                    list(
                        `name`="ci_upper", 
                        `title`="CI Upper", 
                        `type`="number"),
                    list(
                        `name`="interpretation", 
                        `title`="Interpretation", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="modelComparison",
                title="Model Comparison Results",
                columns=list(
                    list(
                        `name`="model", 
                        `title`="Model", 
                        `type`="text"),
                    list(
                        `name`="dic", 
                        `title`="DIC", 
                        `type`="number"),
                    list(
                        `name`="waic", 
                        `title`="WAIC", 
                        `type`="number"),
                    list(
                        `name`="loo", 
                        `title`="LOO-CV", 
                        `type`="number"),
                    list(
                        `name`="lpml", 
                        `title`="LPML", 
                        `type`="number"),
                    list(
                        `name`="rank", 
                        `title`="Rank", 
                        `type`="integer"),
                    list(
                        `name`="relative_performance", 
                        `title`="Relative Performance", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="convergenceDiagnostics",
                title="MCMC Convergence Diagnostics",
                columns=list(
                    list(
                        `name`="parameter", 
                        `title`="Parameter", 
                        `type`="text"),
                    list(
                        `name`="rhat", 
                        `title`="R\u0302", 
                        `type`="number"),
                    list(
                        `name`="ess_bulk", 
                        `title`="Bulk ESS", 
                        `type`="integer"),
                    list(
                        `name`="ess_tail", 
                        `title`="Tail ESS", 
                        `type`="integer"),
                    list(
                        `name`="mcse", 
                        `title`="Monte Carlo SE", 
                        `type`="number"),
                    list(
                        `name`="convergence_status", 
                        `title`="Convergence Status", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="survivalPredictions",
                title="Spatial Survival Predictions",
                columns=list(
                    list(
                        `name`="location", 
                        `title`="Location", 
                        `type`="text"),
                    list(
                        `name`="time_point", 
                        `title`="Time Point", 
                        `type`="number"),
                    list(
                        `name`="survival_prob", 
                        `title`="Survival Probability", 
                        `type`="number"),
                    list(
                        `name`="ci_lower", 
                        `title`="CI Lower", 
                        `type`="number"),
                    list(
                        `name`="ci_upper", 
                        `title`="CI Upper", 
                        `type`="number"),
                    list(
                        `name`="hazard_rate", 
                        `title`="Hazard Rate", 
                        `type`="number"),
                    list(
                        `name`="risk_category", 
                        `title`="Risk Category", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="spatialValidation",
                title="Spatial Cross-Validation Results",
                columns=list(
                    list(
                        `name`="fold", 
                        `title`="CV Fold", 
                        `type`="integer"),
                    list(
                        `name`="log_likelihood", 
                        `title`="Log-Likelihood", 
                        `type`="number"),
                    list(
                        `name`="brier_score", 
                        `title`="Brier Score", 
                        `type`="number"),
                    list(
                        `name`="c_index", 
                        `title`="C-Index", 
                        `type`="number"),
                    list(
                        `name`="spatial_correlation", 
                        `title`="Spatial Correlation", 
                        `type`="number"))))
            self$add(jmvcore::Html$new(
                options=options,
                name="clinicalInterpretation",
                title="Clinical Interpretation and Guidelines"))
            self$add(jmvcore::Html$new(
                options=options,
                name="methodsExplanation",
                title="Statistical Methods and Theory"))
            self$add(jmvcore::Image$new(
                options=options,
                name="spatialMaps",
                title="Spatial Distribution Maps",
                width=700,
                height=500,
                renderFun=".plotSpatialMaps"))
            self$add(jmvcore::Image$new(
                options=options,
                name="survivalMaps",
                title="Survival Probability Maps",
                width=700,
                height=500,
                renderFun=".plotSurvivalMaps"))
            self$add(jmvcore::Image$new(
                options=options,
                name="hazardMaps",
                title="Hazard Rate Maps",
                width=700,
                height=500,
                renderFun=".plotHazardMaps"))
            self$add(jmvcore::Image$new(
                options=options,
                name="residualMaps",
                title="Residual Analysis Maps",
                width=700,
                height=500,
                renderFun=".plotResidualMaps"))
            self$add(jmvcore::Image$new(
                options=options,
                name="convergencePlots",
                title="MCMC Convergence Plots",
                width=600,
                height=400,
                renderFun=".plotConvergenceDiagnostics"))
            self$add(jmvcore::Image$new(
                options=options,
                name="posteriorPlots",
                title="Posterior Distribution Plots",
                width=600,
                height=400,
                renderFun=".plotPosteriorDistributions"))
            self$add(jmvcore::Image$new(
                options=options,
                name="spatialCorrelationPlot",
                title="Spatial Correlation Visualization",
                width=500,
                height=400,
                renderFun=".plotSpatialCorrelation"))}))

spatialbayesiansurvivalBase <- if (requireNamespace("jmvcore", quietly=TRUE)) R6::R6Class(
    "spatialbayesiansurvivalBase",
    inherit = jmvcore::Analysis,
    public = list(
        initialize = function(options, data=NULL, datasetId="", analysisId="", revision=0) {
            super$initialize(
                package = "ClinicoPath",
                name = "spatialbayesiansurvival",
                version = c(0,0,31),
                options = options,
                results = spatialbayesiansurvivalResults$new(options=options),
                data = data,
                datasetId = datasetId,
                analysisId = analysisId,
                revision = revision,
                pause = NULL,
                completeWhenFilled = FALSE,
                requiresMissings = FALSE,
                weightsSupport = 'auto')
        }))

#' Spatial Bayesian Survival Analysis
#'
#' Advanced spatial Bayesian survival analysis for modeling geographic 
#' patterns
#' in survival outcomes. Incorporates spatial correlation structures, 
#' disease mapping capabilities, and hierarchical Bayesian modeling for
#' clinical research with geographic components.
#' 
#'
#' @examples
#' # Spatial Bayesian survival analysis
#' spatialbayesiansurvival(
#'     data = clinical_data,
#'     time = "survival_months",
#'     status = "death_indicator",
#'     predictors = c("age", "stage", "treatment"),
#'     spatial_coords = c("latitude", "longitude"),
#'     spatial_model = "car",
#'     mcmc_samples = 5000
#' )
#'
#' @param data The data as a data frame for spatial Bayesian survival
#'   analysis.
#' @param time .
#' @param status .
#' @param statusLevel .
#' @param predictors .
#' @param spatial_coords Longitude and Latitude coordinates (or X, Y
#'   coordinates)
#' @param region_id Administrative region or area identifier
#' @param adjacency_matrix Path to adjacency matrix file or leave empty for
#'   distance-based
#' @param spatial_model .
#' @param spatial_prior .
#' @param distance_method .
#' @param neighborhood_threshold Distance threshold for defining neighbors
#'   (km)
#' @param num_neighbors Number of nearest neighbors to consider
#' @param baseline_hazard .
#' @param piecewise_intervals Number of intervals for piecewise constant
#'   hazard
#' @param spline_knots Number of knots for B-spline baseline hazard
#' @param mcmc_samples .
#' @param mcmc_burnin .
#' @param mcmc_thin .
#' @param mcmc_chains .
#' @param covariate_priors .
#' @param covariate_prior_sd .
#' @param spatial_precision_prior .
#' @param spatial_precision_shape .
#' @param spatial_precision_rate .
#' @param model_comparison .
#' @param cross_validation .
#' @param cv_folds .
#' @param model_selection_criteria .
#' @param spatial_prediction .
#' @param prediction_grid_size .
#' @param prediction_time_points Comma-separated list of time points for
#'   prediction
#' @param confidence_level .
#' @param show_model_summary .
#' @param show_parameter_estimates .
#' @param show_spatial_effects .
#' @param show_residual_maps .
#' @param show_survival_maps .
#' @param show_hazard_maps .
#' @param show_convergence_diagnostics .
#' @param show_model_comparison .
#' @param show_interpretation .
#' @param standardize_predictors .
#' @param include_intercept .
#' @param missing_data_handling .
#' @param parallel_processing .
#' @param n_cores .
#' @param clinical_context .
#' @param set_seed .
#' @param seed_value .
#' @return A results object containing:
#' \tabular{llllll}{
#'   \code{results$modelSummary} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$parameterEstimates} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$spatialEffects} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$modelFit} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$spatialCorrelation} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$modelComparison} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$convergenceDiagnostics} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$survivalPredictions} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$spatialValidation} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$clinicalInterpretation} \tab \tab \tab \tab \tab a html \cr
#'   \code{results$methodsExplanation} \tab \tab \tab \tab \tab a html \cr
#'   \code{results$spatialMaps} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$survivalMaps} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$hazardMaps} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$residualMaps} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$convergencePlots} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$posteriorPlots} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$spatialCorrelationPlot} \tab \tab \tab \tab \tab an image \cr
#' }
#'
#' Tables can be converted to data frames with \code{asDF} or \code{\link{as.data.frame}}. For example:
#'
#' \code{results$modelSummary$asDF}
#'
#' \code{as.data.frame(results$modelSummary)}
#'
#' @export
spatialbayesiansurvival <- function(
    data,
    time,
    status,
    statusLevel,
    predictors,
    spatial_coords,
    region_id = NULL,
    adjacency_matrix = "",
    spatial_model = "car",
    spatial_prior = "icar",
    distance_method = "great_circle",
    neighborhood_threshold = 50,
    num_neighbors = 5,
    baseline_hazard = "weibull",
    piecewise_intervals = 5,
    spline_knots = 5,
    mcmc_samples = 5000,
    mcmc_burnin = 2000,
    mcmc_thin = 1,
    mcmc_chains = 3,
    covariate_priors = "normal_weak",
    covariate_prior_sd = 10,
    spatial_precision_prior = "gamma",
    spatial_precision_shape = 1,
    spatial_precision_rate = 0.5,
    model_comparison = TRUE,
    cross_validation = FALSE,
    cv_folds = 5,
    model_selection_criteria = "dic",
    spatial_prediction = TRUE,
    prediction_grid_size = 50,
    prediction_time_points = "12,24,36,60",
    confidence_level = 0.95,
    show_model_summary = TRUE,
    show_parameter_estimates = TRUE,
    show_spatial_effects = TRUE,
    show_residual_maps = TRUE,
    show_survival_maps = TRUE,
    show_hazard_maps = FALSE,
    show_convergence_diagnostics = TRUE,
    show_model_comparison = TRUE,
    show_interpretation = TRUE,
    standardize_predictors = TRUE,
    include_intercept = TRUE,
    missing_data_handling = "complete_cases",
    parallel_processing = TRUE,
    n_cores = 2,
    clinical_context = "cancer_epidemiology",
    set_seed = TRUE,
    seed_value = 42) {

    if ( ! requireNamespace("jmvcore", quietly=TRUE))
        stop("spatialbayesiansurvival requires jmvcore to be installed (restart may be required)")

    if ( ! missing(time)) time <- jmvcore::resolveQuo(jmvcore::enquo(time))
    if ( ! missing(status)) status <- jmvcore::resolveQuo(jmvcore::enquo(status))
    if ( ! missing(predictors)) predictors <- jmvcore::resolveQuo(jmvcore::enquo(predictors))
    if ( ! missing(spatial_coords)) spatial_coords <- jmvcore::resolveQuo(jmvcore::enquo(spatial_coords))
    if ( ! missing(region_id)) region_id <- jmvcore::resolveQuo(jmvcore::enquo(region_id))
    if (missing(data))
        data <- jmvcore::marshalData(
            parent.frame(),
            `if`( ! missing(time), time, NULL),
            `if`( ! missing(status), status, NULL),
            `if`( ! missing(predictors), predictors, NULL),
            `if`( ! missing(spatial_coords), spatial_coords, NULL),
            `if`( ! missing(region_id), region_id, NULL))


    options <- spatialbayesiansurvivalOptions$new(
        time = time,
        status = status,
        statusLevel = statusLevel,
        predictors = predictors,
        spatial_coords = spatial_coords,
        region_id = region_id,
        adjacency_matrix = adjacency_matrix,
        spatial_model = spatial_model,
        spatial_prior = spatial_prior,
        distance_method = distance_method,
        neighborhood_threshold = neighborhood_threshold,
        num_neighbors = num_neighbors,
        baseline_hazard = baseline_hazard,
        piecewise_intervals = piecewise_intervals,
        spline_knots = spline_knots,
        mcmc_samples = mcmc_samples,
        mcmc_burnin = mcmc_burnin,
        mcmc_thin = mcmc_thin,
        mcmc_chains = mcmc_chains,
        covariate_priors = covariate_priors,
        covariate_prior_sd = covariate_prior_sd,
        spatial_precision_prior = spatial_precision_prior,
        spatial_precision_shape = spatial_precision_shape,
        spatial_precision_rate = spatial_precision_rate,
        model_comparison = model_comparison,
        cross_validation = cross_validation,
        cv_folds = cv_folds,
        model_selection_criteria = model_selection_criteria,
        spatial_prediction = spatial_prediction,
        prediction_grid_size = prediction_grid_size,
        prediction_time_points = prediction_time_points,
        confidence_level = confidence_level,
        show_model_summary = show_model_summary,
        show_parameter_estimates = show_parameter_estimates,
        show_spatial_effects = show_spatial_effects,
        show_residual_maps = show_residual_maps,
        show_survival_maps = show_survival_maps,
        show_hazard_maps = show_hazard_maps,
        show_convergence_diagnostics = show_convergence_diagnostics,
        show_model_comparison = show_model_comparison,
        show_interpretation = show_interpretation,
        standardize_predictors = standardize_predictors,
        include_intercept = include_intercept,
        missing_data_handling = missing_data_handling,
        parallel_processing = parallel_processing,
        n_cores = n_cores,
        clinical_context = clinical_context,
        set_seed = set_seed,
        seed_value = seed_value)

    analysis <- spatialbayesiansurvivalClass$new(
        options = options,
        data = data)

    analysis$run()

    analysis$results
}

