
# This file is automatically generated, you probably don't want to edit this

robustaftOptions <- if (requireNamespace("jmvcore", quietly=TRUE)) R6::R6Class(
    "robustaftOptions",
    inherit = jmvcore::Options,
    public = list(
        initialize = function(
            elapsedtime = NULL,
            outcome = NULL,
            covariates = NULL,
            outcomeLevel = "1",
            distribution = "weibull",
            robust_method = "huber",
            tuning_constant = 1.345,
            efficiency_target = 0.95,
            scale_estimation = "mad",
            stratify_variable = NULL,
            weights_variable = NULL,
            confidence_level = 0.95,
            max_iterations = 100,
            convergence_tolerance = 0.000001,
            outlier_detection = TRUE,
            outlier_threshold = 2.5,
            bootstrap_ci = FALSE,
            bootstrap_samples = 500,
            show_model_summary = TRUE,
            show_coefficients = TRUE,
            show_outliers = TRUE,
            show_diagnostics = TRUE,
            show_comparison = TRUE,
            show_residual_plots = TRUE,
            show_outlier_plots = TRUE,
            show_survival_plots = TRUE,
            show_qq_plots = TRUE,
            showSummaries = FALSE,
            showExplanations = FALSE, ...) {

            super$initialize(
                package="ClinicoPath",
                name="robustaft",
                requiresData=TRUE,
                ...)

            private$..elapsedtime <- jmvcore::OptionVariable$new(
                "elapsedtime",
                elapsedtime,
                suggested=list(
                    "continuous"),
                permitted=list(
                    "numeric"))
            private$..outcome <- jmvcore::OptionVariable$new(
                "outcome",
                outcome,
                suggested=list(
                    "nominal",
                    "ordinal"),
                permitted=list(
                    "factor",
                    "numeric"))
            private$..covariates <- jmvcore::OptionVariables$new(
                "covariates",
                covariates,
                suggested=list(
                    "continuous",
                    "nominal",
                    "ordinal"),
                permitted=list(
                    "numeric",
                    "factor"))
            private$..outcomeLevel <- jmvcore::OptionString$new(
                "outcomeLevel",
                outcomeLevel,
                default="1")
            private$..distribution <- jmvcore::OptionList$new(
                "distribution",
                distribution,
                options=list(
                    "weibull",
                    "exponential",
                    "lognormal",
                    "loglogistic",
                    "gamma",
                    "gaussian"),
                default="weibull")
            private$..robust_method <- jmvcore::OptionList$new(
                "robust_method",
                robust_method,
                options=list(
                    "huber",
                    "tukey",
                    "hampel",
                    "andrews",
                    "median",
                    "lad"),
                default="huber")
            private$..tuning_constant <- jmvcore::OptionNumber$new(
                "tuning_constant",
                tuning_constant,
                min=0.1,
                max=5,
                default=1.345)
            private$..efficiency_target <- jmvcore::OptionNumber$new(
                "efficiency_target",
                efficiency_target,
                min=0.5,
                max=0.99,
                default=0.95)
            private$..scale_estimation <- jmvcore::OptionList$new(
                "scale_estimation",
                scale_estimation,
                options=list(
                    "mad",
                    "qn",
                    "sn",
                    "tau",
                    "huber"),
                default="mad")
            private$..stratify_variable <- jmvcore::OptionVariable$new(
                "stratify_variable",
                stratify_variable,
                permitted=list(
                    "factor",
                    "numeric"))
            private$..weights_variable <- jmvcore::OptionVariable$new(
                "weights_variable",
                weights_variable,
                permitted=list(
                    "numeric"))
            private$..confidence_level <- jmvcore::OptionNumber$new(
                "confidence_level",
                confidence_level,
                min=0.5,
                max=0.99,
                default=0.95)
            private$..max_iterations <- jmvcore::OptionNumber$new(
                "max_iterations",
                max_iterations,
                min=10,
                max=1000,
                default=100)
            private$..convergence_tolerance <- jmvcore::OptionNumber$new(
                "convergence_tolerance",
                convergence_tolerance,
                min=1e-8,
                max=0.01,
                default=0.000001)
            private$..outlier_detection <- jmvcore::OptionBool$new(
                "outlier_detection",
                outlier_detection,
                default=TRUE)
            private$..outlier_threshold <- jmvcore::OptionNumber$new(
                "outlier_threshold",
                outlier_threshold,
                min=1,
                max=5,
                default=2.5)
            private$..bootstrap_ci <- jmvcore::OptionBool$new(
                "bootstrap_ci",
                bootstrap_ci,
                default=FALSE)
            private$..bootstrap_samples <- jmvcore::OptionNumber$new(
                "bootstrap_samples",
                bootstrap_samples,
                min=100,
                max=2000,
                default=500)
            private$..show_model_summary <- jmvcore::OptionBool$new(
                "show_model_summary",
                show_model_summary,
                default=TRUE)
            private$..show_coefficients <- jmvcore::OptionBool$new(
                "show_coefficients",
                show_coefficients,
                default=TRUE)
            private$..show_outliers <- jmvcore::OptionBool$new(
                "show_outliers",
                show_outliers,
                default=TRUE)
            private$..show_diagnostics <- jmvcore::OptionBool$new(
                "show_diagnostics",
                show_diagnostics,
                default=TRUE)
            private$..show_comparison <- jmvcore::OptionBool$new(
                "show_comparison",
                show_comparison,
                default=TRUE)
            private$..show_residual_plots <- jmvcore::OptionBool$new(
                "show_residual_plots",
                show_residual_plots,
                default=TRUE)
            private$..show_outlier_plots <- jmvcore::OptionBool$new(
                "show_outlier_plots",
                show_outlier_plots,
                default=TRUE)
            private$..show_survival_plots <- jmvcore::OptionBool$new(
                "show_survival_plots",
                show_survival_plots,
                default=TRUE)
            private$..show_qq_plots <- jmvcore::OptionBool$new(
                "show_qq_plots",
                show_qq_plots,
                default=TRUE)
            private$..showSummaries <- jmvcore::OptionBool$new(
                "showSummaries",
                showSummaries,
                default=FALSE)
            private$..showExplanations <- jmvcore::OptionBool$new(
                "showExplanations",
                showExplanations,
                default=FALSE)

            self$.addOption(private$..elapsedtime)
            self$.addOption(private$..outcome)
            self$.addOption(private$..covariates)
            self$.addOption(private$..outcomeLevel)
            self$.addOption(private$..distribution)
            self$.addOption(private$..robust_method)
            self$.addOption(private$..tuning_constant)
            self$.addOption(private$..efficiency_target)
            self$.addOption(private$..scale_estimation)
            self$.addOption(private$..stratify_variable)
            self$.addOption(private$..weights_variable)
            self$.addOption(private$..confidence_level)
            self$.addOption(private$..max_iterations)
            self$.addOption(private$..convergence_tolerance)
            self$.addOption(private$..outlier_detection)
            self$.addOption(private$..outlier_threshold)
            self$.addOption(private$..bootstrap_ci)
            self$.addOption(private$..bootstrap_samples)
            self$.addOption(private$..show_model_summary)
            self$.addOption(private$..show_coefficients)
            self$.addOption(private$..show_outliers)
            self$.addOption(private$..show_diagnostics)
            self$.addOption(private$..show_comparison)
            self$.addOption(private$..show_residual_plots)
            self$.addOption(private$..show_outlier_plots)
            self$.addOption(private$..show_survival_plots)
            self$.addOption(private$..show_qq_plots)
            self$.addOption(private$..showSummaries)
            self$.addOption(private$..showExplanations)
        }),
    active = list(
        elapsedtime = function() private$..elapsedtime$value,
        outcome = function() private$..outcome$value,
        covariates = function() private$..covariates$value,
        outcomeLevel = function() private$..outcomeLevel$value,
        distribution = function() private$..distribution$value,
        robust_method = function() private$..robust_method$value,
        tuning_constant = function() private$..tuning_constant$value,
        efficiency_target = function() private$..efficiency_target$value,
        scale_estimation = function() private$..scale_estimation$value,
        stratify_variable = function() private$..stratify_variable$value,
        weights_variable = function() private$..weights_variable$value,
        confidence_level = function() private$..confidence_level$value,
        max_iterations = function() private$..max_iterations$value,
        convergence_tolerance = function() private$..convergence_tolerance$value,
        outlier_detection = function() private$..outlier_detection$value,
        outlier_threshold = function() private$..outlier_threshold$value,
        bootstrap_ci = function() private$..bootstrap_ci$value,
        bootstrap_samples = function() private$..bootstrap_samples$value,
        show_model_summary = function() private$..show_model_summary$value,
        show_coefficients = function() private$..show_coefficients$value,
        show_outliers = function() private$..show_outliers$value,
        show_diagnostics = function() private$..show_diagnostics$value,
        show_comparison = function() private$..show_comparison$value,
        show_residual_plots = function() private$..show_residual_plots$value,
        show_outlier_plots = function() private$..show_outlier_plots$value,
        show_survival_plots = function() private$..show_survival_plots$value,
        show_qq_plots = function() private$..show_qq_plots$value,
        showSummaries = function() private$..showSummaries$value,
        showExplanations = function() private$..showExplanations$value),
    private = list(
        ..elapsedtime = NA,
        ..outcome = NA,
        ..covariates = NA,
        ..outcomeLevel = NA,
        ..distribution = NA,
        ..robust_method = NA,
        ..tuning_constant = NA,
        ..efficiency_target = NA,
        ..scale_estimation = NA,
        ..stratify_variable = NA,
        ..weights_variable = NA,
        ..confidence_level = NA,
        ..max_iterations = NA,
        ..convergence_tolerance = NA,
        ..outlier_detection = NA,
        ..outlier_threshold = NA,
        ..bootstrap_ci = NA,
        ..bootstrap_samples = NA,
        ..show_model_summary = NA,
        ..show_coefficients = NA,
        ..show_outliers = NA,
        ..show_diagnostics = NA,
        ..show_comparison = NA,
        ..show_residual_plots = NA,
        ..show_outlier_plots = NA,
        ..show_survival_plots = NA,
        ..show_qq_plots = NA,
        ..showSummaries = NA,
        ..showExplanations = NA)
)

robustaftResults <- if (requireNamespace("jmvcore", quietly=TRUE)) R6::R6Class(
    "robustaftResults",
    inherit = jmvcore::Group,
    active = list(
        modelSummary = function() private$.items[["modelSummary"]],
        coefficients = function() private$.items[["coefficients"]],
        outlierAnalysis = function() private$.items[["outlierAnalysis"]],
        diagnostics = function() private$.items[["diagnostics"]],
        modelComparison = function() private$.items[["modelComparison"]],
        robustnessInfo = function() private$.items[["robustnessInfo"]],
        scaleEstimates = function() private$.items[["scaleEstimates"]],
        outlierTable = function() private$.items[["outlierTable"]],
        residualPlots = function() private$.items[["residualPlots"]],
        outlierPlots = function() private$.items[["outlierPlots"]],
        survivalPlots = function() private$.items[["survivalPlots"]],
        qqPlots = function() private$.items[["qqPlots"]],
        summaryTable = function() private$.items[["summaryTable"]],
        methodExplanation = function() private$.items[["methodExplanation"]]),
    private = list(),
    public=list(
        initialize=function(options) {
            super$initialize(
                options=options,
                name="",
                title="Robust AFT Models")
            self$add(jmvcore::Table$new(
                options=options,
                name="modelSummary",
                title="Model Summary",
                visible="(show_model_summary)",
                columns=list(
                    list(
                        `name`="term", 
                        `title`="", 
                        `type`="text"),
                    list(
                        `name`="value", 
                        `title`="Value", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="coefficients",
                title="Robust AFT Coefficients",
                visible="(show_coefficients)",
                columns=list(
                    list(
                        `name`="term", 
                        `title`="Term", 
                        `type`="text"),
                    list(
                        `name`="estimate", 
                        `title`="Estimate", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="robust_se", 
                        `title`="Robust SE", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="z", 
                        `title`="z", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="pvalue", 
                        `title`="p-value", 
                        `type`="number", 
                        `format`="zto,pvalue"),
                    list(
                        `name`="ciLower", 
                        `title`="Lower CI", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="ciUpper", 
                        `title`="Upper CI", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="acceleration_factor", 
                        `title`="AF", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="af_lower", 
                        `title`="AF Lower", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="af_upper", 
                        `title`="AF Upper", 
                        `type`="number", 
                        `format`="zto"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="outlierAnalysis",
                title="Outlier Detection",
                visible="(show_outliers)",
                columns=list(
                    list(
                        `name`="statistic", 
                        `title`="Statistic", 
                        `type`="text"),
                    list(
                        `name`="value", 
                        `title`="Value", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="interpretation", 
                        `title`="Interpretation", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="diagnostics",
                title="Model Diagnostics",
                visible="(show_diagnostics)",
                columns=list(
                    list(
                        `name`="measure", 
                        `title`="Measure", 
                        `type`="text"),
                    list(
                        `name`="robust_value", 
                        `title`="Robust Value", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="standard_value", 
                        `title`="Standard Value", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="interpretation", 
                        `title`="Interpretation", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="modelComparison",
                title="Model Comparison",
                visible="(show_comparison)",
                columns=list(
                    list(
                        `name`="model", 
                        `title`="Model", 
                        `type`="text"),
                    list(
                        `name`="loglik", 
                        `title`="Log-Likelihood", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="aic", 
                        `title`="AIC", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="bic", 
                        `title`="BIC", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="efficiency", 
                        `title`="Efficiency", 
                        `type`="number", 
                        `format`="zto,pc"),
                    list(
                        `name`="breakdown_point", 
                        `title`="Breakdown Point", 
                        `type`="number", 
                        `format`="zto,pc"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="robustnessInfo",
                title="Robustness Information",
                visible="(show_model_summary)",
                columns=list(
                    list(
                        `name`="criterion", 
                        `title`="Criterion", 
                        `type`="text"),
                    list(
                        `name`="value", 
                        `title`="Value", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="scaleEstimates",
                title="Scale Parameter Estimates",
                visible="(show_coefficients)",
                columns=list(
                    list(
                        `name`="parameter", 
                        `title`="Parameter", 
                        `type`="text"),
                    list(
                        `name`="robust_estimate", 
                        `title`="Robust Estimate", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="standard_estimate", 
                        `title`="Standard Estimate", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="relative_efficiency", 
                        `title`="Relative Efficiency", 
                        `type`="number", 
                        `format`="zto,pc"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="outlierTable",
                title="Identified Outliers",
                visible="(show_outliers)",
                columns=list(
                    list(
                        `name`="observation", 
                        `title`="Observation", 
                        `type`="integer"),
                    list(
                        `name`="residual", 
                        `title`="Residual", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="weight", 
                        `title`="Weight", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="influence", 
                        `title`="Influence", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="outlier_type", 
                        `title`="Outlier Type", 
                        `type`="text"))))
            self$add(jmvcore::Image$new(
                options=options,
                name="residualPlots",
                title="Residual Diagnostic Plots",
                visible="(show_residual_plots)",
                width=800,
                height=600))
            self$add(jmvcore::Image$new(
                options=options,
                name="outlierPlots",
                title="Outlier Identification Plots",
                visible="(show_outlier_plots)",
                width=800,
                height=600))
            self$add(jmvcore::Image$new(
                options=options,
                name="survivalPlots",
                title="Survival Curves",
                visible="(show_survival_plots)",
                width=800,
                height=600))
            self$add(jmvcore::Image$new(
                options=options,
                name="qqPlots",
                title="Q-Q Plots",
                visible="(show_qq_plots)",
                width=800,
                height=600))
            self$add(jmvcore::Html$new(
                options=options,
                name="summaryTable",
                title="Analysis Summary",
                visible="(showSummaries)"))
            self$add(jmvcore::Html$new(
                options=options,
                name="methodExplanation",
                title="Method Explanation",
                visible="(showExplanations)"))}))

robustaftBase <- if (requireNamespace("jmvcore", quietly=TRUE)) R6::R6Class(
    "robustaftBase",
    inherit = jmvcore::Analysis,
    public = list(
        initialize = function(options, data=NULL, datasetId="", analysisId="", revision=0) {
            super$initialize(
                package = "ClinicoPath",
                name = "robustaft",
                version = c(1,0,0),
                options = options,
                results = robustaftResults$new(options=options),
                data = data,
                datasetId = datasetId,
                analysisId = analysisId,
                revision = revision,
                pause = NULL,
                completeWhenFilled = FALSE,
                requiresMissings = FALSE,
                weightsSupport = 'auto')
        }))

#' Robust AFT Models
#'
#' Implements robust accelerated failure time (AFT) models with M-estimation 
#' and resistant estimators. Provides outlier-resistant estimation for 
#' parametric survival models when standard AFT models are sensitive to 
#' extreme observations or model misspecification, ensuring reliable parameter 
#' estimates in challenging clinical datasets.
#'
#' @examples
#' # Example: Robust AFT model with Weibull distribution
#' library(survival)
#' library(RobustAFT)
#'
#' robustaft(
#'     data = clinical_data,
#'     elapsedtime = "time",
#'     outcome = "status",
#'     outcomeLevel = "1",
#'     covariates = c("age", "treatment", "biomarker"),
#'     distribution = "weibull",
#'     robust_method = "huber",
#'     tuning_constant = 1.345
#' )
#'
#' @param data the data as a data frame
#' @param elapsedtime Survival time or follow-up duration variable
#' @param outcome Event indicator variable (0/1, FALSE/TRUE, or factor)
#' @param covariates Predictor variables for the AFT model
#' @param outcomeLevel Level of outcome variable indicating event occurrence
#' @param distribution Parametric distribution for AFT model
#' @param robust_method Robust estimation method for outlier resistance
#' @param tuning_constant Tuning constant controlling robustness vs efficiency
#' @param efficiency_target Target efficiency relative to non-robust estimator
#' @param scale_estimation Method for robust scale estimation
#' @param stratify_variable Variable for stratified analysis
#' @param weights_variable Observation weights variable
#' @param confidence_level Confidence level for intervals
#' @param max_iterations Maximum number of iterations
#' @param convergence_tolerance Convergence tolerance for estimation
#' @param outlier_detection Automatically detect and flag outliers
#' @param outlier_threshold Threshold for outlier detection
#' @param bootstrap_ci Compute bootstrap confidence intervals
#' @param bootstrap_samples Number of bootstrap samples
#' @param show_model_summary Display comprehensive model summary
#' @param show_coefficients Display coefficient estimates table
#' @param show_outliers Display outlier detection results
#' @param show_diagnostics Display model diagnostics
#' @param show_comparison Compare robust vs standard AFT models
#' @param show_residual_plots Display residual diagnostic plots
#' @param show_outlier_plots Display outlier identification plots
#' @param show_survival_plots Display survival curves
#' @param show_qq_plots Display quantile-quantile plots
#' @param showSummaries Generate natural language summaries
#' @param showExplanations Show detailed methodology explanations
#' @return A results object containing:
#' \tabular{llllll}{
#'   \code{results$modelSummary} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$coefficients} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$outlierAnalysis} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$diagnostics} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$modelComparison} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$robustnessInfo} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$scaleEstimates} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$outlierTable} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$residualPlots} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$outlierPlots} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$survivalPlots} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$qqPlots} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$summaryTable} \tab \tab \tab \tab \tab a html \cr
#'   \code{results$methodExplanation} \tab \tab \tab \tab \tab a html \cr
#' }
#'
#' Tables can be converted to data frames with \code{asDF} or \code{\link{as.data.frame}}. For example:
#'
#' \code{results$modelSummary$asDF}
#'
#' \code{as.data.frame(results$modelSummary)}
#'
#' @export
robustaft <- function(
    data,
    elapsedtime,
    outcome,
    covariates,
    outcomeLevel = "1",
    distribution = "weibull",
    robust_method = "huber",
    tuning_constant = 1.345,
    efficiency_target = 0.95,
    scale_estimation = "mad",
    stratify_variable,
    weights_variable,
    confidence_level = 0.95,
    max_iterations = 100,
    convergence_tolerance = 0.000001,
    outlier_detection = TRUE,
    outlier_threshold = 2.5,
    bootstrap_ci = FALSE,
    bootstrap_samples = 500,
    show_model_summary = TRUE,
    show_coefficients = TRUE,
    show_outliers = TRUE,
    show_diagnostics = TRUE,
    show_comparison = TRUE,
    show_residual_plots = TRUE,
    show_outlier_plots = TRUE,
    show_survival_plots = TRUE,
    show_qq_plots = TRUE,
    showSummaries = FALSE,
    showExplanations = FALSE) {

    if ( ! requireNamespace("jmvcore", quietly=TRUE))
        stop("robustaft requires jmvcore to be installed (restart may be required)")

    if ( ! missing(elapsedtime)) elapsedtime <- jmvcore::resolveQuo(jmvcore::enquo(elapsedtime))
    if ( ! missing(outcome)) outcome <- jmvcore::resolveQuo(jmvcore::enquo(outcome))
    if ( ! missing(covariates)) covariates <- jmvcore::resolveQuo(jmvcore::enquo(covariates))
    if ( ! missing(stratify_variable)) stratify_variable <- jmvcore::resolveQuo(jmvcore::enquo(stratify_variable))
    if ( ! missing(weights_variable)) weights_variable <- jmvcore::resolveQuo(jmvcore::enquo(weights_variable))
    if (missing(data))
        data <- jmvcore::marshalData(
            parent.frame(),
            `if`( ! missing(elapsedtime), elapsedtime, NULL),
            `if`( ! missing(outcome), outcome, NULL),
            `if`( ! missing(covariates), covariates, NULL),
            `if`( ! missing(stratify_variable), stratify_variable, NULL),
            `if`( ! missing(weights_variable), weights_variable, NULL))


    options <- robustaftOptions$new(
        elapsedtime = elapsedtime,
        outcome = outcome,
        covariates = covariates,
        outcomeLevel = outcomeLevel,
        distribution = distribution,
        robust_method = robust_method,
        tuning_constant = tuning_constant,
        efficiency_target = efficiency_target,
        scale_estimation = scale_estimation,
        stratify_variable = stratify_variable,
        weights_variable = weights_variable,
        confidence_level = confidence_level,
        max_iterations = max_iterations,
        convergence_tolerance = convergence_tolerance,
        outlier_detection = outlier_detection,
        outlier_threshold = outlier_threshold,
        bootstrap_ci = bootstrap_ci,
        bootstrap_samples = bootstrap_samples,
        show_model_summary = show_model_summary,
        show_coefficients = show_coefficients,
        show_outliers = show_outliers,
        show_diagnostics = show_diagnostics,
        show_comparison = show_comparison,
        show_residual_plots = show_residual_plots,
        show_outlier_plots = show_outlier_plots,
        show_survival_plots = show_survival_plots,
        show_qq_plots = show_qq_plots,
        showSummaries = showSummaries,
        showExplanations = showExplanations)

    analysis <- robustaftClass$new(
        options = options,
        data = data)

    analysis$run()

    analysis$results
}

