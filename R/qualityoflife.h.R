
# This file is automatically generated, you probably don't want to edit this

qualityoflifeOptions <- if (requireNamespace("jmvcore", quietly=TRUE)) R6::R6Class(
    "qualityoflifeOptions",
    inherit = jmvcore::Options,
    public = list(
        initialize = function(
            physical_function_items = NULL,
            role_physical_items = NULL,
            bodily_pain_items = NULL,
            general_health_items = NULL,
            vitality_items = NULL,
            social_function_items = NULL,
            role_emotional_items = NULL,
            mental_health_items = NULL,
            symptom_items = NULL,
            functional_items = NULL,
            global_qol_items = NULL,
            patient_id = NULL,
            time_var = NULL,
            group_var = NULL,
            clinical_vars = NULL,
            instrument_type = "sf36",
            scoring_algorithm = "standard",
            reference_population = "general_us",
            missing_domain_threshold = 0.5,
            imputation_method = "person_mean",
            quality_control = TRUE,
            response_pattern_analysis = TRUE,
            clinical_interpretation = TRUE,
            minimally_important_difference = TRUE,
            mid_values = "",
            ceiling_floor_analysis = TRUE,
            health_utilities = FALSE,
            utility_algorithm = "sf6d",
            longitudinal_analysis = FALSE,
            change_analysis = "simple_change",
            baseline_adjustment = TRUE,
            time_to_deterioration = FALSE,
            group_comparisons = FALSE,
            comparison_domains = "all_domains",
            statistical_test = "t_test",
            multiple_testing_correction = "fdr",
            domain_correlations = TRUE,
            clinical_correlations = FALSE,
            predictive_modeling = FALSE,
            factor_analysis = FALSE,
            clustering_analysis = FALSE,
            health_economics = FALSE,
            qaly_calculation = FALSE,
            cost_effectiveness = FALSE,
            cost_variables = NULL,
            comprehensive_report = TRUE,
            domain_profiles = FALSE,
            population_norms_comparison = TRUE,
            clinical_cutoffs = TRUE,
            save_domain_scores = FALSE,
            save_utility_scores = FALSE,
            regulatory_documentation = TRUE, ...) {

            super$initialize(
                package="ClinicoPath",
                name="qualityoflife",
                requiresData=TRUE,
                ...)

            private$..physical_function_items <- jmvcore::OptionVariables$new(
                "physical_function_items",
                physical_function_items,
                suggested=list(
                    "continuous",
                    "ordinal"),
                permitted=list(
                    "numeric",
                    "factor"))
            private$..role_physical_items <- jmvcore::OptionVariables$new(
                "role_physical_items",
                role_physical_items,
                suggested=list(
                    "continuous",
                    "ordinal"),
                permitted=list(
                    "numeric",
                    "factor"))
            private$..bodily_pain_items <- jmvcore::OptionVariables$new(
                "bodily_pain_items",
                bodily_pain_items,
                suggested=list(
                    "continuous",
                    "ordinal"),
                permitted=list(
                    "numeric",
                    "factor"))
            private$..general_health_items <- jmvcore::OptionVariables$new(
                "general_health_items",
                general_health_items,
                suggested=list(
                    "continuous",
                    "ordinal"),
                permitted=list(
                    "numeric",
                    "factor"))
            private$..vitality_items <- jmvcore::OptionVariables$new(
                "vitality_items",
                vitality_items,
                suggested=list(
                    "continuous",
                    "ordinal"),
                permitted=list(
                    "numeric",
                    "factor"))
            private$..social_function_items <- jmvcore::OptionVariables$new(
                "social_function_items",
                social_function_items,
                suggested=list(
                    "continuous",
                    "ordinal"),
                permitted=list(
                    "numeric",
                    "factor"))
            private$..role_emotional_items <- jmvcore::OptionVariables$new(
                "role_emotional_items",
                role_emotional_items,
                suggested=list(
                    "continuous",
                    "ordinal"),
                permitted=list(
                    "numeric",
                    "factor"))
            private$..mental_health_items <- jmvcore::OptionVariables$new(
                "mental_health_items",
                mental_health_items,
                suggested=list(
                    "continuous",
                    "ordinal"),
                permitted=list(
                    "numeric",
                    "factor"))
            private$..symptom_items <- jmvcore::OptionVariables$new(
                "symptom_items",
                symptom_items,
                suggested=list(
                    "continuous",
                    "ordinal"),
                permitted=list(
                    "numeric",
                    "factor"))
            private$..functional_items <- jmvcore::OptionVariables$new(
                "functional_items",
                functional_items,
                suggested=list(
                    "continuous",
                    "ordinal"),
                permitted=list(
                    "numeric",
                    "factor"))
            private$..global_qol_items <- jmvcore::OptionVariables$new(
                "global_qol_items",
                global_qol_items,
                suggested=list(
                    "continuous",
                    "ordinal"),
                permitted=list(
                    "numeric",
                    "factor"))
            private$..patient_id <- jmvcore::OptionVariable$new(
                "patient_id",
                patient_id,
                suggested=list(
                    "nominal"),
                permitted=list(
                    "factor",
                    "id"))
            private$..time_var <- jmvcore::OptionVariable$new(
                "time_var",
                time_var,
                suggested=list(
                    "continuous",
                    "ordinal"),
                permitted=list(
                    "numeric",
                    "factor"))
            private$..group_var <- jmvcore::OptionVariable$new(
                "group_var",
                group_var,
                suggested=list(
                    "nominal"),
                permitted=list(
                    "factor"))
            private$..clinical_vars <- jmvcore::OptionVariables$new(
                "clinical_vars",
                clinical_vars,
                suggested=list(
                    "continuous",
                    "nominal"),
                permitted=list(
                    "numeric",
                    "factor"))
            private$..instrument_type <- jmvcore::OptionList$new(
                "instrument_type",
                instrument_type,
                options=list(
                    "sf36",
                    "sf12",
                    "eortc_qlq_c30",
                    "fact_g",
                    "fact_specific",
                    "eq5d",
                    "eq5d5l",
                    "whoqol_bref",
                    "qlq_modules",
                    "custom"),
                default="sf36")
            private$..scoring_algorithm <- jmvcore::OptionList$new(
                "scoring_algorithm",
                scoring_algorithm,
                options=list(
                    "standard",
                    "norm_based",
                    "irt_scoring",
                    "preference_based"),
                default="standard")
            private$..reference_population <- jmvcore::OptionList$new(
                "reference_population",
                reference_population,
                options=list(
                    "general_us",
                    "general_uk",
                    "age_matched",
                    "disease_specific",
                    "none"),
                default="general_us")
            private$..missing_domain_threshold <- jmvcore::OptionNumber$new(
                "missing_domain_threshold",
                missing_domain_threshold,
                min=0.1,
                max=1,
                default=0.5)
            private$..imputation_method <- jmvcore::OptionList$new(
                "imputation_method",
                imputation_method,
                options=list(
                    "none",
                    "person_mean",
                    "domain_mean",
                    "regression",
                    "multiple_imputation"),
                default="person_mean")
            private$..quality_control <- jmvcore::OptionBool$new(
                "quality_control",
                quality_control,
                default=TRUE)
            private$..response_pattern_analysis <- jmvcore::OptionBool$new(
                "response_pattern_analysis",
                response_pattern_analysis,
                default=TRUE)
            private$..clinical_interpretation <- jmvcore::OptionBool$new(
                "clinical_interpretation",
                clinical_interpretation,
                default=TRUE)
            private$..minimally_important_difference <- jmvcore::OptionBool$new(
                "minimally_important_difference",
                minimally_important_difference,
                default=TRUE)
            private$..mid_values <- jmvcore::OptionString$new(
                "mid_values",
                mid_values,
                default="")
            private$..ceiling_floor_analysis <- jmvcore::OptionBool$new(
                "ceiling_floor_analysis",
                ceiling_floor_analysis,
                default=TRUE)
            private$..health_utilities <- jmvcore::OptionBool$new(
                "health_utilities",
                health_utilities,
                default=FALSE)
            private$..utility_algorithm <- jmvcore::OptionList$new(
                "utility_algorithm",
                utility_algorithm,
                options=list(
                    "sf6d",
                    "eq5d_uk",
                    "eq5d_us",
                    "hui3",
                    "custom"),
                default="sf6d")
            private$..longitudinal_analysis <- jmvcore::OptionBool$new(
                "longitudinal_analysis",
                longitudinal_analysis,
                default=FALSE)
            private$..change_analysis <- jmvcore::OptionList$new(
                "change_analysis",
                change_analysis,
                options=list(
                    "simple_change",
                    "reliable_change",
                    "effect_size",
                    "mixed_models",
                    "trajectory_analysis"),
                default="simple_change")
            private$..baseline_adjustment <- jmvcore::OptionBool$new(
                "baseline_adjustment",
                baseline_adjustment,
                default=TRUE)
            private$..time_to_deterioration <- jmvcore::OptionBool$new(
                "time_to_deterioration",
                time_to_deterioration,
                default=FALSE)
            private$..group_comparisons <- jmvcore::OptionBool$new(
                "group_comparisons",
                group_comparisons,
                default=FALSE)
            private$..comparison_domains <- jmvcore::OptionList$new(
                "comparison_domains",
                comparison_domains,
                options=list(
                    "all_domains",
                    "summary_scores",
                    "selected_domains"),
                default="all_domains")
            private$..statistical_test <- jmvcore::OptionList$new(
                "statistical_test",
                statistical_test,
                options=list(
                    "t_test",
                    "wilcoxon",
                    "anova",
                    "kruskal_wallis",
                    "ancova",
                    "mixed_models"),
                default="t_test")
            private$..multiple_testing_correction <- jmvcore::OptionList$new(
                "multiple_testing_correction",
                multiple_testing_correction,
                options=list(
                    "none",
                    "bonferroni",
                    "holm",
                    "fdr",
                    "hochberg"),
                default="fdr")
            private$..domain_correlations <- jmvcore::OptionBool$new(
                "domain_correlations",
                domain_correlations,
                default=TRUE)
            private$..clinical_correlations <- jmvcore::OptionBool$new(
                "clinical_correlations",
                clinical_correlations,
                default=FALSE)
            private$..predictive_modeling <- jmvcore::OptionBool$new(
                "predictive_modeling",
                predictive_modeling,
                default=FALSE)
            private$..factor_analysis <- jmvcore::OptionBool$new(
                "factor_analysis",
                factor_analysis,
                default=FALSE)
            private$..clustering_analysis <- jmvcore::OptionBool$new(
                "clustering_analysis",
                clustering_analysis,
                default=FALSE)
            private$..health_economics <- jmvcore::OptionBool$new(
                "health_economics",
                health_economics,
                default=FALSE)
            private$..qaly_calculation <- jmvcore::OptionBool$new(
                "qaly_calculation",
                qaly_calculation,
                default=FALSE)
            private$..cost_effectiveness <- jmvcore::OptionBool$new(
                "cost_effectiveness",
                cost_effectiveness,
                default=FALSE)
            private$..cost_variables <- jmvcore::OptionVariables$new(
                "cost_variables",
                cost_variables,
                suggested=list(
                    "continuous"),
                permitted=list(
                    "numeric"))
            private$..comprehensive_report <- jmvcore::OptionBool$new(
                "comprehensive_report",
                comprehensive_report,
                default=TRUE)
            private$..domain_profiles <- jmvcore::OptionBool$new(
                "domain_profiles",
                domain_profiles,
                default=FALSE)
            private$..population_norms_comparison <- jmvcore::OptionBool$new(
                "population_norms_comparison",
                population_norms_comparison,
                default=TRUE)
            private$..clinical_cutoffs <- jmvcore::OptionBool$new(
                "clinical_cutoffs",
                clinical_cutoffs,
                default=TRUE)
            private$..save_domain_scores <- jmvcore::OptionBool$new(
                "save_domain_scores",
                save_domain_scores,
                default=FALSE)
            private$..save_utility_scores <- jmvcore::OptionBool$new(
                "save_utility_scores",
                save_utility_scores,
                default=FALSE)
            private$..regulatory_documentation <- jmvcore::OptionBool$new(
                "regulatory_documentation",
                regulatory_documentation,
                default=TRUE)

            self$.addOption(private$..physical_function_items)
            self$.addOption(private$..role_physical_items)
            self$.addOption(private$..bodily_pain_items)
            self$.addOption(private$..general_health_items)
            self$.addOption(private$..vitality_items)
            self$.addOption(private$..social_function_items)
            self$.addOption(private$..role_emotional_items)
            self$.addOption(private$..mental_health_items)
            self$.addOption(private$..symptom_items)
            self$.addOption(private$..functional_items)
            self$.addOption(private$..global_qol_items)
            self$.addOption(private$..patient_id)
            self$.addOption(private$..time_var)
            self$.addOption(private$..group_var)
            self$.addOption(private$..clinical_vars)
            self$.addOption(private$..instrument_type)
            self$.addOption(private$..scoring_algorithm)
            self$.addOption(private$..reference_population)
            self$.addOption(private$..missing_domain_threshold)
            self$.addOption(private$..imputation_method)
            self$.addOption(private$..quality_control)
            self$.addOption(private$..response_pattern_analysis)
            self$.addOption(private$..clinical_interpretation)
            self$.addOption(private$..minimally_important_difference)
            self$.addOption(private$..mid_values)
            self$.addOption(private$..ceiling_floor_analysis)
            self$.addOption(private$..health_utilities)
            self$.addOption(private$..utility_algorithm)
            self$.addOption(private$..longitudinal_analysis)
            self$.addOption(private$..change_analysis)
            self$.addOption(private$..baseline_adjustment)
            self$.addOption(private$..time_to_deterioration)
            self$.addOption(private$..group_comparisons)
            self$.addOption(private$..comparison_domains)
            self$.addOption(private$..statistical_test)
            self$.addOption(private$..multiple_testing_correction)
            self$.addOption(private$..domain_correlations)
            self$.addOption(private$..clinical_correlations)
            self$.addOption(private$..predictive_modeling)
            self$.addOption(private$..factor_analysis)
            self$.addOption(private$..clustering_analysis)
            self$.addOption(private$..health_economics)
            self$.addOption(private$..qaly_calculation)
            self$.addOption(private$..cost_effectiveness)
            self$.addOption(private$..cost_variables)
            self$.addOption(private$..comprehensive_report)
            self$.addOption(private$..domain_profiles)
            self$.addOption(private$..population_norms_comparison)
            self$.addOption(private$..clinical_cutoffs)
            self$.addOption(private$..save_domain_scores)
            self$.addOption(private$..save_utility_scores)
            self$.addOption(private$..regulatory_documentation)
        }),
    active = list(
        physical_function_items = function() private$..physical_function_items$value,
        role_physical_items = function() private$..role_physical_items$value,
        bodily_pain_items = function() private$..bodily_pain_items$value,
        general_health_items = function() private$..general_health_items$value,
        vitality_items = function() private$..vitality_items$value,
        social_function_items = function() private$..social_function_items$value,
        role_emotional_items = function() private$..role_emotional_items$value,
        mental_health_items = function() private$..mental_health_items$value,
        symptom_items = function() private$..symptom_items$value,
        functional_items = function() private$..functional_items$value,
        global_qol_items = function() private$..global_qol_items$value,
        patient_id = function() private$..patient_id$value,
        time_var = function() private$..time_var$value,
        group_var = function() private$..group_var$value,
        clinical_vars = function() private$..clinical_vars$value,
        instrument_type = function() private$..instrument_type$value,
        scoring_algorithm = function() private$..scoring_algorithm$value,
        reference_population = function() private$..reference_population$value,
        missing_domain_threshold = function() private$..missing_domain_threshold$value,
        imputation_method = function() private$..imputation_method$value,
        quality_control = function() private$..quality_control$value,
        response_pattern_analysis = function() private$..response_pattern_analysis$value,
        clinical_interpretation = function() private$..clinical_interpretation$value,
        minimally_important_difference = function() private$..minimally_important_difference$value,
        mid_values = function() private$..mid_values$value,
        ceiling_floor_analysis = function() private$..ceiling_floor_analysis$value,
        health_utilities = function() private$..health_utilities$value,
        utility_algorithm = function() private$..utility_algorithm$value,
        longitudinal_analysis = function() private$..longitudinal_analysis$value,
        change_analysis = function() private$..change_analysis$value,
        baseline_adjustment = function() private$..baseline_adjustment$value,
        time_to_deterioration = function() private$..time_to_deterioration$value,
        group_comparisons = function() private$..group_comparisons$value,
        comparison_domains = function() private$..comparison_domains$value,
        statistical_test = function() private$..statistical_test$value,
        multiple_testing_correction = function() private$..multiple_testing_correction$value,
        domain_correlations = function() private$..domain_correlations$value,
        clinical_correlations = function() private$..clinical_correlations$value,
        predictive_modeling = function() private$..predictive_modeling$value,
        factor_analysis = function() private$..factor_analysis$value,
        clustering_analysis = function() private$..clustering_analysis$value,
        health_economics = function() private$..health_economics$value,
        qaly_calculation = function() private$..qaly_calculation$value,
        cost_effectiveness = function() private$..cost_effectiveness$value,
        cost_variables = function() private$..cost_variables$value,
        comprehensive_report = function() private$..comprehensive_report$value,
        domain_profiles = function() private$..domain_profiles$value,
        population_norms_comparison = function() private$..population_norms_comparison$value,
        clinical_cutoffs = function() private$..clinical_cutoffs$value,
        save_domain_scores = function() private$..save_domain_scores$value,
        save_utility_scores = function() private$..save_utility_scores$value,
        regulatory_documentation = function() private$..regulatory_documentation$value),
    private = list(
        ..physical_function_items = NA,
        ..role_physical_items = NA,
        ..bodily_pain_items = NA,
        ..general_health_items = NA,
        ..vitality_items = NA,
        ..social_function_items = NA,
        ..role_emotional_items = NA,
        ..mental_health_items = NA,
        ..symptom_items = NA,
        ..functional_items = NA,
        ..global_qol_items = NA,
        ..patient_id = NA,
        ..time_var = NA,
        ..group_var = NA,
        ..clinical_vars = NA,
        ..instrument_type = NA,
        ..scoring_algorithm = NA,
        ..reference_population = NA,
        ..missing_domain_threshold = NA,
        ..imputation_method = NA,
        ..quality_control = NA,
        ..response_pattern_analysis = NA,
        ..clinical_interpretation = NA,
        ..minimally_important_difference = NA,
        ..mid_values = NA,
        ..ceiling_floor_analysis = NA,
        ..health_utilities = NA,
        ..utility_algorithm = NA,
        ..longitudinal_analysis = NA,
        ..change_analysis = NA,
        ..baseline_adjustment = NA,
        ..time_to_deterioration = NA,
        ..group_comparisons = NA,
        ..comparison_domains = NA,
        ..statistical_test = NA,
        ..multiple_testing_correction = NA,
        ..domain_correlations = NA,
        ..clinical_correlations = NA,
        ..predictive_modeling = NA,
        ..factor_analysis = NA,
        ..clustering_analysis = NA,
        ..health_economics = NA,
        ..qaly_calculation = NA,
        ..cost_effectiveness = NA,
        ..cost_variables = NA,
        ..comprehensive_report = NA,
        ..domain_profiles = NA,
        ..population_norms_comparison = NA,
        ..clinical_cutoffs = NA,
        ..save_domain_scores = NA,
        ..save_utility_scores = NA,
        ..regulatory_documentation = NA)
)

qualityoflifeResults <- if (requireNamespace("jmvcore", quietly=TRUE)) R6::R6Class(
    "qualityoflifeResults",
    inherit = jmvcore::Group,
    active = list(
        qol_overview = function() private$.items[["qol_overview"]],
        domain_configuration = function() private$.items[["domain_configuration"]],
        domain_scores = function() private$.items[["domain_scores"]],
        summary_scores = function() private$.items[["summary_scores"]],
        ceiling_floor_effects = function() private$.items[["ceiling_floor_effects"]],
        population_norms = function() private$.items[["population_norms"]],
        group_comparison_domains = function() private$.items[["group_comparison_domains"]],
        group_descriptives = function() private$.items[["group_descriptives"]],
        longitudinal_summary = function() private$.items[["longitudinal_summary"]],
        change_analysis_results = function() private$.items[["change_analysis_results"]],
        health_utilities_summary = function() private$.items[["health_utilities_summary"]],
        qaly_results = function() private$.items[["qaly_results"]],
        domain_correlations = function() private$.items[["domain_correlations"]],
        clinical_correlations = function() private$.items[["clinical_correlations"]],
        quality_control_results = function() private$.items[["quality_control_results"]],
        response_patterns = function() private$.items[["response_patterns"]],
        mid_analysis = function() private$.items[["mid_analysis"]],
        clinical_interpretation_summary = function() private$.items[["clinical_interpretation_summary"]],
        severity_classification = function() private$.items[["severity_classification"]],
        health_economics_summary = function() private$.items[["health_economics_summary"]],
        cost_effectiveness_results = function() private$.items[["cost_effectiveness_results"]],
        regulatory_summary = function() private$.items[["regulatory_summary"]],
        domain_scores_plot = function() private$.items[["domain_scores_plot"]],
        summary_scores_plot = function() private$.items[["summary_scores_plot"]],
        population_comparison_plot = function() private$.items[["population_comparison_plot"]],
        group_comparison_plot = function() private$.items[["group_comparison_plot"]],
        longitudinal_trajectory_plot = function() private$.items[["longitudinal_trajectory_plot"]],
        change_waterfall_plot = function() private$.items[["change_waterfall_plot"]],
        domain_correlation_heatmap = function() private$.items[["domain_correlation_heatmap"]],
        utilities_distribution_plot = function() private$.items[["utilities_distribution_plot"]],
        ceiling_floor_plot = function() private$.items[["ceiling_floor_plot"]],
        radar_plot = function() private$.items[["radar_plot"]],
        missing_data_pattern_plot = function() private$.items[["missing_data_pattern_plot"]]),
    private = list(),
    public=list(
        initialize=function(options) {
            super$initialize(
                options=options,
                name="",
                title="Quality of Life Analysis & Patient-Centered Outcomes",
                refs=list(
                    "ClinicoPathJamoviModule"))
            self$add(jmvcore::Table$new(
                options=options,
                name="qol_overview",
                title="Quality of Life Analysis Overview",
                columns=list(
                    list(
                        `name`="characteristic", 
                        `title`="QoL Characteristic", 
                        `type`="text"),
                    list(
                        `name`="value", 
                        `title`="Value", 
                        `type`="text")),
                clearWith=list(
                    "instrument_type",
                    "scoring_algorithm")))
            self$add(jmvcore::Table$new(
                options=options,
                name="domain_configuration",
                title="QoL Domain Configuration",
                columns=list(
                    list(
                        `name`="domain", 
                        `title`="QoL Domain", 
                        `type`="text"),
                    list(
                        `name`="n_items", 
                        `title`="N Items", 
                        `type`="integer"),
                    list(
                        `name`="scoring_range", 
                        `title`="Score Range", 
                        `type`="text"),
                    list(
                        `name`="higher_better", 
                        `title`="Higher = Better", 
                        `type`="text"),
                    list(
                        `name`="mid_threshold", 
                        `title`="MID Threshold", 
                        `type`="number", 
                        `format`="zto"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="domain_scores",
                title="QoL Domain Score Summary",
                columns=list(
                    list(
                        `name`="domain", 
                        `title`="Domain", 
                        `type`="text"),
                    list(
                        `name`="n_valid", 
                        `title`="N Valid", 
                        `type`="integer"),
                    list(
                        `name`="mean", 
                        `title`="Mean", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="sd", 
                        `title`="SD", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="median", 
                        `title`="Median", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="q25", 
                        `title`="Q1", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="q75", 
                        `title`="Q3", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="min", 
                        `title`="Min", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="max", 
                        `title`="Max", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="missing_percent", 
                        `title`="Missing %", 
                        `type`="number", 
                        `format`="pc"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="summary_scores",
                title="Summary QoL Scores",
                columns=list(
                    list(
                        `name`="summary_score", 
                        `title`="Summary Score", 
                        `type`="text"),
                    list(
                        `name`="mean", 
                        `title`="Mean", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="sd", 
                        `title`="SD", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="norm_comparison", 
                        `title`="vs. Population Norm", 
                        `type`="text"),
                    list(
                        `name`="clinical_interpretation", 
                        `title`="Clinical Interpretation", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="ceiling_floor_effects",
                title="Ceiling and Floor Effects Analysis",
                visible="(ceiling_floor_analysis)",
                columns=list(
                    list(
                        `name`="domain", 
                        `title`="Domain", 
                        `type`="text"),
                    list(
                        `name`="floor_effect_n", 
                        `title`="Floor Effect N", 
                        `type`="integer"),
                    list(
                        `name`="floor_effect_percent", 
                        `title`="Floor Effect %", 
                        `type`="number", 
                        `format`="pc"),
                    list(
                        `name`="ceiling_effect_n", 
                        `title`="Ceiling Effect N", 
                        `type`="integer"),
                    list(
                        `name`="ceiling_effect_percent", 
                        `title`="Ceiling Effect %", 
                        `type`="number", 
                        `format`="pc"),
                    list(
                        `name`="interpretation", 
                        `title`="Interpretation", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="population_norms",
                title="Population Norms Comparison",
                visible="(population_norms_comparison)",
                columns=list(
                    list(
                        `name`="domain", 
                        `title`="Domain", 
                        `type`="text"),
                    list(
                        `name`="sample_mean", 
                        `title`="Sample Mean", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="population_mean", 
                        `title`="Population Mean", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="difference", 
                        `title`="Difference", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="effect_size", 
                        `title`="Effect Size", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="p_value", 
                        `title`="P-value", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="clinical_significance", 
                        `title`="Clinical Significance", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="group_comparison_domains",
                title="Group Comparison - QoL Domains",
                visible="(group_comparisons)",
                columns=list(
                    list(
                        `name`="domain", 
                        `title`="Domain", 
                        `type`="text"),
                    list(
                        `name`="group1_mean", 
                        `title`="Group 1 Mean", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="group2_mean", 
                        `title`="Group 2 Mean", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="mean_difference", 
                        `title`="Mean Difference", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="ci_lower", 
                        `title`="95% CI Lower", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="ci_upper", 
                        `title`="95% CI Upper", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="p_value", 
                        `title`="P-value", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="adjusted_p", 
                        `title`="Adjusted P-value", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="effect_size", 
                        `title`="Effect Size", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="exceeds_mid", 
                        `title`="Exceeds MID", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="group_descriptives",
                title="Group Descriptive Statistics",
                visible="(group_comparisons)",
                columns=list(
                    list(
                        `name`="group", 
                        `title`="Group", 
                        `type`="text"),
                    list(
                        `name`="domain", 
                        `title`="Domain", 
                        `type`="text"),
                    list(
                        `name`="n", 
                        `title`="N", 
                        `type`="integer"),
                    list(
                        `name`="mean", 
                        `title`="Mean", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="sd", 
                        `title`="SD", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="median", 
                        `title`="Median", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="iqr", 
                        `title`="IQR", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="longitudinal_summary",
                title="Longitudinal QoL Summary",
                visible="(longitudinal_analysis)",
                columns=list(
                    list(
                        `name`="domain", 
                        `title`="Domain", 
                        `type`="text"),
                    list(
                        `name`="time_point", 
                        `title`="Time Point", 
                        `type`="text"),
                    list(
                        `name`="n", 
                        `title`="N", 
                        `type`="integer"),
                    list(
                        `name`="mean", 
                        `title`="Mean", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="sd", 
                        `title`="SD", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="change_from_baseline", 
                        `title`="Change from Baseline", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="change_se", 
                        `title`="SE of Change", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="p_value", 
                        `title`="P-value", 
                        `type`="number", 
                        `format`="zto"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="change_analysis_results",
                title="QoL Change Analysis",
                visible="(longitudinal_analysis && change_analysis != 'simple_change')",
                columns=list(
                    list(
                        `name`="domain", 
                        `title`="Domain", 
                        `type`="text"),
                    list(
                        `name`="baseline_mean", 
                        `title`="Baseline Mean", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="followup_mean", 
                        `title`="Follow-up Mean", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="mean_change", 
                        `title`="Mean Change", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="effect_size", 
                        `title`="Effect Size", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="reliable_change_n", 
                        `title`="Reliable Change N", 
                        `type`="integer"),
                    list(
                        `name`="reliable_change_percent", 
                        `title`="Reliable Change %", 
                        `type`="number", 
                        `format`="pc"),
                    list(
                        `name`="clinical_significance", 
                        `title`="Clinical Significance", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="health_utilities_summary",
                title="Health Utilities Summary",
                visible="(health_utilities)",
                columns=list(
                    list(
                        `name`="utility_measure", 
                        `title`="Utility Measure", 
                        `type`="text"),
                    list(
                        `name`="mean_utility", 
                        `title`="Mean Utility", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="sd_utility", 
                        `title`="SD Utility", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="median_utility", 
                        `title`="Median Utility", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="utility_range", 
                        `title`="Range", 
                        `type`="text"),
                    list(
                        `name`="disutility_cases", 
                        `title`="Disutility Cases", 
                        `type`="integer"),
                    list(
                        `name`="perfect_health_cases", 
                        `title`="Perfect Health Cases", 
                        `type`="integer"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="qaly_results",
                title="Quality-Adjusted Life Years (QALYs)",
                visible="(qaly_calculation)",
                columns=list(
                    list(
                        `name`="time_period", 
                        `title`="Time Period", 
                        `type`="text"),
                    list(
                        `name`="mean_qaly", 
                        `title`="Mean QALY", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="qaly_gained", 
                        `title`="QALY Gained", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="utility_change", 
                        `title`="Utility Change", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="qaly_interpretation", 
                        `title`="Clinical Interpretation", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="domain_correlations",
                title="QoL Domain Correlations",
                visible="(domain_correlations)",
                columns=list(
                    list(
                        `name`="domain1", 
                        `title`="Domain 1", 
                        `type`="text"),
                    list(
                        `name`="domain2", 
                        `title`="Domain 2", 
                        `type`="text"),
                    list(
                        `name`="correlation", 
                        `title`="Correlation", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="p_value", 
                        `title`="P-value", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="correlation_strength", 
                        `title`="Strength", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="clinical_correlations",
                title="QoL-Clinical Variable Correlations",
                visible="(clinical_correlations)",
                columns=list(
                    list(
                        `name`="qol_domain", 
                        `title`="QoL Domain", 
                        `type`="text"),
                    list(
                        `name`="clinical_variable", 
                        `title`="Clinical Variable", 
                        `type`="text"),
                    list(
                        `name`="correlation", 
                        `title`="Correlation", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="p_value", 
                        `title`="P-value", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="clinical_interpretation", 
                        `title`="Clinical Interpretation", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="quality_control_results",
                title="Data Quality Control Assessment",
                visible="(quality_control)",
                columns=list(
                    list(
                        `name`="quality_indicator", 
                        `title`="Quality Indicator", 
                        `type`="text"),
                    list(
                        `name`="value", 
                        `title`="Value", 
                        `type`="text"),
                    list(
                        `name`="threshold", 
                        `title`="Acceptable Threshold", 
                        `type`="text"),
                    list(
                        `name`="status", 
                        `title`="Status", 
                        `type`="text"),
                    list(
                        `name`="recommendation", 
                        `title`="Recommendation", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="response_patterns",
                title="Response Pattern Analysis",
                visible="(response_pattern_analysis)",
                columns=list(
                    list(
                        `name`="pattern_type", 
                        `title`="Response Pattern", 
                        `type`="text"),
                    list(
                        `name`="frequency", 
                        `title`="Frequency", 
                        `type`="integer"),
                    list(
                        `name`="percent", 
                        `title`="Percent", 
                        `type`="number", 
                        `format`="pc"),
                    list(
                        `name`="quality_concern", 
                        `title`="Quality Concern", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="mid_analysis",
                title="Minimally Important Difference Analysis",
                visible="(minimally_important_difference)",
                columns=list(
                    list(
                        `name`="domain", 
                        `title`="Domain", 
                        `type`="text"),
                    list(
                        `name`="mid_threshold", 
                        `title`="MID Threshold", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="change_exceeds_mid_n", 
                        `title`="Changes Exceeding MID (N)", 
                        `type`="integer"),
                    list(
                        `name`="change_exceeds_mid_percent", 
                        `title`="Changes Exceeding MID (%)", 
                        `type`="number", 
                        `format`="pc"),
                    list(
                        `name`="deterioration_exceeds_mid_n", 
                        `title`="Deterioration Exceeding MID (N)", 
                        `type`="integer"),
                    list(
                        `name`="improvement_exceeds_mid_n", 
                        `title`="Improvement Exceeding MID (N)", 
                        `type`="integer"),
                    list(
                        `name`="clinical_interpretation", 
                        `title`="Clinical Interpretation", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="clinical_interpretation_summary",
                title="Clinical Interpretation Summary",
                visible="(clinical_interpretation)",
                columns=list(
                    list(
                        `name`="qol_aspect", 
                        `title`="QoL Aspect", 
                        `type`="text"),
                    list(
                        `name`="finding", 
                        `title`="Key Finding", 
                        `type`="text"),
                    list(
                        `name`="clinical_significance", 
                        `title`="Clinical Significance", 
                        `type`="text"),
                    list(
                        `name`="patient_impact", 
                        `title`="Patient Impact", 
                        `type`="text"),
                    list(
                        `name`="recommendation", 
                        `title`="Clinical Recommendation", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="severity_classification",
                title="QoL Severity Classification",
                visible="(clinical_cutoffs)",
                columns=list(
                    list(
                        `name`="domain", 
                        `title`="Domain", 
                        `type`="text"),
                    list(
                        `name`="severe_impairment_n", 
                        `title`="Severe Impairment N", 
                        `type`="integer"),
                    list(
                        `name`="severe_impairment_percent", 
                        `title`="Severe Impairment %", 
                        `type`="number", 
                        `format`="pc"),
                    list(
                        `name`="moderate_impairment_n", 
                        `title`="Moderate Impairment N", 
                        `type`="integer"),
                    list(
                        `name`="moderate_impairment_percent", 
                        `title`="Moderate Impairment %", 
                        `type`="number", 
                        `format`="pc"),
                    list(
                        `name`="mild_impairment_n", 
                        `title`="Mild Impairment N", 
                        `type`="integer"),
                    list(
                        `name`="normal_function_n", 
                        `title`="Normal Function N", 
                        `type`="integer"),
                    list(
                        `name`="normal_function_percent", 
                        `title`="Normal Function %", 
                        `type`="number", 
                        `format`="pc"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="health_economics_summary",
                title="Health Economic Analysis Summary",
                visible="(health_economics)",
                columns=list(
                    list(
                        `name`="economic_measure", 
                        `title`="Economic Measure", 
                        `type`="text"),
                    list(
                        `name`="value", 
                        `title`="Value", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="currency_unit", 
                        `title`="Currency/Unit", 
                        `type`="text"),
                    list(
                        `name`="time_frame", 
                        `title`="Time Frame", 
                        `type`="text"),
                    list(
                        `name`="interpretation", 
                        `title`="Interpretation", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="cost_effectiveness_results",
                title="Cost-Effectiveness Analysis",
                visible="(cost_effectiveness)",
                columns=list(
                    list(
                        `name`="comparison", 
                        `title`="Comparison", 
                        `type`="text"),
                    list(
                        `name`="incremental_cost", 
                        `title`="Incremental Cost", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="incremental_qaly", 
                        `title`="Incremental QALY", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="icer", 
                        `title`="ICER", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="cost_effective", 
                        `title`="Cost-Effective", 
                        `type`="text"),
                    list(
                        `name`="probability_ce", 
                        `title`="Probability Cost-Effective", 
                        `type`="number", 
                        `format`="pc"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="regulatory_summary",
                title="Regulatory Compliance Documentation",
                visible="(regulatory_documentation)",
                columns=list(
                    list(
                        `name`="regulatory_aspect", 
                        `title`="Regulatory Aspect", 
                        `type`="text"),
                    list(
                        `name`="compliance_status", 
                        `title`="Compliance Status", 
                        `type`="text"),
                    list(
                        `name`="documentation", 
                        `title`="Documentation", 
                        `type`="text"),
                    list(
                        `name`="recommendations", 
                        `title`="Recommendations", 
                        `type`="text"))))
            self$add(jmvcore::Image$new(
                options=options,
                name="domain_scores_plot",
                title="QoL Domain Scores Distribution",
                renderFun=".plot_domain_scores",
                clearWith=list(
                    "instrument_type")))
            self$add(jmvcore::Image$new(
                options=options,
                name="summary_scores_plot",
                title="Summary QoL Scores Plot",
                renderFun=".plot_summary_scores",
                clearWith=list(
                    "instrument_type",
                    "scoring_algorithm")))
            self$add(jmvcore::Image$new(
                options=options,
                name="population_comparison_plot",
                title="Population Norms Comparison",
                visible="(population_norms_comparison)",
                renderFun=".plot_population_comparison",
                clearWith=list(
                    "reference_population")))
            self$add(jmvcore::Image$new(
                options=options,
                name="group_comparison_plot",
                title="Group Comparison Plot",
                visible="(group_comparisons)",
                renderFun=".plot_group_comparison",
                clearWith=list(
                    "group_var",
                    "group_comparisons")))
            self$add(jmvcore::Image$new(
                options=options,
                name="longitudinal_trajectory_plot",
                title="Longitudinal QoL Trajectories",
                visible="(longitudinal_analysis)",
                renderFun=".plot_longitudinal_trajectories",
                clearWith=list(
                    "time_var",
                    "longitudinal_analysis")))
            self$add(jmvcore::Image$new(
                options=options,
                name="change_waterfall_plot",
                title="QoL Change Waterfall Plot",
                visible="(longitudinal_analysis && change_analysis != 'simple_change')",
                renderFun=".plot_change_waterfall",
                clearWith=list(
                    "change_analysis")))
            self$add(jmvcore::Image$new(
                options=options,
                name="domain_correlation_heatmap",
                title="Domain Correlation Heatmap",
                visible="(domain_correlations)",
                renderFun=".plot_domain_correlations",
                clearWith=list(
                    "domain_correlations")))
            self$add(jmvcore::Image$new(
                options=options,
                name="utilities_distribution_plot",
                title="Health Utilities Distribution",
                visible="(health_utilities)",
                renderFun=".plot_utilities_distribution",
                clearWith=list(
                    "health_utilities",
                    "utility_algorithm")))
            self$add(jmvcore::Image$new(
                options=options,
                name="ceiling_floor_plot",
                title="Ceiling and Floor Effects Visualization",
                visible="(ceiling_floor_analysis)",
                renderFun=".plot_ceiling_floor_effects",
                clearWith=list(
                    "ceiling_floor_analysis")))
            self$add(jmvcore::Image$new(
                options=options,
                name="radar_plot",
                title="QoL Domain Profile (Radar Plot)",
                renderFun=".plot_qol_radar",
                clearWith=list(
                    "instrument_type")))
            self$add(jmvcore::Image$new(
                options=options,
                name="missing_data_pattern_plot",
                title="Missing Data Patterns",
                renderFun=".plot_missing_patterns",
                clearWith=list(
                    "instrument_type")))}))

qualityoflifeBase <- if (requireNamespace("jmvcore", quietly=TRUE)) R6::R6Class(
    "qualityoflifeBase",
    inherit = jmvcore::Analysis,
    public = list(
        initialize = function(options, data=NULL, datasetId="", analysisId="", revision=0) {
            super$initialize(
                package = "ClinicoPath",
                name = "qualityoflife",
                version = c(1,0,0),
                options = options,
                results = qualityoflifeResults$new(options=options),
                data = data,
                datasetId = datasetId,
                analysisId = analysisId,
                revision = revision,
                pause = NULL,
                completeWhenFilled = FALSE,
                requiresMissings = FALSE,
                weightsSupport = 'auto')
        }))

#' Quality of Life Analysis & Patient-Centered Outcomes
#'
#' Specialized Quality of Life (QoL) analysis for clinical research and 
#' patient care.
#' Comprehensive assessment of health-related quality of life using 
#' standardized instruments
#' (SF-36, EORTC QLQ-C30, FACT, EQ-5D) with domain-specific scoring, clinical 
#' interpretation,
#' and longitudinal change analysis. Includes utilities calculation, 
#' preference-based measures,
#' and health economic outcomes. Essential for clinical trials, 
#' patient-centered care, and
#' health technology assessment.
#' 
#'
#' @examples
#' data('qol_data')
#'
#' qualityoflife(
#'     data = qol_data,
#'     qol_domains = list(
#'         physical = c("pf1", "pf2", "pf3"),
#'         mental = c("mh1", "mh2", "mh3")
#'     ),
#'     patient_id = "patient_id",
#'     instrument_type = "sf36"
#' )
#'
#' @param data the data as a data frame
#' @param physical_function_items Items measuring physical functioning domain
#' @param role_physical_items Items measuring role limitations due to physical
#'   problems
#' @param bodily_pain_items Items measuring bodily pain domain
#' @param general_health_items Items measuring general health perceptions
#' @param vitality_items Items measuring vitality and energy levels
#' @param social_function_items Items measuring social functioning domain
#' @param role_emotional_items Items measuring role limitations due to
#'   emotional problems
#' @param mental_health_items Items measuring mental health domain
#' @param symptom_items Items measuring disease-specific symptoms
#' @param functional_items Additional functional assessment items
#' @param global_qol_items Global quality of life assessment items
#' @param patient_id Patient identifier for longitudinal analysis
#' @param time_var Time point variable (visit, week, month)
#' @param group_var Grouping variable for comparisons (treatment, disease
#'   stage)
#' @param clinical_vars Clinical variables for correlation and validation
#' @param instrument_type Type of QoL instrument being analyzed
#' @param scoring_algorithm Scoring algorithm for QoL domains
#' @param reference_population Reference population for norm-based scoring
#' @param missing_domain_threshold Maximum missing proportion for domain
#'   scoring (50\% = 0.5)
#' @param imputation_method Method for handling missing QoL data
#' @param quality_control Perform QoL data quality control checks
#' @param response_pattern_analysis Analyze response patterns and validity
#' @param clinical_interpretation Provide clinical interpretation of QoL
#'   scores
#' @param minimally_important_difference Apply minimally important difference
#'   thresholds
#' @param mid_values Custom MID values for domains (comma-separated, e.g.,
#'   "5,10,3")
#' @param ceiling_floor_analysis Analyze ceiling and floor effects by domain
#' @param health_utilities Calculate health utility values for health
#'   economics
#' @param utility_algorithm Algorithm for health utility calculation
#' @param longitudinal_analysis Perform longitudinal QoL analysis
#' @param change_analysis Method for analyzing QoL changes over time
#' @param baseline_adjustment Adjust for baseline QoL differences in change
#'   analysis
#' @param time_to_deterioration Analyze time to meaningful QoL deterioration
#' @param group_comparisons Compare QoL between groups
#' @param comparison_domains QoL domains to include in group comparisons
#' @param statistical_test Statistical test for group comparisons
#' @param multiple_testing_correction Multiple testing correction method
#' @param domain_correlations Analyze correlations between QoL domains
#' @param clinical_correlations Correlate QoL domains with clinical variables
#' @param predictive_modeling Build predictive models for QoL outcomes
#' @param factor_analysis Perform factor analysis of QoL domains
#' @param clustering_analysis Cluster patients based on QoL profiles
#' @param health_economics Calculate health economic outcomes
#' @param qaly_calculation Calculate Quality-Adjusted Life Years
#' @param cost_effectiveness Perform cost-effectiveness analysis (requires
#'   cost data)
#' @param cost_variables Cost variables for health economic analysis
#' @param comprehensive_report Generate comprehensive QoL analysis report
#' @param domain_profiles Generate individual patient QoL domain profiles
#' @param population_norms_comparison Compare scores to population normative
#'   data
#' @param clinical_cutoffs Apply clinical cutoffs and severity classifications
#' @param save_domain_scores Save calculated domain scores to dataset
#' @param save_utility_scores Save calculated utility scores to dataset
#' @param regulatory_documentation Include regulatory compliance documentation
#' @return A results object containing:
#' \tabular{llllll}{
#'   \code{results$qol_overview} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$domain_configuration} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$domain_scores} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$summary_scores} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$ceiling_floor_effects} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$population_norms} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$group_comparison_domains} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$group_descriptives} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$longitudinal_summary} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$change_analysis_results} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$health_utilities_summary} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$qaly_results} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$domain_correlations} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$clinical_correlations} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$quality_control_results} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$response_patterns} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$mid_analysis} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$clinical_interpretation_summary} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$severity_classification} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$health_economics_summary} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$cost_effectiveness_results} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$regulatory_summary} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$domain_scores_plot} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$summary_scores_plot} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$population_comparison_plot} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$group_comparison_plot} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$longitudinal_trajectory_plot} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$change_waterfall_plot} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$domain_correlation_heatmap} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$utilities_distribution_plot} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$ceiling_floor_plot} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$radar_plot} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$missing_data_pattern_plot} \tab \tab \tab \tab \tab an image \cr
#' }
#'
#' Tables can be converted to data frames with \code{asDF} or \code{\link{as.data.frame}}. For example:
#'
#' \code{results$qol_overview$asDF}
#'
#' \code{as.data.frame(results$qol_overview)}
#'
#' @export
qualityoflife <- function(
    data,
    physical_function_items,
    role_physical_items,
    bodily_pain_items,
    general_health_items,
    vitality_items,
    social_function_items,
    role_emotional_items,
    mental_health_items,
    symptom_items,
    functional_items,
    global_qol_items,
    patient_id,
    time_var,
    group_var,
    clinical_vars,
    instrument_type = "sf36",
    scoring_algorithm = "standard",
    reference_population = "general_us",
    missing_domain_threshold = 0.5,
    imputation_method = "person_mean",
    quality_control = TRUE,
    response_pattern_analysis = TRUE,
    clinical_interpretation = TRUE,
    minimally_important_difference = TRUE,
    mid_values = "",
    ceiling_floor_analysis = TRUE,
    health_utilities = FALSE,
    utility_algorithm = "sf6d",
    longitudinal_analysis = FALSE,
    change_analysis = "simple_change",
    baseline_adjustment = TRUE,
    time_to_deterioration = FALSE,
    group_comparisons = FALSE,
    comparison_domains = "all_domains",
    statistical_test = "t_test",
    multiple_testing_correction = "fdr",
    domain_correlations = TRUE,
    clinical_correlations = FALSE,
    predictive_modeling = FALSE,
    factor_analysis = FALSE,
    clustering_analysis = FALSE,
    health_economics = FALSE,
    qaly_calculation = FALSE,
    cost_effectiveness = FALSE,
    cost_variables,
    comprehensive_report = TRUE,
    domain_profiles = FALSE,
    population_norms_comparison = TRUE,
    clinical_cutoffs = TRUE,
    save_domain_scores = FALSE,
    save_utility_scores = FALSE,
    regulatory_documentation = TRUE) {

    if ( ! requireNamespace("jmvcore", quietly=TRUE))
        stop("qualityoflife requires jmvcore to be installed (restart may be required)")

    if ( ! missing(physical_function_items)) physical_function_items <- jmvcore::resolveQuo(jmvcore::enquo(physical_function_items))
    if ( ! missing(role_physical_items)) role_physical_items <- jmvcore::resolveQuo(jmvcore::enquo(role_physical_items))
    if ( ! missing(bodily_pain_items)) bodily_pain_items <- jmvcore::resolveQuo(jmvcore::enquo(bodily_pain_items))
    if ( ! missing(general_health_items)) general_health_items <- jmvcore::resolveQuo(jmvcore::enquo(general_health_items))
    if ( ! missing(vitality_items)) vitality_items <- jmvcore::resolveQuo(jmvcore::enquo(vitality_items))
    if ( ! missing(social_function_items)) social_function_items <- jmvcore::resolveQuo(jmvcore::enquo(social_function_items))
    if ( ! missing(role_emotional_items)) role_emotional_items <- jmvcore::resolveQuo(jmvcore::enquo(role_emotional_items))
    if ( ! missing(mental_health_items)) mental_health_items <- jmvcore::resolveQuo(jmvcore::enquo(mental_health_items))
    if ( ! missing(symptom_items)) symptom_items <- jmvcore::resolveQuo(jmvcore::enquo(symptom_items))
    if ( ! missing(functional_items)) functional_items <- jmvcore::resolveQuo(jmvcore::enquo(functional_items))
    if ( ! missing(global_qol_items)) global_qol_items <- jmvcore::resolveQuo(jmvcore::enquo(global_qol_items))
    if ( ! missing(patient_id)) patient_id <- jmvcore::resolveQuo(jmvcore::enquo(patient_id))
    if ( ! missing(time_var)) time_var <- jmvcore::resolveQuo(jmvcore::enquo(time_var))
    if ( ! missing(group_var)) group_var <- jmvcore::resolveQuo(jmvcore::enquo(group_var))
    if ( ! missing(clinical_vars)) clinical_vars <- jmvcore::resolveQuo(jmvcore::enquo(clinical_vars))
    if ( ! missing(cost_variables)) cost_variables <- jmvcore::resolveQuo(jmvcore::enquo(cost_variables))
    if (missing(data))
        data <- jmvcore::marshalData(
            parent.frame(),
            `if`( ! missing(physical_function_items), physical_function_items, NULL),
            `if`( ! missing(role_physical_items), role_physical_items, NULL),
            `if`( ! missing(bodily_pain_items), bodily_pain_items, NULL),
            `if`( ! missing(general_health_items), general_health_items, NULL),
            `if`( ! missing(vitality_items), vitality_items, NULL),
            `if`( ! missing(social_function_items), social_function_items, NULL),
            `if`( ! missing(role_emotional_items), role_emotional_items, NULL),
            `if`( ! missing(mental_health_items), mental_health_items, NULL),
            `if`( ! missing(symptom_items), symptom_items, NULL),
            `if`( ! missing(functional_items), functional_items, NULL),
            `if`( ! missing(global_qol_items), global_qol_items, NULL),
            `if`( ! missing(patient_id), patient_id, NULL),
            `if`( ! missing(time_var), time_var, NULL),
            `if`( ! missing(group_var), group_var, NULL),
            `if`( ! missing(clinical_vars), clinical_vars, NULL),
            `if`( ! missing(cost_variables), cost_variables, NULL))

    for (v in group_var) if (v %in% names(data)) data[[v]] <- as.factor(data[[v]])

    options <- qualityoflifeOptions$new(
        physical_function_items = physical_function_items,
        role_physical_items = role_physical_items,
        bodily_pain_items = bodily_pain_items,
        general_health_items = general_health_items,
        vitality_items = vitality_items,
        social_function_items = social_function_items,
        role_emotional_items = role_emotional_items,
        mental_health_items = mental_health_items,
        symptom_items = symptom_items,
        functional_items = functional_items,
        global_qol_items = global_qol_items,
        patient_id = patient_id,
        time_var = time_var,
        group_var = group_var,
        clinical_vars = clinical_vars,
        instrument_type = instrument_type,
        scoring_algorithm = scoring_algorithm,
        reference_population = reference_population,
        missing_domain_threshold = missing_domain_threshold,
        imputation_method = imputation_method,
        quality_control = quality_control,
        response_pattern_analysis = response_pattern_analysis,
        clinical_interpretation = clinical_interpretation,
        minimally_important_difference = minimally_important_difference,
        mid_values = mid_values,
        ceiling_floor_analysis = ceiling_floor_analysis,
        health_utilities = health_utilities,
        utility_algorithm = utility_algorithm,
        longitudinal_analysis = longitudinal_analysis,
        change_analysis = change_analysis,
        baseline_adjustment = baseline_adjustment,
        time_to_deterioration = time_to_deterioration,
        group_comparisons = group_comparisons,
        comparison_domains = comparison_domains,
        statistical_test = statistical_test,
        multiple_testing_correction = multiple_testing_correction,
        domain_correlations = domain_correlations,
        clinical_correlations = clinical_correlations,
        predictive_modeling = predictive_modeling,
        factor_analysis = factor_analysis,
        clustering_analysis = clustering_analysis,
        health_economics = health_economics,
        qaly_calculation = qaly_calculation,
        cost_effectiveness = cost_effectiveness,
        cost_variables = cost_variables,
        comprehensive_report = comprehensive_report,
        domain_profiles = domain_profiles,
        population_norms_comparison = population_norms_comparison,
        clinical_cutoffs = clinical_cutoffs,
        save_domain_scores = save_domain_scores,
        save_utility_scores = save_utility_scores,
        regulatory_documentation = regulatory_documentation)

    analysis <- qualityoflifeClass$new(
        options = options,
        data = data)

    analysis$run()

    analysis$results
}

