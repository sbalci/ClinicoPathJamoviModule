
# This file is automatically generated, you probably don't want to edit this

imagingcorrelationOptions <- if (requireNamespace("jmvcore", quietly=TRUE)) R6::R6Class(
    "imagingcorrelationOptions",
    inherit = jmvcore::Options,
    public = list(
        initialize = function(
            imagingFindings = NULL,
            labResults = NULL,
            clinicalVars = NULL,
            pathologyData = NULL,
            imagingModality = NULL,
            correlation_analysis = TRUE,
            concordance_assessment = TRUE,
            pattern_recognition = TRUE,
            sensitivity_specificity = TRUE,
            integration_method = "weighted_fusion",
            correlation_method = "spearman",
            confidence_level = 0.95,
            minimum_correlation = 0.3,
            radiomics_analysis = FALSE,
            texture_analysis = FALSE,
            lesion_characterization = TRUE,
            temporal_analysis = FALSE,
            anatomical_correlation = TRUE,
            staging_correlation = TRUE,
            treatment_response = FALSE,
            ai_assisted = FALSE,
            correlation_plots = TRUE,
            concordance_plots = TRUE,
            heatmap_visualization = TRUE,
            network_diagram = FALSE,
            roc_curves = TRUE,
            clinical_guidelines = TRUE,
            diagnostic_confidence = TRUE,
            report_generation = TRUE, ...) {

            super$initialize(
                package="ClinicoPath",
                name="imagingcorrelation",
                requiresData=TRUE,
                ...)

            private$..imagingFindings <- jmvcore::OptionVariables$new(
                "imagingFindings",
                imagingFindings,
                suggested=list(
                    "nominal",
                    "continuous"),
                permitted=list(
                    "factor",
                    "numeric"))
            private$..labResults <- jmvcore::OptionVariables$new(
                "labResults",
                labResults,
                suggested=list(
                    "continuous"),
                permitted=list(
                    "numeric"))
            private$..clinicalVars <- jmvcore::OptionVariables$new(
                "clinicalVars",
                clinicalVars,
                suggested=list(
                    "nominal",
                    "continuous"),
                permitted=list(
                    "factor",
                    "numeric"))
            private$..pathologyData <- jmvcore::OptionVariables$new(
                "pathologyData",
                pathologyData,
                suggested=list(
                    "nominal",
                    "continuous"),
                permitted=list(
                    "factor",
                    "numeric"))
            private$..imagingModality <- jmvcore::OptionVariables$new(
                "imagingModality",
                imagingModality,
                suggested=list(
                    "nominal"),
                permitted=list(
                    "factor"))
            private$..correlation_analysis <- jmvcore::OptionBool$new(
                "correlation_analysis",
                correlation_analysis,
                default=TRUE)
            private$..concordance_assessment <- jmvcore::OptionBool$new(
                "concordance_assessment",
                concordance_assessment,
                default=TRUE)
            private$..pattern_recognition <- jmvcore::OptionBool$new(
                "pattern_recognition",
                pattern_recognition,
                default=TRUE)
            private$..sensitivity_specificity <- jmvcore::OptionBool$new(
                "sensitivity_specificity",
                sensitivity_specificity,
                default=TRUE)
            private$..integration_method <- jmvcore::OptionList$new(
                "integration_method",
                integration_method,
                options=list(
                    "weighted_fusion",
                    "bayesian_integration",
                    "ensemble_voting",
                    "hierarchical_fusion"),
                default="weighted_fusion")
            private$..correlation_method <- jmvcore::OptionList$new(
                "correlation_method",
                correlation_method,
                options=list(
                    "pearson",
                    "spearman",
                    "kendall",
                    "polychoric"),
                default="spearman")
            private$..confidence_level <- jmvcore::OptionNumber$new(
                "confidence_level",
                confidence_level,
                min=0.8,
                max=0.99,
                default=0.95)
            private$..minimum_correlation <- jmvcore::OptionNumber$new(
                "minimum_correlation",
                minimum_correlation,
                min=0.1,
                max=0.9,
                default=0.3)
            private$..radiomics_analysis <- jmvcore::OptionBool$new(
                "radiomics_analysis",
                radiomics_analysis,
                default=FALSE)
            private$..texture_analysis <- jmvcore::OptionBool$new(
                "texture_analysis",
                texture_analysis,
                default=FALSE)
            private$..lesion_characterization <- jmvcore::OptionBool$new(
                "lesion_characterization",
                lesion_characterization,
                default=TRUE)
            private$..temporal_analysis <- jmvcore::OptionBool$new(
                "temporal_analysis",
                temporal_analysis,
                default=FALSE)
            private$..anatomical_correlation <- jmvcore::OptionBool$new(
                "anatomical_correlation",
                anatomical_correlation,
                default=TRUE)
            private$..staging_correlation <- jmvcore::OptionBool$new(
                "staging_correlation",
                staging_correlation,
                default=TRUE)
            private$..treatment_response <- jmvcore::OptionBool$new(
                "treatment_response",
                treatment_response,
                default=FALSE)
            private$..ai_assisted <- jmvcore::OptionBool$new(
                "ai_assisted",
                ai_assisted,
                default=FALSE)
            private$..correlation_plots <- jmvcore::OptionBool$new(
                "correlation_plots",
                correlation_plots,
                default=TRUE)
            private$..concordance_plots <- jmvcore::OptionBool$new(
                "concordance_plots",
                concordance_plots,
                default=TRUE)
            private$..heatmap_visualization <- jmvcore::OptionBool$new(
                "heatmap_visualization",
                heatmap_visualization,
                default=TRUE)
            private$..network_diagram <- jmvcore::OptionBool$new(
                "network_diagram",
                network_diagram,
                default=FALSE)
            private$..roc_curves <- jmvcore::OptionBool$new(
                "roc_curves",
                roc_curves,
                default=TRUE)
            private$..clinical_guidelines <- jmvcore::OptionBool$new(
                "clinical_guidelines",
                clinical_guidelines,
                default=TRUE)
            private$..diagnostic_confidence <- jmvcore::OptionBool$new(
                "diagnostic_confidence",
                diagnostic_confidence,
                default=TRUE)
            private$..report_generation <- jmvcore::OptionBool$new(
                "report_generation",
                report_generation,
                default=TRUE)

            self$.addOption(private$..imagingFindings)
            self$.addOption(private$..labResults)
            self$.addOption(private$..clinicalVars)
            self$.addOption(private$..pathologyData)
            self$.addOption(private$..imagingModality)
            self$.addOption(private$..correlation_analysis)
            self$.addOption(private$..concordance_assessment)
            self$.addOption(private$..pattern_recognition)
            self$.addOption(private$..sensitivity_specificity)
            self$.addOption(private$..integration_method)
            self$.addOption(private$..correlation_method)
            self$.addOption(private$..confidence_level)
            self$.addOption(private$..minimum_correlation)
            self$.addOption(private$..radiomics_analysis)
            self$.addOption(private$..texture_analysis)
            self$.addOption(private$..lesion_characterization)
            self$.addOption(private$..temporal_analysis)
            self$.addOption(private$..anatomical_correlation)
            self$.addOption(private$..staging_correlation)
            self$.addOption(private$..treatment_response)
            self$.addOption(private$..ai_assisted)
            self$.addOption(private$..correlation_plots)
            self$.addOption(private$..concordance_plots)
            self$.addOption(private$..heatmap_visualization)
            self$.addOption(private$..network_diagram)
            self$.addOption(private$..roc_curves)
            self$.addOption(private$..clinical_guidelines)
            self$.addOption(private$..diagnostic_confidence)
            self$.addOption(private$..report_generation)
        }),
    active = list(
        imagingFindings = function() private$..imagingFindings$value,
        labResults = function() private$..labResults$value,
        clinicalVars = function() private$..clinicalVars$value,
        pathologyData = function() private$..pathologyData$value,
        imagingModality = function() private$..imagingModality$value,
        correlation_analysis = function() private$..correlation_analysis$value,
        concordance_assessment = function() private$..concordance_assessment$value,
        pattern_recognition = function() private$..pattern_recognition$value,
        sensitivity_specificity = function() private$..sensitivity_specificity$value,
        integration_method = function() private$..integration_method$value,
        correlation_method = function() private$..correlation_method$value,
        confidence_level = function() private$..confidence_level$value,
        minimum_correlation = function() private$..minimum_correlation$value,
        radiomics_analysis = function() private$..radiomics_analysis$value,
        texture_analysis = function() private$..texture_analysis$value,
        lesion_characterization = function() private$..lesion_characterization$value,
        temporal_analysis = function() private$..temporal_analysis$value,
        anatomical_correlation = function() private$..anatomical_correlation$value,
        staging_correlation = function() private$..staging_correlation$value,
        treatment_response = function() private$..treatment_response$value,
        ai_assisted = function() private$..ai_assisted$value,
        correlation_plots = function() private$..correlation_plots$value,
        concordance_plots = function() private$..concordance_plots$value,
        heatmap_visualization = function() private$..heatmap_visualization$value,
        network_diagram = function() private$..network_diagram$value,
        roc_curves = function() private$..roc_curves$value,
        clinical_guidelines = function() private$..clinical_guidelines$value,
        diagnostic_confidence = function() private$..diagnostic_confidence$value,
        report_generation = function() private$..report_generation$value),
    private = list(
        ..imagingFindings = NA,
        ..labResults = NA,
        ..clinicalVars = NA,
        ..pathologyData = NA,
        ..imagingModality = NA,
        ..correlation_analysis = NA,
        ..concordance_assessment = NA,
        ..pattern_recognition = NA,
        ..sensitivity_specificity = NA,
        ..integration_method = NA,
        ..correlation_method = NA,
        ..confidence_level = NA,
        ..minimum_correlation = NA,
        ..radiomics_analysis = NA,
        ..texture_analysis = NA,
        ..lesion_characterization = NA,
        ..temporal_analysis = NA,
        ..anatomical_correlation = NA,
        ..staging_correlation = NA,
        ..treatment_response = NA,
        ..ai_assisted = NA,
        ..correlation_plots = NA,
        ..concordance_plots = NA,
        ..heatmap_visualization = NA,
        ..network_diagram = NA,
        ..roc_curves = NA,
        ..clinical_guidelines = NA,
        ..diagnostic_confidence = NA,
        ..report_generation = NA)
)

imagingcorrelationResults <- if (requireNamespace("jmvcore", quietly=TRUE)) R6::R6Class(
    "imagingcorrelationResults",
    inherit = jmvcore::Group,
    active = list(
        todo = function() private$.items[["todo"]],
        correlationTable = function() private$.items[["correlationTable"]],
        concordanceTable = function() private$.items[["concordanceTable"]],
        diagnosticPerformanceTable = function() private$.items[["diagnosticPerformanceTable"]],
        patternRecognitionTable = function() private$.items[["patternRecognitionTable"]],
        lesionCharacterizationTable = function() private$.items[["lesionCharacterizationTable"]],
        stagingCorrelationTable = function() private$.items[["stagingCorrelationTable"]],
        treatmentResponseTable = function() private$.items[["treatmentResponseTable"]],
        radiomicsTable = function() private$.items[["radiomicsTable"]],
        integratedDiagnosticSummary = function() private$.items[["integratedDiagnosticSummary"]],
        clinicalRecommendations = function() private$.items[["clinicalRecommendations"]],
        confidenceAssessment = function() private$.items[["confidenceAssessment"]],
        correlationPlot = function() private$.items[["correlationPlot"]],
        concordancePlot = function() private$.items[["concordancePlot"]],
        heatmapPlot = function() private$.items[["heatmapPlot"]],
        networkPlot = function() private$.items[["networkPlot"]],
        rocPlot = function() private$.items[["rocPlot"]]),
    private = list(),
    public=list(
        initialize=function(options) {
            super$initialize(
                options=options,
                name="",
                title="Imaging Findings Correlation",
                refs=list(
                    "ClinicoPathJamoviModule"))
            self$add(jmvcore::Html$new(
                options=options,
                name="todo",
                title="Analysis Summary",
                refs=list(
                    "imagingFindings")))
            self$add(jmvcore::Table$new(
                options=options,
                name="correlationTable",
                title="Multi-Modal Correlation Analysis",
                rows="(imagingFindings)",
                visible="(correlation_analysis)",
                clearWith=list(
                    "imagingFindings",
                    "labResults",
                    "clinicalVars",
                    "correlation_method"),
                columns=list(
                    list(
                        `name`="imaging_finding", 
                        `title`="Imaging Finding", 
                        `type`="text"),
                    list(
                        `name`="correlated_variable", 
                        `title`="Correlated Variable", 
                        `type`="text"),
                    list(
                        `name`="modality_type", 
                        `title`="Modality Type", 
                        `type`="text"),
                    list(
                        `name`="correlation_coefficient", 
                        `title`="Correlation (r)", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="p_value", 
                        `title`="p-value", 
                        `type`="number", 
                        `format`="zto,pvalue"),
                    list(
                        `name`="confidence_interval", 
                        `title`="95% CI", 
                        `type`="text"),
                    list(
                        `name`="clinical_significance", 
                        `title`="Clinical Significance", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="concordanceTable",
                title="Diagnostic Concordance Assessment",
                visible="(concordance_assessment)",
                clearWith=list(
                    "imagingFindings",
                    "labResults",
                    "pathologyData",
                    "concordance_assessment"),
                columns=list(
                    list(
                        `name`="modality_1", 
                        `title`="Modality 1", 
                        `type`="text"),
                    list(
                        `name`="modality_2", 
                        `title`="Modality 2", 
                        `type`="text"),
                    list(
                        `name`="concordance_rate", 
                        `title`="Concordance Rate", 
                        `type`="number", 
                        `format`="pc"),
                    list(
                        `name`="kappa_statistic", 
                        `title`="Kappa (\u03BA)", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="agreement_level", 
                        `title`="Agreement Level", 
                        `type`="text"),
                    list(
                        `name`="discordant_cases", 
                        `title`="Discordant Cases", 
                        `type`="integer"),
                    list(
                        `name`="clinical_impact", 
                        `title`="Clinical Impact", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="diagnosticPerformanceTable",
                title="Diagnostic Performance Metrics",
                visible="(sensitivity_specificity)",
                clearWith=list(
                    "imagingFindings",
                    "pathologyData",
                    "sensitivity_specificity"),
                columns=list(
                    list(
                        `name`="imaging_test", 
                        `title`="Imaging Test", 
                        `type`="text"),
                    list(
                        `name`="reference_standard", 
                        `title`="Reference Standard", 
                        `type`="text"),
                    list(
                        `name`="sensitivity", 
                        `title`="Sensitivity", 
                        `type`="number", 
                        `format`="pc"),
                    list(
                        `name`="specificity", 
                        `title`="Specificity", 
                        `type`="number", 
                        `format`="pc"),
                    list(
                        `name`="ppv", 
                        `title`="PPV", 
                        `type`="number", 
                        `format`="pc"),
                    list(
                        `name`="npv", 
                        `title`="NPV", 
                        `type`="number", 
                        `format`="pc"),
                    list(
                        `name`="accuracy", 
                        `title`="Accuracy", 
                        `type`="number", 
                        `format`="pc"),
                    list(
                        `name`="auc", 
                        `title`="AUC", 
                        `type`="number", 
                        `format`="zto"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="patternRecognitionTable",
                title="Diagnostic Pattern Recognition",
                visible="(pattern_recognition)",
                clearWith=list(
                    "imagingFindings",
                    "labResults",
                    "clinicalVars",
                    "pattern_recognition"),
                columns=list(
                    list(
                        `name`="pattern_id", 
                        `title`="Pattern ID", 
                        `type`="text"),
                    list(
                        `name`="pattern_description", 
                        `title`="Pattern Description", 
                        `type`="text"),
                    list(
                        `name`="frequency", 
                        `title`="Frequency", 
                        `type`="number", 
                        `format`="pc"),
                    list(
                        `name`="imaging_components", 
                        `title`="Imaging Components", 
                        `type`="text"),
                    list(
                        `name`="lab_components", 
                        `title`="Lab Components", 
                        `type`="text"),
                    list(
                        `name`="clinical_components", 
                        `title`="Clinical Components", 
                        `type`="text"),
                    list(
                        `name`="diagnostic_association", 
                        `title`="Diagnostic Association", 
                        `type`="text"),
                    list(
                        `name`="confidence_score", 
                        `title`="Confidence Score", 
                        `type`="number", 
                        `format`="pc"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="lesionCharacterizationTable",
                title="Lesion Characterization Analysis",
                visible="(lesion_characterization)",
                clearWith=list(
                    "imagingFindings",
                    "imagingModality",
                    "lesion_characterization"),
                columns=list(
                    list(
                        `name`="lesion_id", 
                        `title`="Lesion ID", 
                        `type`="text"),
                    list(
                        `name`="location", 
                        `title`="Anatomical Location", 
                        `type`="text"),
                    list(
                        `name`="size", 
                        `title`="Size (mm)", 
                        `type`="text"),
                    list(
                        `name`="morphology", 
                        `title`="Morphology", 
                        `type`="text"),
                    list(
                        `name`="enhancement_pattern", 
                        `title`="Enhancement Pattern", 
                        `type`="text"),
                    list(
                        `name`="diffusion_characteristics", 
                        `title`="Diffusion/Signal", 
                        `type`="text"),
                    list(
                        `name`="metabolic_activity", 
                        `title`="Metabolic Activity", 
                        `type`="text"),
                    list(
                        `name`="classification", 
                        `title`="Classification", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="stagingCorrelationTable",
                title="Disease Staging Correlation",
                visible="(staging_correlation)",
                clearWith=list(
                    "imagingFindings",
                    "pathologyData",
                    "staging_correlation"),
                columns=list(
                    list(
                        `name`="imaging_stage", 
                        `title`="Imaging Stage", 
                        `type`="text"),
                    list(
                        `name`="pathology_stage", 
                        `title`="Pathology Stage", 
                        `type`="text"),
                    list(
                        `name`="concordance", 
                        `title`="Concordance", 
                        `type`="text"),
                    list(
                        `name`="upstaging_rate", 
                        `title`="Upstaging Rate", 
                        `type`="number", 
                        `format`="pc"),
                    list(
                        `name`="downstaging_rate", 
                        `title`="Downstaging Rate", 
                        `type`="number", 
                        `format`="pc"),
                    list(
                        `name`="clinical_implications", 
                        `title`="Clinical Implications", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="treatmentResponseTable",
                title="Treatment Response Assessment",
                visible="(treatment_response)",
                clearWith=list(
                    "imagingFindings",
                    "temporal_analysis",
                    "treatment_response"),
                columns=list(
                    list(
                        `name`="timepoint", 
                        `title`="Time Point", 
                        `type`="text"),
                    list(
                        `name`="response_category", 
                        `title`="Response Category", 
                        `type`="text"),
                    list(
                        `name`="size_change", 
                        `title`="Size Change (%)", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="metabolic_change", 
                        `title`="Metabolic Change", 
                        `type`="text"),
                    list(
                        `name`="recist_criteria", 
                        `title`="RECIST Criteria", 
                        `type`="text"),
                    list(
                        `name`="clinical_correlation", 
                        `title`="Clinical Correlation", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="radiomicsTable",
                title="Radiomics Feature Analysis",
                visible="(radiomics_analysis)",
                clearWith=list(
                    "imagingFindings",
                    "radiomics_analysis"),
                columns=list(
                    list(
                        `name`="feature_category", 
                        `title`="Feature Category", 
                        `type`="text"),
                    list(
                        `name`="feature_name", 
                        `title`="Feature Name", 
                        `type`="text"),
                    list(
                        `name`="value", 
                        `title`="Value", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="z_score", 
                        `title`="Z-Score", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="percentile", 
                        `title`="Percentile", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="diagnostic_relevance", 
                        `title`="Diagnostic Relevance", 
                        `type`="text"))))
            self$add(jmvcore::Html$new(
                options=options,
                name="integratedDiagnosticSummary",
                title="Integrated Diagnostic Summary",
                visible="(report_generation)",
                clearWith=list(
                    "imagingFindings",
                    "labResults",
                    "clinicalVars",
                    "pathologyData",
                    "report_generation")))
            self$add(jmvcore::Html$new(
                options=options,
                name="clinicalRecommendations",
                title="Clinical Recommendations",
                visible="(clinical_guidelines)",
                clearWith=list(
                    "imagingFindings",
                    "clinical_guidelines",
                    "diagnostic_confidence")))
            self$add(jmvcore::Html$new(
                options=options,
                name="confidenceAssessment",
                title="Diagnostic Confidence Assessment",
                visible="(diagnostic_confidence)",
                clearWith=list(
                    "imagingFindings",
                    "labResults",
                    "diagnostic_confidence")))
            self$add(jmvcore::Image$new(
                options=options,
                name="correlationPlot",
                title="Multi-Modal Correlation Plot",
                width=700,
                height=500,
                renderFun=".correlationPlot",
                visible="(correlation_plots)",
                requiresData=TRUE,
                clearWith=list(
                    "imagingFindings",
                    "labResults",
                    "clinicalVars",
                    "correlation_plots")))
            self$add(jmvcore::Image$new(
                options=options,
                name="concordancePlot",
                title="Diagnostic Concordance Plot",
                width=600,
                height=600,
                renderFun=".concordancePlot",
                visible="(concordance_plots)",
                requiresData=TRUE,
                clearWith=list(
                    "imagingFindings",
                    "pathologyData",
                    "concordance_plots")))
            self$add(jmvcore::Image$new(
                options=options,
                name="heatmapPlot",
                title="Correlation Heatmap",
                width=700,
                height=700,
                renderFun=".heatmapPlot",
                visible="(heatmap_visualization)",
                requiresData=TRUE,
                clearWith=list(
                    "imagingFindings",
                    "labResults",
                    "clinicalVars",
                    "heatmap_visualization")))
            self$add(jmvcore::Image$new(
                options=options,
                name="networkPlot",
                title="Diagnostic Network Diagram",
                width=800,
                height=600,
                renderFun=".networkPlot",
                visible="(network_diagram)",
                requiresData=TRUE,
                clearWith=list(
                    "imagingFindings",
                    "labResults",
                    "clinicalVars",
                    "pathologyData",
                    "network_diagram")))
            self$add(jmvcore::Image$new(
                options=options,
                name="rocPlot",
                title="ROC Curve Analysis",
                width=600,
                height=600,
                renderFun=".rocPlot",
                visible="(roc_curves)",
                requiresData=TRUE,
                clearWith=list(
                    "imagingFindings",
                    "pathologyData",
                    "roc_curves")))}))

imagingcorrelationBase <- if (requireNamespace("jmvcore", quietly=TRUE)) R6::R6Class(
    "imagingcorrelationBase",
    inherit = jmvcore::Analysis,
    public = list(
        initialize = function(options, data=NULL, datasetId="", analysisId="", revision=0) {
            super$initialize(
                package = "ClinicoPath",
                name = "imagingcorrelation",
                version = c(1,0,0),
                options = options,
                results = imagingcorrelationResults$new(options=options),
                data = data,
                datasetId = datasetId,
                analysisId = analysisId,
                revision = revision,
                pause = NULL,
                completeWhenFilled = TRUE,
                requiresMissings = FALSE,
                weightsSupport = 'auto')
        }))

#' Imaging Findings Correlation
#'
#' Imaging Findings Correlation provides comprehensive multi-modal diagnostic 
#' data integration by correlating imaging findings with laboratory results, 
#' clinical presentations, and pathological data for enhanced diagnostic 
#' accuracy and clinical decision support through evidence-based pattern 
#' recognition and cross-modality validation.
#' 
#'
#' @examples
#' data('clinicaldata', package='ClinicoPath')
#'
#' # Basic imaging correlation analysis
#' imagingcorrelation(clinicaldata,
#'                  imagingFindings = c('CT_Finding', 'MRI_Finding', 'PET_Finding'),
#'                  labResults = c('Biomarker1', 'Biomarker2'),
#'                  clinicalVars = c('Symptoms', 'Signs'),
#'                  correlation_analysis = TRUE,
#'                  concordance_assessment = TRUE)
#'
#' @param data .
#' @param imagingFindings Imaging findings from various modalities (CT, MRI,
#'   PET, ultrasound, X-ray)
#' @param labResults Laboratory test results and biomarkers for correlation
#'   analysis (optional)
#' @param clinicalVars Clinical symptoms, signs, and examination findings
#'   (optional)
#' @param pathologyData Pathological findings and histopathology results for
#'   validation (optional)
#' @param imagingModality Type of imaging modality for each finding (CT, MRI,
#'   PET, etc.) (optional)
#' @param correlation_analysis Perform comprehensive correlation analysis
#'   across imaging, lab, and clinical data
#' @param concordance_assessment Evaluate concordance between different
#'   diagnostic modalities
#' @param pattern_recognition Identify diagnostic patterns across multiple
#'   data modalities
#' @param sensitivity_specificity Calculate sensitivity, specificity, PPV, NPV
#'   for imaging findings
#' @param integration_method Method for integrating multi-modal diagnostic
#'   data
#' @param correlation_method Statistical method for correlation analysis
#' @param confidence_level Confidence level for statistical calculations and
#'   intervals
#' @param minimum_correlation Minimum correlation coefficient to report as
#'   significant
#' @param radiomics_analysis Perform advanced radiomics feature extraction and
#'   analysis
#' @param texture_analysis Analyze texture features from imaging data for
#'   pattern detection
#' @param lesion_characterization Comprehensive lesion characterization across
#'   imaging modalities
#' @param temporal_analysis Analyze temporal changes in imaging findings over
#'   time
#' @param anatomical_correlation Correlate findings based on anatomical
#'   location and distribution
#' @param staging_correlation Correlate imaging findings with disease staging
#'   and progression
#' @param treatment_response Evaluate treatment response using imaging
#'   criteria (RECIST, mRECIST, etc.)
#' @param ai_assisted Use AI/ML models for enhanced pattern recognition and
#'   prediction
#' @param correlation_plots Create comprehensive correlation visualization
#'   plots
#' @param concordance_plots Generate concordance plots between diagnostic
#'   modalities
#' @param heatmap_visualization Create heatmaps showing multi-modal
#'   correlations
#' @param network_diagram Generate network diagrams showing relationships
#'   between findings
#' @param roc_curves Generate ROC curves for diagnostic performance assessment
#' @param clinical_guidelines Integrate evidence-based imaging guidelines and
#'   recommendations
#' @param diagnostic_confidence Calculate and report diagnostic confidence
#'   levels for integrated findings
#' @param report_generation Generate comprehensive integrated diagnostic
#'   report with recommendations
#' @return A results object containing:
#' \tabular{llllll}{
#'   \code{results$todo} \tab \tab \tab \tab \tab a html \cr
#'   \code{results$correlationTable} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$concordanceTable} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$diagnosticPerformanceTable} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$patternRecognitionTable} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$lesionCharacterizationTable} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$stagingCorrelationTable} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$treatmentResponseTable} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$radiomicsTable} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$integratedDiagnosticSummary} \tab \tab \tab \tab \tab a html \cr
#'   \code{results$clinicalRecommendations} \tab \tab \tab \tab \tab a html \cr
#'   \code{results$confidenceAssessment} \tab \tab \tab \tab \tab a html \cr
#'   \code{results$correlationPlot} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$concordancePlot} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$heatmapPlot} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$networkPlot} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$rocPlot} \tab \tab \tab \tab \tab an image \cr
#' }
#'
#' Tables can be converted to data frames with \code{asDF} or \code{\link{as.data.frame}}. For example:
#'
#' \code{results$correlationTable$asDF}
#'
#' \code{as.data.frame(results$correlationTable)}
#'
#' @export
imagingcorrelation <- function(
    data,
    imagingFindings,
    labResults,
    clinicalVars,
    pathologyData,
    imagingModality,
    correlation_analysis = TRUE,
    concordance_assessment = TRUE,
    pattern_recognition = TRUE,
    sensitivity_specificity = TRUE,
    integration_method = "weighted_fusion",
    correlation_method = "spearman",
    confidence_level = 0.95,
    minimum_correlation = 0.3,
    radiomics_analysis = FALSE,
    texture_analysis = FALSE,
    lesion_characterization = TRUE,
    temporal_analysis = FALSE,
    anatomical_correlation = TRUE,
    staging_correlation = TRUE,
    treatment_response = FALSE,
    ai_assisted = FALSE,
    correlation_plots = TRUE,
    concordance_plots = TRUE,
    heatmap_visualization = TRUE,
    network_diagram = FALSE,
    roc_curves = TRUE,
    clinical_guidelines = TRUE,
    diagnostic_confidence = TRUE,
    report_generation = TRUE) {

    if ( ! requireNamespace("jmvcore", quietly=TRUE))
        stop("imagingcorrelation requires jmvcore to be installed (restart may be required)")

    if ( ! missing(imagingFindings)) imagingFindings <- jmvcore::resolveQuo(jmvcore::enquo(imagingFindings))
    if ( ! missing(labResults)) labResults <- jmvcore::resolveQuo(jmvcore::enquo(labResults))
    if ( ! missing(clinicalVars)) clinicalVars <- jmvcore::resolveQuo(jmvcore::enquo(clinicalVars))
    if ( ! missing(pathologyData)) pathologyData <- jmvcore::resolveQuo(jmvcore::enquo(pathologyData))
    if ( ! missing(imagingModality)) imagingModality <- jmvcore::resolveQuo(jmvcore::enquo(imagingModality))
    if (missing(data))
        data <- jmvcore::marshalData(
            parent.frame(),
            `if`( ! missing(imagingFindings), imagingFindings, NULL),
            `if`( ! missing(labResults), labResults, NULL),
            `if`( ! missing(clinicalVars), clinicalVars, NULL),
            `if`( ! missing(pathologyData), pathologyData, NULL),
            `if`( ! missing(imagingModality), imagingModality, NULL))

    for (v in imagingModality) if (v %in% names(data)) data[[v]] <- as.factor(data[[v]])

    options <- imagingcorrelationOptions$new(
        imagingFindings = imagingFindings,
        labResults = labResults,
        clinicalVars = clinicalVars,
        pathologyData = pathologyData,
        imagingModality = imagingModality,
        correlation_analysis = correlation_analysis,
        concordance_assessment = concordance_assessment,
        pattern_recognition = pattern_recognition,
        sensitivity_specificity = sensitivity_specificity,
        integration_method = integration_method,
        correlation_method = correlation_method,
        confidence_level = confidence_level,
        minimum_correlation = minimum_correlation,
        radiomics_analysis = radiomics_analysis,
        texture_analysis = texture_analysis,
        lesion_characterization = lesion_characterization,
        temporal_analysis = temporal_analysis,
        anatomical_correlation = anatomical_correlation,
        staging_correlation = staging_correlation,
        treatment_response = treatment_response,
        ai_assisted = ai_assisted,
        correlation_plots = correlation_plots,
        concordance_plots = concordance_plots,
        heatmap_visualization = heatmap_visualization,
        network_diagram = network_diagram,
        roc_curves = roc_curves,
        clinical_guidelines = clinical_guidelines,
        diagnostic_confidence = diagnostic_confidence,
        report_generation = report_generation)

    analysis <- imagingcorrelationClass$new(
        options = options,
        data = data)

    analysis$run()

    analysis$results
}

