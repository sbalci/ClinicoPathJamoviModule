
# This file is automatically generated, you probably don't want to edit this

nonparametricregressionOptions <- if (requireNamespace("jmvcore", quietly=TRUE)) R6::R6Class(
    "nonparametricregressionOptions",
    inherit = jmvcore::Options,
    public = list(
        initialize = function(
            outcome = NULL,
            predictors = NULL,
            grouping_variable = NULL,
            regression_type = "kernel",
            kernel_type = "gaussian",
            bandwidth_method = "cross_validation",
            manual_bandwidth = 0.1,
            loess_span = 0.75,
            loess_degree = "linear",
            loess_iterations = 3,
            spline_type = "smooth",
            spline_df = 4,
            spline_lambda = 0.1,
            quantile_tau = 0.5,
            quantile_method = "interior_point",
            gam_smoother = "cubic_spline",
            gam_basis_dim = 10,
            cv_folds = 10,
            cv_repeats = 1,
            model_selection_criterion = "cv_error",
            robust_regression = FALSE,
            robust_method = "huber",
            outlier_threshold = 3,
            confidence_level = 0.95,
            bootstrap_ci = TRUE,
            bootstrap_samples = 1000,
            prediction_intervals = TRUE,
            residual_diagnostics = TRUE,
            influence_diagnostics = FALSE,
            goodness_of_fit = TRUE,
            show_fitted_curves = TRUE,
            show_confidence_bands = TRUE,
            show_prediction_bands = FALSE,
            show_residual_plots = TRUE,
            show_qq_plots = TRUE,
            show_partial_plots = FALSE,
            show_model_summary = TRUE,
            show_parameter_estimates = TRUE,
            show_model_comparison = FALSE,
            show_interpretation = TRUE,
            multivariate_method = "additive",
            missing_data_handling = "complete_cases",
            clinical_context = "general",
            set_seed = TRUE,
            seed_value = 42,
            parallel_processing = FALSE,
            n_cores = 2, ...) {

            super$initialize(
                package="ClinicoPath",
                name="nonparametricregression",
                requiresData=TRUE,
                ...)

            private$..outcome <- jmvcore::OptionVariable$new(
                "outcome",
                outcome,
                suggested=list(
                    "continuous"),
                permitted=list(
                    "numeric"))
            private$..predictors <- jmvcore::OptionVariables$new(
                "predictors",
                predictors,
                suggested=list(
                    "continuous",
                    "ordinal"),
                permitted=list(
                    "numeric",
                    "factor"))
            private$..grouping_variable <- jmvcore::OptionVariable$new(
                "grouping_variable",
                grouping_variable,
                suggested=list(
                    "nominal",
                    "ordinal"),
                permitted=list(
                    "factor"),
                default=NULL)
            private$..regression_type <- jmvcore::OptionList$new(
                "regression_type",
                regression_type,
                options=list(
                    "kernel",
                    "loess",
                    "spline",
                    "local_linear",
                    "nadaraya_watson",
                    "quantile",
                    "gam"),
                default="kernel")
            private$..kernel_type <- jmvcore::OptionList$new(
                "kernel_type",
                kernel_type,
                options=list(
                    "gaussian",
                    "epanechnikov",
                    "uniform",
                    "triangular",
                    "biweight",
                    "triweight"),
                default="gaussian")
            private$..bandwidth_method <- jmvcore::OptionList$new(
                "bandwidth_method",
                bandwidth_method,
                options=list(
                    "cross_validation",
                    "plugin",
                    "rule_of_thumb",
                    "manual",
                    "least_squares_cv"),
                default="cross_validation")
            private$..manual_bandwidth <- jmvcore::OptionNumber$new(
                "manual_bandwidth",
                manual_bandwidth,
                default=0.1,
                min=0.001,
                max=2)
            private$..loess_span <- jmvcore::OptionNumber$new(
                "loess_span",
                loess_span,
                default=0.75,
                min=0.1,
                max=2)
            private$..loess_degree <- jmvcore::OptionList$new(
                "loess_degree",
                loess_degree,
                options=list(
                    "linear",
                    "quadratic"),
                default="linear")
            private$..loess_iterations <- jmvcore::OptionInteger$new(
                "loess_iterations",
                loess_iterations,
                default=3,
                min=0,
                max=10)
            private$..spline_type <- jmvcore::OptionList$new(
                "spline_type",
                spline_type,
                options=list(
                    "smooth",
                    "natural",
                    "b_spline",
                    "penalized"),
                default="smooth")
            private$..spline_df <- jmvcore::OptionNumber$new(
                "spline_df",
                spline_df,
                default=4,
                min=2,
                max=20)
            private$..spline_lambda <- jmvcore::OptionNumber$new(
                "spline_lambda",
                spline_lambda,
                default=0.1,
                min=0.001,
                max=10)
            private$..quantile_tau <- jmvcore::OptionNumber$new(
                "quantile_tau",
                quantile_tau,
                default=0.5,
                min=0.01,
                max=0.99)
            private$..quantile_method <- jmvcore::OptionList$new(
                "quantile_method",
                quantile_method,
                options=list(
                    "interior_point",
                    "frisch_newton",
                    "barrodale_roberts"),
                default="interior_point")
            private$..gam_smoother <- jmvcore::OptionList$new(
                "gam_smoother",
                gam_smoother,
                options=list(
                    "cubic_spline",
                    "thin_plate",
                    "p_spline",
                    "cyclic_spline"),
                default="cubic_spline")
            private$..gam_basis_dim <- jmvcore::OptionInteger$new(
                "gam_basis_dim",
                gam_basis_dim,
                default=10,
                min=3,
                max=30)
            private$..cv_folds <- jmvcore::OptionInteger$new(
                "cv_folds",
                cv_folds,
                default=10,
                min=3,
                max=20)
            private$..cv_repeats <- jmvcore::OptionInteger$new(
                "cv_repeats",
                cv_repeats,
                default=1,
                min=1,
                max=10)
            private$..model_selection_criterion <- jmvcore::OptionList$new(
                "model_selection_criterion",
                model_selection_criterion,
                options=list(
                    "cv_error",
                    "aic",
                    "bic",
                    "gcv"),
                default="cv_error")
            private$..robust_regression <- jmvcore::OptionBool$new(
                "robust_regression",
                robust_regression,
                default=FALSE)
            private$..robust_method <- jmvcore::OptionList$new(
                "robust_method",
                robust_method,
                options=list(
                    "huber",
                    "bisquare",
                    "hampel",
                    "andrews"),
                default="huber")
            private$..outlier_threshold <- jmvcore::OptionNumber$new(
                "outlier_threshold",
                outlier_threshold,
                default=3,
                min=1,
                max=5)
            private$..confidence_level <- jmvcore::OptionNumber$new(
                "confidence_level",
                confidence_level,
                default=0.95,
                min=0.8,
                max=0.99)
            private$..bootstrap_ci <- jmvcore::OptionBool$new(
                "bootstrap_ci",
                bootstrap_ci,
                default=TRUE)
            private$..bootstrap_samples <- jmvcore::OptionInteger$new(
                "bootstrap_samples",
                bootstrap_samples,
                default=1000,
                min=100,
                max=5000)
            private$..prediction_intervals <- jmvcore::OptionBool$new(
                "prediction_intervals",
                prediction_intervals,
                default=TRUE)
            private$..residual_diagnostics <- jmvcore::OptionBool$new(
                "residual_diagnostics",
                residual_diagnostics,
                default=TRUE)
            private$..influence_diagnostics <- jmvcore::OptionBool$new(
                "influence_diagnostics",
                influence_diagnostics,
                default=FALSE)
            private$..goodness_of_fit <- jmvcore::OptionBool$new(
                "goodness_of_fit",
                goodness_of_fit,
                default=TRUE)
            private$..show_fitted_curves <- jmvcore::OptionBool$new(
                "show_fitted_curves",
                show_fitted_curves,
                default=TRUE)
            private$..show_confidence_bands <- jmvcore::OptionBool$new(
                "show_confidence_bands",
                show_confidence_bands,
                default=TRUE)
            private$..show_prediction_bands <- jmvcore::OptionBool$new(
                "show_prediction_bands",
                show_prediction_bands,
                default=FALSE)
            private$..show_residual_plots <- jmvcore::OptionBool$new(
                "show_residual_plots",
                show_residual_plots,
                default=TRUE)
            private$..show_qq_plots <- jmvcore::OptionBool$new(
                "show_qq_plots",
                show_qq_plots,
                default=TRUE)
            private$..show_partial_plots <- jmvcore::OptionBool$new(
                "show_partial_plots",
                show_partial_plots,
                default=FALSE)
            private$..show_model_summary <- jmvcore::OptionBool$new(
                "show_model_summary",
                show_model_summary,
                default=TRUE)
            private$..show_parameter_estimates <- jmvcore::OptionBool$new(
                "show_parameter_estimates",
                show_parameter_estimates,
                default=TRUE)
            private$..show_model_comparison <- jmvcore::OptionBool$new(
                "show_model_comparison",
                show_model_comparison,
                default=FALSE)
            private$..show_interpretation <- jmvcore::OptionBool$new(
                "show_interpretation",
                show_interpretation,
                default=TRUE)
            private$..multivariate_method <- jmvcore::OptionList$new(
                "multivariate_method",
                multivariate_method,
                options=list(
                    "product",
                    "additive",
                    "interaction"),
                default="additive")
            private$..missing_data_handling <- jmvcore::OptionList$new(
                "missing_data_handling",
                missing_data_handling,
                options=list(
                    "complete_cases",
                    "pairwise",
                    "linear_interpolation"),
                default="complete_cases")
            private$..clinical_context <- jmvcore::OptionList$new(
                "clinical_context",
                clinical_context,
                options=list(
                    "dose_response",
                    "growth_curve",
                    "biomarker_trajectory",
                    "survival_function",
                    "qol_trends",
                    "general"),
                default="general")
            private$..set_seed <- jmvcore::OptionBool$new(
                "set_seed",
                set_seed,
                default=TRUE)
            private$..seed_value <- jmvcore::OptionInteger$new(
                "seed_value",
                seed_value,
                default=42,
                min=1,
                max=999999)
            private$..parallel_processing <- jmvcore::OptionBool$new(
                "parallel_processing",
                parallel_processing,
                default=FALSE)
            private$..n_cores <- jmvcore::OptionInteger$new(
                "n_cores",
                n_cores,
                default=2,
                min=1,
                max=8)

            self$.addOption(private$..outcome)
            self$.addOption(private$..predictors)
            self$.addOption(private$..grouping_variable)
            self$.addOption(private$..regression_type)
            self$.addOption(private$..kernel_type)
            self$.addOption(private$..bandwidth_method)
            self$.addOption(private$..manual_bandwidth)
            self$.addOption(private$..loess_span)
            self$.addOption(private$..loess_degree)
            self$.addOption(private$..loess_iterations)
            self$.addOption(private$..spline_type)
            self$.addOption(private$..spline_df)
            self$.addOption(private$..spline_lambda)
            self$.addOption(private$..quantile_tau)
            self$.addOption(private$..quantile_method)
            self$.addOption(private$..gam_smoother)
            self$.addOption(private$..gam_basis_dim)
            self$.addOption(private$..cv_folds)
            self$.addOption(private$..cv_repeats)
            self$.addOption(private$..model_selection_criterion)
            self$.addOption(private$..robust_regression)
            self$.addOption(private$..robust_method)
            self$.addOption(private$..outlier_threshold)
            self$.addOption(private$..confidence_level)
            self$.addOption(private$..bootstrap_ci)
            self$.addOption(private$..bootstrap_samples)
            self$.addOption(private$..prediction_intervals)
            self$.addOption(private$..residual_diagnostics)
            self$.addOption(private$..influence_diagnostics)
            self$.addOption(private$..goodness_of_fit)
            self$.addOption(private$..show_fitted_curves)
            self$.addOption(private$..show_confidence_bands)
            self$.addOption(private$..show_prediction_bands)
            self$.addOption(private$..show_residual_plots)
            self$.addOption(private$..show_qq_plots)
            self$.addOption(private$..show_partial_plots)
            self$.addOption(private$..show_model_summary)
            self$.addOption(private$..show_parameter_estimates)
            self$.addOption(private$..show_model_comparison)
            self$.addOption(private$..show_interpretation)
            self$.addOption(private$..multivariate_method)
            self$.addOption(private$..missing_data_handling)
            self$.addOption(private$..clinical_context)
            self$.addOption(private$..set_seed)
            self$.addOption(private$..seed_value)
            self$.addOption(private$..parallel_processing)
            self$.addOption(private$..n_cores)
        }),
    active = list(
        outcome = function() private$..outcome$value,
        predictors = function() private$..predictors$value,
        grouping_variable = function() private$..grouping_variable$value,
        regression_type = function() private$..regression_type$value,
        kernel_type = function() private$..kernel_type$value,
        bandwidth_method = function() private$..bandwidth_method$value,
        manual_bandwidth = function() private$..manual_bandwidth$value,
        loess_span = function() private$..loess_span$value,
        loess_degree = function() private$..loess_degree$value,
        loess_iterations = function() private$..loess_iterations$value,
        spline_type = function() private$..spline_type$value,
        spline_df = function() private$..spline_df$value,
        spline_lambda = function() private$..spline_lambda$value,
        quantile_tau = function() private$..quantile_tau$value,
        quantile_method = function() private$..quantile_method$value,
        gam_smoother = function() private$..gam_smoother$value,
        gam_basis_dim = function() private$..gam_basis_dim$value,
        cv_folds = function() private$..cv_folds$value,
        cv_repeats = function() private$..cv_repeats$value,
        model_selection_criterion = function() private$..model_selection_criterion$value,
        robust_regression = function() private$..robust_regression$value,
        robust_method = function() private$..robust_method$value,
        outlier_threshold = function() private$..outlier_threshold$value,
        confidence_level = function() private$..confidence_level$value,
        bootstrap_ci = function() private$..bootstrap_ci$value,
        bootstrap_samples = function() private$..bootstrap_samples$value,
        prediction_intervals = function() private$..prediction_intervals$value,
        residual_diagnostics = function() private$..residual_diagnostics$value,
        influence_diagnostics = function() private$..influence_diagnostics$value,
        goodness_of_fit = function() private$..goodness_of_fit$value,
        show_fitted_curves = function() private$..show_fitted_curves$value,
        show_confidence_bands = function() private$..show_confidence_bands$value,
        show_prediction_bands = function() private$..show_prediction_bands$value,
        show_residual_plots = function() private$..show_residual_plots$value,
        show_qq_plots = function() private$..show_qq_plots$value,
        show_partial_plots = function() private$..show_partial_plots$value,
        show_model_summary = function() private$..show_model_summary$value,
        show_parameter_estimates = function() private$..show_parameter_estimates$value,
        show_model_comparison = function() private$..show_model_comparison$value,
        show_interpretation = function() private$..show_interpretation$value,
        multivariate_method = function() private$..multivariate_method$value,
        missing_data_handling = function() private$..missing_data_handling$value,
        clinical_context = function() private$..clinical_context$value,
        set_seed = function() private$..set_seed$value,
        seed_value = function() private$..seed_value$value,
        parallel_processing = function() private$..parallel_processing$value,
        n_cores = function() private$..n_cores$value),
    private = list(
        ..outcome = NA,
        ..predictors = NA,
        ..grouping_variable = NA,
        ..regression_type = NA,
        ..kernel_type = NA,
        ..bandwidth_method = NA,
        ..manual_bandwidth = NA,
        ..loess_span = NA,
        ..loess_degree = NA,
        ..loess_iterations = NA,
        ..spline_type = NA,
        ..spline_df = NA,
        ..spline_lambda = NA,
        ..quantile_tau = NA,
        ..quantile_method = NA,
        ..gam_smoother = NA,
        ..gam_basis_dim = NA,
        ..cv_folds = NA,
        ..cv_repeats = NA,
        ..model_selection_criterion = NA,
        ..robust_regression = NA,
        ..robust_method = NA,
        ..outlier_threshold = NA,
        ..confidence_level = NA,
        ..bootstrap_ci = NA,
        ..bootstrap_samples = NA,
        ..prediction_intervals = NA,
        ..residual_diagnostics = NA,
        ..influence_diagnostics = NA,
        ..goodness_of_fit = NA,
        ..show_fitted_curves = NA,
        ..show_confidence_bands = NA,
        ..show_prediction_bands = NA,
        ..show_residual_plots = NA,
        ..show_qq_plots = NA,
        ..show_partial_plots = NA,
        ..show_model_summary = NA,
        ..show_parameter_estimates = NA,
        ..show_model_comparison = NA,
        ..show_interpretation = NA,
        ..multivariate_method = NA,
        ..missing_data_handling = NA,
        ..clinical_context = NA,
        ..set_seed = NA,
        ..seed_value = NA,
        ..parallel_processing = NA,
        ..n_cores = NA)
)

nonparametricregressionResults <- if (requireNamespace("jmvcore", quietly=TRUE)) R6::R6Class(
    "nonparametricregressionResults",
    inherit = jmvcore::Group,
    active = list(
        modelSummary = function() private$.items[["modelSummary"]],
        parameterEstimates = function() private$.items[["parameterEstimates"]],
        bandwidthSelection = function() private$.items[["bandwidthSelection"]],
        modelFit = function() private$.items[["modelFit"]],
        residualDiagnostics = function() private$.items[["residualDiagnostics"]],
        influenceDiagnostics = function() private$.items[["influenceDiagnostics"]],
        predictionTable = function() private$.items[["predictionTable"]],
        goodnessOfFit = function() private$.items[["goodnessOfFit"]],
        crossValidation = function() private$.items[["crossValidation"]],
        modelComparison = function() private$.items[["modelComparison"]],
        clinicalInterpretation = function() private$.items[["clinicalInterpretation"]],
        methodsExplanation = function() private$.items[["methodsExplanation"]],
        fittedCurvePlot = function() private$.items[["fittedCurvePlot"]],
        residualPlots = function() private$.items[["residualPlots"]],
        qqPlots = function() private$.items[["qqPlots"]],
        partialEffectPlots = function() private$.items[["partialEffectPlots"]],
        influencePlots = function() private$.items[["influencePlots"]],
        bandwidthPlots = function() private$.items[["bandwidthPlots"]]),
    private = list(),
    public=list(
        initialize=function(options) {
            super$initialize(
                options=options,
                name="",
                title="Analysis Results")
            self$add(jmvcore::Table$new(
                options=options,
                name="modelSummary",
                title="Non-parametric Regression Model Summary",
                columns=list(
                    list(
                        `name`="parameter", 
                        `title`="Parameter", 
                        `type`="text"),
                    list(
                        `name`="value", 
                        `title`="Value", 
                        `type`="text"),
                    list(
                        `name`="interpretation", 
                        `title`="Interpretation", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="parameterEstimates",
                title="Model Parameter Estimates",
                columns=list(
                    list(
                        `name`="predictor", 
                        `title`="Predictor", 
                        `type`="text"),
                    list(
                        `name`="estimate", 
                        `title`="Estimate", 
                        `type`="number"),
                    list(
                        `name`="se", 
                        `title`="Standard Error", 
                        `type`="number"),
                    list(
                        `name`="ci_lower", 
                        `title`="CI Lower", 
                        `type`="number"),
                    list(
                        `name`="ci_upper", 
                        `title`="CI Upper", 
                        `type`="number"),
                    list(
                        `name`="edf", 
                        `title`="Effective df", 
                        `type`="number"),
                    list(
                        `name`="significance", 
                        `title`="Significance", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="bandwidthSelection",
                title="Bandwidth/Smoothing Parameter Selection",
                columns=list(
                    list(
                        `name`="predictor", 
                        `title`="Predictor Variable", 
                        `type`="text"),
                    list(
                        `name`="selected_bandwidth", 
                        `title`="Selected Bandwidth", 
                        `type`="number"),
                    list(
                        `name`="cv_error", 
                        `title`="CV Error", 
                        `type`="number"),
                    list(
                        `name`="gcv_score", 
                        `title`="GCV Score", 
                        `type`="number"),
                    list(
                        `name`="selection_method", 
                        `title`="Selection Method", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="modelFit",
                title="Model Fit Statistics",
                columns=list(
                    list(
                        `name`="statistic", 
                        `title`="Statistic", 
                        `type`="text"),
                    list(
                        `name`="value", 
                        `title`="Value", 
                        `type`="number"),
                    list(
                        `name`="interpretation", 
                        `title`="Interpretation", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="residualDiagnostics",
                title="Residual Diagnostics",
                columns=list(
                    list(
                        `name`="diagnostic", 
                        `title`="Diagnostic Test", 
                        `type`="text"),
                    list(
                        `name`="statistic", 
                        `title`="Test Statistic", 
                        `type`="number"),
                    list(
                        `name`="p_value", 
                        `title`="p-value", 
                        `type`="number", 
                        `format`="zto,pvalue"),
                    list(
                        `name`="result", 
                        `title`="Result", 
                        `type`="text"),
                    list(
                        `name`="implication", 
                        `title`="Implication", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="influenceDiagnostics",
                title="Influence Diagnostics",
                columns=list(
                    list(
                        `name`="observation", 
                        `title`="Observation", 
                        `type`="integer"),
                    list(
                        `name`="leverage", 
                        `title`="Leverage", 
                        `type`="number"),
                    list(
                        `name`="cooks_d", 
                        `title`="Cook's Distance", 
                        `type`="number"),
                    list(
                        `name`="standardized_residual", 
                        `title`="Standardized Residual", 
                        `type`="number"),
                    list(
                        `name`="influential", 
                        `title`="Influential", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="predictionTable",
                title="Fitted Values and Residuals",
                columns=list(
                    list(
                        `name`="observation", 
                        `title`="Observation", 
                        `type`="integer"),
                    list(
                        `name`="observed", 
                        `title`="Observed", 
                        `type`="number"),
                    list(
                        `name`="fitted", 
                        `title`="Fitted", 
                        `type`="number"),
                    list(
                        `name`="residual", 
                        `title`="Residual", 
                        `type`="number"),
                    list(
                        `name`="standardized_residual", 
                        `title`="Standardized Residual", 
                        `type`="number"),
                    list(
                        `name`="ci_lower", 
                        `title`="CI Lower", 
                        `type`="number"),
                    list(
                        `name`="ci_upper", 
                        `title`="CI Upper", 
                        `type`="number"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="goodnessOfFit",
                title="Goodness-of-Fit Assessment",
                columns=list(
                    list(
                        `name`="test", 
                        `title`="Test", 
                        `type`="text"),
                    list(
                        `name`="statistic", 
                        `title`="Statistic", 
                        `type`="number"),
                    list(
                        `name`="df", 
                        `title`="df", 
                        `type`="integer"),
                    list(
                        `name`="p_value", 
                        `title`="p-value", 
                        `type`="number", 
                        `format`="zto,pvalue"),
                    list(
                        `name`="conclusion", 
                        `title`="Conclusion", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="crossValidation",
                title="Cross-Validation Results",
                columns=list(
                    list(
                        `name`="fold", 
                        `title`="Fold", 
                        `type`="integer"),
                    list(
                        `name`="mse", 
                        `title`="MSE", 
                        `type`="number"),
                    list(
                        `name`="mae", 
                        `title`="MAE", 
                        `type`="number"),
                    list(
                        `name`="r_squared", 
                        `title`="R\u00B2", 
                        `type`="number"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="modelComparison",
                title="Model Comparison",
                columns=list(
                    list(
                        `name`="model", 
                        `title`="Model", 
                        `type`="text"),
                    list(
                        `name`="aic", 
                        `title`="AIC", 
                        `type`="number"),
                    list(
                        `name`="bic", 
                        `title`="BIC", 
                        `type`="number"),
                    list(
                        `name`="cv_error", 
                        `title`="CV Error", 
                        `type`="number"),
                    list(
                        `name`="r_squared", 
                        `title`="R\u00B2", 
                        `type`="number"),
                    list(
                        `name`="rank", 
                        `title`="Rank", 
                        `type`="integer"))))
            self$add(jmvcore::Html$new(
                options=options,
                name="clinicalInterpretation",
                title="Clinical Interpretation and Guidelines"))
            self$add(jmvcore::Html$new(
                options=options,
                name="methodsExplanation",
                title="Statistical Methods and Theory"))
            self$add(jmvcore::Image$new(
                options=options,
                name="fittedCurvePlot",
                title="Fitted Regression Curves",
                width=600,
                height=400,
                renderFun=".plotFittedCurves"))
            self$add(jmvcore::Image$new(
                options=options,
                name="residualPlots",
                title="Residual Diagnostic Plots",
                width=600,
                height=500,
                renderFun=".plotResidualDiagnostics"))
            self$add(jmvcore::Image$new(
                options=options,
                name="qqPlots",
                title="Q-Q Plots for Model Assumptions",
                width=500,
                height=400,
                renderFun=".plotQQDiagnostics"))
            self$add(jmvcore::Image$new(
                options=options,
                name="partialEffectPlots",
                title="Partial Effect Plots",
                width=600,
                height=400,
                renderFun=".plotPartialEffects"))
            self$add(jmvcore::Image$new(
                options=options,
                name="influencePlots",
                title="Influence and Leverage Plots",
                width=500,
                height=400,
                renderFun=".plotInfluenceDiagnostics"))
            self$add(jmvcore::Image$new(
                options=options,
                name="bandwidthPlots",
                title="Bandwidth Selection Visualization",
                width=500,
                height=350,
                renderFun=".plotBandwidthSelection"))}))

nonparametricregressionBase <- if (requireNamespace("jmvcore", quietly=TRUE)) R6::R6Class(
    "nonparametricregressionBase",
    inherit = jmvcore::Analysis,
    public = list(
        initialize = function(options, data=NULL, datasetId="", analysisId="", revision=0) {
            super$initialize(
                package = "ClinicoPath",
                name = "nonparametricregression",
                version = c(0,0,31),
                options = options,
                results = nonparametricregressionResults$new(options=options),
                data = data,
                datasetId = datasetId,
                analysisId = analysisId,
                revision = revision,
                pause = NULL,
                completeWhenFilled = FALSE,
                requiresMissings = FALSE,
                weightsSupport = 'auto')
        }))

#' Non-parametric Regression Methods
#'
#' Comprehensive non-parametric regression methods including kernel 
#' regression,
#' local polynomial smoothing (LOESS), spline regression, and robust 
#' regression
#' techniques designed for clinical research where parametric assumptions are 
#' violated.
#' 
#'
#' @examples
#' # Kernel regression with automatic bandwidth selection
#' nonparametricregression(
#'     data = clinical_data,
#'     outcome = "biomarker_response",
#'     predictors = c("age", "weight", "baseline_score"),
#'     regression_type = "kernel",
#'     bandwidth_method = "cross_validation"
#' )
#'
#' @param data The data as a data frame for non-parametric regression
#'   analysis.
#' @param outcome .
#' @param predictors .
#' @param grouping_variable .
#' @param regression_type .
#' @param kernel_type .
#' @param bandwidth_method .
#' @param manual_bandwidth .
#' @param loess_span .
#' @param loess_degree .
#' @param loess_iterations .
#' @param spline_type .
#' @param spline_df .
#' @param spline_lambda .
#' @param quantile_tau .
#' @param quantile_method .
#' @param gam_smoother .
#' @param gam_basis_dim .
#' @param cv_folds .
#' @param cv_repeats .
#' @param model_selection_criterion .
#' @param robust_regression .
#' @param robust_method .
#' @param outlier_threshold .
#' @param confidence_level .
#' @param bootstrap_ci .
#' @param bootstrap_samples .
#' @param prediction_intervals .
#' @param residual_diagnostics .
#' @param influence_diagnostics .
#' @param goodness_of_fit .
#' @param show_fitted_curves .
#' @param show_confidence_bands .
#' @param show_prediction_bands .
#' @param show_residual_plots .
#' @param show_qq_plots .
#' @param show_partial_plots .
#' @param show_model_summary .
#' @param show_parameter_estimates .
#' @param show_model_comparison .
#' @param show_interpretation .
#' @param multivariate_method .
#' @param missing_data_handling .
#' @param clinical_context .
#' @param set_seed .
#' @param seed_value .
#' @param parallel_processing .
#' @param n_cores .
#' @return A results object containing:
#' \tabular{llllll}{
#'   \code{results$modelSummary} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$parameterEstimates} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$bandwidthSelection} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$modelFit} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$residualDiagnostics} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$influenceDiagnostics} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$predictionTable} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$goodnessOfFit} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$crossValidation} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$modelComparison} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$clinicalInterpretation} \tab \tab \tab \tab \tab a html \cr
#'   \code{results$methodsExplanation} \tab \tab \tab \tab \tab a html \cr
#'   \code{results$fittedCurvePlot} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$residualPlots} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$qqPlots} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$partialEffectPlots} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$influencePlots} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$bandwidthPlots} \tab \tab \tab \tab \tab an image \cr
#' }
#'
#' Tables can be converted to data frames with \code{asDF} or \code{\link{as.data.frame}}. For example:
#'
#' \code{results$modelSummary$asDF}
#'
#' \code{as.data.frame(results$modelSummary)}
#'
#' @export
nonparametricregression <- function(
    data,
    outcome,
    predictors,
    grouping_variable = NULL,
    regression_type = "kernel",
    kernel_type = "gaussian",
    bandwidth_method = "cross_validation",
    manual_bandwidth = 0.1,
    loess_span = 0.75,
    loess_degree = "linear",
    loess_iterations = 3,
    spline_type = "smooth",
    spline_df = 4,
    spline_lambda = 0.1,
    quantile_tau = 0.5,
    quantile_method = "interior_point",
    gam_smoother = "cubic_spline",
    gam_basis_dim = 10,
    cv_folds = 10,
    cv_repeats = 1,
    model_selection_criterion = "cv_error",
    robust_regression = FALSE,
    robust_method = "huber",
    outlier_threshold = 3,
    confidence_level = 0.95,
    bootstrap_ci = TRUE,
    bootstrap_samples = 1000,
    prediction_intervals = TRUE,
    residual_diagnostics = TRUE,
    influence_diagnostics = FALSE,
    goodness_of_fit = TRUE,
    show_fitted_curves = TRUE,
    show_confidence_bands = TRUE,
    show_prediction_bands = FALSE,
    show_residual_plots = TRUE,
    show_qq_plots = TRUE,
    show_partial_plots = FALSE,
    show_model_summary = TRUE,
    show_parameter_estimates = TRUE,
    show_model_comparison = FALSE,
    show_interpretation = TRUE,
    multivariate_method = "additive",
    missing_data_handling = "complete_cases",
    clinical_context = "general",
    set_seed = TRUE,
    seed_value = 42,
    parallel_processing = FALSE,
    n_cores = 2) {

    if ( ! requireNamespace("jmvcore", quietly=TRUE))
        stop("nonparametricregression requires jmvcore to be installed (restart may be required)")

    if ( ! missing(outcome)) outcome <- jmvcore::resolveQuo(jmvcore::enquo(outcome))
    if ( ! missing(predictors)) predictors <- jmvcore::resolveQuo(jmvcore::enquo(predictors))
    if ( ! missing(grouping_variable)) grouping_variable <- jmvcore::resolveQuo(jmvcore::enquo(grouping_variable))
    if (missing(data))
        data <- jmvcore::marshalData(
            parent.frame(),
            `if`( ! missing(outcome), outcome, NULL),
            `if`( ! missing(predictors), predictors, NULL),
            `if`( ! missing(grouping_variable), grouping_variable, NULL))

    for (v in grouping_variable) if (v %in% names(data)) data[[v]] <- as.factor(data[[v]])

    options <- nonparametricregressionOptions$new(
        outcome = outcome,
        predictors = predictors,
        grouping_variable = grouping_variable,
        regression_type = regression_type,
        kernel_type = kernel_type,
        bandwidth_method = bandwidth_method,
        manual_bandwidth = manual_bandwidth,
        loess_span = loess_span,
        loess_degree = loess_degree,
        loess_iterations = loess_iterations,
        spline_type = spline_type,
        spline_df = spline_df,
        spline_lambda = spline_lambda,
        quantile_tau = quantile_tau,
        quantile_method = quantile_method,
        gam_smoother = gam_smoother,
        gam_basis_dim = gam_basis_dim,
        cv_folds = cv_folds,
        cv_repeats = cv_repeats,
        model_selection_criterion = model_selection_criterion,
        robust_regression = robust_regression,
        robust_method = robust_method,
        outlier_threshold = outlier_threshold,
        confidence_level = confidence_level,
        bootstrap_ci = bootstrap_ci,
        bootstrap_samples = bootstrap_samples,
        prediction_intervals = prediction_intervals,
        residual_diagnostics = residual_diagnostics,
        influence_diagnostics = influence_diagnostics,
        goodness_of_fit = goodness_of_fit,
        show_fitted_curves = show_fitted_curves,
        show_confidence_bands = show_confidence_bands,
        show_prediction_bands = show_prediction_bands,
        show_residual_plots = show_residual_plots,
        show_qq_plots = show_qq_plots,
        show_partial_plots = show_partial_plots,
        show_model_summary = show_model_summary,
        show_parameter_estimates = show_parameter_estimates,
        show_model_comparison = show_model_comparison,
        show_interpretation = show_interpretation,
        multivariate_method = multivariate_method,
        missing_data_handling = missing_data_handling,
        clinical_context = clinical_context,
        set_seed = set_seed,
        seed_value = seed_value,
        parallel_processing = parallel_processing,
        n_cores = n_cores)

    analysis <- nonparametricregressionClass$new(
        options = options,
        data = data)

    analysis$run()

    analysis$results
}

