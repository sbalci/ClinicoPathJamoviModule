
# This file is automatically generated, you probably don't want to edit this

jointmodelingOptions <- if (requireNamespace("jmvcore", quietly=TRUE)) R6::R6Class(
    "jointmodelingOptions",
    inherit = jmvcore::Options,
    public = list(
        initialize = function(
            id = NULL,
            time_longitudinal = NULL,
            biomarker = NULL,
            survival_time = NULL,
            survival_status = NULL,
            covariates = NULL,
            functional_form = "linear",
            random_effects = "intercept_slope",
            error_structure = "independent",
            survival_model = "cox",
            association_structure = "current_value",
            estimation_method = "bayesian",
            mcmc_chains = 3,
            mcmc_iterations = 12000,
            mcmc_burnin = 2000,
            mcmc_thin = 5,
            dynamic_prediction = TRUE,
            prediction_horizon = "0.5,1,2,3",
            prediction_window = 2,
            internal_validation = TRUE,
            cv_folds = 5,
            discrimination_metrics = TRUE,
            plot_trajectories = TRUE,
            plot_mean_trajectory = TRUE,
            plot_survival_curves = TRUE,
            plot_dynamic_auc = TRUE,
            plot_residuals = FALSE,
            competing_risks = FALSE,
            left_truncation = FALSE,
            time_varying_effects = FALSE,
            multiple_biomarkers = NULL,
            baseline_hazard = "unspecified",
            prior_specification = "default",
            convergence_diagnostics = TRUE,
            parallel_computation = TRUE, ...) {

            super$initialize(
                package="ClinicoPath",
                name="jointmodeling",
                requiresData=TRUE,
                ...)

            private$..id <- jmvcore::OptionVariable$new(
                "id",
                id,
                suggested=list(
                    "id"),
                permitted=list(
                    "id",
                    "factor",
                    "numeric"))
            private$..time_longitudinal <- jmvcore::OptionVariable$new(
                "time_longitudinal",
                time_longitudinal,
                suggested=list(
                    "continuous"),
                permitted=list(
                    "numeric"))
            private$..biomarker <- jmvcore::OptionVariable$new(
                "biomarker",
                biomarker,
                suggested=list(
                    "continuous"),
                permitted=list(
                    "numeric"))
            private$..survival_time <- jmvcore::OptionVariable$new(
                "survival_time",
                survival_time,
                suggested=list(
                    "continuous"),
                permitted=list(
                    "numeric"))
            private$..survival_status <- jmvcore::OptionVariable$new(
                "survival_status",
                survival_status,
                suggested=list(
                    "nominal"),
                permitted=list(
                    "factor",
                    "numeric"))
            private$..covariates <- jmvcore::OptionVariables$new(
                "covariates",
                covariates,
                suggested=list(
                    "continuous",
                    "nominal"),
                permitted=list(
                    "numeric",
                    "factor"))
            private$..functional_form <- jmvcore::OptionList$new(
                "functional_form",
                functional_form,
                options=list(
                    "linear",
                    "quadratic",
                    "cubic",
                    "splines",
                    "ns",
                    "bs"),
                default="linear")
            private$..random_effects <- jmvcore::OptionList$new(
                "random_effects",
                random_effects,
                options=list(
                    "intercept",
                    "intercept_slope",
                    "full_quadratic",
                    "custom"),
                default="intercept_slope")
            private$..error_structure <- jmvcore::OptionList$new(
                "error_structure",
                error_structure,
                options=list(
                    "independent",
                    "ar1",
                    "compound",
                    "unstructured"),
                default="independent")
            private$..survival_model <- jmvcore::OptionList$new(
                "survival_model",
                survival_model,
                options=list(
                    "cox",
                    "weibull",
                    "exponential",
                    "lognormal",
                    "gompertz"),
                default="cox")
            private$..association_structure <- jmvcore::OptionList$new(
                "association_structure",
                association_structure,
                options=list(
                    "current_value",
                    "current_slope",
                    "value_slope",
                    "auc",
                    "cumulative",
                    "shared_re"),
                default="current_value")
            private$..estimation_method <- jmvcore::OptionList$new(
                "estimation_method",
                estimation_method,
                options=list(
                    "bayesian",
                    "twostage",
                    "joint_ml"),
                default="bayesian")
            private$..mcmc_chains <- jmvcore::OptionInteger$new(
                "mcmc_chains",
                mcmc_chains,
                default=3,
                min=1,
                max=8)
            private$..mcmc_iterations <- jmvcore::OptionInteger$new(
                "mcmc_iterations",
                mcmc_iterations,
                default=12000,
                min=5000,
                max=50000)
            private$..mcmc_burnin <- jmvcore::OptionInteger$new(
                "mcmc_burnin",
                mcmc_burnin,
                default=2000,
                min=1000,
                max=20000)
            private$..mcmc_thin <- jmvcore::OptionInteger$new(
                "mcmc_thin",
                mcmc_thin,
                default=5,
                min=1,
                max=20)
            private$..dynamic_prediction <- jmvcore::OptionBool$new(
                "dynamic_prediction",
                dynamic_prediction,
                default=TRUE)
            private$..prediction_horizon <- jmvcore::OptionString$new(
                "prediction_horizon",
                prediction_horizon,
                default="0.5,1,2,3")
            private$..prediction_window <- jmvcore::OptionNumber$new(
                "prediction_window",
                prediction_window,
                default=2,
                min=0.1,
                max=10)
            private$..internal_validation <- jmvcore::OptionBool$new(
                "internal_validation",
                internal_validation,
                default=TRUE)
            private$..cv_folds <- jmvcore::OptionInteger$new(
                "cv_folds",
                cv_folds,
                default=5,
                min=3,
                max=10)
            private$..discrimination_metrics <- jmvcore::OptionBool$new(
                "discrimination_metrics",
                discrimination_metrics,
                default=TRUE)
            private$..plot_trajectories <- jmvcore::OptionBool$new(
                "plot_trajectories",
                plot_trajectories,
                default=TRUE)
            private$..plot_mean_trajectory <- jmvcore::OptionBool$new(
                "plot_mean_trajectory",
                plot_mean_trajectory,
                default=TRUE)
            private$..plot_survival_curves <- jmvcore::OptionBool$new(
                "plot_survival_curves",
                plot_survival_curves,
                default=TRUE)
            private$..plot_dynamic_auc <- jmvcore::OptionBool$new(
                "plot_dynamic_auc",
                plot_dynamic_auc,
                default=TRUE)
            private$..plot_residuals <- jmvcore::OptionBool$new(
                "plot_residuals",
                plot_residuals,
                default=FALSE)
            private$..competing_risks <- jmvcore::OptionBool$new(
                "competing_risks",
                competing_risks,
                default=FALSE)
            private$..left_truncation <- jmvcore::OptionBool$new(
                "left_truncation",
                left_truncation,
                default=FALSE)
            private$..time_varying_effects <- jmvcore::OptionBool$new(
                "time_varying_effects",
                time_varying_effects,
                default=FALSE)
            private$..multiple_biomarkers <- jmvcore::OptionVariables$new(
                "multiple_biomarkers",
                multiple_biomarkers,
                suggested=list(
                    "continuous"),
                permitted=list(
                    "numeric"))
            private$..baseline_hazard <- jmvcore::OptionList$new(
                "baseline_hazard",
                baseline_hazard,
                options=list(
                    "unspecified",
                    "piecewise",
                    "splines",
                    "psplines"),
                default="unspecified")
            private$..prior_specification <- jmvcore::OptionList$new(
                "prior_specification",
                prior_specification,
                options=list(
                    "default",
                    "noninformative",
                    "custom"),
                default="default")
            private$..convergence_diagnostics <- jmvcore::OptionBool$new(
                "convergence_diagnostics",
                convergence_diagnostics,
                default=TRUE)
            private$..parallel_computation <- jmvcore::OptionBool$new(
                "parallel_computation",
                parallel_computation,
                default=TRUE)

            self$.addOption(private$..id)
            self$.addOption(private$..time_longitudinal)
            self$.addOption(private$..biomarker)
            self$.addOption(private$..survival_time)
            self$.addOption(private$..survival_status)
            self$.addOption(private$..covariates)
            self$.addOption(private$..functional_form)
            self$.addOption(private$..random_effects)
            self$.addOption(private$..error_structure)
            self$.addOption(private$..survival_model)
            self$.addOption(private$..association_structure)
            self$.addOption(private$..estimation_method)
            self$.addOption(private$..mcmc_chains)
            self$.addOption(private$..mcmc_iterations)
            self$.addOption(private$..mcmc_burnin)
            self$.addOption(private$..mcmc_thin)
            self$.addOption(private$..dynamic_prediction)
            self$.addOption(private$..prediction_horizon)
            self$.addOption(private$..prediction_window)
            self$.addOption(private$..internal_validation)
            self$.addOption(private$..cv_folds)
            self$.addOption(private$..discrimination_metrics)
            self$.addOption(private$..plot_trajectories)
            self$.addOption(private$..plot_mean_trajectory)
            self$.addOption(private$..plot_survival_curves)
            self$.addOption(private$..plot_dynamic_auc)
            self$.addOption(private$..plot_residuals)
            self$.addOption(private$..competing_risks)
            self$.addOption(private$..left_truncation)
            self$.addOption(private$..time_varying_effects)
            self$.addOption(private$..multiple_biomarkers)
            self$.addOption(private$..baseline_hazard)
            self$.addOption(private$..prior_specification)
            self$.addOption(private$..convergence_diagnostics)
            self$.addOption(private$..parallel_computation)
        }),
    active = list(
        id = function() private$..id$value,
        time_longitudinal = function() private$..time_longitudinal$value,
        biomarker = function() private$..biomarker$value,
        survival_time = function() private$..survival_time$value,
        survival_status = function() private$..survival_status$value,
        covariates = function() private$..covariates$value,
        functional_form = function() private$..functional_form$value,
        random_effects = function() private$..random_effects$value,
        error_structure = function() private$..error_structure$value,
        survival_model = function() private$..survival_model$value,
        association_structure = function() private$..association_structure$value,
        estimation_method = function() private$..estimation_method$value,
        mcmc_chains = function() private$..mcmc_chains$value,
        mcmc_iterations = function() private$..mcmc_iterations$value,
        mcmc_burnin = function() private$..mcmc_burnin$value,
        mcmc_thin = function() private$..mcmc_thin$value,
        dynamic_prediction = function() private$..dynamic_prediction$value,
        prediction_horizon = function() private$..prediction_horizon$value,
        prediction_window = function() private$..prediction_window$value,
        internal_validation = function() private$..internal_validation$value,
        cv_folds = function() private$..cv_folds$value,
        discrimination_metrics = function() private$..discrimination_metrics$value,
        plot_trajectories = function() private$..plot_trajectories$value,
        plot_mean_trajectory = function() private$..plot_mean_trajectory$value,
        plot_survival_curves = function() private$..plot_survival_curves$value,
        plot_dynamic_auc = function() private$..plot_dynamic_auc$value,
        plot_residuals = function() private$..plot_residuals$value,
        competing_risks = function() private$..competing_risks$value,
        left_truncation = function() private$..left_truncation$value,
        time_varying_effects = function() private$..time_varying_effects$value,
        multiple_biomarkers = function() private$..multiple_biomarkers$value,
        baseline_hazard = function() private$..baseline_hazard$value,
        prior_specification = function() private$..prior_specification$value,
        convergence_diagnostics = function() private$..convergence_diagnostics$value,
        parallel_computation = function() private$..parallel_computation$value),
    private = list(
        ..id = NA,
        ..time_longitudinal = NA,
        ..biomarker = NA,
        ..survival_time = NA,
        ..survival_status = NA,
        ..covariates = NA,
        ..functional_form = NA,
        ..random_effects = NA,
        ..error_structure = NA,
        ..survival_model = NA,
        ..association_structure = NA,
        ..estimation_method = NA,
        ..mcmc_chains = NA,
        ..mcmc_iterations = NA,
        ..mcmc_burnin = NA,
        ..mcmc_thin = NA,
        ..dynamic_prediction = NA,
        ..prediction_horizon = NA,
        ..prediction_window = NA,
        ..internal_validation = NA,
        ..cv_folds = NA,
        ..discrimination_metrics = NA,
        ..plot_trajectories = NA,
        ..plot_mean_trajectory = NA,
        ..plot_survival_curves = NA,
        ..plot_dynamic_auc = NA,
        ..plot_residuals = NA,
        ..competing_risks = NA,
        ..left_truncation = NA,
        ..time_varying_effects = NA,
        ..multiple_biomarkers = NA,
        ..baseline_hazard = NA,
        ..prior_specification = NA,
        ..convergence_diagnostics = NA,
        ..parallel_computation = NA)
)

jointmodelingResults <- if (requireNamespace("jmvcore", quietly=TRUE)) R6::R6Class(
    "jointmodelingResults",
    inherit = jmvcore::Group,
    active = list(
        instructions = function() private$.items[["instructions"]],
        progress = function() private$.items[["progress"]],
        errors = function() private$.items[["errors"]],
        warnings = function() private$.items[["warnings"]],
        dataSummary = function() private$.items[["dataSummary"]],
        longitudinalResults = function() private$.items[["longitudinalResults"]],
        survivalResults = function() private$.items[["survivalResults"]],
        jointModelResults = function() private$.items[["jointModelResults"]],
        diagnostics = function() private$.items[["diagnostics"]],
        dynamicPredictions = function() private$.items[["dynamicPredictions"]],
        validation = function() private$.items[["validation"]],
        finalResults = function() private$.items[["finalResults"]],
        trajectoryPlot = function() private$.items[["trajectoryPlot"]],
        meanTrajectoryPlot = function() private$.items[["meanTrajectoryPlot"]],
        survivalPlot = function() private$.items[["survivalPlot"]],
        dynamicAUCPlot = function() private$.items[["dynamicAUCPlot"]],
        residualPlot = function() private$.items[["residualPlot"]]),
    private = list(),
    public=list(
        initialize=function(options) {
            super$initialize(
                options=options,
                name="",
                title="Joint Longitudinal-Survival Models")
            self$add(jmvcore::Html$new(
                options=options,
                name="instructions",
                title="Analysis Instructions",
                visible=TRUE))
            self$add(jmvcore::Html$new(
                options=options,
                name="progress",
                title="Analysis Progress",
                visible=TRUE))
            self$add(jmvcore::Html$new(
                options=options,
                name="errors",
                title="Error Messages",
                visible=FALSE))
            self$add(jmvcore::Html$new(
                options=options,
                name="warnings",
                title="Warning Messages",
                visible=FALSE))
            self$add(jmvcore::Html$new(
                options=options,
                name="dataSummary",
                title="Data Summary",
                visible=TRUE))
            self$add(jmvcore::Html$new(
                options=options,
                name="longitudinalResults",
                title="Longitudinal Model Results",
                visible=TRUE))
            self$add(jmvcore::Html$new(
                options=options,
                name="survivalResults",
                title="Survival Model Results",
                visible=TRUE))
            self$add(jmvcore::Html$new(
                options=options,
                name="jointModelResults",
                title="Joint Model Results",
                visible=TRUE))
            self$add(jmvcore::Html$new(
                options=options,
                name="diagnostics",
                title="Model Diagnostics",
                visible=TRUE))
            self$add(jmvcore::Html$new(
                options=options,
                name="dynamicPredictions",
                title="Dynamic Risk Predictions",
                visible=TRUE))
            self$add(jmvcore::Html$new(
                options=options,
                name="validation",
                title="Model Validation",
                visible=TRUE))
            self$add(jmvcore::Html$new(
                options=options,
                name="finalResults",
                title="Final Results Summary",
                visible=TRUE))
            self$add(jmvcore::Image$new(
                options=options,
                name="trajectoryPlot",
                title="Individual Trajectory Plot",
                width=800,
                height=600,
                renderFun=".trajectoryPlot",
                requiresData=TRUE,
                clearWith=list(
                    "id",
                    "time_longitudinal",
                    "biomarker",
                    "plot_trajectories")))
            self$add(jmvcore::Image$new(
                options=options,
                name="meanTrajectoryPlot",
                title="Population Trajectory Plot",
                width=800,
                height=600,
                renderFun=".meanTrajectoryPlot",
                requiresData=TRUE,
                clearWith=list(
                    "id",
                    "time_longitudinal",
                    "biomarker",
                    "plot_mean_trajectory")))
            self$add(jmvcore::Image$new(
                options=options,
                name="survivalPlot",
                title="Survival Curves by Biomarker",
                width=800,
                height=600,
                renderFun=".survivalPlot",
                requiresData=TRUE,
                clearWith=list(
                    "survival_time",
                    "survival_status",
                    "plot_survival_curves")))
            self$add(jmvcore::Image$new(
                options=options,
                name="dynamicAUCPlot",
                title="Dynamic AUC over Time",
                width=800,
                height=600,
                renderFun=".dynamicAUCPlot",
                requiresData=TRUE,
                clearWith=list(
                    "survival_time",
                    "survival_status",
                    "plot_dynamic_auc")))
            self$add(jmvcore::Image$new(
                options=options,
                name="residualPlot",
                title="Model Residuals",
                width=800,
                height=600,
                renderFun=".residualPlot",
                requiresData=TRUE,
                clearWith=list(
                    "id",
                    "time_longitudinal",
                    "biomarker",
                    "plot_residuals")))}))

jointmodelingBase <- if (requireNamespace("jmvcore", quietly=TRUE)) R6::R6Class(
    "jointmodelingBase",
    inherit = jmvcore::Analysis,
    public = list(
        initialize = function(options, data=NULL, datasetId="", analysisId="", revision=0) {
            super$initialize(
                package = "ClinicoPath",
                name = "jointmodeling",
                version = c(0,0,3),
                options = options,
                results = jointmodelingResults$new(options=options),
                data = data,
                datasetId = datasetId,
                analysisId = analysisId,
                revision = revision,
                pause = NULL,
                completeWhenFilled = FALSE,
                requiresMissings = FALSE,
                weightsSupport = 'auto')
        }))

#' Joint Longitudinal-Survival Models
#'
#' Joint modeling of longitudinal biomarker trajectories and survival 
#' outcomes.
#' Links repeated measurements over time to survival endpoints for dynamic 
#' risk
#' prediction and personalized medicine applications.
#' 
#' Note: This analysis can be computationally intensive. Expected runtime: 
#' 2-10 minutes
#' depending on data size and model complexity.
#' 
#'
#' @examples
#' \donttest{
#' # Example: PSA trajectory and prostate cancer survival
#' jointmodeling(
#'     data = psa_data,
#'     id = patient_id,
#'     time_longitudinal = visit_time,
#'     biomarker = psa_level,
#'     survival_time = followup_time,
#'     survival_status = death_status,
#'     covariates = c("age", "stage"),
#'     functional_form = "linear"
#' )
#'}
#' @param data The data as a data frame in long format (multiple rows per
#'   patient).
#' @param id Patient ID for linking longitudinal measurements
#' @param time_longitudinal Time axis for biomarker trajectory
#' @param biomarker Longitudinal biomarker variable
#' @param survival_time Survival time variable
#' @param survival_status Survival event indicator
#' @param covariates Additional predictive variables
#' @param functional_form Longitudinal model specification
#' @param random_effects Random effects specification
#' @param error_structure Within-subject error correlation
#' @param survival_model Survival distribution choice
#' @param association_structure Association structure specification
#' @param estimation_method Estimation approach
#' @param mcmc_chains Parallel MCMC chains
#' @param mcmc_iterations MCMC sampling iterations
#' @param mcmc_burnin MCMC warm-up period
#' @param mcmc_thin MCMC thinning parameter
#' @param dynamic_prediction Enable dynamic prediction
#' @param prediction_horizon Prediction time windows
#' @param prediction_window Prediction look-ahead window
#' @param internal_validation Cross-validation assessment
#' @param cv_folds Cross-validation partitions
#' @param discrimination_metrics Compute discrimination measures
#' @param plot_trajectories Generate trajectory plots
#' @param plot_mean_trajectory Show mean trajectory
#' @param plot_survival_curves Generate survival plots
#' @param plot_dynamic_auc Show discrimination over time
#' @param plot_residuals Generate diagnostic plots
#' @param competing_risks Include competing events
#' @param left_truncation Handle delayed study entry
#' @param time_varying_effects Time-dependent association parameters
#' @param multiple_biomarkers Multiple longitudinal outcomes
#' @param baseline_hazard Baseline hazard modeling
#' @param prior_specification Bayesian prior choice
#' @param convergence_diagnostics MCMC quality assessment
#' @param parallel_computation Enable parallel processing
#' @return A results object containing:
#' \tabular{llllll}{
#'   \code{results$instructions} \tab \tab \tab \tab \tab a html \cr
#'   \code{results$progress} \tab \tab \tab \tab \tab a html \cr
#'   \code{results$errors} \tab \tab \tab \tab \tab a html \cr
#'   \code{results$warnings} \tab \tab \tab \tab \tab a html \cr
#'   \code{results$dataSummary} \tab \tab \tab \tab \tab a html \cr
#'   \code{results$longitudinalResults} \tab \tab \tab \tab \tab a html \cr
#'   \code{results$survivalResults} \tab \tab \tab \tab \tab a html \cr
#'   \code{results$jointModelResults} \tab \tab \tab \tab \tab a html \cr
#'   \code{results$diagnostics} \tab \tab \tab \tab \tab a html \cr
#'   \code{results$dynamicPredictions} \tab \tab \tab \tab \tab a html \cr
#'   \code{results$validation} \tab \tab \tab \tab \tab a html \cr
#'   \code{results$finalResults} \tab \tab \tab \tab \tab a html \cr
#'   \code{results$trajectoryPlot} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$meanTrajectoryPlot} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$survivalPlot} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$dynamicAUCPlot} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$residualPlot} \tab \tab \tab \tab \tab an image \cr
#' }
#'
#' @export
jointmodeling <- function(
    data,
    id,
    time_longitudinal,
    biomarker,
    survival_time,
    survival_status,
    covariates,
    functional_form = "linear",
    random_effects = "intercept_slope",
    error_structure = "independent",
    survival_model = "cox",
    association_structure = "current_value",
    estimation_method = "bayesian",
    mcmc_chains = 3,
    mcmc_iterations = 12000,
    mcmc_burnin = 2000,
    mcmc_thin = 5,
    dynamic_prediction = TRUE,
    prediction_horizon = "0.5,1,2,3",
    prediction_window = 2,
    internal_validation = TRUE,
    cv_folds = 5,
    discrimination_metrics = TRUE,
    plot_trajectories = TRUE,
    plot_mean_trajectory = TRUE,
    plot_survival_curves = TRUE,
    plot_dynamic_auc = TRUE,
    plot_residuals = FALSE,
    competing_risks = FALSE,
    left_truncation = FALSE,
    time_varying_effects = FALSE,
    multiple_biomarkers,
    baseline_hazard = "unspecified",
    prior_specification = "default",
    convergence_diagnostics = TRUE,
    parallel_computation = TRUE) {

    if ( ! requireNamespace("jmvcore", quietly=TRUE))
        stop("jointmodeling requires jmvcore to be installed (restart may be required)")

    if ( ! missing(id)) id <- jmvcore::resolveQuo(jmvcore::enquo(id))
    if ( ! missing(time_longitudinal)) time_longitudinal <- jmvcore::resolveQuo(jmvcore::enquo(time_longitudinal))
    if ( ! missing(biomarker)) biomarker <- jmvcore::resolveQuo(jmvcore::enquo(biomarker))
    if ( ! missing(survival_time)) survival_time <- jmvcore::resolveQuo(jmvcore::enquo(survival_time))
    if ( ! missing(survival_status)) survival_status <- jmvcore::resolveQuo(jmvcore::enquo(survival_status))
    if ( ! missing(covariates)) covariates <- jmvcore::resolveQuo(jmvcore::enquo(covariates))
    if ( ! missing(multiple_biomarkers)) multiple_biomarkers <- jmvcore::resolveQuo(jmvcore::enquo(multiple_biomarkers))
    if (missing(data))
        data <- jmvcore::marshalData(
            parent.frame(),
            `if`( ! missing(id), id, NULL),
            `if`( ! missing(time_longitudinal), time_longitudinal, NULL),
            `if`( ! missing(biomarker), biomarker, NULL),
            `if`( ! missing(survival_time), survival_time, NULL),
            `if`( ! missing(survival_status), survival_status, NULL),
            `if`( ! missing(covariates), covariates, NULL),
            `if`( ! missing(multiple_biomarkers), multiple_biomarkers, NULL))


    options <- jointmodelingOptions$new(
        id = id,
        time_longitudinal = time_longitudinal,
        biomarker = biomarker,
        survival_time = survival_time,
        survival_status = survival_status,
        covariates = covariates,
        functional_form = functional_form,
        random_effects = random_effects,
        error_structure = error_structure,
        survival_model = survival_model,
        association_structure = association_structure,
        estimation_method = estimation_method,
        mcmc_chains = mcmc_chains,
        mcmc_iterations = mcmc_iterations,
        mcmc_burnin = mcmc_burnin,
        mcmc_thin = mcmc_thin,
        dynamic_prediction = dynamic_prediction,
        prediction_horizon = prediction_horizon,
        prediction_window = prediction_window,
        internal_validation = internal_validation,
        cv_folds = cv_folds,
        discrimination_metrics = discrimination_metrics,
        plot_trajectories = plot_trajectories,
        plot_mean_trajectory = plot_mean_trajectory,
        plot_survival_curves = plot_survival_curves,
        plot_dynamic_auc = plot_dynamic_auc,
        plot_residuals = plot_residuals,
        competing_risks = competing_risks,
        left_truncation = left_truncation,
        time_varying_effects = time_varying_effects,
        multiple_biomarkers = multiple_biomarkers,
        baseline_hazard = baseline_hazard,
        prior_specification = prior_specification,
        convergence_diagnostics = convergence_diagnostics,
        parallel_computation = parallel_computation)

    analysis <- jointmodelingClass$new(
        options = options,
        data = data)

    analysis$run()

    analysis$results
}

