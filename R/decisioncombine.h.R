
# This file is automatically generated, you probably don't want to edit this

decisioncombineOptions <- if (requireNamespace("jmvcore", quietly=TRUE)) R6::R6Class(
    "decisioncombineOptions",
    inherit = jmvcore::Options,
    public = list(
        initialize = function(
            gold = NULL,
            goldPositive = NULL,
            test1 = NULL,
            test1Positive = NULL,
            test2 = NULL,
            test2Positive = NULL,
            test3 = NULL,
            test3Positive = NULL,
            showIndividual = FALSE,
            showFrequency = FALSE,
            showBarPlot = FALSE,
            showHeatmap = FALSE,
            showForest = FALSE,
            showDecisionTree = FALSE,
            showRecommendation = FALSE,
            addPatternToData = FALSE,
            filterStatistic = "all",
            filterPattern = "all", ...) {

            super$initialize(
                package="ClinicoPath",
                name="decisioncombine",
                requiresData=TRUE,
                ...)

            private$..gold <- jmvcore::OptionVariable$new(
                "gold",
                gold,
                suggested=list(
                    "nominal"),
                permitted=list(
                    "factor"))
            private$..goldPositive <- jmvcore::OptionLevel$new(
                "goldPositive",
                goldPositive,
                variable="(gold)")
            private$..test1 <- jmvcore::OptionVariable$new(
                "test1",
                test1,
                suggested=list(
                    "nominal"),
                permitted=list(
                    "factor"))
            private$..test1Positive <- jmvcore::OptionLevel$new(
                "test1Positive",
                test1Positive,
                variable="(test1)")
            private$..test2 <- jmvcore::OptionVariable$new(
                "test2",
                test2,
                suggested=list(
                    "nominal"),
                permitted=list(
                    "factor"))
            private$..test2Positive <- jmvcore::OptionLevel$new(
                "test2Positive",
                test2Positive,
                variable="(test2)")
            private$..test3 <- jmvcore::OptionVariable$new(
                "test3",
                test3,
                default=NULL,
                suggested=list(
                    "nominal"),
                permitted=list(
                    "factor"))
            private$..test3Positive <- jmvcore::OptionLevel$new(
                "test3Positive",
                test3Positive,
                variable="(test3)")
            private$..showIndividual <- jmvcore::OptionBool$new(
                "showIndividual",
                showIndividual,
                default=FALSE)
            private$..showFrequency <- jmvcore::OptionBool$new(
                "showFrequency",
                showFrequency,
                default=FALSE)
            private$..showBarPlot <- jmvcore::OptionBool$new(
                "showBarPlot",
                showBarPlot,
                default=FALSE)
            private$..showHeatmap <- jmvcore::OptionBool$new(
                "showHeatmap",
                showHeatmap,
                default=FALSE)
            private$..showForest <- jmvcore::OptionBool$new(
                "showForest",
                showForest,
                default=FALSE)
            private$..showDecisionTree <- jmvcore::OptionBool$new(
                "showDecisionTree",
                showDecisionTree,
                default=FALSE)
            private$..showRecommendation <- jmvcore::OptionBool$new(
                "showRecommendation",
                showRecommendation,
                default=FALSE)
            private$..addPatternToData <- jmvcore::OptionBool$new(
                "addPatternToData",
                addPatternToData,
                default=FALSE)
            private$..filterStatistic <- jmvcore::OptionList$new(
                "filterStatistic",
                filterStatistic,
                options=list(
                    "all",
                    "prevalence",
                    "sens",
                    "spec",
                    "ppv",
                    "npv",
                    "acc",
                    "balancedAccuracy",
                    "youden",
                    "lrPos",
                    "lrNeg",
                    "dor"),
                default="all")
            private$..filterPattern <- jmvcore::OptionList$new(
                "filterPattern",
                filterPattern,
                options=list(
                    "all",
                    "allPositive",
                    "allNegative",
                    "majorityPositive",
                    "majorityNegative",
                    "mixed",
                    "parallel",
                    "serial",
                    "majority"),
                default="all")

            self$.addOption(private$..gold)
            self$.addOption(private$..goldPositive)
            self$.addOption(private$..test1)
            self$.addOption(private$..test1Positive)
            self$.addOption(private$..test2)
            self$.addOption(private$..test2Positive)
            self$.addOption(private$..test3)
            self$.addOption(private$..test3Positive)
            self$.addOption(private$..showIndividual)
            self$.addOption(private$..showFrequency)
            self$.addOption(private$..showBarPlot)
            self$.addOption(private$..showHeatmap)
            self$.addOption(private$..showForest)
            self$.addOption(private$..showDecisionTree)
            self$.addOption(private$..showRecommendation)
            self$.addOption(private$..addPatternToData)
            self$.addOption(private$..filterStatistic)
            self$.addOption(private$..filterPattern)
        }),
    active = list(
        gold = function() private$..gold$value,
        goldPositive = function() private$..goldPositive$value,
        test1 = function() private$..test1$value,
        test1Positive = function() private$..test1Positive$value,
        test2 = function() private$..test2$value,
        test2Positive = function() private$..test2Positive$value,
        test3 = function() private$..test3$value,
        test3Positive = function() private$..test3Positive$value,
        showIndividual = function() private$..showIndividual$value,
        showFrequency = function() private$..showFrequency$value,
        showBarPlot = function() private$..showBarPlot$value,
        showHeatmap = function() private$..showHeatmap$value,
        showForest = function() private$..showForest$value,
        showDecisionTree = function() private$..showDecisionTree$value,
        showRecommendation = function() private$..showRecommendation$value,
        addPatternToData = function() private$..addPatternToData$value,
        filterStatistic = function() private$..filterStatistic$value,
        filterPattern = function() private$..filterPattern$value),
    private = list(
        ..gold = NA,
        ..goldPositive = NA,
        ..test1 = NA,
        ..test1Positive = NA,
        ..test2 = NA,
        ..test2Positive = NA,
        ..test3 = NA,
        ..test3Positive = NA,
        ..showIndividual = NA,
        ..showFrequency = NA,
        ..showBarPlot = NA,
        ..showHeatmap = NA,
        ..showForest = NA,
        ..showDecisionTree = NA,
        ..showRecommendation = NA,
        ..addPatternToData = NA,
        ..filterStatistic = NA,
        ..filterPattern = NA)
)

decisioncombineResults <- if (requireNamespace("jmvcore", quietly=TRUE)) R6::R6Class(
    "decisioncombineResults",
    inherit = jmvcore::Group,
    active = list(
        combinationTable = function() private$.items[["combinationTable"]],
        combinationTableCI = function() private$.items[["combinationTableCI"]],
        goldFreqTable = function() private$.items[["goldFreqTable"]],
        crossTabTable = function() private$.items[["crossTabTable"]],
        individualTest1 = function() private$.items[["individualTest1"]],
        individualTest2 = function() private$.items[["individualTest2"]],
        individualTest3 = function() private$.items[["individualTest3"]],
        barPlot = function() private$.items[["barPlot"]],
        heatmapPlot = function() private$.items[["heatmapPlot"]],
        forestPlot = function() private$.items[["forestPlot"]],
        decisionTreePlot = function() private$.items[["decisionTreePlot"]],
        recommendationTable = function() private$.items[["recommendationTable"]]),
    private = list(),
    public=list(
        initialize=function(options) {
            super$initialize(
                options=options,
                name="",
                title="Combine Medical Decision Tests",
                refs=list(
                    "DiagnosticTests",
                    "ClinicoPathJamoviModule"))
            self$add(jmvcore::Table$new(
                options=options,
                name="combinationTable",
                title="Test Combination Performance",
                rows=0,
                columns=list(
                    list(
                        `name`="pattern", 
                        `title`="Pattern", 
                        `type`="text"),
                    list(
                        `name`="tp", 
                        `title`="TP", 
                        `type`="integer"),
                    list(
                        `name`="fp", 
                        `title`="FP", 
                        `type`="integer"),
                    list(
                        `name`="fn", 
                        `title`="FN", 
                        `type`="integer"),
                    list(
                        `name`="tn", 
                        `title`="TN", 
                        `type`="integer"),
                    list(
                        `name`="prevalence", 
                        `title`="Prevalence", 
                        `type`="number", 
                        `format`="pc"),
                    list(
                        `name`="sens", 
                        `title`="Sensitivity", 
                        `type`="number", 
                        `format`="pc"),
                    list(
                        `name`="spec", 
                        `title`="Specificity", 
                        `type`="number", 
                        `format`="pc"),
                    list(
                        `name`="ppv", 
                        `title`="PPV", 
                        `type`="number", 
                        `format`="pc"),
                    list(
                        `name`="npv", 
                        `title`="NPV", 
                        `type`="number", 
                        `format`="pc"),
                    list(
                        `name`="acc", 
                        `title`="Accuracy", 
                        `type`="number", 
                        `format`="pc"),
                    list(
                        `name`="balancedAccuracy", 
                        `title`="Balanced Accuracy", 
                        `type`="number", 
                        `format`="pc"),
                    list(
                        `name`="youden", 
                        `title`="Youden's J", 
                        `type`="number", 
                        `format`="number"),
                    list(
                        `name`="lrPos", 
                        `title`="LR+", 
                        `type`="number", 
                        `format`="number"),
                    list(
                        `name`="lrNeg", 
                        `title`="LR-", 
                        `type`="number", 
                        `format`="number"),
                    list(
                        `name`="dor", 
                        `title`="Diagnostic OR", 
                        `type`="number", 
                        `format`="number"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="combinationTableCI",
                title="Combination Statistics with 95% Confidence Intervals",
                rows=0,
                columns=list(
                    list(
                        `name`="pattern", 
                        `title`="Pattern", 
                        `type`="text"),
                    list(
                        `name`="statistic", 
                        `title`="Statistic", 
                        `type`="text"),
                    list(
                        `name`="estimate", 
                        `title`="Estimate", 
                        `type`="number", 
                        `format`="number"),
                    list(
                        `name`="lower", 
                        `title`="Lower", 
                        `superTitle`="95% CI", 
                        `type`="number", 
                        `format`="number"),
                    list(
                        `name`="upper", 
                        `title`="Upper", 
                        `superTitle`="95% CI", 
                        `type`="number", 
                        `format`="number"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="goldFreqTable",
                title="Gold Standard Frequency Distribution",
                rows=0,
                visible="(showFrequency)",
                columns=list(
                    list(
                        `name`="level", 
                        `title`="Level", 
                        `type`="text"),
                    list(
                        `name`="count", 
                        `title`="Count", 
                        `type`="integer"),
                    list(
                        `name`="percent", 
                        `title`="Percent", 
                        `type`="number", 
                        `format`="pc"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="crossTabTable",
                title="Test Results Cross-Tabulation",
                rows=0,
                visible="(showFrequency)",
                columns=list(
                    list(
                        `name`="testCombo", 
                        `title`="Test Pattern", 
                        `type`="text"),
                    list(
                        `name`="goldPos", 
                        `title`="Gold Positive", 
                        `type`="integer"),
                    list(
                        `name`="goldNeg", 
                        `title`="Gold Negative", 
                        `type`="integer"),
                    list(
                        `name`="total", 
                        `title`="Total", 
                        `type`="integer"))))
            self$add(R6::R6Class(
                inherit = jmvcore::Group,
                active = list(
                    test1Contingency = function() private$.items[["test1Contingency"]],
                    test1Stats = function() private$.items[["test1Stats"]]),
                private = list(),
                public=list(
                    initialize=function(options) {
                        super$initialize(
                            options=options,
                            name="individualTest1",
                            title="Test 1 Performance")
                        self$add(jmvcore::Table$new(
                            options=options,
                            name="test1Contingency",
                            title="Contingency Table",
                            rows=0,
                            columns=list(
                                list(
                                    `name`="testResult", 
                                    `title`="", 
                                    `type`="text"),
                                list(
                                    `name`="goldPos", 
                                    `title`="Gold Positive", 
                                    `type`="integer"),
                                list(
                                    `name`="goldNeg", 
                                    `title`="Gold Negative", 
                                    `type`="integer"),
                                list(
                                    `name`="total", 
                                    `title`="Total", 
                                    `type`="integer"))))
                        self$add(jmvcore::Table$new(
                            options=options,
                            name="test1Stats",
                            title="Diagnostic Statistics",
                            rows=0,
                            columns=list(
                                list(
                                    `name`="statistic", 
                                    `title`="Statistic", 
                                    `type`="text"),
                                list(
                                    `name`="estimate", 
                                    `title`="Estimate", 
                                    `type`="number", 
                                    `format`="pc"))))}))$new(options=options))
            self$add(R6::R6Class(
                inherit = jmvcore::Group,
                active = list(
                    test2Contingency = function() private$.items[["test2Contingency"]],
                    test2Stats = function() private$.items[["test2Stats"]]),
                private = list(),
                public=list(
                    initialize=function(options) {
                        super$initialize(
                            options=options,
                            name="individualTest2",
                            title="Test 2 Performance")
                        self$add(jmvcore::Table$new(
                            options=options,
                            name="test2Contingency",
                            title="Contingency Table",
                            rows=0,
                            columns=list(
                                list(
                                    `name`="testResult", 
                                    `title`="", 
                                    `type`="text"),
                                list(
                                    `name`="goldPos", 
                                    `title`="Gold Positive", 
                                    `type`="integer"),
                                list(
                                    `name`="goldNeg", 
                                    `title`="Gold Negative", 
                                    `type`="integer"),
                                list(
                                    `name`="total", 
                                    `title`="Total", 
                                    `type`="integer"))))
                        self$add(jmvcore::Table$new(
                            options=options,
                            name="test2Stats",
                            title="Diagnostic Statistics",
                            rows=0,
                            columns=list(
                                list(
                                    `name`="statistic", 
                                    `title`="Statistic", 
                                    `type`="text"),
                                list(
                                    `name`="estimate", 
                                    `title`="Estimate", 
                                    `type`="number", 
                                    `format`="pc"))))}))$new(options=options))
            self$add(R6::R6Class(
                inherit = jmvcore::Group,
                active = list(
                    test3Contingency = function() private$.items[["test3Contingency"]],
                    test3Stats = function() private$.items[["test3Stats"]]),
                private = list(),
                public=list(
                    initialize=function(options) {
                        super$initialize(
                            options=options,
                            name="individualTest3",
                            title="Test 3 Performance")
                        self$add(jmvcore::Table$new(
                            options=options,
                            name="test3Contingency",
                            title="Contingency Table",
                            rows=0,
                            columns=list(
                                list(
                                    `name`="testResult", 
                                    `title`="", 
                                    `type`="text"),
                                list(
                                    `name`="goldPos", 
                                    `title`="Gold Positive", 
                                    `type`="integer"),
                                list(
                                    `name`="goldNeg", 
                                    `title`="Gold Negative", 
                                    `type`="integer"),
                                list(
                                    `name`="total", 
                                    `title`="Total", 
                                    `type`="integer"))))
                        self$add(jmvcore::Table$new(
                            options=options,
                            name="test3Stats",
                            title="Diagnostic Statistics",
                            rows=0,
                            columns=list(
                                list(
                                    `name`="statistic", 
                                    `title`="Statistic", 
                                    `type`="text"),
                                list(
                                    `name`="estimate", 
                                    `title`="Estimate", 
                                    `type`="number", 
                                    `format`="pc"))))}))$new(options=options))
            self$add(jmvcore::Image$new(
                options=options,
                name="barPlot",
                title="Bar Chart - Performance Comparison",
                width=800,
                height=500,
                visible="(showBarPlot)",
                renderFun=".plotBarChart",
                clearWith=list(
                    "gold",
                    "test1",
                    "test2",
                    "test3",
                    "filterStatistic",
                    "filterPattern")))
            self$add(jmvcore::Image$new(
                options=options,
                name="heatmapPlot",
                title="Heatmap - All Metrics by Pattern",
                width=900,
                height=600,
                visible="(showHeatmap)",
                renderFun=".plotHeatmap",
                clearWith=list(
                    "gold",
                    "test1",
                    "test2",
                    "test3",
                    "filterStatistic",
                    "filterPattern")))
            self$add(jmvcore::Image$new(
                options=options,
                name="forestPlot",
                title="Forest Plot - Confidence Intervals",
                width=800,
                height=600,
                visible="(showForest)",
                renderFun=".plotForest",
                clearWith=list(
                    "gold",
                    "test1",
                    "test2",
                    "test3",
                    "filterStatistic",
                    "filterPattern")))
            self$add(jmvcore::Image$new(
                options=options,
                name="decisionTreePlot",
                title="Decision Tree - Test Combination Strategy",
                width=900,
                height=700,
                visible="(showDecisionTree)",
                renderFun=".plotDecisionTree",
                clearWith=list(
                    "gold",
                    "test1",
                    "test2",
                    "test3",
                    "filterStatistic",
                    "filterPattern")))
            self$add(jmvcore::Table$new(
                options=options,
                name="recommendationTable",
                title="Optimal Pattern Recommendation",
                rows=1,
                visible="(showRecommendation)",
                columns=list(
                    list(
                        `name`="pattern", 
                        `title`="Recommended Pattern", 
                        `type`="text"),
                    list(
                        `name`="method", 
                        `title`="Selection Method", 
                        `type`="text"),
                    list(
                        `name`="youden", 
                        `title`="Youden's J", 
                        `type`="number", 
                        `format`="number"),
                    list(
                        `name`="sens", 
                        `title`="Sensitivity", 
                        `type`="number", 
                        `format`="pc"),
                    list(
                        `name`="spec", 
                        `title`="Specificity", 
                        `type`="number", 
                        `format`="pc"),
                    list(
                        `name`="acc", 
                        `title`="Accuracy", 
                        `type`="number", 
                        `format`="pc"),
                    list(
                        `name`="rationale", 
                        `title`="Clinical Rationale", 
                        `type`="text"))))}))

decisioncombineBase <- if (requireNamespace("jmvcore", quietly=TRUE)) R6::R6Class(
    "decisioncombineBase",
    inherit = jmvcore::Analysis,
    public = list(
        initialize = function(options, data=NULL, datasetId="", analysisId="", revision=0) {
            super$initialize(
                package = "ClinicoPath",
                name = "decisioncombine",
                version = c(0,0,32),
                options = options,
                results = decisioncombineResults$new(options=options),
                data = data,
                datasetId = datasetId,
                analysisId = analysisId,
                revision = revision,
                pause = NULL,
                completeWhenFilled = FALSE,
                requiresMissings = FALSE,
                weightsSupport = 'auto')
        }))

#' Combine Medical Decision Tests
#'
#' Systematic evaluation of diagnostic test combinations. Analyzes all 
#' possible
#' test result patterns (2-test: 4 patterns, 3-test: 8 patterns) against a 
#' gold
#' standard to identify optimal testing strategies. Calculates sensitivity,
#' specificity, PPV, NPV, and accuracy for each pattern combination.
#' 
#'
#' @examples
#' # Two-test combination analysis
#' result <- decisioncombine(
#'   data = histopathology,
#'   gold = "Golden Standart",
#'   goldPositive = "1",
#'   test1 = "New Test",
#'   test1Positive = "1",
#'   test2 = "Rater 1",
#'   test2Positive = "1",
#'   showIndividual = TRUE
#' )
#'
#' @param data The data as a data frame.
#' @param gold The gold standard reference variable representing true disease
#'   status.
#' @param goldPositive The level indicating presence of disease in the gold
#'   standard.
#' @param test1 The first diagnostic test variable.
#' @param test1Positive The level representing a positive result for Test 1.
#' @param test2 The second diagnostic test variable for combination analysis.
#' @param test2Positive The level representing a positive result for Test 2.
#' @param test3 The third diagnostic test variable for 3-way combination
#'   analysis.
#' @param test3Positive The level representing a positive result for Test 3.
#' @param showIndividual Boolean to show individual test performance tables.
#' @param showFrequency Boolean to show frequency tables.
#' @param showBarPlot Boolean to display bar chart visualization.
#' @param showHeatmap Boolean to display heatmap visualization.
#' @param showForest Boolean to display forest plot.
#' @param showDecisionTree Boolean to display decision tree visualization.
#' @param showRecommendation Boolean to show optimal pattern recommendation
#'   table.
#' @param addPatternToData Boolean to add test pattern column to the dataset.
#' @param filterStatistic Character indicating which statistic to display
#'   (default: all).
#' @param filterPattern Character indicating which pattern type to display
#'   (default: all).
#' @return A results object containing:
#' \tabular{llllll}{
#'   \code{results$combinationTable} \tab \tab \tab \tab \tab Counts and diagnostic performance metrics for each test combination pattern and clinical strategy, including prevalence, balanced accuracy, Youden's J, likelihood ratios, and diagnostic odds ratios \cr
#'   \code{results$combinationTableCI} \tab \tab \tab \tab \tab 95\% confidence intervals for diagnostic metrics. Wilson intervals are used for proportions, and log-scale intervals for likelihood ratios and diagnostic odds ratios. \cr
#'   \code{results$goldFreqTable} \tab \tab \tab \tab \tab Frequency distribution of the gold standard (reference) test showing counts and percentages for each level \cr
#'   \code{results$crossTabTable} \tab \tab \tab \tab \tab Cross-tabulation showing how test combination patterns align with gold standard results \cr
#'   \code{results$individualTest1$test1Contingency} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$individualTest1$test1Stats} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$individualTest2$test2Contingency} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$individualTest2$test2Stats} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$individualTest3$test3Contingency} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$individualTest3$test3Stats} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$barPlot} \tab \tab \tab \tab \tab Grouped bar chart comparing sensitivity, specificity, PPV, NPV, and accuracy across test combinations \cr
#'   \code{results$heatmapPlot} \tab \tab \tab \tab \tab Color-coded heatmap showing all diagnostic metrics for each test pattern \cr
#'   \code{results$forestPlot} \tab \tab \tab \tab \tab Forest plot displaying 95\% confidence intervals for key diagnostic metrics \cr
#'   \code{results$decisionTreePlot} \tab \tab \tab \tab \tab Hierarchical decision tree showing test patterns with performance-based recommendations \cr
#'   \code{results$recommendationTable} \tab \tab \tab \tab \tab Recommended optimal test combination pattern based on Youden index and clinical performance metrics \cr
#' }
#'
#' Tables can be converted to data frames with \code{asDF} or \code{\link{as.data.frame}}. For example:
#'
#' \code{results$combinationTable$asDF}
#'
#' \code{as.data.frame(results$combinationTable)}
#'
#' @export
decisioncombine <- function(
    data,
    gold,
    goldPositive,
    test1,
    test1Positive,
    test2,
    test2Positive,
    test3 = NULL,
    test3Positive,
    showIndividual = FALSE,
    showFrequency = FALSE,
    showBarPlot = FALSE,
    showHeatmap = FALSE,
    showForest = FALSE,
    showDecisionTree = FALSE,
    showRecommendation = FALSE,
    addPatternToData = FALSE,
    filterStatistic = "all",
    filterPattern = "all") {

    if ( ! requireNamespace("jmvcore", quietly=TRUE))
        stop("decisioncombine requires jmvcore to be installed (restart may be required)")

    if ( ! missing(gold)) gold <- jmvcore::resolveQuo(jmvcore::enquo(gold))
    if ( ! missing(test1)) test1 <- jmvcore::resolveQuo(jmvcore::enquo(test1))
    if ( ! missing(test2)) test2 <- jmvcore::resolveQuo(jmvcore::enquo(test2))
    if ( ! missing(test3)) test3 <- jmvcore::resolveQuo(jmvcore::enquo(test3))
    if (missing(data))
        data <- jmvcore::marshalData(
            parent.frame(),
            `if`( ! missing(gold), gold, NULL),
            `if`( ! missing(test1), test1, NULL),
            `if`( ! missing(test2), test2, NULL),
            `if`( ! missing(test3), test3, NULL))

    for (v in gold) if (v %in% names(data)) data[[v]] <- as.factor(data[[v]])
    for (v in test1) if (v %in% names(data)) data[[v]] <- as.factor(data[[v]])
    for (v in test2) if (v %in% names(data)) data[[v]] <- as.factor(data[[v]])
    for (v in test3) if (v %in% names(data)) data[[v]] <- as.factor(data[[v]])

    options <- decisioncombineOptions$new(
        gold = gold,
        goldPositive = goldPositive,
        test1 = test1,
        test1Positive = test1Positive,
        test2 = test2,
        test2Positive = test2Positive,
        test3 = test3,
        test3Positive = test3Positive,
        showIndividual = showIndividual,
        showFrequency = showFrequency,
        showBarPlot = showBarPlot,
        showHeatmap = showHeatmap,
        showForest = showForest,
        showDecisionTree = showDecisionTree,
        showRecommendation = showRecommendation,
        addPatternToData = addPatternToData,
        filterStatistic = filterStatistic,
        filterPattern = filterPattern)

    analysis <- decisioncombineClass$new(
        options = options,
        data = data)

    analysis$run()

    analysis$results
}

