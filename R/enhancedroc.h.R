
# This file is automatically generated, you probably don't want to edit this

enhancedROCOptions <- if (requireNamespace("jmvcore", quietly=TRUE)) R6::R6Class(
    "enhancedROCOptions",
    inherit = jmvcore::Options,
    public = list(
        initialize = function(
            outcome = NULL,
            positiveClass = NULL,
            predictors = NULL,
            analysisType = "single",
            direction = "auto",
            youdenOptimization = TRUE,
            customCutoffs = NULL,
            sensitivityThreshold = 0.8,
            specificityThreshold = 0.8,
            confidenceLevel = 95,
            bootstrapSamples = 1000,
            useBootstrap = TRUE,
            bootstrapMethod = "bca",
            bootstrapCutoffCI = FALSE,
            bootstrapPartialAUC = FALSE,
            stratifiedBootstrap = TRUE,
            pairwiseComparisons = TRUE,
            comparisonMethod = "delong",
            rocCurve = TRUE,
            aucTable = TRUE,
            cutoffTable = TRUE,
            optimalCutoffs = TRUE,
            diagnosticMetrics = TRUE,
            clinicalMetrics = TRUE,
            smoothMethod = "none",
            partialAuc = FALSE,
            partialAucType = "specificity",
            partialRange = "0.8,1.0",
            crocAnalysis = FALSE,
            crocAlpha = 7,
            convexHull = FALSE,
            tiedScoreHandling = "average",
            detectImbalance = TRUE,
            imbalanceThreshold = 3,
            showImbalanceWarning = TRUE,
            recommendPRC = TRUE,
            prevalence = 0.1,
            clinicalContext = "general",
            clinicalPresets = "custom",
            comprehensive_output = FALSE,
            clinical_interpretation = TRUE,
            plotTheme = "clinical",
            plotWidth = 600,
            plotHeight = 600,
            showCutoffPoints = TRUE,
            showConfidenceBands = FALSE,
            showMetricsDiff = TRUE,
            statisticalComparison = TRUE,
            calibrationAnalysis = FALSE,
            calibrationPlot = TRUE,
            hosmerLemeshow = TRUE,
            hlGroups = 10,
            brierScore = TRUE,
            calibrationMetrics = TRUE,
            splineCalibration = FALSE,
            splineKnots = 4,
            eoRatio = FALSE,
            namDagostino = FALSE,
            greenwoodNam = FALSE,
            calibrationBelt = FALSE,
            calibrationDensity = FALSE,
            multiClassROC = FALSE,
            multiClassStrategy = "ovr",
            multiClassAveraging = "macro",
            timeDependentROC = FALSE,
            timePoints = "12,24,36",
            tdRocMethod = "km",
            clinicalImpact = FALSE,
            nntCalculation = TRUE,
            clinicalUtilityCurve = TRUE,
            decisionImpactTable = TRUE,
            survivalROC = FALSE,
            harrellCIndex = FALSE,
            unoCStatistic = FALSE,
            incidentDynamic = FALSE,
            cumulativeDynamic = FALSE,
            competingRisksConcordance = FALSE,
            internalValidation = FALSE,
            validationMethod = "bootstrap",
            optimismCorrection = TRUE,
            externalValidation = FALSE,
            decisionImpactCurves = FALSE,
            netBenefitRegression = FALSE,
            modelUpdating = FALSE,
            transportability = FALSE, ...) {

            super$initialize(
                package="ClinicoPath",
                name="enhancedROC",
                requiresData=TRUE,
                ...)

            private$..outcome <- jmvcore::OptionVariable$new(
                "outcome",
                outcome,
                suggested=list(
                    "nominal",
                    "ordinal"),
                permitted=list(
                    "factor",
                    "numeric"))
            private$..positiveClass <- jmvcore::OptionLevel$new(
                "positiveClass",
                positiveClass,
                variable="(outcome)")
            private$..predictors <- jmvcore::OptionVariables$new(
                "predictors",
                predictors,
                suggested=list(
                    "continuous"),
                permitted=list(
                    "numeric"))
            private$..analysisType <- jmvcore::OptionList$new(
                "analysisType",
                analysisType,
                options=list(
                    "single",
                    "comparative",
                    "comprehensive"),
                default="single")
            private$..direction <- jmvcore::OptionList$new(
                "direction",
                direction,
                options=list(
                    "auto",
                    "higher",
                    "lower"),
                default="auto")
            private$..youdenOptimization <- jmvcore::OptionBool$new(
                "youdenOptimization",
                youdenOptimization,
                default=TRUE)
            private$..customCutoffs <- jmvcore::OptionString$new(
                "customCutoffs",
                customCutoffs)
            private$..sensitivityThreshold <- jmvcore::OptionNumber$new(
                "sensitivityThreshold",
                sensitivityThreshold,
                default=0.8,
                min=0.1,
                max=1)
            private$..specificityThreshold <- jmvcore::OptionNumber$new(
                "specificityThreshold",
                specificityThreshold,
                default=0.8,
                min=0.1,
                max=1)
            private$..confidenceLevel <- jmvcore::OptionNumber$new(
                "confidenceLevel",
                confidenceLevel,
                default=95,
                min=50,
                max=99.9)
            private$..bootstrapSamples <- jmvcore::OptionInteger$new(
                "bootstrapSamples",
                bootstrapSamples,
                default=1000,
                min=100,
                max=10000)
            private$..useBootstrap <- jmvcore::OptionBool$new(
                "useBootstrap",
                useBootstrap,
                default=TRUE)
            private$..bootstrapMethod <- jmvcore::OptionList$new(
                "bootstrapMethod",
                bootstrapMethod,
                options=list(
                    "percentile",
                    "bca",
                    "basic"),
                default="bca")
            private$..bootstrapCutoffCI <- jmvcore::OptionBool$new(
                "bootstrapCutoffCI",
                bootstrapCutoffCI,
                default=FALSE)
            private$..bootstrapPartialAUC <- jmvcore::OptionBool$new(
                "bootstrapPartialAUC",
                bootstrapPartialAUC,
                default=FALSE)
            private$..stratifiedBootstrap <- jmvcore::OptionBool$new(
                "stratifiedBootstrap",
                stratifiedBootstrap,
                default=TRUE)
            private$..pairwiseComparisons <- jmvcore::OptionBool$new(
                "pairwiseComparisons",
                pairwiseComparisons,
                default=TRUE)
            private$..comparisonMethod <- jmvcore::OptionList$new(
                "comparisonMethod",
                comparisonMethod,
                options=list(
                    "delong",
                    "bootstrap",
                    "venkatraman"),
                default="delong")
            private$..rocCurve <- jmvcore::OptionBool$new(
                "rocCurve",
                rocCurve,
                default=TRUE)
            private$..aucTable <- jmvcore::OptionBool$new(
                "aucTable",
                aucTable,
                default=TRUE)
            private$..cutoffTable <- jmvcore::OptionBool$new(
                "cutoffTable",
                cutoffTable,
                default=TRUE)
            private$..optimalCutoffs <- jmvcore::OptionBool$new(
                "optimalCutoffs",
                optimalCutoffs,
                default=TRUE)
            private$..diagnosticMetrics <- jmvcore::OptionBool$new(
                "diagnosticMetrics",
                diagnosticMetrics,
                default=TRUE)
            private$..clinicalMetrics <- jmvcore::OptionBool$new(
                "clinicalMetrics",
                clinicalMetrics,
                default=TRUE)
            private$..smoothMethod <- jmvcore::OptionList$new(
                "smoothMethod",
                smoothMethod,
                options=list(
                    "none",
                    "binormal",
                    "kernel"),
                default="none")
            private$..partialAuc <- jmvcore::OptionBool$new(
                "partialAuc",
                partialAuc,
                default=FALSE)
            private$..partialAucType <- jmvcore::OptionList$new(
                "partialAucType",
                partialAucType,
                options=list(
                    "specificity",
                    "sensitivity"),
                default="specificity")
            private$..partialRange <- jmvcore::OptionString$new(
                "partialRange",
                partialRange,
                default="0.8,1.0")
            private$..crocAnalysis <- jmvcore::OptionBool$new(
                "crocAnalysis",
                crocAnalysis,
                default=FALSE)
            private$..crocAlpha <- jmvcore::OptionNumber$new(
                "crocAlpha",
                crocAlpha,
                default=7,
                min=1,
                max=20)
            private$..convexHull <- jmvcore::OptionBool$new(
                "convexHull",
                convexHull,
                default=FALSE)
            private$..tiedScoreHandling <- jmvcore::OptionList$new(
                "tiedScoreHandling",
                tiedScoreHandling,
                options=list(
                    "average",
                    "upper",
                    "lower"),
                default="average")
            private$..detectImbalance <- jmvcore::OptionBool$new(
                "detectImbalance",
                detectImbalance,
                default=TRUE)
            private$..imbalanceThreshold <- jmvcore::OptionNumber$new(
                "imbalanceThreshold",
                imbalanceThreshold,
                default=3,
                min=1.5,
                max=10)
            private$..showImbalanceWarning <- jmvcore::OptionBool$new(
                "showImbalanceWarning",
                showImbalanceWarning,
                default=TRUE)
            private$..recommendPRC <- jmvcore::OptionBool$new(
                "recommendPRC",
                recommendPRC,
                default=TRUE)
            private$..prevalence <- jmvcore::OptionNumber$new(
                "prevalence",
                prevalence,
                default=0.1,
                min=0.001,
                max=0.999)
            private$..clinicalContext <- jmvcore::OptionList$new(
                "clinicalContext",
                clinicalContext,
                options=list(
                    "screening",
                    "diagnosis",
                    "prognosis",
                    "monitoring",
                    "general"),
                default="general")
            private$..clinicalPresets <- jmvcore::OptionList$new(
                "clinicalPresets",
                clinicalPresets,
                options=list(
                    "custom",
                    "biomarker_screening",
                    "diagnostic_validation",
                    "confirmatory_testing",
                    "research_comprehensive"),
                default="custom")
            private$..comprehensive_output <- jmvcore::OptionBool$new(
                "comprehensive_output",
                comprehensive_output,
                default=FALSE)
            private$..clinical_interpretation <- jmvcore::OptionBool$new(
                "clinical_interpretation",
                clinical_interpretation,
                default=TRUE)
            private$..plotTheme <- jmvcore::OptionList$new(
                "plotTheme",
                plotTheme,
                options=list(
                    "classic",
                    "modern",
                    "clinical"),
                default="clinical")
            private$..plotWidth <- jmvcore::OptionInteger$new(
                "plotWidth",
                plotWidth,
                default=600,
                min=300,
                max=1200)
            private$..plotHeight <- jmvcore::OptionInteger$new(
                "plotHeight",
                plotHeight,
                default=600,
                min=300,
                max=1200)
            private$..showCutoffPoints <- jmvcore::OptionBool$new(
                "showCutoffPoints",
                showCutoffPoints,
                default=TRUE)
            private$..showConfidenceBands <- jmvcore::OptionBool$new(
                "showConfidenceBands",
                showConfidenceBands,
                default=FALSE)
            private$..showMetricsDiff <- jmvcore::OptionBool$new(
                "showMetricsDiff",
                showMetricsDiff,
                default=TRUE)
            private$..statisticalComparison <- jmvcore::OptionBool$new(
                "statisticalComparison",
                statisticalComparison,
                default=TRUE)
            private$..calibrationAnalysis <- jmvcore::OptionBool$new(
                "calibrationAnalysis",
                calibrationAnalysis,
                default=FALSE)
            private$..calibrationPlot <- jmvcore::OptionBool$new(
                "calibrationPlot",
                calibrationPlot,
                default=TRUE)
            private$..hosmerLemeshow <- jmvcore::OptionBool$new(
                "hosmerLemeshow",
                hosmerLemeshow,
                default=TRUE)
            private$..hlGroups <- jmvcore::OptionInteger$new(
                "hlGroups",
                hlGroups,
                default=10,
                min=5,
                max=20)
            private$..brierScore <- jmvcore::OptionBool$new(
                "brierScore",
                brierScore,
                default=TRUE)
            private$..calibrationMetrics <- jmvcore::OptionBool$new(
                "calibrationMetrics",
                calibrationMetrics,
                default=TRUE)
            private$..splineCalibration <- jmvcore::OptionBool$new(
                "splineCalibration",
                splineCalibration,
                default=FALSE)
            private$..splineKnots <- jmvcore::OptionInteger$new(
                "splineKnots",
                splineKnots,
                default=4,
                min=3,
                max=7)
            private$..eoRatio <- jmvcore::OptionBool$new(
                "eoRatio",
                eoRatio,
                default=FALSE)
            private$..namDagostino <- jmvcore::OptionBool$new(
                "namDagostino",
                namDagostino,
                default=FALSE)
            private$..greenwoodNam <- jmvcore::OptionBool$new(
                "greenwoodNam",
                greenwoodNam,
                default=FALSE)
            private$..calibrationBelt <- jmvcore::OptionBool$new(
                "calibrationBelt",
                calibrationBelt,
                default=FALSE)
            private$..calibrationDensity <- jmvcore::OptionBool$new(
                "calibrationDensity",
                calibrationDensity,
                default=FALSE)
            private$..multiClassROC <- jmvcore::OptionBool$new(
                "multiClassROC",
                multiClassROC,
                default=FALSE)
            private$..multiClassStrategy <- jmvcore::OptionList$new(
                "multiClassStrategy",
                multiClassStrategy,
                options=list(
                    "ovr",
                    "ovo"),
                default="ovr")
            private$..multiClassAveraging <- jmvcore::OptionList$new(
                "multiClassAveraging",
                multiClassAveraging,
                options=list(
                    "macro",
                    "weighted"),
                default="macro")
            private$..timeDependentROC <- jmvcore::OptionBool$new(
                "timeDependentROC",
                timeDependentROC,
                default=FALSE)
            private$..timePoints <- jmvcore::OptionString$new(
                "timePoints",
                timePoints,
                default="12,24,36")
            private$..tdRocMethod <- jmvcore::OptionList$new(
                "tdRocMethod",
                tdRocMethod,
                options=list(
                    "km",
                    "nne",
                    "cox"),
                default="km")
            private$..clinicalImpact <- jmvcore::OptionBool$new(
                "clinicalImpact",
                clinicalImpact,
                default=FALSE)
            private$..nntCalculation <- jmvcore::OptionBool$new(
                "nntCalculation",
                nntCalculation,
                default=TRUE)
            private$..clinicalUtilityCurve <- jmvcore::OptionBool$new(
                "clinicalUtilityCurve",
                clinicalUtilityCurve,
                default=TRUE)
            private$..decisionImpactTable <- jmvcore::OptionBool$new(
                "decisionImpactTable",
                decisionImpactTable,
                default=TRUE)
            private$..survivalROC <- jmvcore::OptionBool$new(
                "survivalROC",
                survivalROC,
                default=FALSE)
            private$..harrellCIndex <- jmvcore::OptionBool$new(
                "harrellCIndex",
                harrellCIndex,
                default=FALSE)
            private$..unoCStatistic <- jmvcore::OptionBool$new(
                "unoCStatistic",
                unoCStatistic,
                default=FALSE)
            private$..incidentDynamic <- jmvcore::OptionBool$new(
                "incidentDynamic",
                incidentDynamic,
                default=FALSE)
            private$..cumulativeDynamic <- jmvcore::OptionBool$new(
                "cumulativeDynamic",
                cumulativeDynamic,
                default=FALSE)
            private$..competingRisksConcordance <- jmvcore::OptionBool$new(
                "competingRisksConcordance",
                competingRisksConcordance,
                default=FALSE)
            private$..internalValidation <- jmvcore::OptionBool$new(
                "internalValidation",
                internalValidation,
                default=FALSE)
            private$..validationMethod <- jmvcore::OptionList$new(
                "validationMethod",
                validationMethod,
                options=list(
                    "bootstrap",
                    "cv",
                    "both"),
                default="bootstrap")
            private$..optimismCorrection <- jmvcore::OptionBool$new(
                "optimismCorrection",
                optimismCorrection,
                default=TRUE)
            private$..externalValidation <- jmvcore::OptionBool$new(
                "externalValidation",
                externalValidation,
                default=FALSE)
            private$..decisionImpactCurves <- jmvcore::OptionBool$new(
                "decisionImpactCurves",
                decisionImpactCurves,
                default=FALSE)
            private$..netBenefitRegression <- jmvcore::OptionBool$new(
                "netBenefitRegression",
                netBenefitRegression,
                default=FALSE)
            private$..modelUpdating <- jmvcore::OptionBool$new(
                "modelUpdating",
                modelUpdating,
                default=FALSE)
            private$..transportability <- jmvcore::OptionBool$new(
                "transportability",
                transportability,
                default=FALSE)

            self$.addOption(private$..outcome)
            self$.addOption(private$..positiveClass)
            self$.addOption(private$..predictors)
            self$.addOption(private$..analysisType)
            self$.addOption(private$..direction)
            self$.addOption(private$..youdenOptimization)
            self$.addOption(private$..customCutoffs)
            self$.addOption(private$..sensitivityThreshold)
            self$.addOption(private$..specificityThreshold)
            self$.addOption(private$..confidenceLevel)
            self$.addOption(private$..bootstrapSamples)
            self$.addOption(private$..useBootstrap)
            self$.addOption(private$..bootstrapMethod)
            self$.addOption(private$..bootstrapCutoffCI)
            self$.addOption(private$..bootstrapPartialAUC)
            self$.addOption(private$..stratifiedBootstrap)
            self$.addOption(private$..pairwiseComparisons)
            self$.addOption(private$..comparisonMethod)
            self$.addOption(private$..rocCurve)
            self$.addOption(private$..aucTable)
            self$.addOption(private$..cutoffTable)
            self$.addOption(private$..optimalCutoffs)
            self$.addOption(private$..diagnosticMetrics)
            self$.addOption(private$..clinicalMetrics)
            self$.addOption(private$..smoothMethod)
            self$.addOption(private$..partialAuc)
            self$.addOption(private$..partialAucType)
            self$.addOption(private$..partialRange)
            self$.addOption(private$..crocAnalysis)
            self$.addOption(private$..crocAlpha)
            self$.addOption(private$..convexHull)
            self$.addOption(private$..tiedScoreHandling)
            self$.addOption(private$..detectImbalance)
            self$.addOption(private$..imbalanceThreshold)
            self$.addOption(private$..showImbalanceWarning)
            self$.addOption(private$..recommendPRC)
            self$.addOption(private$..prevalence)
            self$.addOption(private$..clinicalContext)
            self$.addOption(private$..clinicalPresets)
            self$.addOption(private$..comprehensive_output)
            self$.addOption(private$..clinical_interpretation)
            self$.addOption(private$..plotTheme)
            self$.addOption(private$..plotWidth)
            self$.addOption(private$..plotHeight)
            self$.addOption(private$..showCutoffPoints)
            self$.addOption(private$..showConfidenceBands)
            self$.addOption(private$..showMetricsDiff)
            self$.addOption(private$..statisticalComparison)
            self$.addOption(private$..calibrationAnalysis)
            self$.addOption(private$..calibrationPlot)
            self$.addOption(private$..hosmerLemeshow)
            self$.addOption(private$..hlGroups)
            self$.addOption(private$..brierScore)
            self$.addOption(private$..calibrationMetrics)
            self$.addOption(private$..splineCalibration)
            self$.addOption(private$..splineKnots)
            self$.addOption(private$..eoRatio)
            self$.addOption(private$..namDagostino)
            self$.addOption(private$..greenwoodNam)
            self$.addOption(private$..calibrationBelt)
            self$.addOption(private$..calibrationDensity)
            self$.addOption(private$..multiClassROC)
            self$.addOption(private$..multiClassStrategy)
            self$.addOption(private$..multiClassAveraging)
            self$.addOption(private$..timeDependentROC)
            self$.addOption(private$..timePoints)
            self$.addOption(private$..tdRocMethod)
            self$.addOption(private$..clinicalImpact)
            self$.addOption(private$..nntCalculation)
            self$.addOption(private$..clinicalUtilityCurve)
            self$.addOption(private$..decisionImpactTable)
            self$.addOption(private$..survivalROC)
            self$.addOption(private$..harrellCIndex)
            self$.addOption(private$..unoCStatistic)
            self$.addOption(private$..incidentDynamic)
            self$.addOption(private$..cumulativeDynamic)
            self$.addOption(private$..competingRisksConcordance)
            self$.addOption(private$..internalValidation)
            self$.addOption(private$..validationMethod)
            self$.addOption(private$..optimismCorrection)
            self$.addOption(private$..externalValidation)
            self$.addOption(private$..decisionImpactCurves)
            self$.addOption(private$..netBenefitRegression)
            self$.addOption(private$..modelUpdating)
            self$.addOption(private$..transportability)
        }),
    active = list(
        outcome = function() private$..outcome$value,
        positiveClass = function() private$..positiveClass$value,
        predictors = function() private$..predictors$value,
        analysisType = function() private$..analysisType$value,
        direction = function() private$..direction$value,
        youdenOptimization = function() private$..youdenOptimization$value,
        customCutoffs = function() private$..customCutoffs$value,
        sensitivityThreshold = function() private$..sensitivityThreshold$value,
        specificityThreshold = function() private$..specificityThreshold$value,
        confidenceLevel = function() private$..confidenceLevel$value,
        bootstrapSamples = function() private$..bootstrapSamples$value,
        useBootstrap = function() private$..useBootstrap$value,
        bootstrapMethod = function() private$..bootstrapMethod$value,
        bootstrapCutoffCI = function() private$..bootstrapCutoffCI$value,
        bootstrapPartialAUC = function() private$..bootstrapPartialAUC$value,
        stratifiedBootstrap = function() private$..stratifiedBootstrap$value,
        pairwiseComparisons = function() private$..pairwiseComparisons$value,
        comparisonMethod = function() private$..comparisonMethod$value,
        rocCurve = function() private$..rocCurve$value,
        aucTable = function() private$..aucTable$value,
        cutoffTable = function() private$..cutoffTable$value,
        optimalCutoffs = function() private$..optimalCutoffs$value,
        diagnosticMetrics = function() private$..diagnosticMetrics$value,
        clinicalMetrics = function() private$..clinicalMetrics$value,
        smoothMethod = function() private$..smoothMethod$value,
        partialAuc = function() private$..partialAuc$value,
        partialAucType = function() private$..partialAucType$value,
        partialRange = function() private$..partialRange$value,
        crocAnalysis = function() private$..crocAnalysis$value,
        crocAlpha = function() private$..crocAlpha$value,
        convexHull = function() private$..convexHull$value,
        tiedScoreHandling = function() private$..tiedScoreHandling$value,
        detectImbalance = function() private$..detectImbalance$value,
        imbalanceThreshold = function() private$..imbalanceThreshold$value,
        showImbalanceWarning = function() private$..showImbalanceWarning$value,
        recommendPRC = function() private$..recommendPRC$value,
        prevalence = function() private$..prevalence$value,
        clinicalContext = function() private$..clinicalContext$value,
        clinicalPresets = function() private$..clinicalPresets$value,
        comprehensive_output = function() private$..comprehensive_output$value,
        clinical_interpretation = function() private$..clinical_interpretation$value,
        plotTheme = function() private$..plotTheme$value,
        plotWidth = function() private$..plotWidth$value,
        plotHeight = function() private$..plotHeight$value,
        showCutoffPoints = function() private$..showCutoffPoints$value,
        showConfidenceBands = function() private$..showConfidenceBands$value,
        showMetricsDiff = function() private$..showMetricsDiff$value,
        statisticalComparison = function() private$..statisticalComparison$value,
        calibrationAnalysis = function() private$..calibrationAnalysis$value,
        calibrationPlot = function() private$..calibrationPlot$value,
        hosmerLemeshow = function() private$..hosmerLemeshow$value,
        hlGroups = function() private$..hlGroups$value,
        brierScore = function() private$..brierScore$value,
        calibrationMetrics = function() private$..calibrationMetrics$value,
        splineCalibration = function() private$..splineCalibration$value,
        splineKnots = function() private$..splineKnots$value,
        eoRatio = function() private$..eoRatio$value,
        namDagostino = function() private$..namDagostino$value,
        greenwoodNam = function() private$..greenwoodNam$value,
        calibrationBelt = function() private$..calibrationBelt$value,
        calibrationDensity = function() private$..calibrationDensity$value,
        multiClassROC = function() private$..multiClassROC$value,
        multiClassStrategy = function() private$..multiClassStrategy$value,
        multiClassAveraging = function() private$..multiClassAveraging$value,
        timeDependentROC = function() private$..timeDependentROC$value,
        timePoints = function() private$..timePoints$value,
        tdRocMethod = function() private$..tdRocMethod$value,
        clinicalImpact = function() private$..clinicalImpact$value,
        nntCalculation = function() private$..nntCalculation$value,
        clinicalUtilityCurve = function() private$..clinicalUtilityCurve$value,
        decisionImpactTable = function() private$..decisionImpactTable$value,
        survivalROC = function() private$..survivalROC$value,
        harrellCIndex = function() private$..harrellCIndex$value,
        unoCStatistic = function() private$..unoCStatistic$value,
        incidentDynamic = function() private$..incidentDynamic$value,
        cumulativeDynamic = function() private$..cumulativeDynamic$value,
        competingRisksConcordance = function() private$..competingRisksConcordance$value,
        internalValidation = function() private$..internalValidation$value,
        validationMethod = function() private$..validationMethod$value,
        optimismCorrection = function() private$..optimismCorrection$value,
        externalValidation = function() private$..externalValidation$value,
        decisionImpactCurves = function() private$..decisionImpactCurves$value,
        netBenefitRegression = function() private$..netBenefitRegression$value,
        modelUpdating = function() private$..modelUpdating$value,
        transportability = function() private$..transportability$value),
    private = list(
        ..outcome = NA,
        ..positiveClass = NA,
        ..predictors = NA,
        ..analysisType = NA,
        ..direction = NA,
        ..youdenOptimization = NA,
        ..customCutoffs = NA,
        ..sensitivityThreshold = NA,
        ..specificityThreshold = NA,
        ..confidenceLevel = NA,
        ..bootstrapSamples = NA,
        ..useBootstrap = NA,
        ..bootstrapMethod = NA,
        ..bootstrapCutoffCI = NA,
        ..bootstrapPartialAUC = NA,
        ..stratifiedBootstrap = NA,
        ..pairwiseComparisons = NA,
        ..comparisonMethod = NA,
        ..rocCurve = NA,
        ..aucTable = NA,
        ..cutoffTable = NA,
        ..optimalCutoffs = NA,
        ..diagnosticMetrics = NA,
        ..clinicalMetrics = NA,
        ..smoothMethod = NA,
        ..partialAuc = NA,
        ..partialAucType = NA,
        ..partialRange = NA,
        ..crocAnalysis = NA,
        ..crocAlpha = NA,
        ..convexHull = NA,
        ..tiedScoreHandling = NA,
        ..detectImbalance = NA,
        ..imbalanceThreshold = NA,
        ..showImbalanceWarning = NA,
        ..recommendPRC = NA,
        ..prevalence = NA,
        ..clinicalContext = NA,
        ..clinicalPresets = NA,
        ..comprehensive_output = NA,
        ..clinical_interpretation = NA,
        ..plotTheme = NA,
        ..plotWidth = NA,
        ..plotHeight = NA,
        ..showCutoffPoints = NA,
        ..showConfidenceBands = NA,
        ..showMetricsDiff = NA,
        ..statisticalComparison = NA,
        ..calibrationAnalysis = NA,
        ..calibrationPlot = NA,
        ..hosmerLemeshow = NA,
        ..hlGroups = NA,
        ..brierScore = NA,
        ..calibrationMetrics = NA,
        ..splineCalibration = NA,
        ..splineKnots = NA,
        ..eoRatio = NA,
        ..namDagostino = NA,
        ..greenwoodNam = NA,
        ..calibrationBelt = NA,
        ..calibrationDensity = NA,
        ..multiClassROC = NA,
        ..multiClassStrategy = NA,
        ..multiClassAveraging = NA,
        ..timeDependentROC = NA,
        ..timePoints = NA,
        ..tdRocMethod = NA,
        ..clinicalImpact = NA,
        ..nntCalculation = NA,
        ..clinicalUtilityCurve = NA,
        ..decisionImpactTable = NA,
        ..survivalROC = NA,
        ..harrellCIndex = NA,
        ..unoCStatistic = NA,
        ..incidentDynamic = NA,
        ..cumulativeDynamic = NA,
        ..competingRisksConcordance = NA,
        ..internalValidation = NA,
        ..validationMethod = NA,
        ..optimismCorrection = NA,
        ..externalValidation = NA,
        ..decisionImpactCurves = NA,
        ..netBenefitRegression = NA,
        ..modelUpdating = NA,
        ..transportability = NA)
)

enhancedROCResults <- if (requireNamespace("jmvcore", quietly=TRUE)) R6::R6Class(
    "enhancedROCResults",
    inherit = jmvcore::Group,
    active = list(
        results = function() private$.items[["results"]]),
    private = list(),
    public=list(
        initialize=function(options) {
            super$initialize(
                options=options,
                name="",
                title="Clinical ROC Analysis Results",
                refs=list(
                    "ClinicoPathJamoviModule",
                    "Swamidass2010",
                    "pROC"))
            self$add(R6::R6Class(
                inherit = jmvcore::Group,
                active = list(
                    instructions = function() private$.items[["instructions"]],
                    imbalanceWarning = function() private$.items[["imbalanceWarning"]],
                    imbalanceMetrics = function() private$.items[["imbalanceMetrics"]],
                    analysisSummary = function() private$.items[["analysisSummary"]],
                    clinicalReport = function() private$.items[["clinicalReport"]],
                    aucSummary = function() private$.items[["aucSummary"]],
                    rocComparisons = function() private$.items[["rocComparisons"]],
                    detailedComparison = function() private$.items[["detailedComparison"]],
                    statisticalSummary = function() private$.items[["statisticalSummary"]],
                    optimalCutoffSummary = function() private$.items[["optimalCutoffSummary"]],
                    cutoffAnalysis = function() private$.items[["cutoffAnalysis"]],
                    diagnosticPerformance = function() private$.items[["diagnosticPerformance"]],
                    clinicalApplicationMetrics = function() private$.items[["clinicalApplicationMetrics"]],
                    partialAucAnalysis = function() private$.items[["partialAucAnalysis"]],
                    crocAnalysisTable = function() private$.items[["crocAnalysisTable"]],
                    convexHullTable = function() private$.items[["convexHullTable"]],
                    comprehensiveAnalysisSummary = function() private$.items[["comprehensiveAnalysisSummary"]],
                    clinicalInterpretationGuide = function() private$.items[["clinicalInterpretationGuide"]],
                    methodsExplanation = function() private$.items[["methodsExplanation"]],
                    rocCurvePlot = function() private$.items[["rocCurvePlot"]],
                    comparativeROCPlot = function() private$.items[["comparativeROCPlot"]],
                    cutoffAnalysisPlot = function() private$.items[["cutoffAnalysisPlot"]],
                    youdenIndexPlot = function() private$.items[["youdenIndexPlot"]],
                    clinicalDecisionPlot = function() private$.items[["clinicalDecisionPlot"]],
                    crocCurvePlot = function() private$.items[["crocCurvePlot"]],
                    convexHullPlot = function() private$.items[["convexHullPlot"]],
                    calibrationSummary = function() private$.items[["calibrationSummary"]],
                    hosmerLemeshowTable = function() private$.items[["hosmerLemeshowTable"]],
                    calibrationPlotImage = function() private$.items[["calibrationPlotImage"]],
                    multiClassAUC = function() private$.items[["multiClassAUC"]],
                    multiClassAverage = function() private$.items[["multiClassAverage"]],
                    multiClassROCPlot = function() private$.items[["multiClassROCPlot"]],
                    timeDependentAUC = function() private$.items[["timeDependentAUC"]],
                    timeDependentROCPlot = function() private$.items[["timeDependentROCPlot"]],
                    aucTimeCoursePlot = function() private$.items[["aucTimeCoursePlot"]],
                    clinicalImpactTable = function() private$.items[["clinicalImpactTable"]],
                    decisionImpactSummary = function() private$.items[["decisionImpactSummary"]],
                    clinicalUtilityPlot = function() private$.items[["clinicalUtilityPlot"]]),
                private = list(),
                public=list(
                    initialize=function(options) {
                        super$initialize(
                            options=options,
                            name="results",
                            title="Analysis Results")
                        self$add(jmvcore::Html$new(
                            options=options,
                            name="instructions",
                            title="Instructions",
                            visible=TRUE))
                        self$add(jmvcore::Html$new(
                            options=options,
                            name="imbalanceWarning",
                            title="Class Imbalance Detection",
                            visible="(detectImbalance && showImbalanceWarning)"))
                        self$add(jmvcore::Table$new(
                            options=options,
                            name="imbalanceMetrics",
                            title="Class Imbalance Metrics",
                            visible="(detectImbalance)",
                            rows=1,
                            columns=list(
                                list(
                                    `name`="n_positive", 
                                    `title`="N Positive", 
                                    `type`="integer"),
                                list(
                                    `name`="n_negative", 
                                    `title`="N Negative", 
                                    `type`="integer"),
                                list(
                                    `name`="ratio", 
                                    `title`="Ratio (Pos:Neg)", 
                                    `type`="text"),
                                list(
                                    `name`="prevalence", 
                                    `title`="Prevalence", 
                                    `type`="number", 
                                    `format`="zto"),
                                list(
                                    `name`="prc_baseline", 
                                    `title`="PRC Baseline", 
                                    `type`="number", 
                                    `format`="zto"),
                                list(
                                    `name`="imbalance_severity", 
                                    `title`="Imbalance Severity", 
                                    `type`="text"),
                                list(
                                    `name`="recommendation", 
                                    `title`="Recommendation", 
                                    `type`="text"))))
                        self$add(jmvcore::Html$new(
                            options=options,
                            name="analysisSummary",
                            title="Analysis Summary",
                            visible=TRUE))
                        self$add(jmvcore::Html$new(
                            options=options,
                            name="clinicalReport",
                            title="Clinical Report Sentences",
                            visible=TRUE))
                        self$add(jmvcore::Table$new(
                            options=options,
                            name="aucSummary",
                            title="Area Under the Curve (AUC) Summary",
                            visible="(aucTable)",
                            columns=list(
                                list(
                                    `name`="predictor", 
                                    `title`="Predictor", 
                                    `type`="text"),
                                list(
                                    `name`="auc", 
                                    `title`="AUC", 
                                    `type`="number", 
                                    `format`="zto"),
                                list(
                                    `name`="auc_lower", 
                                    `title`="AUC Lower CI", 
                                    `type`="number", 
                                    `format`="zto"),
                                list(
                                    `name`="auc_upper", 
                                    `title`="AUC Upper CI", 
                                    `type`="number", 
                                    `format`="zto"),
                                list(
                                    `name`="std_error", 
                                    `title`="Standard Error", 
                                    `type`="number", 
                                    `format`="zto"),
                                list(
                                    `name`="auc_interpretation", 
                                    `title`="AUC Interpretation", 
                                    `type`="text"),
                                list(
                                    `name`="clinical_utility", 
                                    `title`="Clinical Utility", 
                                    `type`="text"))))
                        self$add(jmvcore::Table$new(
                            options=options,
                            name="rocComparisons",
                            title="ROC Curve Comparisons",
                            visible="(pairwiseComparisons && analysisType:comparative)",
                            columns=list(
                                list(
                                    `name`="predictor1", 
                                    `title`="Predictor 1", 
                                    `type`="text"),
                                list(
                                    `name`="predictor2", 
                                    `title`="Predictor 2", 
                                    `type`="text"),
                                list(
                                    `name`="auc_difference", 
                                    `title`="AUC Difference", 
                                    `type`="number", 
                                    `format`="zto"),
                                list(
                                    `name`="test_statistic", 
                                    `title`="Test Statistic", 
                                    `type`="number", 
                                    `format`="zto"),
                                list(
                                    `name`="p_value", 
                                    `title`="p-value", 
                                    `type`="number", 
                                    `format`="zto;pvalue"),
                                list(
                                    `name`="result", 
                                    `title`="Result", 
                                    `type`="text"),
                                list(
                                    `name`="clinical_significance", 
                                    `title`="Clinical Significance", 
                                    `type`="text"))))
                        self$add(jmvcore::Table$new(
                            options=options,
                            name="detailedComparison",
                            title="Detailed Model Comparison",
                            visible="(showMetricsDiff && analysisType:comparative)",
                            columns=list(
                                list(
                                    `name`="metric", 
                                    `title`="Metric", 
                                    `type`="text"),
                                list(
                                    `name`="model1_value", 
                                    `title`="Model 1 Value", 
                                    `type`="number", 
                                    `format`="zto"),
                                list(
                                    `name`="model2_value", 
                                    `title`="Model 2 Value", 
                                    `type`="number", 
                                    `format`="zto"),
                                list(
                                    `name`="difference", 
                                    `title`="Difference", 
                                    `type`="number", 
                                    `format`="zto"),
                                list(
                                    `name`="percent_change", 
                                    `title`="% Change", 
                                    `type`="number", 
                                    `format`="pc"),
                                list(
                                    `name`="p_value", 
                                    `title`="p-value", 
                                    `type`="number", 
                                    `format`="zto;pvalue"),
                                list(
                                    `name`="effect_size", 
                                    `title`="Effect Size", 
                                    `type`="number", 
                                    `format`="zto"),
                                list(
                                    `name`="interpretation", 
                                    `title`="Clinical Interpretation", 
                                    `type`="text"))))
                        self$add(jmvcore::Table$new(
                            options=options,
                            name="statisticalSummary",
                            title="Statistical Comparison Summary",
                            visible="(statisticalComparison && analysisType:comparative)",
                            columns=list(
                                list(
                                    `name`="test_name", 
                                    `title`="Statistical Test", 
                                    `type`="text"),
                                list(
                                    `name`="test_statistic", 
                                    `title`="Test Statistic", 
                                    `type`="number", 
                                    `format`="zto"),
                                list(
                                    `name`="p_value", 
                                    `title`="p-value", 
                                    `type`="number", 
                                    `format`="zto;pvalue"),
                                list(
                                    `name`="conclusion", 
                                    `title`="Statistical Conclusion", 
                                    `type`="text"),
                                list(
                                    `name`="effect_magnitude", 
                                    `title`="Effect Magnitude", 
                                    `type`="text"))))
                        self$add(jmvcore::Table$new(
                            options=options,
                            name="optimalCutoffSummary",
                            title="Optimal Cutoff Analysis",
                            visible="(optimalCutoffs)",
                            columns=list(
                                list(
                                    `name`="predictor", 
                                    `title`="Predictor", 
                                    `type`="text"),
                                list(
                                    `name`="optimal_cutoff", 
                                    `title`="Optimal Cutoff", 
                                    `type`="number", 
                                    `format`="zto"),
                                list(
                                    `name`="youden_index", 
                                    `title`="Youden Index", 
                                    `type`="number", 
                                    `format`="zto"),
                                list(
                                    `name`="sensitivity", 
                                    `title`="Sensitivity", 
                                    `type`="number", 
                                    `format`="zto"),
                                list(
                                    `name`="sens_ci_lower", 
                                    `title`="Sens CI Lower", 
                                    `type`="number", 
                                    `format`="zto", 
                                    `visible`="(bootstrapCutoffCI && useBootstrap)"),
                                list(
                                    `name`="sens_ci_upper", 
                                    `title`="Sens CI Upper", 
                                    `type`="number", 
                                    `format`="zto", 
                                    `visible`="(bootstrapCutoffCI && useBootstrap)"),
                                list(
                                    `name`="specificity", 
                                    `title`="Specificity", 
                                    `type`="number", 
                                    `format`="zto"),
                                list(
                                    `name`="spec_ci_lower", 
                                    `title`="Spec CI Lower", 
                                    `type`="number", 
                                    `format`="zto", 
                                    `visible`="(bootstrapCutoffCI && useBootstrap)"),
                                list(
                                    `name`="spec_ci_upper", 
                                    `title`="Spec CI Upper", 
                                    `type`="number", 
                                    `format`="zto", 
                                    `visible`="(bootstrapCutoffCI && useBootstrap)"),
                                list(
                                    `name`="accuracy", 
                                    `title`="Accuracy", 
                                    `type`="number", 
                                    `format`="zto"),
                                list(
                                    `name`="clinical_recommendation", 
                                    `title`="Clinical Recommendation", 
                                    `type`="text"))))
                        self$add(jmvcore::Table$new(
                            options=options,
                            name="cutoffAnalysis",
                            title="Detailed Cutoff Analysis",
                            visible="(cutoffTable)",
                            columns=list(
                                list(
                                    `name`="predictor", 
                                    `title`="Predictor", 
                                    `type`="text"),
                                list(
                                    `name`="cutoff", 
                                    `title`="Cutoff", 
                                    `type`="number", 
                                    `format`="zto"),
                                list(
                                    `name`="cutoff_type", 
                                    `title`="Cutoff Type", 
                                    `type`="text"),
                                list(
                                    `name`="sensitivity", 
                                    `title`="Sensitivity", 
                                    `type`="number", 
                                    `format`="zto"),
                                list(
                                    `name`="specificity", 
                                    `title`="Specificity", 
                                    `type`="number", 
                                    `format`="zto"),
                                list(
                                    `name`="one_minus_specificity", 
                                    `title`="1-Specificity", 
                                    `type`="number", 
                                    `format`="zto"),
                                list(
                                    `name`="youden_index", 
                                    `title`="Youden Index", 
                                    `type`="number", 
                                    `format`="zto"),
                                list(
                                    `name`="true_positive", 
                                    `title`="True Positive", 
                                    `type`="integer"),
                                list(
                                    `name`="true_negative", 
                                    `title`="True Negative", 
                                    `type`="integer"),
                                list(
                                    `name`="false_positive", 
                                    `title`="False Positive", 
                                    `type`="integer"),
                                list(
                                    `name`="false_negative", 
                                    `title`="False Negative", 
                                    `type`="integer"))))
                        self$add(jmvcore::Table$new(
                            options=options,
                            name="diagnosticPerformance",
                            title="Diagnostic Performance Metrics",
                            visible="(diagnosticMetrics)",
                            columns=list(
                                list(
                                    `name`="predictor", 
                                    `title`="Predictor", 
                                    `type`="text"),
                                list(
                                    `name`="cutoff", 
                                    `title`="Cutoff", 
                                    `type`="number", 
                                    `format`="zto"),
                                list(
                                    `name`="sensitivity", 
                                    `title`="Sensitivity", 
                                    `type`="number", 
                                    `format`="zto"),
                                list(
                                    `name`="sensitivity_ci", 
                                    `title`="Sensitivity 95% CI", 
                                    `type`="text"),
                                list(
                                    `name`="specificity", 
                                    `title`="Specificity", 
                                    `type`="number", 
                                    `format`="zto"),
                                list(
                                    `name`="specificity_ci", 
                                    `title`="Specificity 95% CI", 
                                    `type`="text"),
                                list(
                                    `name`="accuracy", 
                                    `title`="Accuracy", 
                                    `type`="number", 
                                    `format`="zto"),
                                list(
                                    `name`="balanced_accuracy", 
                                    `title`="Balanced Accuracy", 
                                    `type`="number", 
                                    `format`="zto"))))
                        self$add(jmvcore::Table$new(
                            options=options,
                            name="clinicalApplicationMetrics",
                            title="Clinical Application Metrics",
                            visible="(clinicalMetrics)",
                            columns=list(
                                list(
                                    `name`="predictor", 
                                    `title`="Predictor", 
                                    `type`="text"),
                                list(
                                    `name`="prevalence", 
                                    `title`="Prevalence", 
                                    `type`="number", 
                                    `format`="zto"),
                                list(
                                    `name`="ppv", 
                                    `title`="PPV", 
                                    `type`="number", 
                                    `format`="zto"),
                                list(
                                    `name`="npv", 
                                    `title`="NPV", 
                                    `type`="number", 
                                    `format`="zto"),
                                list(
                                    `name`="lr_positive", 
                                    `title`="LR+", 
                                    `type`="number", 
                                    `format`="zto"),
                                list(
                                    `name`="lr_negative", 
                                    `title`="LR-", 
                                    `type`="number", 
                                    `format`="zto"),
                                list(
                                    `name`="diagnostic_odds_ratio", 
                                    `title`="Diagnostic OR", 
                                    `type`="number", 
                                    `format`="zto"),
                                list(
                                    `name`="clinical_interpretation", 
                                    `title`="Clinical Interpretation", 
                                    `type`="text"))))
                        self$add(jmvcore::Table$new(
                            options=options,
                            name="partialAucAnalysis",
                            title="Partial AUC Analysis",
                            visible="(partialAuc)",
                            columns=list(
                                list(
                                    `name`="predictor", 
                                    `title`="Predictor", 
                                    `type`="text"),
                                list(
                                    `name`="range_type", 
                                    `title`="Range Type", 
                                    `type`="text"),
                                list(
                                    `name`="range_min", 
                                    `title`="Range Min", 
                                    `type`="number", 
                                    `format`="zto"),
                                list(
                                    `name`="range_max", 
                                    `title`="Range Max", 
                                    `type`="number", 
                                    `format`="zto"),
                                list(
                                    `name`="partial_auc", 
                                    `title`="Partial AUC", 
                                    `type`="number", 
                                    `format`="zto"),
                                list(
                                    `name`="normalized_pauc", 
                                    `title`="Normalized pAUC", 
                                    `type`="number", 
                                    `format`="zto"),
                                list(
                                    `name`="clinical_relevance", 
                                    `title`="Clinical Relevance", 
                                    `type`="text"))))
                        self$add(jmvcore::Table$new(
                            options=options,
                            name="crocAnalysisTable",
                            title="CROC (Concentrated ROC) Analysis",
                            visible="(crocAnalysis)",
                            columns=list(
                                list(
                                    `name`="predictor", 
                                    `title`="Predictor", 
                                    `type`="text"),
                                list(
                                    `name`="croc_auc", 
                                    `title`="CROC AUC", 
                                    `type`="number", 
                                    `format`="zto"),
                                list(
                                    `name`="roc_auc", 
                                    `title`="ROC AUC", 
                                    `type`="number", 
                                    `format`="zto"),
                                list(
                                    `name`="alpha", 
                                    `title`="Alpha", 
                                    `type`="number", 
                                    `format`="zto"),
                                list(
                                    `name`="early_retrieval_gain", 
                                    `title`="Early Retrieval Gain", 
                                    `type`="number", 
                                    `format`="zto"),
                                list(
                                    `name`="interpretation", 
                                    `title`="Interpretation", 
                                    `type`="text"))))
                        self$add(jmvcore::Table$new(
                            options=options,
                            name="convexHullTable",
                            title="ROC Convex Hull Analysis",
                            visible="(convexHull)",
                            columns=list(
                                list(
                                    `name`="predictor", 
                                    `title`="Predictor", 
                                    `type`="text"),
                                list(
                                    `name`="hull_auc", 
                                    `title`="Convex Hull AUC", 
                                    `type`="number", 
                                    `format`="zto"),
                                list(
                                    `name`="empirical_auc", 
                                    `title`="Empirical AUC", 
                                    `type`="number", 
                                    `format`="zto"),
                                list(
                                    `name`="performance_gap", 
                                    `title`="Performance Gap", 
                                    `type`="number", 
                                    `format`="zto"),
                                list(
                                    `name`="n_hull_points", 
                                    `title`="Hull Points", 
                                    `type`="integer"),
                                list(
                                    `name`="interpretation", 
                                    `title`="Interpretation", 
                                    `type`="text"))))
                        self$add(jmvcore::Table$new(
                            options=options,
                            name="comprehensiveAnalysisSummary",
                            title="Comprehensive ROC Analysis Summary",
                            visible="(comprehensive_output)",
                            columns=list(
                                list(
                                    `name`="measure", 
                                    `title`="Measure", 
                                    `type`="text"),
                                list(
                                    `name`="value", 
                                    `title`="Value", 
                                    `type`="text"),
                                list(
                                    `name`="interpretation", 
                                    `title`="Interpretation", 
                                    `type`="text"),
                                list(
                                    `name`="clinical_significance", 
                                    `title`="Clinical Significance", 
                                    `type`="text"))))
                        self$add(jmvcore::Html$new(
                            options=options,
                            name="clinicalInterpretationGuide",
                            title="Clinical Application Guidance",
                            visible="(clinical_interpretation)"))
                        self$add(jmvcore::Html$new(
                            options=options,
                            name="methodsExplanation",
                            title="Statistical Methods and References",
                            visible="(comprehensive_output)"))
                        self$add(jmvcore::Image$new(
                            options=options,
                            name="rocCurvePlot",
                            title="ROC Curve Analysis",
                            visible="(rocCurve)",
                            renderFun=".plotROCCurve",
                            width=600,
                            height=600))
                        self$add(jmvcore::Image$new(
                            options=options,
                            name="comparativeROCPlot",
                            title="Comparative ROC Analysis",
                            visible="(rocCurve && analysisType:comparative)",
                            renderFun=".plotComparativeROC",
                            width=600,
                            height=600))
                        self$add(jmvcore::Image$new(
                            options=options,
                            name="cutoffAnalysisPlot",
                            title="Cutoff Analysis Plot",
                            visible="(cutoffTable)",
                            renderFun=".plotCutoffAnalysis",
                            width=600,
                            height=600))
                        self$add(jmvcore::Image$new(
                            options=options,
                            name="youdenIndexPlot",
                            title="Youden Index Optimization Plot",
                            visible="(youdenOptimization)",
                            renderFun=".plotYoudenIndex",
                            width=600,
                            height=600))
                        self$add(jmvcore::Image$new(
                            options=options,
                            name="clinicalDecisionPlot",
                            title="Clinical Decision Analysis Plot",
                            visible="(clinicalMetrics)",
                            renderFun=".plotClinicalDecision",
                            width=600,
                            height=600))
                        self$add(jmvcore::Image$new(
                            options=options,
                            name="crocCurvePlot",
                            title="CROC (Concentrated ROC) Curve",
                            visible="(crocAnalysis)",
                            renderFun=".plotCROC",
                            width=600,
                            height=600))
                        self$add(jmvcore::Image$new(
                            options=options,
                            name="convexHullPlot",
                            title="ROC Convex Hull Plot",
                            visible="(convexHull)",
                            renderFun=".plotConvexHull",
                            width=600,
                            height=600))
                        self$add(jmvcore::Table$new(
                            options=options,
                            name="calibrationSummary",
                            title="Calibration Performance Summary",
                            visible="(calibrationAnalysis)",
                            columns=list(
                                list(
                                    `name`="predictor", 
                                    `title`="Predictor", 
                                    `type`="text"),
                                list(
                                    `name`="brier_score", 
                                    `title`="Brier Score", 
                                    `type`="number", 
                                    `format`="zto"),
                                list(
                                    `name`="scaled_brier", 
                                    `title`="Scaled Brier", 
                                    `type`="number", 
                                    `format`="zto"),
                                list(
                                    `name`="calibration_slope", 
                                    `title`="Calibration Slope", 
                                    `type`="number", 
                                    `format`="zto", 
                                    `visible`="(calibrationMetrics)"),
                                list(
                                    `name`="calibration_intercept", 
                                    `title`="Calibration Intercept", 
                                    `type`="number", 
                                    `format`="zto", 
                                    `visible`="(calibrationMetrics)"),
                                list(
                                    `name`="calibration_in_large", 
                                    `title`="Calibration-in-the-Large", 
                                    `type`="number", 
                                    `format`="zto", 
                                    `visible`="(calibrationMetrics)"),
                                list(
                                    `name`="interpretation", 
                                    `title`="Interpretation", 
                                    `type`="text"))))
                        self$add(jmvcore::Table$new(
                            options=options,
                            name="hosmerLemeshowTable",
                            title="Hosmer-Lemeshow Goodness-of-Fit Test",
                            visible="(calibrationAnalysis && hosmerLemeshow)",
                            columns=list(
                                list(
                                    `name`="predictor", 
                                    `title`="Predictor", 
                                    `type`="text"),
                                list(
                                    `name`="chi_square", 
                                    `title`="Chi-Square", 
                                    `type`="number", 
                                    `format`="zto"),
                                list(
                                    `name`="df", 
                                    `title`="df", 
                                    `type`="integer"),
                                list(
                                    `name`="p_value", 
                                    `title`="p-value", 
                                    `type`="number", 
                                    `format`="zto;pvalue"),
                                list(
                                    `name`="n_groups", 
                                    `title`="Groups", 
                                    `type`="integer"),
                                list(
                                    `name`="conclusion", 
                                    `title`="Conclusion", 
                                    `type`="text"))))
                        self$add(jmvcore::Image$new(
                            options=options,
                            name="calibrationPlotImage",
                            title="Calibration Plot",
                            visible="(calibrationAnalysis && calibrationPlot)",
                            renderFun=".plotCalibration",
                            width=600,
                            height=600))
                        self$add(jmvcore::Table$new(
                            options=options,
                            name="multiClassAUC",
                            title="Multi-Class ROC Summary",
                            visible="(multiClassROC)",
                            columns=list(
                                list(
                                    `name`="class", 
                                    `title`="Class", 
                                    `type`="text"),
                                list(
                                    `name`="strategy", 
                                    `title`="Strategy", 
                                    `type`="text"),
                                list(
                                    `name`="auc", 
                                    `title`="AUC", 
                                    `type`="number", 
                                    `format`="zto"),
                                list(
                                    `name`="auc_lower", 
                                    `title`="AUC Lower CI", 
                                    `type`="number", 
                                    `format`="zto"),
                                list(
                                    `name`="auc_upper", 
                                    `title`="AUC Upper CI", 
                                    `type`="number", 
                                    `format`="zto"),
                                list(
                                    `name`="n_positive", 
                                    `title`="N Positive", 
                                    `type`="integer"),
                                list(
                                    `name`="n_negative", 
                                    `title`="N Negative", 
                                    `type`="integer"))))
                        self$add(jmvcore::Table$new(
                            options=options,
                            name="multiClassAverage",
                            title="Multi-Class Average AUC",
                            visible="(multiClassROC)",
                            rows=1,
                            columns=list(
                                list(
                                    `name`="averaging_method", 
                                    `title`="Averaging Method", 
                                    `type`="text"),
                                list(
                                    `name`="macro_auc", 
                                    `title`="Macro AUC", 
                                    `type`="number", 
                                    `format`="zto"),
                                list(
                                    `name`="weighted_auc", 
                                    `title`="Weighted AUC", 
                                    `type`="number", 
                                    `format`="zto"),
                                list(
                                    `name`="micro_auc", 
                                    `title`="Micro AUC", 
                                    `type`="number", 
                                    `format`="zto"),
                                list(
                                    `name`="interpretation", 
                                    `title`="Interpretation", 
                                    `type`="text"))))
                        self$add(jmvcore::Image$new(
                            options=options,
                            name="multiClassROCPlot",
                            title="Multi-Class ROC Curves",
                            visible="(multiClassROC)",
                            renderFun=".plotMultiClassROC",
                            width=600,
                            height=600))
                        self$add(jmvcore::Table$new(
                            options=options,
                            name="timeDependentAUC",
                            title="Time-Dependent AUC",
                            visible="(timeDependentROC)",
                            columns=list(
                                list(
                                    `name`="predictor", 
                                    `title`="Predictor", 
                                    `type`="text"),
                                list(
                                    `name`="time_point", 
                                    `title`="Time Point", 
                                    `type`="number", 
                                    `format`="zto"),
                                list(
                                    `name`="auc", 
                                    `title`="AUC(t)", 
                                    `type`="number", 
                                    `format`="zto"),
                                list(
                                    `name`="auc_lower", 
                                    `title`="AUC Lower CI", 
                                    `type`="number", 
                                    `format`="zto"),
                                list(
                                    `name`="auc_upper", 
                                    `title`="AUC Upper CI", 
                                    `type`="number", 
                                    `format`="zto"),
                                list(
                                    `name`="n_events", 
                                    `title`="N Events", 
                                    `type`="integer"),
                                list(
                                    `name`="n_at_risk", 
                                    `title`="N At Risk", 
                                    `type`="integer"))))
                        self$add(jmvcore::Image$new(
                            options=options,
                            name="timeDependentROCPlot",
                            title="Time-Dependent ROC Curves",
                            visible="(timeDependentROC)",
                            renderFun=".plotTimeDependentROC",
                            width=600,
                            height=600))
                        self$add(jmvcore::Image$new(
                            options=options,
                            name="aucTimeCoursePlot",
                            title="AUC Time Course",
                            visible="(timeDependentROC)",
                            renderFun=".plotAUCTimeCourse",
                            width=600,
                            height=600))
                        self$add(jmvcore::Table$new(
                            options=options,
                            name="clinicalImpactTable",
                            title="Clinical Impact Metrics",
                            visible="(clinicalImpact)",
                            columns=list(
                                list(
                                    `name`="predictor", 
                                    `title`="Predictor", 
                                    `type`="text"),
                                list(
                                    `name`="threshold", 
                                    `title`="Threshold", 
                                    `type`="number", 
                                    `format`="zto"),
                                list(
                                    `name`="nnt", 
                                    `title`="NNT", 
                                    `type`="number", 
                                    `format`="zto"),
                                list(
                                    `name`="nnd", 
                                    `title`="NND", 
                                    `type`="number", 
                                    `format`="zto"),
                                list(
                                    `name`="tested_positive", 
                                    `title`="Tested Positive (%)", 
                                    `type`="number", 
                                    `format`="pc"),
                                list(
                                    `name`="true_positive_rate", 
                                    `title`="True Positive Rate", 
                                    `type`="number", 
                                    `format`="pc"),
                                list(
                                    `name`="false_positive_rate", 
                                    `title`="False Positive Rate", 
                                    `type`="number", 
                                    `format`="pc"),
                                list(
                                    `name`="net_benefit_per_100", 
                                    `title`="Net Benefit per 100", 
                                    `type`="number", 
                                    `format`="zto"))))
                        self$add(jmvcore::Table$new(
                            options=options,
                            name="decisionImpactSummary",
                            title="Decision Impact at Key Thresholds",
                            visible="(clinicalImpact && decisionImpactTable)",
                            columns=list(
                                list(
                                    `name`="threshold", 
                                    `title`="Risk Threshold", 
                                    `type`="number", 
                                    `format`="pc"),
                                list(
                                    `name`="n_high_risk", 
                                    `title`="N High Risk", 
                                    `type`="integer"),
                                list(
                                    `name`="n_high_risk_with_event", 
                                    `title`="N True Positives", 
                                    `type`="integer"),
                                list(
                                    `name`="n_high_risk_without_event", 
                                    `title`="N False Positives", 
                                    `type`="integer"),
                                list(
                                    `name`="ppv", 
                                    `title`="PPV", 
                                    `type`="number", 
                                    `format`="pc"),
                                list(
                                    `name`="npv", 
                                    `title`="NPV", 
                                    `type`="number", 
                                    `format`="pc"))))
                        self$add(jmvcore::Image$new(
                            options=options,
                            name="clinicalUtilityPlot",
                            title="Clinical Utility Curve",
                            visible="(clinicalImpact && clinicalUtilityCurve)",
                            renderFun=".plotClinicalUtility",
                            width=600,
                            height=600))}))$new(options=options))}))

enhancedROCBase <- if (requireNamespace("jmvcore", quietly=TRUE)) R6::R6Class(
    "enhancedROCBase",
    inherit = jmvcore::Analysis,
    public = list(
        initialize = function(options, data=NULL, datasetId="", analysisId="", revision=0) {
            super$initialize(
                package = "ClinicoPath",
                name = "enhancedROC",
                version = c(0,0,32),
                options = options,
                results = enhancedROCResults$new(options=options),
                data = data,
                datasetId = datasetId,
                analysisId = analysisId,
                revision = revision,
                pause = NULL,
                completeWhenFilled = FALSE,
                requiresMissings = FALSE,
                weightsSupport = 'auto')
        }))

#' Clinical ROC Analysis
#'
#' Clinical ROC analysis toolkit for comprehensive diagnostic performance 
#' evaluation. Includes ROC curve analysis, Youden Index optimization, 
#' sensitivity/specificity analysis, optimal cutoff determination, and 
#' comparative ROC analysis. Essential for biomarker validation, diagnostic
#' test evaluation, and clinical decision support in medical research.
#' 
#' @param data The data as a data frame.
#' @param outcome Binary outcome variable (disease status)
#' @param positiveClass Select which level represents the positive class
#'   (disease/condition present)
#' @param predictors Numeric predictor variables for ROC analysis
#' @param analysisType Type of ROC analysis to perform
#' @param direction Direction of the predictor-outcome relationship
#' @param youdenOptimization Find optimal cutoff using Youden Index
#'   (Sensitivity + Specificity - 1)
#' @param customCutoffs Comma-separated list of custom cutoffs to evaluate
#'   (e.g., 0.1, 0.5, 0.9)
#' @param sensitivityThreshold Minimum required sensitivity for screening
#'   applications
#' @param specificityThreshold Minimum required specificity for confirmatory
#'   testing
#' @param confidenceLevel Confidence level for AUC confidence intervals
#' @param bootstrapSamples Number of bootstrap samples for confidence
#'   intervals
#' @param useBootstrap Use bootstrap methods for confidence intervals
#' @param bootstrapMethod Method for calculating bootstrap confidence
#'   intervals. BCa provides better coverage but requires more computation.
#' @param bootstrapCutoffCI Calculate bootstrap confidence intervals for
#'   sensitivity and specificity at optimal cutoff
#' @param bootstrapPartialAUC Calculate bootstrap confidence intervals for
#'   partial AUC estimates
#' @param stratifiedBootstrap Maintain outcome class proportions in bootstrap
#'   samples (recommended for imbalanced data)
#' @param pairwiseComparisons Perform pairwise comparisons between ROC curves
#' @param comparisonMethod Method for comparing ROC curves
#' @param rocCurve Display ROC curve plot
#' @param aucTable Display AUC summary table
#' @param cutoffTable Display detailed cutoff analysis
#' @param optimalCutoffs Display optimal cutoff summary
#' @param diagnosticMetrics Display comprehensive diagnostic metrics
#' @param clinicalMetrics Display clinical application metrics (PPV, NPV, LR+,
#'   LR-)
#' @param smoothMethod Method for smoothing ROC curves
#' @param partialAuc Calculate partial AUC for specific
#'   sensitivity/specificity ranges
#' @param partialAucType Whether to calculate pAUC over a specificity or
#'   sensitivity range
#' @param partialRange Range for partial AUC (min,max) - e.g., 0.8,1.0 for
#'   high specificity or sensitivity
#' @param crocAnalysis Calculate Concentrated ROC curves for early retrieval
#'   analysis
#' @param crocAlpha Concentration parameter for CROC exponential magnifier
#'   function
#' @param convexHull Calculate ROC convex hull (optimal achievable
#'   performance)
#' @param tiedScoreHandling Method for handling tied predictor scores in ROC
#'   calculation
#' @param detectImbalance Automatically detect class imbalance and recommend
#'   PRC when appropriate
#' @param imbalanceThreshold Ratio threshold for imbalance detection (e.g.,
#'   3.0 means 3:1 or 1:3 ratio)
#' @param showImbalanceWarning Display warning message when class imbalance is
#'   detected
#' @param recommendPRC Recommend using Precision-Recall curves when imbalance
#'   is detected
#' @param prevalence Disease prevalence for calculating predictive values
#' @param clinicalContext Clinical application context for interpretation
#' @param clinicalPresets Pre-configured settings for common clinical
#'   scenarios
#' @param comprehensive_output Include comprehensive statistical details
#' @param clinical_interpretation Provide clinical context for ROC analysis
#'   results
#' @param plotTheme Visual theme for ROC plots
#' @param plotWidth Width of ROC plots
#' @param plotHeight Height of ROC plots
#' @param showCutoffPoints Highlight optimal cutoff points on ROC curve
#' @param showConfidenceBands Display confidence bands around ROC curve
#' @param showMetricsDiff Display detailed differences between model metrics
#' @param statisticalComparison Perform comprehensive statistical comparison
#'   between models
#' @param calibrationAnalysis Assess calibration (agreement between observed
#'   and predicted probabilities)
#' @param calibrationPlot Display calibration plot with loess smoothing
#' @param hosmerLemeshow Perform Hosmer-Lemeshow goodness-of-fit test
#' @param hlGroups Number of groups for Hosmer-Lemeshow test
#' @param brierScore Calculate Brier score and scaled Brier score
#' @param calibrationMetrics Calculate calibration slope, intercept, and
#'   calibration-in-the-large
#' @param splineCalibration Use restricted cubic splines for flexible
#'   calibration curves
#' @param splineKnots Number of knots for restricted cubic splines (3-7
#'   recommended)
#' @param eoRatio Calculate Expected/Observed ratio for overall calibration
#'   assessment
#' @param namDagostino Perform Nam-D'Agostino calibration test (more powerful
#'   than H-L)
#' @param greenwoodNam Greenwood-Nam-D'Agostino test for survival model
#'   calibration
#' @param calibrationBelt Display calibration belt showing uncertainty around
#'   calibration curve
#' @param calibrationDensity Show distribution of predicted probabilities as
#'   density overlay
#' @param multiClassROC Enable multi-class ROC analysis for outcomes with >2
#'   levels
#' @param multiClassStrategy Strategy for multi-class ROC analysis
#' @param multiClassAveraging Method for averaging AUC across classes
#' @param timeDependentROC Enable time-dependent ROC analysis for
#'   survival/time-to-event outcomes
#' @param timePoints Comma-separated time points for time-dependent ROC (e.g.,
#'   12,24,36 months)
#' @param tdRocMethod Method for estimating time-dependent ROC curves
#' @param clinicalImpact Calculate clinical impact metrics (NNT, NND, clinical
#'   utility)
#' @param nntCalculation Calculate number needed to test and number needed to
#'   diagnose
#' @param clinicalUtilityCurve Display clinical utility curve showing test
#'   consequences
#' @param decisionImpactTable Show decision impact at various thresholds
#' @param survivalROC Enable survival-specific ROC methods (requires
#'   time-to-event data)
#' @param harrellCIndex Calculate Harrell's concordance index for
#'   time-to-event outcomes
#' @param unoCStatistic Calculate Uno's C-statistic (more robust to censoring)
#' @param incidentDynamic Calculate incident/dynamic AUC (sensitivity for
#'   events at specific time)
#' @param cumulativeDynamic Calculate cumulative/dynamic AUC (sensitivity for
#'   events by specific time)
#' @param competingRisksConcordance Calculate cause-specific concordance for
#'   competing risks
#' @param internalValidation Perform internal validation using
#'   cross-validation or bootstrap
#' @param validationMethod Method for internal validation
#' @param optimismCorrection Apply optimism correction to performance metrics
#' @param externalValidation Enable external validation reporting framework
#' @param decisionImpactCurves Plot decision impact curves showing clinical
#'   consequences
#' @param netBenefitRegression Model net benefit as function of threshold
#'   probabilities
#' @param modelUpdating Analyze need for model recalibration or updating
#' @param transportability Assess model transportability across populations
#' @return A results object containing:
#' \tabular{llllll}{
#'   \code{results$results$instructions} \tab \tab \tab \tab \tab a html \cr
#'   \code{results$results$imbalanceWarning} \tab \tab \tab \tab \tab Warning and recommendations for imbalanced datasets \cr
#'   \code{results$results$imbalanceMetrics} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$results$analysisSummary} \tab \tab \tab \tab \tab Plain language summary of key findings \cr
#'   \code{results$results$clinicalReport} \tab \tab \tab \tab \tab Copy-ready clinical report sentences for publications and reports \cr
#'   \code{results$results$aucSummary} \tab \tab \tab \tab \tab AUC values with confidence intervals for each predictor \cr
#'   \code{results$results$rocComparisons} \tab \tab \tab \tab \tab Pairwise comparisons between ROC curves \cr
#'   \code{results$results$detailedComparison} \tab \tab \tab \tab \tab Comprehensive comparison of diagnostic metrics between models \cr
#'   \code{results$results$statisticalSummary} \tab \tab \tab \tab \tab Summary of statistical tests for model comparison \cr
#'   \code{results$results$optimalCutoffSummary} \tab \tab \tab \tab \tab Youden Index optimization results for each predictor \cr
#'   \code{results$results$cutoffAnalysis} \tab \tab \tab \tab \tab Comprehensive analysis across multiple cutoff values \cr
#'   \code{results$results$diagnosticPerformance} \tab \tab \tab \tab \tab Comprehensive diagnostic performance measures at optimal cutoff \cr
#'   \code{results$results$clinicalApplicationMetrics} \tab \tab \tab \tab \tab Clinical metrics including predictive values and likelihood ratios \cr
#'   \code{results$results$partialAucAnalysis} \tab \tab \tab \tab \tab Partial AUC analysis for specific sensitivity/specificity ranges \cr
#'   \code{results$results$crocAnalysisTable} \tab \tab \tab \tab \tab Concentrated ROC analysis with early retrieval focus \cr
#'   \code{results$results$convexHullTable} \tab \tab \tab \tab \tab ROC convex hull showing optimal achievable performance \cr
#'   \code{results$results$comprehensiveAnalysisSummary} \tab \tab \tab \tab \tab Enhanced statistical summary for comprehensive output \cr
#'   \code{results$results$clinicalInterpretationGuide} \tab \tab \tab \tab \tab a html \cr
#'   \code{results$results$methodsExplanation} \tab \tab \tab \tab \tab a html \cr
#'   \code{results$results$rocCurvePlot} \tab \tab \tab \tab \tab ROC curves with optimal cutoff points \cr
#'   \code{results$results$comparativeROCPlot} \tab \tab \tab \tab \tab Multiple ROC curves for comparison \cr
#'   \code{results$results$cutoffAnalysisPlot} \tab \tab \tab \tab \tab Sensitivity and specificity across cutoff values \cr
#'   \code{results$results$youdenIndexPlot} \tab \tab \tab \tab \tab Youden Index values across cutoff range \cr
#'   \code{results$results$clinicalDecisionPlot} \tab \tab \tab \tab \tab Clinical decision curves and threshold analysis \cr
#'   \code{results$results$crocCurvePlot} \tab \tab \tab \tab \tab Concentrated ROC curve with exponential magnifier transformation \cr
#'   \code{results$results$convexHullPlot} \tab \tab \tab \tab \tab ROC curve with convex hull overlay \cr
#'   \code{results$results$calibrationSummary} \tab \tab \tab \tab \tab Overall calibration metrics including Brier score \cr
#'   \code{results$results$hosmerLemeshowTable} \tab \tab \tab \tab \tab Hosmer-Lemeshow test for calibration \cr
#'   \code{results$results$calibrationPlotImage} \tab \tab \tab \tab \tab Calibration plot showing observed vs predicted probabilities \cr
#'   \code{results$results$multiClassAUC} \tab \tab \tab \tab \tab AUC values for each class in multi-class analysis \cr
#'   \code{results$results$multiClassAverage} \tab \tab \tab \tab \tab Averaged AUC across all classes \cr
#'   \code{results$results$multiClassROCPlot} \tab \tab \tab \tab \tab ROC curves for all classes \cr
#'   \code{results$results$timeDependentAUC} \tab \tab \tab \tab \tab AUC values at different time points \cr
#'   \code{results$results$timeDependentROCPlot} \tab \tab \tab \tab \tab ROC curves at multiple time points \cr
#'   \code{results$results$aucTimeCoursePlot} \tab \tab \tab \tab \tab AUC evolution over time \cr
#'   \code{results$results$clinicalImpactTable} \tab \tab \tab \tab \tab Number needed to test and clinical utility metrics \cr
#'   \code{results$results$decisionImpactSummary} \tab \tab \tab \tab \tab Clinical consequences at various decision thresholds \cr
#'   \code{results$results$clinicalUtilityPlot} \tab \tab \tab \tab \tab Clinical utility showing test consequences across thresholds \cr
#' }
#'
#' @export
enhancedROC <- function(
    data,
    outcome,
    positiveClass,
    predictors,
    analysisType = "single",
    direction = "auto",
    youdenOptimization = TRUE,
    customCutoffs,
    sensitivityThreshold = 0.8,
    specificityThreshold = 0.8,
    confidenceLevel = 95,
    bootstrapSamples = 1000,
    useBootstrap = TRUE,
    bootstrapMethod = "bca",
    bootstrapCutoffCI = FALSE,
    bootstrapPartialAUC = FALSE,
    stratifiedBootstrap = TRUE,
    pairwiseComparisons = TRUE,
    comparisonMethod = "delong",
    rocCurve = TRUE,
    aucTable = TRUE,
    cutoffTable = TRUE,
    optimalCutoffs = TRUE,
    diagnosticMetrics = TRUE,
    clinicalMetrics = TRUE,
    smoothMethod = "none",
    partialAuc = FALSE,
    partialAucType = "specificity",
    partialRange = "0.8,1.0",
    crocAnalysis = FALSE,
    crocAlpha = 7,
    convexHull = FALSE,
    tiedScoreHandling = "average",
    detectImbalance = TRUE,
    imbalanceThreshold = 3,
    showImbalanceWarning = TRUE,
    recommendPRC = TRUE,
    prevalence = 0.1,
    clinicalContext = "general",
    clinicalPresets = "custom",
    comprehensive_output = FALSE,
    clinical_interpretation = TRUE,
    plotTheme = "clinical",
    plotWidth = 600,
    plotHeight = 600,
    showCutoffPoints = TRUE,
    showConfidenceBands = FALSE,
    showMetricsDiff = TRUE,
    statisticalComparison = TRUE,
    calibrationAnalysis = FALSE,
    calibrationPlot = TRUE,
    hosmerLemeshow = TRUE,
    hlGroups = 10,
    brierScore = TRUE,
    calibrationMetrics = TRUE,
    splineCalibration = FALSE,
    splineKnots = 4,
    eoRatio = FALSE,
    namDagostino = FALSE,
    greenwoodNam = FALSE,
    calibrationBelt = FALSE,
    calibrationDensity = FALSE,
    multiClassROC = FALSE,
    multiClassStrategy = "ovr",
    multiClassAveraging = "macro",
    timeDependentROC = FALSE,
    timePoints = "12,24,36",
    tdRocMethod = "km",
    clinicalImpact = FALSE,
    nntCalculation = TRUE,
    clinicalUtilityCurve = TRUE,
    decisionImpactTable = TRUE,
    survivalROC = FALSE,
    harrellCIndex = FALSE,
    unoCStatistic = FALSE,
    incidentDynamic = FALSE,
    cumulativeDynamic = FALSE,
    competingRisksConcordance = FALSE,
    internalValidation = FALSE,
    validationMethod = "bootstrap",
    optimismCorrection = TRUE,
    externalValidation = FALSE,
    decisionImpactCurves = FALSE,
    netBenefitRegression = FALSE,
    modelUpdating = FALSE,
    transportability = FALSE) {

    if ( ! requireNamespace("jmvcore", quietly=TRUE))
        stop("enhancedROC requires jmvcore to be installed (restart may be required)")

    if ( ! missing(outcome)) outcome <- jmvcore::resolveQuo(jmvcore::enquo(outcome))
    if ( ! missing(predictors)) predictors <- jmvcore::resolveQuo(jmvcore::enquo(predictors))
    if (missing(data))
        data <- jmvcore::marshalData(
            parent.frame(),
            `if`( ! missing(outcome), outcome, NULL),
            `if`( ! missing(predictors), predictors, NULL))


    options <- enhancedROCOptions$new(
        outcome = outcome,
        positiveClass = positiveClass,
        predictors = predictors,
        analysisType = analysisType,
        direction = direction,
        youdenOptimization = youdenOptimization,
        customCutoffs = customCutoffs,
        sensitivityThreshold = sensitivityThreshold,
        specificityThreshold = specificityThreshold,
        confidenceLevel = confidenceLevel,
        bootstrapSamples = bootstrapSamples,
        useBootstrap = useBootstrap,
        bootstrapMethod = bootstrapMethod,
        bootstrapCutoffCI = bootstrapCutoffCI,
        bootstrapPartialAUC = bootstrapPartialAUC,
        stratifiedBootstrap = stratifiedBootstrap,
        pairwiseComparisons = pairwiseComparisons,
        comparisonMethod = comparisonMethod,
        rocCurve = rocCurve,
        aucTable = aucTable,
        cutoffTable = cutoffTable,
        optimalCutoffs = optimalCutoffs,
        diagnosticMetrics = diagnosticMetrics,
        clinicalMetrics = clinicalMetrics,
        smoothMethod = smoothMethod,
        partialAuc = partialAuc,
        partialAucType = partialAucType,
        partialRange = partialRange,
        crocAnalysis = crocAnalysis,
        crocAlpha = crocAlpha,
        convexHull = convexHull,
        tiedScoreHandling = tiedScoreHandling,
        detectImbalance = detectImbalance,
        imbalanceThreshold = imbalanceThreshold,
        showImbalanceWarning = showImbalanceWarning,
        recommendPRC = recommendPRC,
        prevalence = prevalence,
        clinicalContext = clinicalContext,
        clinicalPresets = clinicalPresets,
        comprehensive_output = comprehensive_output,
        clinical_interpretation = clinical_interpretation,
        plotTheme = plotTheme,
        plotWidth = plotWidth,
        plotHeight = plotHeight,
        showCutoffPoints = showCutoffPoints,
        showConfidenceBands = showConfidenceBands,
        showMetricsDiff = showMetricsDiff,
        statisticalComparison = statisticalComparison,
        calibrationAnalysis = calibrationAnalysis,
        calibrationPlot = calibrationPlot,
        hosmerLemeshow = hosmerLemeshow,
        hlGroups = hlGroups,
        brierScore = brierScore,
        calibrationMetrics = calibrationMetrics,
        splineCalibration = splineCalibration,
        splineKnots = splineKnots,
        eoRatio = eoRatio,
        namDagostino = namDagostino,
        greenwoodNam = greenwoodNam,
        calibrationBelt = calibrationBelt,
        calibrationDensity = calibrationDensity,
        multiClassROC = multiClassROC,
        multiClassStrategy = multiClassStrategy,
        multiClassAveraging = multiClassAveraging,
        timeDependentROC = timeDependentROC,
        timePoints = timePoints,
        tdRocMethod = tdRocMethod,
        clinicalImpact = clinicalImpact,
        nntCalculation = nntCalculation,
        clinicalUtilityCurve = clinicalUtilityCurve,
        decisionImpactTable = decisionImpactTable,
        survivalROC = survivalROC,
        harrellCIndex = harrellCIndex,
        unoCStatistic = unoCStatistic,
        incidentDynamic = incidentDynamic,
        cumulativeDynamic = cumulativeDynamic,
        competingRisksConcordance = competingRisksConcordance,
        internalValidation = internalValidation,
        validationMethod = validationMethod,
        optimismCorrection = optimismCorrection,
        externalValidation = externalValidation,
        decisionImpactCurves = decisionImpactCurves,
        netBenefitRegression = netBenefitRegression,
        modelUpdating = modelUpdating,
        transportability = transportability)

    analysis <- enhancedROCClass$new(
        options = options,
        data = data)

    analysis$run()

    analysis$results
}

