
# This file is automatically generated, you probably don't want to edit this

patientreportedOptions <- if (requireNamespace("jmvcore", quietly=TRUE)) R6::R6Class(
    "patientreportedOptions",
    inherit = jmvcore::Options,
    public = list(
        initialize = function(
            scale_items = NULL,
            patient_id = NULL,
            time_var = NULL,
            group_var = NULL,
            demographic_vars = NULL,
            scale_type = "generic_qol",
            instrument_name = "custom",
            scoring_method = "sum_score",
            reverse_coded_items = NULL,
            response_scale_min = 1,
            response_scale_max = 5,
            reliability_analysis = TRUE,
            validity_analysis = TRUE,
            factor_analysis = FALSE,
            irt_analysis = FALSE,
            dimensionality_test = TRUE,
            measurement_invariance = FALSE,
            missing_data_method = "pro_rata_scoring",
            min_items_required = 2,
            missing_threshold = 0.5,
            clinical_interpretation = TRUE,
            normative_comparison = FALSE,
            minimal_important_difference = TRUE,
            mid_value = 5,
            ceiling_floor_effects = TRUE,
            longitudinal_analysis = FALSE,
            change_analysis = "simple_change",
            trajectory_analysis = FALSE,
            time_to_deterioration = FALSE,
            group_comparisons = FALSE,
            comparison_method = "t_test",
            effect_size_analysis = TRUE,
            multiple_comparisons = "fdr",
            responder_analysis = FALSE,
            responder_threshold = 10,
            anchor_based_analysis = FALSE,
            anchor_variables = NULL,
            distribution_based_analysis = TRUE,
            data_quality_assessment = TRUE,
            response_patterns = TRUE,
            acquiescence_analysis = FALSE,
            detailed_output = TRUE,
            summary_report = TRUE,
            individual_profiles = FALSE,
            save_scores = FALSE,
            regulatory_documentation = TRUE, ...) {

            super$initialize(
                package="ClinicoPath",
                name="patientreported",
                requiresData=TRUE,
                ...)

            private$..scale_items <- jmvcore::OptionVariables$new(
                "scale_items",
                scale_items,
                suggested=list(
                    "continuous",
                    "ordinal"),
                permitted=list(
                    "numeric",
                    "factor"))
            private$..patient_id <- jmvcore::OptionVariable$new(
                "patient_id",
                patient_id,
                suggested=list(
                    "nominal"),
                permitted=list(
                    "factor",
                    "id"))
            private$..time_var <- jmvcore::OptionVariable$new(
                "time_var",
                time_var,
                suggested=list(
                    "continuous",
                    "ordinal"),
                permitted=list(
                    "numeric",
                    "factor"))
            private$..group_var <- jmvcore::OptionVariable$new(
                "group_var",
                group_var,
                suggested=list(
                    "nominal"),
                permitted=list(
                    "factor"))
            private$..demographic_vars <- jmvcore::OptionVariables$new(
                "demographic_vars",
                demographic_vars,
                suggested=list(
                    "continuous",
                    "nominal"),
                permitted=list(
                    "numeric",
                    "factor"))
            private$..scale_type <- jmvcore::OptionList$new(
                "scale_type",
                scale_type,
                options=list(
                    "generic_qol",
                    "disease_specific",
                    "symptom_scale",
                    "functional_scale",
                    "custom_scale"),
                default="generic_qol")
            private$..instrument_name <- jmvcore::OptionList$new(
                "instrument_name",
                instrument_name,
                options=list(
                    "sf36",
                    "eortc_qlq_c30",
                    "fact_g",
                    "promis",
                    "eq5d",
                    "karnofsky",
                    "ecog",
                    "custom"),
                default="custom")
            private$..scoring_method <- jmvcore::OptionList$new(
                "scoring_method",
                scoring_method,
                options=list(
                    "sum_score",
                    "mean_score",
                    "standardized",
                    "percent_scale",
                    "likert_scale",
                    "irt_score"),
                default="sum_score")
            private$..reverse_coded_items <- jmvcore::OptionVariables$new(
                "reverse_coded_items",
                reverse_coded_items,
                suggested=list(
                    "continuous",
                    "ordinal"),
                permitted=list(
                    "numeric",
                    "factor"))
            private$..response_scale_min <- jmvcore::OptionNumber$new(
                "response_scale_min",
                response_scale_min,
                min=0,
                max=10,
                default=1)
            private$..response_scale_max <- jmvcore::OptionNumber$new(
                "response_scale_max",
                response_scale_max,
                min=2,
                max=100,
                default=5)
            private$..reliability_analysis <- jmvcore::OptionBool$new(
                "reliability_analysis",
                reliability_analysis,
                default=TRUE)
            private$..validity_analysis <- jmvcore::OptionBool$new(
                "validity_analysis",
                validity_analysis,
                default=TRUE)
            private$..factor_analysis <- jmvcore::OptionBool$new(
                "factor_analysis",
                factor_analysis,
                default=FALSE)
            private$..irt_analysis <- jmvcore::OptionBool$new(
                "irt_analysis",
                irt_analysis,
                default=FALSE)
            private$..dimensionality_test <- jmvcore::OptionBool$new(
                "dimensionality_test",
                dimensionality_test,
                default=TRUE)
            private$..measurement_invariance <- jmvcore::OptionBool$new(
                "measurement_invariance",
                measurement_invariance,
                default=FALSE)
            private$..missing_data_method <- jmvcore::OptionList$new(
                "missing_data_method",
                missing_data_method,
                options=list(
                    "complete_cases",
                    "mean_imputation",
                    "person_mean",
                    "scale_mean",
                    "multiple_imputation",
                    "pro_rata_scoring"),
                default="pro_rata_scoring")
            private$..min_items_required <- jmvcore::OptionNumber$new(
                "min_items_required",
                min_items_required,
                min=1,
                max=50,
                default=2)
            private$..missing_threshold <- jmvcore::OptionNumber$new(
                "missing_threshold",
                missing_threshold,
                min=0.1,
                max=1,
                default=0.5)
            private$..clinical_interpretation <- jmvcore::OptionBool$new(
                "clinical_interpretation",
                clinical_interpretation,
                default=TRUE)
            private$..normative_comparison <- jmvcore::OptionBool$new(
                "normative_comparison",
                normative_comparison,
                default=FALSE)
            private$..minimal_important_difference <- jmvcore::OptionBool$new(
                "minimal_important_difference",
                minimal_important_difference,
                default=TRUE)
            private$..mid_value <- jmvcore::OptionNumber$new(
                "mid_value",
                mid_value,
                min=0.1,
                max=50,
                default=5)
            private$..ceiling_floor_effects <- jmvcore::OptionBool$new(
                "ceiling_floor_effects",
                ceiling_floor_effects,
                default=TRUE)
            private$..longitudinal_analysis <- jmvcore::OptionBool$new(
                "longitudinal_analysis",
                longitudinal_analysis,
                default=FALSE)
            private$..change_analysis <- jmvcore::OptionList$new(
                "change_analysis",
                change_analysis,
                options=list(
                    "none",
                    "simple_change",
                    "reliable_change",
                    "effect_size",
                    "mixed_models"),
                default="simple_change")
            private$..trajectory_analysis <- jmvcore::OptionBool$new(
                "trajectory_analysis",
                trajectory_analysis,
                default=FALSE)
            private$..time_to_deterioration <- jmvcore::OptionBool$new(
                "time_to_deterioration",
                time_to_deterioration,
                default=FALSE)
            private$..group_comparisons <- jmvcore::OptionBool$new(
                "group_comparisons",
                group_comparisons,
                default=FALSE)
            private$..comparison_method <- jmvcore::OptionList$new(
                "comparison_method",
                comparison_method,
                options=list(
                    "t_test",
                    "anova",
                    "wilcoxon",
                    "kruskal_wallis",
                    "mixed_models"),
                default="t_test")
            private$..effect_size_analysis <- jmvcore::OptionBool$new(
                "effect_size_analysis",
                effect_size_analysis,
                default=TRUE)
            private$..multiple_comparisons <- jmvcore::OptionList$new(
                "multiple_comparisons",
                multiple_comparisons,
                options=list(
                    "none",
                    "bonferroni",
                    "holm",
                    "fdr"),
                default="fdr")
            private$..responder_analysis <- jmvcore::OptionBool$new(
                "responder_analysis",
                responder_analysis,
                default=FALSE)
            private$..responder_threshold <- jmvcore::OptionNumber$new(
                "responder_threshold",
                responder_threshold,
                min=1,
                max=50,
                default=10)
            private$..anchor_based_analysis <- jmvcore::OptionBool$new(
                "anchor_based_analysis",
                anchor_based_analysis,
                default=FALSE)
            private$..anchor_variables <- jmvcore::OptionVariables$new(
                "anchor_variables",
                anchor_variables,
                suggested=list(
                    "continuous",
                    "nominal"),
                permitted=list(
                    "numeric",
                    "factor"))
            private$..distribution_based_analysis <- jmvcore::OptionBool$new(
                "distribution_based_analysis",
                distribution_based_analysis,
                default=TRUE)
            private$..data_quality_assessment <- jmvcore::OptionBool$new(
                "data_quality_assessment",
                data_quality_assessment,
                default=TRUE)
            private$..response_patterns <- jmvcore::OptionBool$new(
                "response_patterns",
                response_patterns,
                default=TRUE)
            private$..acquiescence_analysis <- jmvcore::OptionBool$new(
                "acquiescence_analysis",
                acquiescence_analysis,
                default=FALSE)
            private$..detailed_output <- jmvcore::OptionBool$new(
                "detailed_output",
                detailed_output,
                default=TRUE)
            private$..summary_report <- jmvcore::OptionBool$new(
                "summary_report",
                summary_report,
                default=TRUE)
            private$..individual_profiles <- jmvcore::OptionBool$new(
                "individual_profiles",
                individual_profiles,
                default=FALSE)
            private$..save_scores <- jmvcore::OptionBool$new(
                "save_scores",
                save_scores,
                default=FALSE)
            private$..regulatory_documentation <- jmvcore::OptionBool$new(
                "regulatory_documentation",
                regulatory_documentation,
                default=TRUE)

            self$.addOption(private$..scale_items)
            self$.addOption(private$..patient_id)
            self$.addOption(private$..time_var)
            self$.addOption(private$..group_var)
            self$.addOption(private$..demographic_vars)
            self$.addOption(private$..scale_type)
            self$.addOption(private$..instrument_name)
            self$.addOption(private$..scoring_method)
            self$.addOption(private$..reverse_coded_items)
            self$.addOption(private$..response_scale_min)
            self$.addOption(private$..response_scale_max)
            self$.addOption(private$..reliability_analysis)
            self$.addOption(private$..validity_analysis)
            self$.addOption(private$..factor_analysis)
            self$.addOption(private$..irt_analysis)
            self$.addOption(private$..dimensionality_test)
            self$.addOption(private$..measurement_invariance)
            self$.addOption(private$..missing_data_method)
            self$.addOption(private$..min_items_required)
            self$.addOption(private$..missing_threshold)
            self$.addOption(private$..clinical_interpretation)
            self$.addOption(private$..normative_comparison)
            self$.addOption(private$..minimal_important_difference)
            self$.addOption(private$..mid_value)
            self$.addOption(private$..ceiling_floor_effects)
            self$.addOption(private$..longitudinal_analysis)
            self$.addOption(private$..change_analysis)
            self$.addOption(private$..trajectory_analysis)
            self$.addOption(private$..time_to_deterioration)
            self$.addOption(private$..group_comparisons)
            self$.addOption(private$..comparison_method)
            self$.addOption(private$..effect_size_analysis)
            self$.addOption(private$..multiple_comparisons)
            self$.addOption(private$..responder_analysis)
            self$.addOption(private$..responder_threshold)
            self$.addOption(private$..anchor_based_analysis)
            self$.addOption(private$..anchor_variables)
            self$.addOption(private$..distribution_based_analysis)
            self$.addOption(private$..data_quality_assessment)
            self$.addOption(private$..response_patterns)
            self$.addOption(private$..acquiescence_analysis)
            self$.addOption(private$..detailed_output)
            self$.addOption(private$..summary_report)
            self$.addOption(private$..individual_profiles)
            self$.addOption(private$..save_scores)
            self$.addOption(private$..regulatory_documentation)
        }),
    active = list(
        scale_items = function() private$..scale_items$value,
        patient_id = function() private$..patient_id$value,
        time_var = function() private$..time_var$value,
        group_var = function() private$..group_var$value,
        demographic_vars = function() private$..demographic_vars$value,
        scale_type = function() private$..scale_type$value,
        instrument_name = function() private$..instrument_name$value,
        scoring_method = function() private$..scoring_method$value,
        reverse_coded_items = function() private$..reverse_coded_items$value,
        response_scale_min = function() private$..response_scale_min$value,
        response_scale_max = function() private$..response_scale_max$value,
        reliability_analysis = function() private$..reliability_analysis$value,
        validity_analysis = function() private$..validity_analysis$value,
        factor_analysis = function() private$..factor_analysis$value,
        irt_analysis = function() private$..irt_analysis$value,
        dimensionality_test = function() private$..dimensionality_test$value,
        measurement_invariance = function() private$..measurement_invariance$value,
        missing_data_method = function() private$..missing_data_method$value,
        min_items_required = function() private$..min_items_required$value,
        missing_threshold = function() private$..missing_threshold$value,
        clinical_interpretation = function() private$..clinical_interpretation$value,
        normative_comparison = function() private$..normative_comparison$value,
        minimal_important_difference = function() private$..minimal_important_difference$value,
        mid_value = function() private$..mid_value$value,
        ceiling_floor_effects = function() private$..ceiling_floor_effects$value,
        longitudinal_analysis = function() private$..longitudinal_analysis$value,
        change_analysis = function() private$..change_analysis$value,
        trajectory_analysis = function() private$..trajectory_analysis$value,
        time_to_deterioration = function() private$..time_to_deterioration$value,
        group_comparisons = function() private$..group_comparisons$value,
        comparison_method = function() private$..comparison_method$value,
        effect_size_analysis = function() private$..effect_size_analysis$value,
        multiple_comparisons = function() private$..multiple_comparisons$value,
        responder_analysis = function() private$..responder_analysis$value,
        responder_threshold = function() private$..responder_threshold$value,
        anchor_based_analysis = function() private$..anchor_based_analysis$value,
        anchor_variables = function() private$..anchor_variables$value,
        distribution_based_analysis = function() private$..distribution_based_analysis$value,
        data_quality_assessment = function() private$..data_quality_assessment$value,
        response_patterns = function() private$..response_patterns$value,
        acquiescence_analysis = function() private$..acquiescence_analysis$value,
        detailed_output = function() private$..detailed_output$value,
        summary_report = function() private$..summary_report$value,
        individual_profiles = function() private$..individual_profiles$value,
        save_scores = function() private$..save_scores$value,
        regulatory_documentation = function() private$..regulatory_documentation$value),
    private = list(
        ..scale_items = NA,
        ..patient_id = NA,
        ..time_var = NA,
        ..group_var = NA,
        ..demographic_vars = NA,
        ..scale_type = NA,
        ..instrument_name = NA,
        ..scoring_method = NA,
        ..reverse_coded_items = NA,
        ..response_scale_min = NA,
        ..response_scale_max = NA,
        ..reliability_analysis = NA,
        ..validity_analysis = NA,
        ..factor_analysis = NA,
        ..irt_analysis = NA,
        ..dimensionality_test = NA,
        ..measurement_invariance = NA,
        ..missing_data_method = NA,
        ..min_items_required = NA,
        ..missing_threshold = NA,
        ..clinical_interpretation = NA,
        ..normative_comparison = NA,
        ..minimal_important_difference = NA,
        ..mid_value = NA,
        ..ceiling_floor_effects = NA,
        ..longitudinal_analysis = NA,
        ..change_analysis = NA,
        ..trajectory_analysis = NA,
        ..time_to_deterioration = NA,
        ..group_comparisons = NA,
        ..comparison_method = NA,
        ..effect_size_analysis = NA,
        ..multiple_comparisons = NA,
        ..responder_analysis = NA,
        ..responder_threshold = NA,
        ..anchor_based_analysis = NA,
        ..anchor_variables = NA,
        ..distribution_based_analysis = NA,
        ..data_quality_assessment = NA,
        ..response_patterns = NA,
        ..acquiescence_analysis = NA,
        ..detailed_output = NA,
        ..summary_report = NA,
        ..individual_profiles = NA,
        ..save_scores = NA,
        ..regulatory_documentation = NA)
)

patientreportedResults <- if (requireNamespace("jmvcore", quietly=TRUE)) R6::R6Class(
    "patientreportedResults",
    inherit = jmvcore::Group,
    active = list(
        scale_overview = function() private$.items[["scale_overview"]],
        data_summary = function() private$.items[["data_summary"]],
        item_statistics = function() private$.items[["item_statistics"]],
        item_correlations = function() private$.items[["item_correlations"]],
        reliability_results = function() private$.items[["reliability_results"]],
        item_reliability = function() private$.items[["item_reliability"]],
        validity_results = function() private$.items[["validity_results"]],
        factor_analysis_results = function() private$.items[["factor_analysis_results"]],
        factor_loadings = function() private$.items[["factor_loadings"]],
        scale_scores = function() private$.items[["scale_scores"]],
        score_distribution = function() private$.items[["score_distribution"]],
        group_comparison_results = function() private$.items[["group_comparison_results"]],
        group_descriptives = function() private$.items[["group_descriptives"]],
        longitudinal_results = function() private$.items[["longitudinal_results"]],
        change_analysis_results = function() private$.items[["change_analysis_results"]],
        clinical_interpretation_results = function() private$.items[["clinical_interpretation_results"]],
        minimal_important_difference_results = function() private$.items[["minimal_important_difference_results"]],
        data_quality_results = function() private$.items[["data_quality_results"]],
        missing_data_patterns = function() private$.items[["missing_data_patterns"]],
        response_patterns = function() private$.items[["response_patterns"]],
        responder_analysis_results = function() private$.items[["responder_analysis_results"]],
        regulatory_summary = function() private$.items[["regulatory_summary"]],
        item_distribution_plot = function() private$.items[["item_distribution_plot"]],
        scale_distribution_plot = function() private$.items[["scale_distribution_plot"]],
        reliability_plot = function() private$.items[["reliability_plot"]],
        factor_plot = function() private$.items[["factor_plot"]],
        group_comparison_plot = function() private$.items[["group_comparison_plot"]],
        longitudinal_plot = function() private$.items[["longitudinal_plot"]],
        change_plot = function() private$.items[["change_plot"]],
        responder_plot = function() private$.items[["responder_plot"]],
        missing_data_plot = function() private$.items[["missing_data_plot"]],
        correlation_heatmap = function() private$.items[["correlation_heatmap"]]),
    private = list(),
    public=list(
        initialize=function(options) {
            super$initialize(
                options=options,
                name="",
                title="Patient-Reported Outcomes & Quality of Life Analysis",
                refs=list(
                    "ClinicoPathJamoviModule",
                    "reshape2",
                    "psych"))
            self$add(jmvcore::Table$new(
                options=options,
                name="scale_overview",
                title="PRO Scale Overview",
                columns=list(
                    list(
                        `name`="characteristic", 
                        `title`="Scale Characteristic", 
                        `type`="text"),
                    list(
                        `name`="value", 
                        `title`="Value", 
                        `type`="text")),
                clearWith=list(
                    "scale_items",
                    "instrument_name")))
            self$add(jmvcore::Table$new(
                options=options,
                name="data_summary",
                title="Data Summary",
                columns=list(
                    list(
                        `name`="statistic", 
                        `title`="Statistic", 
                        `type`="text"),
                    list(
                        `name`="overall", 
                        `title`="Overall", 
                        `type`="text"),
                    list(
                        `name`="by_group", 
                        `title`="By Group", 
                        `type`="text")),
                clearWith=list(
                    "scale_items",
                    "group_var")))
            self$add(jmvcore::Table$new(
                options=options,
                name="item_statistics",
                title="Item-Level Statistics",
                columns=list(
                    list(
                        `name`="item", 
                        `title`="Item", 
                        `type`="text"),
                    list(
                        `name`="n_responses", 
                        `title`="N Responses", 
                        `type`="integer"),
                    list(
                        `name`="mean", 
                        `title`="Mean", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="sd", 
                        `title`="SD", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="median", 
                        `title`="Median", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="missing_percent", 
                        `title`="Missing %", 
                        `type`="number", 
                        `format`="pc"),
                    list(
                        `name`="floor_effect", 
                        `title`="Floor Effect %", 
                        `type`="number", 
                        `format`="pc"),
                    list(
                        `name`="ceiling_effect", 
                        `title`="Ceiling Effect %", 
                        `type`="number", 
                        `format`="pc"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="item_correlations",
                title="Inter-Item Correlations",
                columns=list(
                    list(
                        `name`="item1", 
                        `title`="Item 1", 
                        `type`="text"),
                    list(
                        `name`="item2", 
                        `title`="Item 2", 
                        `type`="text"),
                    list(
                        `name`="correlation", 
                        `title`="Correlation", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="p_value", 
                        `title`="P-value", 
                        `type`="number", 
                        `format`="zto"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="reliability_results",
                title="Reliability Analysis Results",
                visible="(reliability_analysis)",
                columns=list(
                    list(
                        `name`="reliability_measure", 
                        `title`="Reliability Measure", 
                        `type`="text"),
                    list(
                        `name`="value", 
                        `title`="Value", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="ci_lower", 
                        `title`="95% CI Lower", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="ci_upper", 
                        `title`="95% CI Upper", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="interpretation", 
                        `title`="Interpretation", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="item_reliability",
                title="Item-Total Statistics",
                visible="(reliability_analysis)",
                columns=list(
                    list(
                        `name`="item", 
                        `title`="Item", 
                        `type`="text"),
                    list(
                        `name`="item_total_correlation", 
                        `title`="Item-Total Correlation", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="corrected_item_total", 
                        `title`="Corrected Item-Total", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="alpha_if_deleted", 
                        `title`="\u03B1 if Item Deleted", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="item_discrimination", 
                        `title`="Discrimination", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="validity_results",
                title="Validity Analysis Results",
                visible="(validity_analysis)",
                columns=list(
                    list(
                        `name`="validity_type", 
                        `title`="Validity Type", 
                        `type`="text"),
                    list(
                        `name`="test_statistic", 
                        `title`="Test Statistic", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="p_value", 
                        `title`="P-value", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="effect_size", 
                        `title`="Effect Size", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="interpretation", 
                        `title`="Interpretation", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="factor_analysis_results",
                title="Factor Analysis Results",
                visible="(factor_analysis)",
                columns=list(
                    list(
                        `name`="factor", 
                        `title`="Factor", 
                        `type`="text"),
                    list(
                        `name`="eigenvalue", 
                        `title`="Eigenvalue", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="variance_explained", 
                        `title`="Variance Explained %", 
                        `type`="number", 
                        `format`="pc"),
                    list(
                        `name`="cumulative_variance", 
                        `title`="Cumulative Variance %", 
                        `type`="number", 
                        `format`="pc"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="factor_loadings",
                title="Factor Loadings",
                visible="(factor_analysis)",
                columns=list(
                    list(
                        `name`="item", 
                        `title`="Item", 
                        `type`="text"),
                    list(
                        `name`="factor1", 
                        `title`="Factor 1", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="factor2", 
                        `title`="Factor 2", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="factor3", 
                        `title`="Factor 3", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="communality", 
                        `title`="Communality", 
                        `type`="number", 
                        `format`="zto"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="scale_scores",
                title="Scale Score Summary",
                columns=list(
                    list(
                        `name`="statistic", 
                        `title`="Statistic", 
                        `type`="text"),
                    list(
                        `name`="value", 
                        `title`="Value", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="interpretation", 
                        `title`="Clinical Interpretation", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="score_distribution",
                title="Score Distribution",
                columns=list(
                    list(
                        `name`="score_range", 
                        `title`="Score Range", 
                        `type`="text"),
                    list(
                        `name`="frequency", 
                        `title`="Frequency", 
                        `type`="integer"),
                    list(
                        `name`="percent", 
                        `title`="Percent", 
                        `type`="number", 
                        `format`="pc"),
                    list(
                        `name`="cumulative_percent", 
                        `title`="Cumulative %", 
                        `type`="number", 
                        `format`="pc"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="group_comparison_results",
                title="Group Comparison Results",
                visible="(group_comparisons)",
                columns=list(
                    list(
                        `name`="group1", 
                        `title`="Group 1", 
                        `type`="text"),
                    list(
                        `name`="group2", 
                        `title`="Group 2", 
                        `type`="text"),
                    list(
                        `name`="mean_diff", 
                        `title`="Mean Difference", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="ci_lower", 
                        `title`="95% CI Lower", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="ci_upper", 
                        `title`="95% CI Upper", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="p_value", 
                        `title`="P-value", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="effect_size", 
                        `title`="Effect Size (Cohen's d)", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="clinical_significance", 
                        `title`="Clinical Significance", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="group_descriptives",
                title="Group Descriptive Statistics",
                visible="(group_comparisons)",
                columns=list(
                    list(
                        `name`="group", 
                        `title`="Group", 
                        `type`="text"),
                    list(
                        `name`="n", 
                        `title`="N", 
                        `type`="integer"),
                    list(
                        `name`="mean", 
                        `title`="Mean", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="sd", 
                        `title`="SD", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="median", 
                        `title`="Median", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="iqr", 
                        `title`="IQR", 
                        `type`="text"),
                    list(
                        `name`="min", 
                        `title`="Min", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="max", 
                        `title`="Max", 
                        `type`="number", 
                        `format`="zto"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="longitudinal_results",
                title="Longitudinal Analysis Results",
                visible="(longitudinal_analysis)",
                columns=list(
                    list(
                        `name`="time_point", 
                        `title`="Time Point", 
                        `type`="text"),
                    list(
                        `name`="n", 
                        `title`="N", 
                        `type`="integer"),
                    list(
                        `name`="mean", 
                        `title`="Mean", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="sd", 
                        `title`="SD", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="change_from_baseline", 
                        `title`="Change from Baseline", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="change_se", 
                        `title`="SE of Change", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="effect_size", 
                        `title`="Effect Size", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="clinical_significance", 
                        `title`="Clinically Significant", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="change_analysis_results",
                title="Change Analysis Results",
                visible="(longitudinal_analysis && change_analysis != 'none')",
                columns=list(
                    list(
                        `name`="patient_id", 
                        `title`="Patient ID", 
                        `type`="text"),
                    list(
                        `name`="baseline_score", 
                        `title`="Baseline Score", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="follow_up_score", 
                        `title`="Follow-up Score", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="change_score", 
                        `title`="Change Score", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="reliable_change", 
                        `title`="Reliable Change", 
                        `type`="text"),
                    list(
                        `name`="clinical_significance", 
                        `title`="Clinical Significance", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="clinical_interpretation_results",
                title="Clinical Interpretation",
                visible="(clinical_interpretation)",
                columns=list(
                    list(
                        `name`="interpretation_aspect", 
                        `title`="Clinical Aspect", 
                        `type`="text"),
                    list(
                        `name`="finding", 
                        `title`="Finding", 
                        `type`="text"),
                    list(
                        `name`="clinical_meaning", 
                        `title`="Clinical Meaning", 
                        `type`="text"),
                    list(
                        `name`="recommendation", 
                        `title`="Recommendation", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="minimal_important_difference_results",
                title="Minimal Important Difference Analysis",
                visible="(minimal_important_difference)",
                columns=list(
                    list(
                        `name`="comparison", 
                        `title`="Comparison", 
                        `type`="text"),
                    list(
                        `name`="mean_change", 
                        `title`="Mean Change", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="mid_threshold", 
                        `title`="MID Threshold", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="exceeds_mid", 
                        `title`="Exceeds MID", 
                        `type`="text"),
                    list(
                        `name`="percent_responders", 
                        `title`="% Responders", 
                        `type`="number", 
                        `format`="pc"),
                    list(
                        `name`="clinical_interpretation", 
                        `title`="Clinical Interpretation", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="data_quality_results",
                title="Data Quality Assessment",
                visible="(data_quality_assessment)",
                columns=list(
                    list(
                        `name`="quality_indicator", 
                        `title`="Quality Indicator", 
                        `type`="text"),
                    list(
                        `name`="value", 
                        `title`="Value", 
                        `type`="text"),
                    list(
                        `name`="threshold", 
                        `title`="Acceptable Threshold", 
                        `type`="text"),
                    list(
                        `name`="status", 
                        `title`="Status", 
                        `type`="text"),
                    list(
                        `name`="recommendation", 
                        `title`="Recommendation", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="missing_data_patterns",
                title="Missing Data Patterns",
                columns=list(
                    list(
                        `name`="missing_pattern", 
                        `title`="Missing Pattern", 
                        `type`="text"),
                    list(
                        `name`="frequency", 
                        `title`="Frequency", 
                        `type`="integer"),
                    list(
                        `name`="percent", 
                        `title`="Percent", 
                        `type`="number", 
                        `format`="pc"),
                    list(
                        `name`="items_missing", 
                        `title`="Items Missing", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="response_patterns",
                title="Response Pattern Analysis",
                visible="(response_patterns)",
                columns=list(
                    list(
                        `name`="pattern_type", 
                        `title`="Response Pattern", 
                        `type`="text"),
                    list(
                        `name`="frequency", 
                        `title`="Frequency", 
                        `type`="integer"),
                    list(
                        `name`="percent", 
                        `title`="Percent", 
                        `type`="number", 
                        `format`="pc"),
                    list(
                        `name`="potential_issue", 
                        `title`="Potential Issue", 
                        `type`="text"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="responder_analysis_results",
                title="Responder Analysis Results",
                visible="(responder_analysis)",
                columns=list(
                    list(
                        `name`="response_category", 
                        `title`="Response Category", 
                        `type`="text"),
                    list(
                        `name`="n_patients", 
                        `title`="N Patients", 
                        `type`="integer"),
                    list(
                        `name`="percent", 
                        `title`="Percent", 
                        `type`="number", 
                        `format`="pc"),
                    list(
                        `name`="mean_change", 
                        `title`="Mean Change", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="ci_lower", 
                        `title`="95% CI Lower", 
                        `type`="number", 
                        `format`="zto"),
                    list(
                        `name`="ci_upper", 
                        `title`="95% CI Upper", 
                        `type`="number", 
                        `format`="zto"))))
            self$add(jmvcore::Table$new(
                options=options,
                name="regulatory_summary",
                title="Regulatory Documentation Summary",
                visible="(regulatory_documentation)",
                columns=list(
                    list(
                        `name`="regulatory_aspect", 
                        `title`="Regulatory Aspect", 
                        `type`="text"),
                    list(
                        `name`="status", 
                        `title`="Status", 
                        `type`="text"),
                    list(
                        `name`="documentation", 
                        `title`="Documentation", 
                        `type`="text"),
                    list(
                        `name`="recommendations", 
                        `title`="Recommendations", 
                        `type`="text"))))
            self$add(jmvcore::Image$new(
                options=options,
                name="item_distribution_plot",
                title="Item Response Distribution",
                renderFun=".plot_item_distribution",
                clearWith=list(
                    "scale_items")))
            self$add(jmvcore::Image$new(
                options=options,
                name="scale_distribution_plot",
                title="Scale Score Distribution",
                renderFun=".plot_scale_distribution",
                clearWith=list(
                    "scale_items",
                    "scoring_method")))
            self$add(jmvcore::Image$new(
                options=options,
                name="reliability_plot",
                title="Reliability Analysis Plot",
                visible="(reliability_analysis)",
                renderFun=".plot_reliability",
                clearWith=list(
                    "reliability_analysis")))
            self$add(jmvcore::Image$new(
                options=options,
                name="factor_plot",
                title="Factor Analysis Scree Plot",
                visible="(factor_analysis)",
                renderFun=".plot_factor_analysis",
                clearWith=list(
                    "factor_analysis")))
            self$add(jmvcore::Image$new(
                options=options,
                name="group_comparison_plot",
                title="Group Comparison Plot",
                visible="(group_comparisons)",
                renderFun=".plot_group_comparison",
                clearWith=list(
                    "group_var",
                    "group_comparisons")))
            self$add(jmvcore::Image$new(
                options=options,
                name="longitudinal_plot",
                title="Longitudinal Trajectories",
                visible="(longitudinal_analysis)",
                renderFun=".plot_longitudinal",
                clearWith=list(
                    "time_var",
                    "longitudinal_analysis")))
            self$add(jmvcore::Image$new(
                options=options,
                name="change_plot",
                title="Change Analysis Plot",
                visible="(longitudinal_analysis && change_analysis != 'none')",
                renderFun=".plot_change_analysis",
                clearWith=list(
                    "change_analysis",
                    "time_var")))
            self$add(jmvcore::Image$new(
                options=options,
                name="responder_plot",
                title="Responder Analysis Plot",
                visible="(responder_analysis)",
                renderFun=".plot_responder_analysis",
                clearWith=list(
                    "responder_analysis")))
            self$add(jmvcore::Image$new(
                options=options,
                name="missing_data_plot",
                title="Missing Data Visualization",
                renderFun=".plot_missing_data",
                clearWith=list(
                    "scale_items")))
            self$add(jmvcore::Image$new(
                options=options,
                name="correlation_heatmap",
                title="Inter-Item Correlation Heatmap",
                renderFun=".plot_correlation_heatmap",
                clearWith=list(
                    "scale_items")))}))

patientreportedBase <- if (requireNamespace("jmvcore", quietly=TRUE)) R6::R6Class(
    "patientreportedBase",
    inherit = jmvcore::Analysis,
    public = list(
        initialize = function(options, data=NULL, datasetId="", analysisId="", revision=0) {
            super$initialize(
                package = "ClinicoPath",
                name = "patientreported",
                version = c(1,0,0),
                options = options,
                results = patientreportedResults$new(options=options),
                data = data,
                datasetId = datasetId,
                analysisId = analysisId,
                revision = revision,
                pause = NULL,
                completeWhenFilled = FALSE,
                requiresMissings = FALSE,
                weightsSupport = 'auto')
        }))

#' Patient-Reported Outcomes & Quality of Life Analysis
#'
#' Comprehensive analysis of Patient-Reported Outcomes (PRO) and Quality of 
#' Life (QoL) data
#' for clinical research. Includes psychometric validation, score calculation, 
#' change analysis,
#' and clinical interpretation. Supports standardized instruments (SF-36, 
#' EORTC QLQ-C30, 
#' FACT-G, etc.) and custom questionnaires with missing data handling and 
#' longitudinal analysis.
#' Essential for patient-centered outcomes research and clinical trials.
#' 
#'
#' @examples
#' data('pro_data')
#'
#' patientreported(
#'     data = pro_data,
#'     scale_items = c("item1", "item2", "item3"),
#'     patient_id = "patient_id",
#'     time_var = "visit_number",
#'     reliability_analysis = TRUE,
#'     validity_analysis = TRUE
#' )
#'
#' @param data the data as a data frame
#' @param scale_items Items/questions that comprise the PRO scale or
#'   questionnaire
#' @param patient_id Patient identifier for longitudinal analysis
#' @param time_var Time point variable for longitudinal PRO analysis (visit,
#'   week, etc.)
#' @param group_var Grouping variable for between-group PRO comparisons
#'   (treatment, disease stage, etc.)
#' @param demographic_vars Demographic variables for subgroup analysis and
#'   validation
#' @param scale_type Type of PRO scale being analyzed
#' @param instrument_name Standardized PRO instrument being used
#' @param scoring_method Method for calculating PRO scale scores
#' @param reverse_coded_items Items that need to be reverse-coded before
#'   scoring
#' @param response_scale_min Minimum value of the response scale (e.g., 1 for
#'   1-5 Likert scale)
#' @param response_scale_max Maximum value of the response scale (e.g., 5 for
#'   1-5 Likert scale)
#' @param reliability_analysis Perform reliability analysis (Cronbach's alpha,
#'   item-total correlations)
#' @param validity_analysis Perform validity analysis (construct validity,
#'   concurrent validity)
#' @param factor_analysis Perform exploratory and confirmatory factor analysis
#' @param irt_analysis Perform IRT analysis for item characteristics and scale
#'   properties
#' @param dimensionality_test Test scale dimensionality and factor structure
#' @param measurement_invariance Test measurement invariance across groups and
#'   time points
#' @param missing_data_method Method for handling missing item responses
#' @param min_items_required Minimum number of non-missing items required for
#'   scale scoring
#' @param missing_threshold Maximum proportion of missing items allowed for
#'   scoring (50\% = 0.5)
#' @param clinical_interpretation Provide clinical interpretation of PRO
#'   scores
#' @param normative_comparison Compare scores to published normative data
#' @param minimal_important_difference Analyze changes relative to minimal
#'   important difference (MID)
#' @param mid_value Minimal important difference value for clinical
#'   significance
#' @param ceiling_floor_effects Analyze ceiling and floor effects in PRO
#'   responses
#' @param longitudinal_analysis Perform longitudinal PRO analysis
#' @param change_analysis Method for analyzing PRO changes over time
#' @param trajectory_analysis Analyze PRO trajectories and patterns over time
#' @param time_to_deterioration Analyze time to meaningful PRO deterioration
#' @param group_comparisons Compare PRO scores between groups
#' @param comparison_method Statistical method for group comparisons
#' @param effect_size_analysis Calculate effect sizes for group differences
#' @param multiple_comparisons Method for multiple comparisons correction
#' @param responder_analysis Analyze proportion of patients with meaningful
#'   improvements
#' @param responder_threshold Threshold for defining treatment responders
#' @param anchor_based_analysis Use anchor variables to interpret PRO changes
#' @param anchor_variables External anchor variables for interpreting PRO
#'   changes
#' @param distribution_based_analysis Use distribution-based methods for
#'   interpreting changes
#' @param data_quality_assessment Assess PRO data quality and completion
#'   patterns
#' @param response_patterns Analyze response patterns and potential response
#'   bias
#' @param acquiescence_analysis Analyze acquiescence and extreme response
#'   styles
#' @param detailed_output Include detailed psychometric and clinical analysis
#'   results
#' @param summary_report Generate comprehensive PRO analysis summary report
#' @param individual_profiles Generate individual patient PRO profiles
#' @param save_scores Save calculated PRO scores to dataset
#' @param regulatory_documentation Include documentation for regulatory
#'   submissions
#' @return A results object containing:
#' \tabular{llllll}{
#'   \code{results$scale_overview} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$data_summary} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$item_statistics} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$item_correlations} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$reliability_results} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$item_reliability} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$validity_results} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$factor_analysis_results} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$factor_loadings} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$scale_scores} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$score_distribution} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$group_comparison_results} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$group_descriptives} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$longitudinal_results} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$change_analysis_results} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$clinical_interpretation_results} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$minimal_important_difference_results} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$data_quality_results} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$missing_data_patterns} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$response_patterns} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$responder_analysis_results} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$regulatory_summary} \tab \tab \tab \tab \tab a table \cr
#'   \code{results$item_distribution_plot} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$scale_distribution_plot} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$reliability_plot} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$factor_plot} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$group_comparison_plot} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$longitudinal_plot} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$change_plot} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$responder_plot} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$missing_data_plot} \tab \tab \tab \tab \tab an image \cr
#'   \code{results$correlation_heatmap} \tab \tab \tab \tab \tab an image \cr
#' }
#'
#' Tables can be converted to data frames with \code{asDF} or \code{\link{as.data.frame}}. For example:
#'
#' \code{results$scale_overview$asDF}
#'
#' \code{as.data.frame(results$scale_overview)}
#'
#' @export
patientreported <- function(
    data,
    scale_items,
    patient_id,
    time_var,
    group_var,
    demographic_vars,
    scale_type = "generic_qol",
    instrument_name = "custom",
    scoring_method = "sum_score",
    reverse_coded_items,
    response_scale_min = 1,
    response_scale_max = 5,
    reliability_analysis = TRUE,
    validity_analysis = TRUE,
    factor_analysis = FALSE,
    irt_analysis = FALSE,
    dimensionality_test = TRUE,
    measurement_invariance = FALSE,
    missing_data_method = "pro_rata_scoring",
    min_items_required = 2,
    missing_threshold = 0.5,
    clinical_interpretation = TRUE,
    normative_comparison = FALSE,
    minimal_important_difference = TRUE,
    mid_value = 5,
    ceiling_floor_effects = TRUE,
    longitudinal_analysis = FALSE,
    change_analysis = "simple_change",
    trajectory_analysis = FALSE,
    time_to_deterioration = FALSE,
    group_comparisons = FALSE,
    comparison_method = "t_test",
    effect_size_analysis = TRUE,
    multiple_comparisons = "fdr",
    responder_analysis = FALSE,
    responder_threshold = 10,
    anchor_based_analysis = FALSE,
    anchor_variables,
    distribution_based_analysis = TRUE,
    data_quality_assessment = TRUE,
    response_patterns = TRUE,
    acquiescence_analysis = FALSE,
    detailed_output = TRUE,
    summary_report = TRUE,
    individual_profiles = FALSE,
    save_scores = FALSE,
    regulatory_documentation = TRUE) {

    if ( ! requireNamespace("jmvcore", quietly=TRUE))
        stop("patientreported requires jmvcore to be installed (restart may be required)")

    if ( ! missing(scale_items)) scale_items <- jmvcore::resolveQuo(jmvcore::enquo(scale_items))
    if ( ! missing(patient_id)) patient_id <- jmvcore::resolveQuo(jmvcore::enquo(patient_id))
    if ( ! missing(time_var)) time_var <- jmvcore::resolveQuo(jmvcore::enquo(time_var))
    if ( ! missing(group_var)) group_var <- jmvcore::resolveQuo(jmvcore::enquo(group_var))
    if ( ! missing(demographic_vars)) demographic_vars <- jmvcore::resolveQuo(jmvcore::enquo(demographic_vars))
    if ( ! missing(reverse_coded_items)) reverse_coded_items <- jmvcore::resolveQuo(jmvcore::enquo(reverse_coded_items))
    if ( ! missing(anchor_variables)) anchor_variables <- jmvcore::resolveQuo(jmvcore::enquo(anchor_variables))
    if (missing(data))
        data <- jmvcore::marshalData(
            parent.frame(),
            `if`( ! missing(scale_items), scale_items, NULL),
            `if`( ! missing(patient_id), patient_id, NULL),
            `if`( ! missing(time_var), time_var, NULL),
            `if`( ! missing(group_var), group_var, NULL),
            `if`( ! missing(demographic_vars), demographic_vars, NULL),
            `if`( ! missing(reverse_coded_items), reverse_coded_items, NULL),
            `if`( ! missing(anchor_variables), anchor_variables, NULL))

    for (v in group_var) if (v %in% names(data)) data[[v]] <- as.factor(data[[v]])

    options <- patientreportedOptions$new(
        scale_items = scale_items,
        patient_id = patient_id,
        time_var = time_var,
        group_var = group_var,
        demographic_vars = demographic_vars,
        scale_type = scale_type,
        instrument_name = instrument_name,
        scoring_method = scoring_method,
        reverse_coded_items = reverse_coded_items,
        response_scale_min = response_scale_min,
        response_scale_max = response_scale_max,
        reliability_analysis = reliability_analysis,
        validity_analysis = validity_analysis,
        factor_analysis = factor_analysis,
        irt_analysis = irt_analysis,
        dimensionality_test = dimensionality_test,
        measurement_invariance = measurement_invariance,
        missing_data_method = missing_data_method,
        min_items_required = min_items_required,
        missing_threshold = missing_threshold,
        clinical_interpretation = clinical_interpretation,
        normative_comparison = normative_comparison,
        minimal_important_difference = minimal_important_difference,
        mid_value = mid_value,
        ceiling_floor_effects = ceiling_floor_effects,
        longitudinal_analysis = longitudinal_analysis,
        change_analysis = change_analysis,
        trajectory_analysis = trajectory_analysis,
        time_to_deterioration = time_to_deterioration,
        group_comparisons = group_comparisons,
        comparison_method = comparison_method,
        effect_size_analysis = effect_size_analysis,
        multiple_comparisons = multiple_comparisons,
        responder_analysis = responder_analysis,
        responder_threshold = responder_threshold,
        anchor_based_analysis = anchor_based_analysis,
        anchor_variables = anchor_variables,
        distribution_based_analysis = distribution_based_analysis,
        data_quality_assessment = data_quality_assessment,
        response_patterns = response_patterns,
        acquiescence_analysis = acquiescence_analysis,
        detailed_output = detailed_output,
        summary_report = summary_report,
        individual_profiles = individual_profiles,
        save_scores = save_scores,
        regulatory_documentation = regulatory_documentation)

    analysis <- patientreportedClass$new(
        options = options,
        data = data)

    analysis$run()

    analysis$results
}

